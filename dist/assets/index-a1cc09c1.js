var wF=Object.defineProperty;var bF=(n,e,t)=>e in n?wF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Xs=(n,e,t)=>(bF(n,typeof e!="symbol"?e+"":e,t),t);function SF(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ju(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function EF(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var aN={exports:{}},ev={},lN={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Of=Symbol.for("react.element"),MF=Symbol.for("react.portal"),TF=Symbol.for("react.fragment"),AF=Symbol.for("react.strict_mode"),CF=Symbol.for("react.profiler"),PF=Symbol.for("react.provider"),NF=Symbol.for("react.context"),RF=Symbol.for("react.forward_ref"),LF=Symbol.for("react.suspense"),IF=Symbol.for("react.memo"),kF=Symbol.for("react.lazy"),WT=Symbol.iterator;function DF(n){return n===null||typeof n!="object"?null:(n=WT&&n[WT]||n["@@iterator"],typeof n=="function"?n:null)}var cN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uN=Object.assign,dN={};function Qu(n,e,t){this.props=n,this.context=e,this.refs=dN,this.updater=t||cN}Qu.prototype.isReactComponent={};Qu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Qu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function hN(){}hN.prototype=Qu.prototype;function Rb(n,e,t){this.props=n,this.context=e,this.refs=dN,this.updater=t||cN}var Lb=Rb.prototype=new hN;Lb.constructor=Rb;uN(Lb,Qu.prototype);Lb.isPureReactComponent=!0;var $T=Array.isArray,fN=Object.prototype.hasOwnProperty,Ib={current:null},pN={key:!0,ref:!0,__self:!0,__source:!0};function mN(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fN.call(e,i)&&!pN.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Of,type:n,key:s,ref:o,props:r,_owner:Ib.current}}function jF(n,e){return{$$typeof:Of,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function kb(n){return typeof n=="object"&&n!==null&&n.$$typeof===Of}function OF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var XT=/\/+/g;function px(n,e){return typeof n=="object"&&n!==null&&n.key!=null?OF(""+n.key):e.toString(36)}function jg(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Of:case MF:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+px(o,0):i,$T(r)?(t="",n!=null&&(t=n.replace(XT,"$&/")+"/"),jg(r,e,t,"",function(c){return c})):r!=null&&(kb(r)&&(r=jF(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(XT,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",$T(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+px(s,a);o+=jg(s,e,t,l,r)}else if(l=DF(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+px(s,a++),o+=jg(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fm(n,e,t){if(n==null)return n;var i=[],r=0;return jg(n,i,"","",function(s){return e.call(t,s,r++)}),i}function FF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ri={current:null},Og={transition:null},UF={ReactCurrentDispatcher:Ri,ReactCurrentBatchConfig:Og,ReactCurrentOwner:Ib};function gN(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:fm,forEach:function(n,e,t){fm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return fm(n,function(){e++}),e},toArray:function(n){return fm(n,function(e){return e})||[]},only:function(n){if(!kb(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Pt.Component=Qu;Pt.Fragment=TF;Pt.Profiler=CF;Pt.PureComponent=Rb;Pt.StrictMode=AF;Pt.Suspense=LF;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UF;Pt.act=gN;Pt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=uN({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ib.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)fN.call(e,l)&&!pN.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Of,type:n.type,key:r,ref:s,props:i,_owner:o}};Pt.createContext=function(n){return n={$$typeof:NF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:PF,_context:n},n.Consumer=n};Pt.createElement=mN;Pt.createFactory=function(n){var e=mN.bind(null,n);return e.type=n,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(n){return{$$typeof:RF,render:n}};Pt.isValidElement=kb;Pt.lazy=function(n){return{$$typeof:kF,_payload:{_status:-1,_result:n},_init:FF}};Pt.memo=function(n,e){return{$$typeof:IF,type:n,compare:e===void 0?null:e}};Pt.startTransition=function(n){var e=Og.transition;Og.transition={};try{n()}finally{Og.transition=e}};Pt.unstable_act=gN;Pt.useCallback=function(n,e){return Ri.current.useCallback(n,e)};Pt.useContext=function(n){return Ri.current.useContext(n)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(n){return Ri.current.useDeferredValue(n)};Pt.useEffect=function(n,e){return Ri.current.useEffect(n,e)};Pt.useId=function(){return Ri.current.useId()};Pt.useImperativeHandle=function(n,e,t){return Ri.current.useImperativeHandle(n,e,t)};Pt.useInsertionEffect=function(n,e){return Ri.current.useInsertionEffect(n,e)};Pt.useLayoutEffect=function(n,e){return Ri.current.useLayoutEffect(n,e)};Pt.useMemo=function(n,e){return Ri.current.useMemo(n,e)};Pt.useReducer=function(n,e,t){return Ri.current.useReducer(n,e,t)};Pt.useRef=function(n){return Ri.current.useRef(n)};Pt.useState=function(n){return Ri.current.useState(n)};Pt.useSyncExternalStore=function(n,e,t){return Ri.current.useSyncExternalStore(n,e,t)};Pt.useTransition=function(){return Ri.current.useTransition()};Pt.version="18.3.1";lN.exports=Pt;var N=lN.exports;const Dt=Ju(N),Db=SF({__proto__:null,default:Dt},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zF=N,BF=Symbol.for("react.element"),VF=Symbol.for("react.fragment"),HF=Object.prototype.hasOwnProperty,GF=zF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WF={key:!0,ref:!0,__self:!0,__source:!0};function vN(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)HF.call(e,i)&&!WF.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:BF,type:n,key:s,ref:o,props:r,_owner:GF.current}}ev.Fragment=VF;ev.jsx=vN;ev.jsxs=vN;aN.exports=ev;var f=aN.exports,h_={},yN={exports:{}},hr={},xN={exports:{}},_N={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,O){var H=D.length;D.push(O);e:for(;0<H;){var Z=H-1>>>1,te=D[Z];if(0<r(te,O))D[Z]=O,D[H]=te,H=Z;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var O=D[0],H=D.pop();if(H!==O){D[0]=H;e:for(var Z=0,te=D.length,Q=te>>>1;Z<Q;){var se=2*(Z+1)-1,ve=D[se],ge=se+1,K=D[ge];if(0>r(ve,H))ge<te&&0>r(K,ve)?(D[Z]=K,D[ge]=H,Z=ge):(D[Z]=ve,D[se]=H,Z=se);else if(ge<te&&0>r(K,H))D[Z]=K,D[ge]=H,Z=ge;else break e}}return O}function r(D,O){var H=D.sortIndex-O.sortIndex;return H!==0?H:D.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,p=null,m=3,g=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var O=t(c);O!==null;){if(O.callback===null)i(c);else if(O.startTime<=D)i(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(c)}}function M(D){if(_=!1,w(D),!y)if(t(l)!==null)y=!0,X(A);else{var O=t(c);O!==null&&ee(M,O.startTime-D)}}function A(D,O){y=!1,_&&(_=!1,v(I),I=-1),g=!0;var H=m;try{for(w(O),p=t(l);p!==null&&(!(p.expirationTime>O)||D&&!V());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,m=p.priorityLevel;var te=Z(p.expirationTime<=O);O=n.unstable_now(),typeof te=="function"?p.callback=te:p===t(l)&&i(l),w(O)}else i(l);p=t(l)}if(p!==null)var Q=!0;else{var se=t(c);se!==null&&ee(M,se.startTime-O),Q=!1}return Q}finally{p=null,m=H,g=!1}}var P=!1,L=null,I=-1,C=5,k=-1;function V(){return!(n.unstable_now()-k<C)}function q(){if(L!==null){var D=n.unstable_now();k=D;var O=!0;try{O=L(!0,D)}finally{O?B():(P=!1,L=null)}}else P=!1}var B;if(typeof b=="function")B=function(){b(q)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,$=U.port2;U.port1.onmessage=q,B=function(){$.postMessage(null)}}else B=function(){S(q,0)};function X(D){L=D,P||(P=!0,B())}function ee(D,O){I=S(function(){D(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,X(A))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(m){case 1:case 2:case 3:var O=3;break;default:O=m}var H=m;m=O;try{return D()}finally{m=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var H=m;m=D;try{return O()}finally{m=H}},n.unstable_scheduleCallback=function(D,O,H){var Z=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,D){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=H+te,D={id:u++,callback:O,priorityLevel:D,startTime:H,expirationTime:te,sortIndex:-1},H>Z?(D.sortIndex=H,e(c,D),t(l)===null&&D===t(c)&&(_?(v(I),I=-1):_=!0,ee(M,H-Z))):(D.sortIndex=te,e(l,D),y||g||(y=!0,X(A))),D},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(D){var O=m;return function(){var H=m;m=O;try{return D.apply(this,arguments)}finally{m=H}}}})(_N);xN.exports=_N;var $F=xN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XF=N,ur=$F;function Ae(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wN=new Set,Xh={};function ql(n,e){ju(n,e),ju(n+"Capture",e)}function ju(n,e){for(Xh[n]=e,n=0;n<e.length;n++)wN.add(e[n])}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f_=Object.prototype.hasOwnProperty,qF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qT={},YT={};function YF(n){return f_.call(YT,n)?!0:f_.call(qT,n)?!1:qF.test(n)?YT[n]=!0:(qT[n]=!0,!1)}function KF(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function ZF(n,e,t,i){if(e===null||typeof e>"u"||KF(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Li(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ri[n]=new Li(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ri[e]=new Li(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ri[n]=new Li(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ri[n]=new Li(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ri[n]=new Li(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ri[n]=new Li(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ri[n]=new Li(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ri[n]=new Li(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ri[n]=new Li(n,5,!1,n.toLowerCase(),null,!1,!1)});var jb=/[\-:]([a-z])/g;function Ob(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(jb,Ob);ri[e]=new Li(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(jb,Ob);ri[e]=new Li(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(jb,Ob);ri[e]=new Li(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ri[n]=new Li(n,1,!1,n.toLowerCase(),null,!1,!1)});ri.xlinkHref=new Li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ri[n]=new Li(n,1,!1,n.toLowerCase(),null,!0,!0)});function Fb(n,e,t,i){var r=ri.hasOwnProperty(e)?ri[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZF(e,t,r,i)&&(t=null),i||r===null?YF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var So=XF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pm=Symbol.for("react.element"),tu=Symbol.for("react.portal"),nu=Symbol.for("react.fragment"),Ub=Symbol.for("react.strict_mode"),p_=Symbol.for("react.profiler"),bN=Symbol.for("react.provider"),SN=Symbol.for("react.context"),zb=Symbol.for("react.forward_ref"),m_=Symbol.for("react.suspense"),g_=Symbol.for("react.suspense_list"),Bb=Symbol.for("react.memo"),Ko=Symbol.for("react.lazy"),EN=Symbol.for("react.offscreen"),KT=Symbol.iterator;function jd(n){return n===null||typeof n!="object"?null:(n=KT&&n[KT]||n["@@iterator"],typeof n=="function"?n:null)}var fn=Object.assign,mx;function ph(n){if(mx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);mx=e&&e[1]||""}return`
`+mx+n}var gx=!1;function vx(n,e){if(!n||gx)return"";gx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{gx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ph(n):""}function JF(n){switch(n.tag){case 5:return ph(n.type);case 16:return ph("Lazy");case 13:return ph("Suspense");case 19:return ph("SuspenseList");case 0:case 2:case 15:return n=vx(n.type,!1),n;case 11:return n=vx(n.type.render,!1),n;case 1:return n=vx(n.type,!0),n;default:return""}}function v_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case nu:return"Fragment";case tu:return"Portal";case p_:return"Profiler";case Ub:return"StrictMode";case m_:return"Suspense";case g_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case SN:return(n.displayName||"Context")+".Consumer";case bN:return(n._context.displayName||"Context")+".Provider";case zb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Bb:return e=n.displayName||null,e!==null?e:v_(n.type)||"Memo";case Ko:e=n._payload,n=n._init;try{return v_(n(e))}catch{}}return null}function QF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v_(e);case 8:return e===Ub?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ba(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function MN(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eU(n){var e=MN(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function mm(n){n._valueTracker||(n._valueTracker=eU(n))}function TN(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=MN(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function u0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function y_(n,e){var t=e.checked;return fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ZT(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ba(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AN(n,e){e=e.checked,e!=null&&Fb(n,"checked",e,!1)}function x_(n,e){AN(n,e);var t=ba(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?__(n,e.type,t):e.hasOwnProperty("defaultValue")&&__(n,e.type,ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function JT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function __(n,e,t){(e!=="number"||u0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var mh=Array.isArray;function Su(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ba(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function w_(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return fn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function QT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ae(92));if(mh(t)){if(1<t.length)throw Error(Ae(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ba(t)}}function CN(n,e){var t=ba(e.value),i=ba(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function e2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function PN(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function b_(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?PN(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var gm,NN=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(gm=gm||document.createElement("div"),gm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function qh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Eh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tU=["Webkit","ms","Moz","O"];Object.keys(Eh).forEach(function(n){tU.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Eh[e]=Eh[n]})});function RN(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Eh.hasOwnProperty(n)&&Eh[n]?(""+e).trim():e+"px"}function LN(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=RN(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var nU=fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function S_(n,e){if(e){if(nU[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function E_(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M_=null;function Vb(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var T_=null,Eu=null,Mu=null;function t2(n){if(n=zf(n)){if(typeof T_!="function")throw Error(Ae(280));var e=n.stateNode;e&&(e=sv(e),T_(n.stateNode,n.type,e))}}function IN(n){Eu?Mu?Mu.push(n):Mu=[n]:Eu=n}function kN(){if(Eu){var n=Eu,e=Mu;if(Mu=Eu=null,t2(n),e)for(n=0;n<e.length;n++)t2(e[n])}}function DN(n,e){return n(e)}function jN(){}var yx=!1;function ON(n,e,t){if(yx)return n(e,t);yx=!0;try{return DN(n,e,t)}finally{yx=!1,(Eu!==null||Mu!==null)&&(jN(),kN())}}function Yh(n,e){var t=n.stateNode;if(t===null)return null;var i=sv(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ae(231,e,typeof t));return t}var A_=!1;if(mo)try{var Od={};Object.defineProperty(Od,"passive",{get:function(){A_=!0}}),window.addEventListener("test",Od,Od),window.removeEventListener("test",Od,Od)}catch{A_=!1}function iU(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Mh=!1,d0=null,h0=!1,C_=null,rU={onError:function(n){Mh=!0,d0=n}};function sU(n,e,t,i,r,s,o,a,l){Mh=!1,d0=null,iU.apply(rU,arguments)}function oU(n,e,t,i,r,s,o,a,l){if(sU.apply(this,arguments),Mh){if(Mh){var c=d0;Mh=!1,d0=null}else throw Error(Ae(198));h0||(h0=!0,C_=c)}}function Yl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function FN(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function n2(n){if(Yl(n)!==n)throw Error(Ae(188))}function aU(n){var e=n.alternate;if(!e){if(e=Yl(n),e===null)throw Error(Ae(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return n2(r),n;if(s===i)return n2(r),e;s=s.sibling}throw Error(Ae(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Ae(189))}}if(t.alternate!==i)throw Error(Ae(190))}if(t.tag!==3)throw Error(Ae(188));return t.stateNode.current===t?n:e}function UN(n){return n=aU(n),n!==null?zN(n):null}function zN(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=zN(n);if(e!==null)return e;n=n.sibling}return null}var BN=ur.unstable_scheduleCallback,i2=ur.unstable_cancelCallback,lU=ur.unstable_shouldYield,cU=ur.unstable_requestPaint,Mn=ur.unstable_now,uU=ur.unstable_getCurrentPriorityLevel,Hb=ur.unstable_ImmediatePriority,VN=ur.unstable_UserBlockingPriority,f0=ur.unstable_NormalPriority,dU=ur.unstable_LowPriority,HN=ur.unstable_IdlePriority,tv=null,Ns=null;function hU(n){if(Ns&&typeof Ns.onCommitFiberRoot=="function")try{Ns.onCommitFiberRoot(tv,n,void 0,(n.current.flags&128)===128)}catch{}}var is=Math.clz32?Math.clz32:mU,fU=Math.log,pU=Math.LN2;function mU(n){return n>>>=0,n===0?32:31-(fU(n)/pU|0)|0}var vm=64,ym=4194304;function gh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function p0(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=gh(a):(s&=o,s!==0&&(i=gh(s)))}else o=t&~r,o!==0?i=gh(o):s!==0&&(i=gh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-is(e),r=1<<t,i|=n[t],e&=~r;return i}function gU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vU(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-is(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=gU(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function P_(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function GN(){var n=vm;return vm<<=1,!(vm&4194240)&&(vm=64),n}function xx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ff(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-is(e),n[e]=t}function yU(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-is(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function Gb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-is(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var $t=0;function WN(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $N,Wb,XN,qN,YN,N_=!1,xm=[],aa=null,la=null,ca=null,Kh=new Map,Zh=new Map,ea=[],xU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r2(n,e){switch(n){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":Kh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zh.delete(e.pointerId)}}function Fd(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=zf(e),e!==null&&Wb(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function _U(n,e,t,i,r){switch(e){case"focusin":return aa=Fd(aa,n,e,t,i,r),!0;case"dragenter":return la=Fd(la,n,e,t,i,r),!0;case"mouseover":return ca=Fd(ca,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Kh.set(s,Fd(Kh.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Zh.set(s,Fd(Zh.get(s)||null,n,e,t,i,r)),!0}return!1}function KN(n){var e=_l(n.target);if(e!==null){var t=Yl(e);if(t!==null){if(e=t.tag,e===13){if(e=FN(t),e!==null){n.blockedOn=e,YN(n.priority,function(){XN(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=R_(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);M_=i,t.target.dispatchEvent(i),M_=null}else return e=zf(t),e!==null&&Wb(e),n.blockedOn=t,!1;e.shift()}return!0}function s2(n,e,t){Fg(n)&&t.delete(e)}function wU(){N_=!1,aa!==null&&Fg(aa)&&(aa=null),la!==null&&Fg(la)&&(la=null),ca!==null&&Fg(ca)&&(ca=null),Kh.forEach(s2),Zh.forEach(s2)}function Ud(n,e){n.blockedOn===e&&(n.blockedOn=null,N_||(N_=!0,ur.unstable_scheduleCallback(ur.unstable_NormalPriority,wU)))}function Jh(n){function e(r){return Ud(r,n)}if(0<xm.length){Ud(xm[0],n);for(var t=1;t<xm.length;t++){var i=xm[t];i.blockedOn===n&&(i.blockedOn=null)}}for(aa!==null&&Ud(aa,n),la!==null&&Ud(la,n),ca!==null&&Ud(ca,n),Kh.forEach(e),Zh.forEach(e),t=0;t<ea.length;t++)i=ea[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ea.length&&(t=ea[0],t.blockedOn===null);)KN(t),t.blockedOn===null&&ea.shift()}var Tu=So.ReactCurrentBatchConfig,m0=!0;function bU(n,e,t,i){var r=$t,s=Tu.transition;Tu.transition=null;try{$t=1,$b(n,e,t,i)}finally{$t=r,Tu.transition=s}}function SU(n,e,t,i){var r=$t,s=Tu.transition;Tu.transition=null;try{$t=4,$b(n,e,t,i)}finally{$t=r,Tu.transition=s}}function $b(n,e,t,i){if(m0){var r=R_(n,e,t,i);if(r===null)Px(n,e,i,g0,t),r2(n,i);else if(_U(r,n,e,t,i))i.stopPropagation();else if(r2(n,i),e&4&&-1<xU.indexOf(n)){for(;r!==null;){var s=zf(r);if(s!==null&&$N(s),s=R_(n,e,t,i),s===null&&Px(n,e,i,g0,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Px(n,e,i,null,t)}}var g0=null;function R_(n,e,t,i){if(g0=null,n=Vb(i),n=_l(n),n!==null)if(e=Yl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=FN(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return g0=n,null}function ZN(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uU()){case Hb:return 1;case VN:return 4;case f0:case dU:return 16;case HN:return 536870912;default:return 16}default:return 16}}var ia=null,Xb=null,Ug=null;function JN(){if(Ug)return Ug;var n,e=Xb,t=e.length,i,r="value"in ia?ia.value:ia.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Ug=r.slice(n,1<i?1-i:void 0)}function zg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function _m(){return!0}function o2(){return!1}function fr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_m:o2,this.isPropagationStopped=o2,this}return fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=_m)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=_m)},persist:function(){},isPersistent:_m}),e}var ed={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qb=fr(ed),Uf=fn({},ed,{view:0,detail:0}),EU=fr(Uf),_x,wx,zd,nv=fn({},Uf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zd&&(zd&&n.type==="mousemove"?(_x=n.screenX-zd.screenX,wx=n.screenY-zd.screenY):wx=_x=0,zd=n),_x)},movementY:function(n){return"movementY"in n?n.movementY:wx}}),a2=fr(nv),MU=fn({},nv,{dataTransfer:0}),TU=fr(MU),AU=fn({},Uf,{relatedTarget:0}),bx=fr(AU),CU=fn({},ed,{animationName:0,elapsedTime:0,pseudoElement:0}),PU=fr(CU),NU=fn({},ed,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),RU=fr(NU),LU=fn({},ed,{data:0}),l2=fr(LU),IU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jU(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=DU[n])?!!e[n]:!1}function Yb(){return jU}var OU=fn({},Uf,{key:function(n){if(n.key){var e=IU[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=zg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?kU[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yb,charCode:function(n){return n.type==="keypress"?zg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),FU=fr(OU),UU=fn({},nv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c2=fr(UU),zU=fn({},Uf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yb}),BU=fr(zU),VU=fn({},ed,{propertyName:0,elapsedTime:0,pseudoElement:0}),HU=fr(VU),GU=fn({},nv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),WU=fr(GU),$U=[9,13,27,32],Kb=mo&&"CompositionEvent"in window,Th=null;mo&&"documentMode"in document&&(Th=document.documentMode);var XU=mo&&"TextEvent"in window&&!Th,QN=mo&&(!Kb||Th&&8<Th&&11>=Th),u2=String.fromCharCode(32),d2=!1;function eR(n,e){switch(n){case"keyup":return $U.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tR(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var iu=!1;function qU(n,e){switch(n){case"compositionend":return tR(e);case"keypress":return e.which!==32?null:(d2=!0,u2);case"textInput":return n=e.data,n===u2&&d2?null:n;default:return null}}function YU(n,e){if(iu)return n==="compositionend"||!Kb&&eR(n,e)?(n=JN(),Ug=Xb=ia=null,iu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QN&&e.locale!=="ko"?null:e.data;default:return null}}var KU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!KU[n.type]:e==="textarea"}function nR(n,e,t,i){IN(i),e=v0(e,"onChange"),0<e.length&&(t=new qb("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ah=null,Qh=null;function ZU(n){fR(n,0)}function iv(n){var e=ou(n);if(TN(e))return n}function JU(n,e){if(n==="change")return e}var iR=!1;if(mo){var Sx;if(mo){var Ex="oninput"in document;if(!Ex){var f2=document.createElement("div");f2.setAttribute("oninput","return;"),Ex=typeof f2.oninput=="function"}Sx=Ex}else Sx=!1;iR=Sx&&(!document.documentMode||9<document.documentMode)}function p2(){Ah&&(Ah.detachEvent("onpropertychange",rR),Qh=Ah=null)}function rR(n){if(n.propertyName==="value"&&iv(Qh)){var e=[];nR(e,Qh,n,Vb(n)),ON(ZU,e)}}function QU(n,e,t){n==="focusin"?(p2(),Ah=e,Qh=t,Ah.attachEvent("onpropertychange",rR)):n==="focusout"&&p2()}function e5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return iv(Qh)}function t5(n,e){if(n==="click")return iv(e)}function n5(n,e){if(n==="input"||n==="change")return iv(e)}function i5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var os=typeof Object.is=="function"?Object.is:i5;function ef(n,e){if(os(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!f_.call(e,r)||!os(n[r],e[r]))return!1}return!0}function m2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function g2(n,e){var t=m2(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=m2(t)}}function sR(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?sR(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function oR(){for(var n=window,e=u0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=u0(n.document)}return e}function Zb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function r5(n){var e=oR(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&sR(t.ownerDocument.documentElement,t)){if(i!==null&&Zb(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=g2(t,s);var o=g2(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var s5=mo&&"documentMode"in document&&11>=document.documentMode,ru=null,L_=null,Ch=null,I_=!1;function v2(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;I_||ru==null||ru!==u0(i)||(i=ru,"selectionStart"in i&&Zb(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ch&&ef(Ch,i)||(Ch=i,i=v0(L_,"onSelect"),0<i.length&&(e=new qb("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=ru)))}function wm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var su={animationend:wm("Animation","AnimationEnd"),animationiteration:wm("Animation","AnimationIteration"),animationstart:wm("Animation","AnimationStart"),transitionend:wm("Transition","TransitionEnd")},Mx={},aR={};mo&&(aR=document.createElement("div").style,"AnimationEvent"in window||(delete su.animationend.animation,delete su.animationiteration.animation,delete su.animationstart.animation),"TransitionEvent"in window||delete su.transitionend.transition);function rv(n){if(Mx[n])return Mx[n];if(!su[n])return n;var e=su[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in aR)return Mx[n]=e[t];return n}var lR=rv("animationend"),cR=rv("animationiteration"),uR=rv("animationstart"),dR=rv("transitionend"),hR=new Map,y2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ia(n,e){hR.set(n,e),ql(e,[n])}for(var Tx=0;Tx<y2.length;Tx++){var Ax=y2[Tx],o5=Ax.toLowerCase(),a5=Ax[0].toUpperCase()+Ax.slice(1);Ia(o5,"on"+a5)}Ia(lR,"onAnimationEnd");Ia(cR,"onAnimationIteration");Ia(uR,"onAnimationStart");Ia("dblclick","onDoubleClick");Ia("focusin","onFocus");Ia("focusout","onBlur");Ia(dR,"onTransitionEnd");ju("onMouseEnter",["mouseout","mouseover"]);ju("onMouseLeave",["mouseout","mouseover"]);ju("onPointerEnter",["pointerout","pointerover"]);ju("onPointerLeave",["pointerout","pointerover"]);ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l5=new Set("cancel close invalid load scroll toggle".split(" ").concat(vh));function x2(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,oU(i,e,void 0,n),n.currentTarget=null}function fR(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;x2(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;x2(r,a,c),s=l}}}if(h0)throw n=C_,h0=!1,C_=null,n}function nn(n,e){var t=e[F_];t===void 0&&(t=e[F_]=new Set);var i=n+"__bubble";t.has(i)||(pR(e,n,2,!1),t.add(i))}function Cx(n,e,t){var i=0;e&&(i|=4),pR(t,n,i,e)}var bm="_reactListening"+Math.random().toString(36).slice(2);function tf(n){if(!n[bm]){n[bm]=!0,wN.forEach(function(t){t!=="selectionchange"&&(l5.has(t)||Cx(t,!1,n),Cx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[bm]||(e[bm]=!0,Cx("selectionchange",!1,e))}}function pR(n,e,t,i){switch(ZN(e)){case 1:var r=bU;break;case 4:r=SU;break;default:r=$b}t=r.bind(null,e,t,n),r=void 0,!A_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Px(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=_l(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}ON(function(){var c=s,u=Vb(t),p=[];e:{var m=hR.get(n);if(m!==void 0){var g=qb,y=n;switch(n){case"keypress":if(zg(t)===0)break e;case"keydown":case"keyup":g=FU;break;case"focusin":y="focus",g=bx;break;case"focusout":y="blur",g=bx;break;case"beforeblur":case"afterblur":g=bx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=a2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=TU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=BU;break;case lR:case cR:case uR:g=PU;break;case dR:g=HU;break;case"scroll":g=EU;break;case"wheel":g=WU;break;case"copy":case"cut":case"paste":g=RU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=c2}var _=(e&4)!==0,S=!_&&n==="scroll",v=_?m!==null?m+"Capture":null:m;_=[];for(var b=c,w;b!==null;){w=b;var M=w.stateNode;if(w.tag===5&&M!==null&&(w=M,v!==null&&(M=Yh(b,v),M!=null&&_.push(nf(b,M,w)))),S)break;b=b.return}0<_.length&&(m=new g(m,y,null,t,u),p.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==M_&&(y=t.relatedTarget||t.fromElement)&&(_l(y)||y[go]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(y=t.relatedTarget||t.toElement,g=c,y=y?_l(y):null,y!==null&&(S=Yl(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(_=a2,M="onMouseLeave",v="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(_=c2,M="onPointerLeave",v="onPointerEnter",b="pointer"),S=g==null?m:ou(g),w=y==null?m:ou(y),m=new _(M,b+"leave",g,t,u),m.target=S,m.relatedTarget=w,M=null,_l(u)===c&&(_=new _(v,b+"enter",y,t,u),_.target=w,_.relatedTarget=S,M=_),S=M,g&&y)t:{for(_=g,v=y,b=0,w=_;w;w=xc(w))b++;for(w=0,M=v;M;M=xc(M))w++;for(;0<b-w;)_=xc(_),b--;for(;0<w-b;)v=xc(v),w--;for(;b--;){if(_===v||v!==null&&_===v.alternate)break t;_=xc(_),v=xc(v)}_=null}else _=null;g!==null&&_2(p,m,g,_,!1),y!==null&&S!==null&&_2(p,S,y,_,!0)}}e:{if(m=c?ou(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var A=JU;else if(h2(m))if(iR)A=n5;else{A=e5;var P=QU}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=t5);if(A&&(A=A(n,c))){nR(p,A,t,u);break e}P&&P(n,m,c),n==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&__(m,"number",m.value)}switch(P=c?ou(c):window,n){case"focusin":(h2(P)||P.contentEditable==="true")&&(ru=P,L_=c,Ch=null);break;case"focusout":Ch=L_=ru=null;break;case"mousedown":I_=!0;break;case"contextmenu":case"mouseup":case"dragend":I_=!1,v2(p,t,u);break;case"selectionchange":if(s5)break;case"keydown":case"keyup":v2(p,t,u)}var L;if(Kb)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else iu?eR(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(QN&&t.locale!=="ko"&&(iu||I!=="onCompositionStart"?I==="onCompositionEnd"&&iu&&(L=JN()):(ia=u,Xb="value"in ia?ia.value:ia.textContent,iu=!0)),P=v0(c,I),0<P.length&&(I=new l2(I,n,null,t,u),p.push({event:I,listeners:P}),L?I.data=L:(L=tR(t),L!==null&&(I.data=L)))),(L=XU?qU(n,t):YU(n,t))&&(c=v0(c,"onBeforeInput"),0<c.length&&(u=new l2("onBeforeInput","beforeinput",null,t,u),p.push({event:u,listeners:c}),u.data=L))}fR(p,e)})}function nf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function v0(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Yh(n,t),s!=null&&i.unshift(nf(n,s,r)),s=Yh(n,e),s!=null&&i.push(nf(n,s,r))),n=n.return}return i}function xc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _2(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Yh(t,s),l!=null&&o.unshift(nf(t,l,a))):r||(l=Yh(t,s),l!=null&&o.push(nf(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var c5=/\r\n?/g,u5=/\u0000|\uFFFD/g;function w2(n){return(typeof n=="string"?n:""+n).replace(c5,`
`).replace(u5,"")}function Sm(n,e,t){if(e=w2(e),w2(n)!==e&&t)throw Error(Ae(425))}function y0(){}var k_=null,D_=null;function j_(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var O_=typeof setTimeout=="function"?setTimeout:void 0,d5=typeof clearTimeout=="function"?clearTimeout:void 0,b2=typeof Promise=="function"?Promise:void 0,h5=typeof queueMicrotask=="function"?queueMicrotask:typeof b2<"u"?function(n){return b2.resolve(null).then(n).catch(f5)}:O_;function f5(n){setTimeout(function(){throw n})}function Nx(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Jh(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Jh(e)}function ua(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function S2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var td=Math.random().toString(36).slice(2),Ts="__reactFiber$"+td,rf="__reactProps$"+td,go="__reactContainer$"+td,F_="__reactEvents$"+td,p5="__reactListeners$"+td,m5="__reactHandles$"+td;function _l(n){var e=n[Ts];if(e)return e;for(var t=n.parentNode;t;){if(e=t[go]||t[Ts]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=S2(n);n!==null;){if(t=n[Ts])return t;n=S2(n)}return e}n=t,t=n.parentNode}return null}function zf(n){return n=n[Ts]||n[go],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ou(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ae(33))}function sv(n){return n[rf]||null}var U_=[],au=-1;function ka(n){return{current:n}}function rn(n){0>au||(n.current=U_[au],U_[au]=null,au--)}function en(n,e){au++,U_[au]=n.current,n.current=e}var Sa={},wi=ka(Sa),$i=ka(!1),jl=Sa;function Ou(n,e){var t=n.type.contextTypes;if(!t)return Sa;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Xi(n){return n=n.childContextTypes,n!=null}function x0(){rn($i),rn(wi)}function E2(n,e,t){if(wi.current!==Sa)throw Error(Ae(168));en(wi,e),en($i,t)}function mR(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ae(108,QF(n)||"Unknown",r));return fn({},t,i)}function _0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Sa,jl=wi.current,en(wi,n),en($i,$i.current),!0}function M2(n,e,t){var i=n.stateNode;if(!i)throw Error(Ae(169));t?(n=mR(n,e,jl),i.__reactInternalMemoizedMergedChildContext=n,rn($i),rn(wi),en(wi,n)):rn($i),en($i,t)}var io=null,ov=!1,Rx=!1;function gR(n){io===null?io=[n]:io.push(n)}function g5(n){ov=!0,gR(n)}function Da(){if(!Rx&&io!==null){Rx=!0;var n=0,e=$t;try{var t=io;for($t=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}io=null,ov=!1}catch(r){throw io!==null&&(io=io.slice(n+1)),BN(Hb,Da),r}finally{$t=e,Rx=!1}}return null}var lu=[],cu=0,w0=null,b0=0,Pr=[],Nr=0,Ol=null,oo=1,ao="";function ul(n,e){lu[cu++]=b0,lu[cu++]=w0,w0=n,b0=e}function vR(n,e,t){Pr[Nr++]=oo,Pr[Nr++]=ao,Pr[Nr++]=Ol,Ol=n;var i=oo;n=ao;var r=32-is(i)-1;i&=~(1<<r),t+=1;var s=32-is(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,oo=1<<32-is(e)+r|t<<r|i,ao=s+n}else oo=1<<s|t<<r|i,ao=n}function Jb(n){n.return!==null&&(ul(n,1),vR(n,1,0))}function Qb(n){for(;n===w0;)w0=lu[--cu],lu[cu]=null,b0=lu[--cu],lu[cu]=null;for(;n===Ol;)Ol=Pr[--Nr],Pr[Nr]=null,ao=Pr[--Nr],Pr[Nr]=null,oo=Pr[--Nr],Pr[Nr]=null}var ar=null,sr=null,an=!1,Qr=null;function yR(n,e){var t=Rr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function T2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ar=n,sr=ua(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ar=n,sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ol!==null?{id:oo,overflow:ao}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Rr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ar=n,sr=null,!0):!1;default:return!1}}function z_(n){return(n.mode&1)!==0&&(n.flags&128)===0}function B_(n){if(an){var e=sr;if(e){var t=e;if(!T2(n,e)){if(z_(n))throw Error(Ae(418));e=ua(t.nextSibling);var i=ar;e&&T2(n,e)?yR(i,t):(n.flags=n.flags&-4097|2,an=!1,ar=n)}}else{if(z_(n))throw Error(Ae(418));n.flags=n.flags&-4097|2,an=!1,ar=n}}}function A2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ar=n}function Em(n){if(n!==ar)return!1;if(!an)return A2(n),an=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!j_(n.type,n.memoizedProps)),e&&(e=sr)){if(z_(n))throw xR(),Error(Ae(418));for(;e;)yR(n,e),e=ua(e.nextSibling)}if(A2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ae(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){sr=ua(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}sr=null}}else sr=ar?ua(n.stateNode.nextSibling):null;return!0}function xR(){for(var n=sr;n;)n=ua(n.nextSibling)}function Fu(){sr=ar=null,an=!1}function eS(n){Qr===null?Qr=[n]:Qr.push(n)}var v5=So.ReactCurrentBatchConfig;function Bd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ae(309));var i=t.stateNode}if(!i)throw Error(Ae(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ae(284));if(!t._owner)throw Error(Ae(290,n))}return n}function Mm(n,e){throw n=Object.prototype.toString.call(e),Error(Ae(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function C2(n){var e=n._init;return e(n._payload)}function _R(n){function e(v,b){if(n){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function t(v,b){if(!n)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function i(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(v,b){return v=pa(v,b),v.index=0,v.sibling=null,v}function s(v,b,w){return v.index=w,n?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,b,w,M){return b===null||b.tag!==6?(b=Fx(w,v.mode,M),b.return=v,b):(b=r(b,w),b.return=v,b)}function l(v,b,w,M){var A=w.type;return A===nu?u(v,b,w.props.children,M,w.key):b!==null&&(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ko&&C2(A)===b.type)?(M=r(b,w.props),M.ref=Bd(v,b,w),M.return=v,M):(M=Xg(w.type,w.key,w.props,null,v.mode,M),M.ref=Bd(v,b,w),M.return=v,M)}function c(v,b,w,M){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Ux(w,v.mode,M),b.return=v,b):(b=r(b,w.children||[]),b.return=v,b)}function u(v,b,w,M,A){return b===null||b.tag!==7?(b=Nl(w,v.mode,M,A),b.return=v,b):(b=r(b,w),b.return=v,b)}function p(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Fx(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pm:return w=Xg(b.type,b.key,b.props,null,v.mode,w),w.ref=Bd(v,null,b),w.return=v,w;case tu:return b=Ux(b,v.mode,w),b.return=v,b;case Ko:var M=b._init;return p(v,M(b._payload),w)}if(mh(b)||jd(b))return b=Nl(b,v.mode,w,null),b.return=v,b;Mm(v,b)}return null}function m(v,b,w,M){var A=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:a(v,b,""+w,M);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pm:return w.key===A?l(v,b,w,M):null;case tu:return w.key===A?c(v,b,w,M):null;case Ko:return A=w._init,m(v,b,A(w._payload),M)}if(mh(w)||jd(w))return A!==null?null:u(v,b,w,M,null);Mm(v,w)}return null}function g(v,b,w,M,A){if(typeof M=="string"&&M!==""||typeof M=="number")return v=v.get(w)||null,a(b,v,""+M,A);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case pm:return v=v.get(M.key===null?w:M.key)||null,l(b,v,M,A);case tu:return v=v.get(M.key===null?w:M.key)||null,c(b,v,M,A);case Ko:var P=M._init;return g(v,b,w,P(M._payload),A)}if(mh(M)||jd(M))return v=v.get(w)||null,u(b,v,M,A,null);Mm(b,M)}return null}function y(v,b,w,M){for(var A=null,P=null,L=b,I=b=0,C=null;L!==null&&I<w.length;I++){L.index>I?(C=L,L=null):C=L.sibling;var k=m(v,L,w[I],M);if(k===null){L===null&&(L=C);break}n&&L&&k.alternate===null&&e(v,L),b=s(k,b,I),P===null?A=k:P.sibling=k,P=k,L=C}if(I===w.length)return t(v,L),an&&ul(v,I),A;if(L===null){for(;I<w.length;I++)L=p(v,w[I],M),L!==null&&(b=s(L,b,I),P===null?A=L:P.sibling=L,P=L);return an&&ul(v,I),A}for(L=i(v,L);I<w.length;I++)C=g(L,v,I,w[I],M),C!==null&&(n&&C.alternate!==null&&L.delete(C.key===null?I:C.key),b=s(C,b,I),P===null?A=C:P.sibling=C,P=C);return n&&L.forEach(function(V){return e(v,V)}),an&&ul(v,I),A}function _(v,b,w,M){var A=jd(w);if(typeof A!="function")throw Error(Ae(150));if(w=A.call(w),w==null)throw Error(Ae(151));for(var P=A=null,L=b,I=b=0,C=null,k=w.next();L!==null&&!k.done;I++,k=w.next()){L.index>I?(C=L,L=null):C=L.sibling;var V=m(v,L,k.value,M);if(V===null){L===null&&(L=C);break}n&&L&&V.alternate===null&&e(v,L),b=s(V,b,I),P===null?A=V:P.sibling=V,P=V,L=C}if(k.done)return t(v,L),an&&ul(v,I),A;if(L===null){for(;!k.done;I++,k=w.next())k=p(v,k.value,M),k!==null&&(b=s(k,b,I),P===null?A=k:P.sibling=k,P=k);return an&&ul(v,I),A}for(L=i(v,L);!k.done;I++,k=w.next())k=g(L,v,I,k.value,M),k!==null&&(n&&k.alternate!==null&&L.delete(k.key===null?I:k.key),b=s(k,b,I),P===null?A=k:P.sibling=k,P=k);return n&&L.forEach(function(q){return e(v,q)}),an&&ul(v,I),A}function S(v,b,w,M){if(typeof w=="object"&&w!==null&&w.type===nu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case pm:e:{for(var A=w.key,P=b;P!==null;){if(P.key===A){if(A=w.type,A===nu){if(P.tag===7){t(v,P.sibling),b=r(P,w.props.children),b.return=v,v=b;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ko&&C2(A)===P.type){t(v,P.sibling),b=r(P,w.props),b.ref=Bd(v,P,w),b.return=v,v=b;break e}t(v,P);break}else e(v,P);P=P.sibling}w.type===nu?(b=Nl(w.props.children,v.mode,M,w.key),b.return=v,v=b):(M=Xg(w.type,w.key,w.props,null,v.mode,M),M.ref=Bd(v,b,w),M.return=v,v=M)}return o(v);case tu:e:{for(P=w.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){t(v,b.sibling),b=r(b,w.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=Ux(w,v.mode,M),b.return=v,v=b}return o(v);case Ko:return P=w._init,S(v,b,P(w._payload),M)}if(mh(w))return y(v,b,w,M);if(jd(w))return _(v,b,w,M);Mm(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(t(v,b.sibling),b=r(b,w),b.return=v,v=b):(t(v,b),b=Fx(w,v.mode,M),b.return=v,v=b),o(v)):t(v,b)}return S}var Uu=_R(!0),wR=_R(!1),S0=ka(null),E0=null,uu=null,tS=null;function nS(){tS=uu=E0=null}function iS(n){var e=S0.current;rn(S0),n._currentValue=e}function V_(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Au(n,e){E0=n,tS=uu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Wi=!0),n.firstContext=null)}function Ir(n){var e=n._currentValue;if(tS!==n)if(n={context:n,memoizedValue:e,next:null},uu===null){if(E0===null)throw Error(Ae(308));uu=n,E0.dependencies={lanes:0,firstContext:n}}else uu=uu.next=n;return e}var wl=null;function rS(n){wl===null?wl=[n]:wl.push(n)}function bR(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,rS(e)):(t.next=r.next,r.next=t),e.interleaved=t,vo(n,i)}function vo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Zo=!1;function sS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SR(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function uo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function da(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,jt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,vo(n,t)}return r=i.interleaved,r===null?(e.next=e,rS(i)):(e.next=r.next,r.next=e),i.interleaved=e,vo(n,t)}function Bg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Gb(n,t)}}function P2(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function M0(n,e,t,i){var r=n.updateQueue;Zo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var p=r.baseState;o=0,u=c=l=null,a=s;do{var m=a.lane,g=a.eventTime;if((i&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,_=a;switch(m=e,g=t,_.tag){case 1:if(y=_.payload,typeof y=="function"){p=y.call(g,p,m);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,m=typeof y=="function"?y.call(g,p,m):y,m==null)break e;p=fn({},p,m);break e;case 2:Zo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=p):u=u.next=g,o|=m;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;m=a,a=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(1);if(u===null&&(l=p),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ul|=o,n.lanes=o,n.memoizedState=p}}function N2(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ae(191,r));r.call(i)}}}var Bf={},Rs=ka(Bf),sf=ka(Bf),of=ka(Bf);function bl(n){if(n===Bf)throw Error(Ae(174));return n}function oS(n,e){switch(en(of,e),en(sf,n),en(Rs,Bf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:b_(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=b_(e,n)}rn(Rs),en(Rs,e)}function zu(){rn(Rs),rn(sf),rn(of)}function ER(n){bl(of.current);var e=bl(Rs.current),t=b_(e,n.type);e!==t&&(en(sf,n),en(Rs,t))}function aS(n){sf.current===n&&(rn(Rs),rn(sf))}var cn=ka(0);function T0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lx=[];function lS(){for(var n=0;n<Lx.length;n++)Lx[n]._workInProgressVersionPrimary=null;Lx.length=0}var Vg=So.ReactCurrentDispatcher,Ix=So.ReactCurrentBatchConfig,Fl=0,hn=null,On=null,$n=null,A0=!1,Ph=!1,af=0,y5=0;function fi(){throw Error(Ae(321))}function cS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!os(n[t],e[t]))return!1;return!0}function uS(n,e,t,i,r,s){if(Fl=s,hn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vg.current=n===null||n.memoizedState===null?b5:S5,n=t(i,r),Ph){s=0;do{if(Ph=!1,af=0,25<=s)throw Error(Ae(301));s+=1,$n=On=null,e.updateQueue=null,Vg.current=E5,n=t(i,r)}while(Ph)}if(Vg.current=C0,e=On!==null&&On.next!==null,Fl=0,$n=On=hn=null,A0=!1,e)throw Error(Ae(300));return n}function dS(){var n=af!==0;return af=0,n}function Ss(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?hn.memoizedState=$n=n:$n=$n.next=n,$n}function kr(){if(On===null){var n=hn.alternate;n=n!==null?n.memoizedState:null}else n=On.next;var e=$n===null?hn.memoizedState:$n.next;if(e!==null)$n=e,On=n;else{if(n===null)throw Error(Ae(310));On=n,n={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},$n===null?hn.memoizedState=$n=n:$n=$n.next=n}return $n}function lf(n,e){return typeof e=="function"?e(n):e}function kx(n){var e=kr(),t=e.queue;if(t===null)throw Error(Ae(311));t.lastRenderedReducer=n;var i=On,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Fl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var p={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=i):l=l.next=p,hn.lanes|=u,Ul|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,os(i,e.memoizedState)||(Wi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,hn.lanes|=s,Ul|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Dx(n){var e=kr(),t=e.queue;if(t===null)throw Error(Ae(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);os(s,e.memoizedState)||(Wi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function MR(){}function TR(n,e){var t=hn,i=kr(),r=e(),s=!os(i.memoizedState,r);if(s&&(i.memoizedState=r,Wi=!0),i=i.queue,hS(PR.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||$n!==null&&$n.memoizedState.tag&1){if(t.flags|=2048,cf(9,CR.bind(null,t,i,r,e),void 0,null),Kn===null)throw Error(Ae(349));Fl&30||AR(t,e,r)}return r}function AR(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function CR(n,e,t,i){e.value=t,e.getSnapshot=i,NR(e)&&RR(n)}function PR(n,e,t){return t(function(){NR(e)&&RR(n)})}function NR(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!os(n,t)}catch{return!0}}function RR(n){var e=vo(n,1);e!==null&&rs(e,n,1,-1)}function R2(n){var e=Ss();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lf,lastRenderedState:n},e.queue=n,n=n.dispatch=w5.bind(null,hn,n),[e.memoizedState,n]}function cf(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function LR(){return kr().memoizedState}function Hg(n,e,t,i){var r=Ss();hn.flags|=n,r.memoizedState=cf(1|e,t,void 0,i===void 0?null:i)}function av(n,e,t,i){var r=kr();i=i===void 0?null:i;var s=void 0;if(On!==null){var o=On.memoizedState;if(s=o.destroy,i!==null&&cS(i,o.deps)){r.memoizedState=cf(e,t,s,i);return}}hn.flags|=n,r.memoizedState=cf(1|e,t,s,i)}function L2(n,e){return Hg(8390656,8,n,e)}function hS(n,e){return av(2048,8,n,e)}function IR(n,e){return av(4,2,n,e)}function kR(n,e){return av(4,4,n,e)}function DR(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function jR(n,e,t){return t=t!=null?t.concat([n]):null,av(4,4,DR.bind(null,e,n),t)}function fS(){}function OR(n,e){var t=kr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&cS(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function FR(n,e){var t=kr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&cS(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function UR(n,e,t){return Fl&21?(os(t,e)||(t=GN(),hn.lanes|=t,Ul|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Wi=!0),n.memoizedState=t)}function x5(n,e){var t=$t;$t=t!==0&&4>t?t:4,n(!0);var i=Ix.transition;Ix.transition={};try{n(!1),e()}finally{$t=t,Ix.transition=i}}function zR(){return kr().memoizedState}function _5(n,e,t){var i=fa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},BR(n))VR(e,t);else if(t=bR(n,e,t,i),t!==null){var r=Pi();rs(t,n,i,r),HR(t,e,i)}}function w5(n,e,t){var i=fa(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(BR(n))VR(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,os(a,o)){var l=e.interleaved;l===null?(r.next=r,rS(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=bR(n,e,r,i),t!==null&&(r=Pi(),rs(t,n,i,r),HR(t,e,i))}}function BR(n){var e=n.alternate;return n===hn||e!==null&&e===hn}function VR(n,e){Ph=A0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function HR(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Gb(n,t)}}var C0={readContext:Ir,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},b5={readContext:Ir,useCallback:function(n,e){return Ss().memoizedState=[n,e===void 0?null:e],n},useContext:Ir,useEffect:L2,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Hg(4194308,4,DR.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Hg(4194308,4,n,e)},useInsertionEffect:function(n,e){return Hg(4,2,n,e)},useMemo:function(n,e){var t=Ss();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ss();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=_5.bind(null,hn,n),[i.memoizedState,n]},useRef:function(n){var e=Ss();return n={current:n},e.memoizedState=n},useState:R2,useDebugValue:fS,useDeferredValue:function(n){return Ss().memoizedState=n},useTransition:function(){var n=R2(!1),e=n[0];return n=x5.bind(null,n[1]),Ss().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=hn,r=Ss();if(an){if(t===void 0)throw Error(Ae(407));t=t()}else{if(t=e(),Kn===null)throw Error(Ae(349));Fl&30||AR(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,L2(PR.bind(null,i,s,n),[n]),i.flags|=2048,cf(9,CR.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ss(),e=Kn.identifierPrefix;if(an){var t=ao,i=oo;t=(i&~(1<<32-is(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=af++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=y5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},S5={readContext:Ir,useCallback:OR,useContext:Ir,useEffect:hS,useImperativeHandle:jR,useInsertionEffect:IR,useLayoutEffect:kR,useMemo:FR,useReducer:kx,useRef:LR,useState:function(){return kx(lf)},useDebugValue:fS,useDeferredValue:function(n){var e=kr();return UR(e,On.memoizedState,n)},useTransition:function(){var n=kx(lf)[0],e=kr().memoizedState;return[n,e]},useMutableSource:MR,useSyncExternalStore:TR,useId:zR,unstable_isNewReconciler:!1},E5={readContext:Ir,useCallback:OR,useContext:Ir,useEffect:hS,useImperativeHandle:jR,useInsertionEffect:IR,useLayoutEffect:kR,useMemo:FR,useReducer:Dx,useRef:LR,useState:function(){return Dx(lf)},useDebugValue:fS,useDeferredValue:function(n){var e=kr();return On===null?e.memoizedState=n:UR(e,On.memoizedState,n)},useTransition:function(){var n=Dx(lf)[0],e=kr().memoizedState;return[n,e]},useMutableSource:MR,useSyncExternalStore:TR,useId:zR,unstable_isNewReconciler:!1};function qr(n,e){if(n&&n.defaultProps){e=fn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function H_(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:fn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var lv={isMounted:function(n){return(n=n._reactInternals)?Yl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Pi(),r=fa(n),s=uo(i,r);s.payload=e,t!=null&&(s.callback=t),e=da(n,s,r),e!==null&&(rs(e,n,r,i),Bg(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Pi(),r=fa(n),s=uo(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=da(n,s,r),e!==null&&(rs(e,n,r,i),Bg(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Pi(),i=fa(n),r=uo(t,i);r.tag=2,e!=null&&(r.callback=e),e=da(n,r,i),e!==null&&(rs(e,n,i,t),Bg(e,n,i))}};function I2(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ef(t,i)||!ef(r,s):!0}function GR(n,e,t){var i=!1,r=Sa,s=e.contextType;return typeof s=="object"&&s!==null?s=Ir(s):(r=Xi(e)?jl:wi.current,i=e.contextTypes,s=(i=i!=null)?Ou(n,r):Sa),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lv,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function k2(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&lv.enqueueReplaceState(e,e.state,null)}function G_(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},sS(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ir(s):(s=Xi(e)?jl:wi.current,r.context=Ou(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(H_(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&lv.enqueueReplaceState(r,r.state,null),M0(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Bu(n,e){try{var t="",i=e;do t+=JF(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function jx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function W_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var M5=typeof WeakMap=="function"?WeakMap:Map;function WR(n,e,t){t=uo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){N0||(N0=!0,tw=i),W_(n,e)},t}function $R(n,e,t){t=uo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){W_(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){W_(n,e),typeof i!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function D2(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new M5;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=U5.bind(null,n,e,t),e.then(n,n))}function j2(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function O2(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=uo(-1,1),e.tag=2,da(t,e,1))),t.lanes|=1),n)}var T5=So.ReactCurrentOwner,Wi=!1;function Ai(n,e,t,i){e.child=n===null?wR(e,null,t,i):Uu(e,n.child,t,i)}function F2(n,e,t,i,r){t=t.render;var s=e.ref;return Au(e,r),i=uS(n,e,t,i,s,r),t=dS(),n!==null&&!Wi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,yo(n,e,r)):(an&&t&&Jb(e),e.flags|=1,Ai(n,e,i,r),e.child)}function U2(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!wS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,XR(n,e,s,i,r)):(n=Xg(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ef,t(o,i)&&n.ref===e.ref)return yo(n,e,r)}return e.flags|=1,n=pa(s,i),n.ref=e.ref,n.return=e,e.child=n}function XR(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(ef(s,i)&&n.ref===e.ref)if(Wi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Wi=!0);else return e.lanes=n.lanes,yo(n,e,r)}return $_(n,e,t,i,r)}function qR(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},en(hu,rr),rr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,en(hu,rr),rr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,en(hu,rr),rr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,en(hu,rr),rr|=i;return Ai(n,e,r,t),e.child}function YR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function $_(n,e,t,i,r){var s=Xi(t)?jl:wi.current;return s=Ou(e,s),Au(e,r),t=uS(n,e,t,i,s,r),i=dS(),n!==null&&!Wi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,yo(n,e,r)):(an&&i&&Jb(e),e.flags|=1,Ai(n,e,t,r),e.child)}function z2(n,e,t,i,r){if(Xi(t)){var s=!0;_0(e)}else s=!1;if(Au(e,r),e.stateNode===null)Gg(n,e),GR(e,t,i),G_(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Ir(c):(c=Xi(t)?jl:wi.current,c=Ou(e,c));var u=t.getDerivedStateFromProps,p=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&k2(e,o,i,c),Zo=!1;var m=e.memoizedState;o.state=m,M0(e,i,o,r),l=e.memoizedState,a!==i||m!==l||$i.current||Zo?(typeof u=="function"&&(H_(e,t,u,i),l=e.memoizedState),(a=Zo||I2(e,t,a,i,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,SR(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:qr(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ir(l):(l=Xi(t)?jl:wi.current,l=Ou(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&k2(e,o,i,l),Zo=!1,m=e.memoizedState,o.state=m,M0(e,i,o,r);var y=e.memoizedState;a!==p||m!==y||$i.current||Zo?(typeof g=="function"&&(H_(e,t,g,i),y=e.memoizedState),(c=Zo||I2(e,t,c,i,m,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return X_(n,e,t,i,s,r)}function X_(n,e,t,i,r,s){YR(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&M2(e,t,!1),yo(n,e,s);i=e.stateNode,T5.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Uu(e,n.child,null,s),e.child=Uu(e,null,a,s)):Ai(n,e,a,s),e.memoizedState=i.state,r&&M2(e,t,!0),e.child}function KR(n){var e=n.stateNode;e.pendingContext?E2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&E2(n,e.context,!1),oS(n,e.containerInfo)}function B2(n,e,t,i,r){return Fu(),eS(r),e.flags|=256,Ai(n,e,t,i),e.child}var q_={dehydrated:null,treeContext:null,retryLane:0};function Y_(n){return{baseLanes:n,cachePool:null,transitions:null}}function ZR(n,e,t){var i=e.pendingProps,r=cn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),en(cn,r&1),n===null)return B_(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=dv(o,i,0,null),n=Nl(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Y_(t),e.memoizedState=q_,n):pS(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return A5(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=pa(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=pa(a,s):(s=Nl(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Y_(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=q_,i}return s=n.child,n=s.sibling,i=pa(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function pS(n,e){return e=dv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Tm(n,e,t,i){return i!==null&&eS(i),Uu(e,n.child,null,t),n=pS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function A5(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=jx(Error(Ae(422))),Tm(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=dv({mode:"visible",children:i.children},r,0,null),s=Nl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Uu(e,n.child,null,o),e.child.memoizedState=Y_(o),e.memoizedState=q_,s);if(!(e.mode&1))return Tm(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ae(419)),i=jx(s,i,void 0),Tm(n,e,o,i)}if(a=(o&n.childLanes)!==0,Wi||a){if(i=Kn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,vo(n,r),rs(i,n,r,-1))}return _S(),i=jx(Error(Ae(421))),Tm(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=z5.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,sr=ua(r.nextSibling),ar=e,an=!0,Qr=null,n!==null&&(Pr[Nr++]=oo,Pr[Nr++]=ao,Pr[Nr++]=Ol,oo=n.id,ao=n.overflow,Ol=e),e=pS(e,i.children),e.flags|=4096,e)}function V2(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),V_(n.return,e,t)}function Ox(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function JR(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ai(n,e,i.children,t),i=cn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&V2(n,t,e);else if(n.tag===19)V2(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(en(cn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&T0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Ox(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&T0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Ox(e,!0,t,null,s);break;case"together":Ox(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function yo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ul|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ae(153));if(e.child!==null){for(n=e.child,t=pa(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=pa(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function C5(n,e,t){switch(e.tag){case 3:KR(e),Fu();break;case 5:ER(e);break;case 1:Xi(e.type)&&_0(e);break;case 4:oS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;en(S0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(en(cn,cn.current&1),e.flags|=128,null):t&e.child.childLanes?ZR(n,e,t):(en(cn,cn.current&1),n=yo(n,e,t),n!==null?n.sibling:null);en(cn,cn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return JR(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),en(cn,cn.current),i)break;return null;case 22:case 23:return e.lanes=0,qR(n,e,t)}return yo(n,e,t)}var QR,K_,eL,tL;QR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};K_=function(){};eL=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,bl(Rs.current);var s=null;switch(t){case"input":r=y_(n,r),i=y_(n,i),s=[];break;case"select":r=fn({},r,{value:void 0}),i=fn({},i,{value:void 0}),s=[];break;case"textarea":r=w_(n,r),i=w_(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=y0)}S_(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&nn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};tL=function(n,e,t,i){t!==i&&(e.flags|=4)};function Vd(n,e){if(!an)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function pi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function P5(n,e,t){var i=e.pendingProps;switch(Qb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(e),null;case 1:return Xi(e.type)&&x0(),pi(e),null;case 3:return i=e.stateNode,zu(),rn($i),rn(wi),lS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Em(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qr!==null&&(rw(Qr),Qr=null))),K_(n,e),pi(e),null;case 5:aS(e);var r=bl(of.current);if(t=e.type,n!==null&&e.stateNode!=null)eL(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ae(166));return pi(e),null}if(n=bl(Rs.current),Em(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Ts]=e,i[rf]=s,n=(e.mode&1)!==0,t){case"dialog":nn("cancel",i),nn("close",i);break;case"iframe":case"object":case"embed":nn("load",i);break;case"video":case"audio":for(r=0;r<vh.length;r++)nn(vh[r],i);break;case"source":nn("error",i);break;case"img":case"image":case"link":nn("error",i),nn("load",i);break;case"details":nn("toggle",i);break;case"input":ZT(i,s),nn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},nn("invalid",i);break;case"textarea":QT(i,s),nn("invalid",i)}S_(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Sm(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Sm(i.textContent,a,n),r=["children",""+a]):Xh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nn("scroll",i)}switch(t){case"input":mm(i),JT(i,s,!0);break;case"textarea":mm(i),e2(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=y0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=PN(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Ts]=e,n[rf]=i,QR(n,e,!1,!1),e.stateNode=n;e:{switch(o=E_(t,i),t){case"dialog":nn("cancel",n),nn("close",n),r=i;break;case"iframe":case"object":case"embed":nn("load",n),r=i;break;case"video":case"audio":for(r=0;r<vh.length;r++)nn(vh[r],n);r=i;break;case"source":nn("error",n),r=i;break;case"img":case"image":case"link":nn("error",n),nn("load",n),r=i;break;case"details":nn("toggle",n),r=i;break;case"input":ZT(n,i),r=y_(n,i),nn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=fn({},i,{value:void 0}),nn("invalid",n);break;case"textarea":QT(n,i),r=w_(n,i),nn("invalid",n);break;default:r=i}S_(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LN(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&NN(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&qh(n,l):typeof l=="number"&&qh(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&nn("scroll",n):l!=null&&Fb(n,s,l,o))}switch(t){case"input":mm(n),JT(n,i,!1);break;case"textarea":mm(n),e2(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ba(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Su(n,!!i.multiple,s,!1):i.defaultValue!=null&&Su(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=y0)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pi(e),null;case 6:if(n&&e.stateNode!=null)tL(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ae(166));if(t=bl(of.current),bl(Rs.current),Em(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ts]=e,(s=i.nodeValue!==t)&&(n=ar,n!==null))switch(n.tag){case 3:Sm(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Sm(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ts]=e,e.stateNode=i}return pi(e),null;case 13:if(rn(cn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(an&&sr!==null&&e.mode&1&&!(e.flags&128))xR(),Fu(),e.flags|=98560,s=!1;else if(s=Em(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ae(317));s[Ts]=e}else Fu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pi(e),s=!1}else Qr!==null&&(rw(Qr),Qr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||cn.current&1?Fn===0&&(Fn=3):_S())),e.updateQueue!==null&&(e.flags|=4),pi(e),null);case 4:return zu(),K_(n,e),n===null&&tf(e.stateNode.containerInfo),pi(e),null;case 10:return iS(e.type._context),pi(e),null;case 17:return Xi(e.type)&&x0(),pi(e),null;case 19:if(rn(cn),s=e.memoizedState,s===null)return pi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Vd(s,!1);else{if(Fn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=T0(n),o!==null){for(e.flags|=128,Vd(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return en(cn,cn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Mn()>Vu&&(e.flags|=128,i=!0,Vd(s,!1),e.lanes=4194304)}else{if(!i)if(n=T0(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Vd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!an)return pi(e),null}else 2*Mn()-s.renderingStartTime>Vu&&t!==1073741824&&(e.flags|=128,i=!0,Vd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Mn(),e.sibling=null,t=cn.current,en(cn,i?t&1|2:t&1),e):(pi(e),null);case 22:case 23:return xS(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?rr&1073741824&&(pi(e),e.subtreeFlags&6&&(e.flags|=8192)):pi(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function N5(n,e){switch(Qb(e),e.tag){case 1:return Xi(e.type)&&x0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return zu(),rn($i),rn(wi),lS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return aS(e),null;case 13:if(rn(cn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));Fu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return rn(cn),null;case 4:return zu(),null;case 10:return iS(e.type._context),null;case 22:case 23:return xS(),null;case 24:return null;default:return null}}var Am=!1,vi=!1,R5=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function du(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){gn(n,e,i)}else t.current=null}function Z_(n,e,t){try{t()}catch(i){gn(n,e,i)}}var H2=!1;function L5(n,e){if(k_=m0,n=oR(),Zb(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,p=n,m=null;t:for(;;){for(var g;p!==t||r!==0&&p.nodeType!==3||(a=o+r),p!==s||i!==0&&p.nodeType!==3||(l=o+i),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===n)break t;if(m===t&&++c===r&&(a=o),m===s&&++u===i&&(l=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(D_={focusedElem:n,selectionRange:t},m0=!1,Ve=e;Ve!==null;)if(e=Ve,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ve=n;else for(;Ve!==null;){e=Ve;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,S=y.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:qr(e.type,_),S);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(M){gn(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,Ve=n;break}Ve=e.return}return y=H2,H2=!1,y}function Nh(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Z_(e,t,s)}r=r.next}while(r!==i)}}function cv(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function J_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function nL(n){var e=n.alternate;e!==null&&(n.alternate=null,nL(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ts],delete e[rf],delete e[F_],delete e[p5],delete e[m5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function iL(n){return n.tag===5||n.tag===3||n.tag===4}function G2(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||iL(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Q_(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=y0));else if(i!==4&&(n=n.child,n!==null))for(Q_(n,e,t),n=n.sibling;n!==null;)Q_(n,e,t),n=n.sibling}function ew(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(ew(n,e,t),n=n.sibling;n!==null;)ew(n,e,t),n=n.sibling}var ni=null,Zr=!1;function Oo(n,e,t){for(t=t.child;t!==null;)rL(n,e,t),t=t.sibling}function rL(n,e,t){if(Ns&&typeof Ns.onCommitFiberUnmount=="function")try{Ns.onCommitFiberUnmount(tv,t)}catch{}switch(t.tag){case 5:vi||du(t,e);case 6:var i=ni,r=Zr;ni=null,Oo(n,e,t),ni=i,Zr=r,ni!==null&&(Zr?(n=ni,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ni.removeChild(t.stateNode));break;case 18:ni!==null&&(Zr?(n=ni,t=t.stateNode,n.nodeType===8?Nx(n.parentNode,t):n.nodeType===1&&Nx(n,t),Jh(n)):Nx(ni,t.stateNode));break;case 4:i=ni,r=Zr,ni=t.stateNode.containerInfo,Zr=!0,Oo(n,e,t),ni=i,Zr=r;break;case 0:case 11:case 14:case 15:if(!vi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Z_(t,e,o),r=r.next}while(r!==i)}Oo(n,e,t);break;case 1:if(!vi&&(du(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){gn(t,e,a)}Oo(n,e,t);break;case 21:Oo(n,e,t);break;case 22:t.mode&1?(vi=(i=vi)||t.memoizedState!==null,Oo(n,e,t),vi=i):Oo(n,e,t);break;default:Oo(n,e,t)}}function W2(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new R5),e.forEach(function(i){var r=B5.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Hr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ni=a.stateNode,Zr=!1;break e;case 3:ni=a.stateNode.containerInfo,Zr=!0;break e;case 4:ni=a.stateNode.containerInfo,Zr=!0;break e}a=a.return}if(ni===null)throw Error(Ae(160));rL(s,o,r),ni=null,Zr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){gn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sL(e,n),e=e.sibling}function sL(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Hr(e,n),_s(n),i&4){try{Nh(3,n,n.return),cv(3,n)}catch(_){gn(n,n.return,_)}try{Nh(5,n,n.return)}catch(_){gn(n,n.return,_)}}break;case 1:Hr(e,n),_s(n),i&512&&t!==null&&du(t,t.return);break;case 5:if(Hr(e,n),_s(n),i&512&&t!==null&&du(t,t.return),n.flags&32){var r=n.stateNode;try{qh(r,"")}catch(_){gn(n,n.return,_)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&AN(r,s),E_(a,o);var c=E_(a,s);for(o=0;o<l.length;o+=2){var u=l[o],p=l[o+1];u==="style"?LN(r,p):u==="dangerouslySetInnerHTML"?NN(r,p):u==="children"?qh(r,p):Fb(r,u,p,c)}switch(a){case"input":x_(r,s);break;case"textarea":CN(r,s);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Su(r,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Su(r,!!s.multiple,s.defaultValue,!0):Su(r,!!s.multiple,s.multiple?[]:"",!1))}r[rf]=s}catch(_){gn(n,n.return,_)}}break;case 6:if(Hr(e,n),_s(n),i&4){if(n.stateNode===null)throw Error(Ae(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(_){gn(n,n.return,_)}}break;case 3:if(Hr(e,n),_s(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Jh(e.containerInfo)}catch(_){gn(n,n.return,_)}break;case 4:Hr(e,n),_s(n);break;case 13:Hr(e,n),_s(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(vS=Mn())),i&4&&W2(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(vi=(c=vi)||u,Hr(e,n),vi=c):Hr(e,n),_s(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Ve=n,u=n.child;u!==null;){for(p=Ve=u;Ve!==null;){switch(m=Ve,g=m.child,m.tag){case 0:case 11:case 14:case 15:Nh(4,m,m.return);break;case 1:du(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){gn(i,t,_)}}break;case 5:du(m,m.return);break;case 22:if(m.memoizedState!==null){X2(p);continue}}g!==null?(g.return=m,Ve=g):X2(p)}u=u.sibling}e:for(u=null,p=n;;){if(p.tag===5){if(u===null){u=p;try{r=p.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=RN("display",o))}catch(_){gn(n,n.return,_)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(_){gn(n,n.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Hr(e,n),_s(n),i&4&&W2(n);break;case 21:break;default:Hr(e,n),_s(n)}}function _s(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(iL(t)){var i=t;break e}t=t.return}throw Error(Ae(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(qh(r,""),i.flags&=-33);var s=G2(n);ew(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=G2(n);Q_(n,a,o);break;default:throw Error(Ae(161))}}catch(l){gn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function I5(n,e,t){Ve=n,oL(n)}function oL(n,e,t){for(var i=(n.mode&1)!==0;Ve!==null;){var r=Ve,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Am;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||vi;a=Am;var c=vi;if(Am=o,(vi=l)&&!c)for(Ve=r;Ve!==null;)o=Ve,l=o.child,o.tag===22&&o.memoizedState!==null?q2(r):l!==null?(l.return=o,Ve=l):q2(r);for(;s!==null;)Ve=s,oL(s),s=s.sibling;Ve=r,Am=a,vi=c}$2(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ve=s):$2(n)}}function $2(n){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vi||cv(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!vi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:qr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&N2(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}N2(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&Jh(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}vi||e.flags&512&&J_(e)}catch(m){gn(e,e.return,m)}}if(e===n){Ve=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}}function X2(n){for(;Ve!==null;){var e=Ve;if(e===n){Ve=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ve=t;break}Ve=e.return}}function q2(n){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{cv(4,e)}catch(l){gn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){gn(e,r,l)}}var s=e.return;try{J_(e)}catch(l){gn(e,s,l)}break;case 5:var o=e.return;try{J_(e)}catch(l){gn(e,o,l)}}}catch(l){gn(e,e.return,l)}if(e===n){Ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ve=a;break}Ve=e.return}}var k5=Math.ceil,P0=So.ReactCurrentDispatcher,mS=So.ReactCurrentOwner,Lr=So.ReactCurrentBatchConfig,jt=0,Kn=null,In=null,ii=0,rr=0,hu=ka(0),Fn=0,uf=null,Ul=0,uv=0,gS=0,Rh=null,Bi=null,vS=0,Vu=1/0,to=null,N0=!1,tw=null,ha=null,Cm=!1,ra=null,R0=0,Lh=0,nw=null,Wg=-1,$g=0;function Pi(){return jt&6?Mn():Wg!==-1?Wg:Wg=Mn()}function fa(n){return n.mode&1?jt&2&&ii!==0?ii&-ii:v5.transition!==null?($g===0&&($g=GN()),$g):(n=$t,n!==0||(n=window.event,n=n===void 0?16:ZN(n.type)),n):1}function rs(n,e,t,i){if(50<Lh)throw Lh=0,nw=null,Error(Ae(185));Ff(n,t,i),(!(jt&2)||n!==Kn)&&(n===Kn&&(!(jt&2)&&(uv|=t),Fn===4&&ta(n,ii)),qi(n,i),t===1&&jt===0&&!(e.mode&1)&&(Vu=Mn()+500,ov&&Da()))}function qi(n,e){var t=n.callbackNode;vU(n,e);var i=p0(n,n===Kn?ii:0);if(i===0)t!==null&&i2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&i2(t),e===1)n.tag===0?g5(Y2.bind(null,n)):gR(Y2.bind(null,n)),h5(function(){!(jt&6)&&Da()}),t=null;else{switch(WN(i)){case 1:t=Hb;break;case 4:t=VN;break;case 16:t=f0;break;case 536870912:t=HN;break;default:t=f0}t=pL(t,aL.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function aL(n,e){if(Wg=-1,$g=0,jt&6)throw Error(Ae(327));var t=n.callbackNode;if(Cu()&&n.callbackNode!==t)return null;var i=p0(n,n===Kn?ii:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=L0(n,i);else{e=i;var r=jt;jt|=2;var s=cL();(Kn!==n||ii!==e)&&(to=null,Vu=Mn()+500,Pl(n,e));do try{O5();break}catch(a){lL(n,a)}while(1);nS(),P0.current=s,jt=r,In!==null?e=0:(Kn=null,ii=0,e=Fn)}if(e!==0){if(e===2&&(r=P_(n),r!==0&&(i=r,e=iw(n,r))),e===1)throw t=uf,Pl(n,0),ta(n,i),qi(n,Mn()),t;if(e===6)ta(n,i);else{if(r=n.current.alternate,!(i&30)&&!D5(r)&&(e=L0(n,i),e===2&&(s=P_(n),s!==0&&(i=s,e=iw(n,s))),e===1))throw t=uf,Pl(n,0),ta(n,i),qi(n,Mn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ae(345));case 2:dl(n,Bi,to);break;case 3:if(ta(n,i),(i&130023424)===i&&(e=vS+500-Mn(),10<e)){if(p0(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Pi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=O_(dl.bind(null,n,Bi,to),e);break}dl(n,Bi,to);break;case 4:if(ta(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-is(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Mn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*k5(i/1960))-i,10<i){n.timeoutHandle=O_(dl.bind(null,n,Bi,to),i);break}dl(n,Bi,to);break;case 5:dl(n,Bi,to);break;default:throw Error(Ae(329))}}}return qi(n,Mn()),n.callbackNode===t?aL.bind(null,n):null}function iw(n,e){var t=Rh;return n.current.memoizedState.isDehydrated&&(Pl(n,e).flags|=256),n=L0(n,e),n!==2&&(e=Bi,Bi=t,e!==null&&rw(e)),n}function rw(n){Bi===null?Bi=n:Bi.push.apply(Bi,n)}function D5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!os(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ta(n,e){for(e&=~gS,e&=~uv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-is(e),i=1<<t;n[t]=-1,e&=~i}}function Y2(n){if(jt&6)throw Error(Ae(327));Cu();var e=p0(n,0);if(!(e&1))return qi(n,Mn()),null;var t=L0(n,e);if(n.tag!==0&&t===2){var i=P_(n);i!==0&&(e=i,t=iw(n,i))}if(t===1)throw t=uf,Pl(n,0),ta(n,e),qi(n,Mn()),t;if(t===6)throw Error(Ae(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,dl(n,Bi,to),qi(n,Mn()),null}function yS(n,e){var t=jt;jt|=1;try{return n(e)}finally{jt=t,jt===0&&(Vu=Mn()+500,ov&&Da())}}function zl(n){ra!==null&&ra.tag===0&&!(jt&6)&&Cu();var e=jt;jt|=1;var t=Lr.transition,i=$t;try{if(Lr.transition=null,$t=1,n)return n()}finally{$t=i,Lr.transition=t,jt=e,!(jt&6)&&Da()}}function xS(){rr=hu.current,rn(hu)}function Pl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,d5(t)),In!==null)for(t=In.return;t!==null;){var i=t;switch(Qb(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&x0();break;case 3:zu(),rn($i),rn(wi),lS();break;case 5:aS(i);break;case 4:zu();break;case 13:rn(cn);break;case 19:rn(cn);break;case 10:iS(i.type._context);break;case 22:case 23:xS()}t=t.return}if(Kn=n,In=n=pa(n.current,null),ii=rr=e,Fn=0,uf=null,gS=uv=Ul=0,Bi=Rh=null,wl!==null){for(e=0;e<wl.length;e++)if(t=wl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}wl=null}return n}function lL(n,e){do{var t=In;try{if(nS(),Vg.current=C0,A0){for(var i=hn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}A0=!1}if(Fl=0,$n=On=hn=null,Ph=!1,af=0,mS.current=null,t===null||t.return===null){Fn=1,uf=e,In=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ii,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=j2(o);if(g!==null){g.flags&=-257,O2(g,o,a,s,e),g.mode&1&&D2(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){D2(s,c,e),_S();break e}l=Error(Ae(426))}}else if(an&&a.mode&1){var S=j2(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),O2(S,o,a,s,e),eS(Bu(l,a));break e}}s=l=Bu(l,a),Fn!==4&&(Fn=2),Rh===null?Rh=[s]:Rh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=WR(s,l,e);P2(s,v);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ha===null||!ha.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=$R(s,a,e);P2(s,M);break e}}s=s.return}while(s!==null)}dL(t)}catch(A){e=A,In===t&&t!==null&&(In=t=t.return);continue}break}while(1)}function cL(){var n=P0.current;return P0.current=C0,n===null?C0:n}function _S(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Kn===null||!(Ul&268435455)&&!(uv&268435455)||ta(Kn,ii)}function L0(n,e){var t=jt;jt|=2;var i=cL();(Kn!==n||ii!==e)&&(to=null,Pl(n,e));do try{j5();break}catch(r){lL(n,r)}while(1);if(nS(),jt=t,P0.current=i,In!==null)throw Error(Ae(261));return Kn=null,ii=0,Fn}function j5(){for(;In!==null;)uL(In)}function O5(){for(;In!==null&&!lU();)uL(In)}function uL(n){var e=fL(n.alternate,n,rr);n.memoizedProps=n.pendingProps,e===null?dL(n):In=e,mS.current=null}function dL(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=N5(t,e),t!==null){t.flags&=32767,In=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Fn=6,In=null;return}}else if(t=P5(t,e,rr),t!==null){In=t;return}if(e=e.sibling,e!==null){In=e;return}In=e=n}while(e!==null);Fn===0&&(Fn=5)}function dl(n,e,t){var i=$t,r=Lr.transition;try{Lr.transition=null,$t=1,F5(n,e,t,i)}finally{Lr.transition=r,$t=i}return null}function F5(n,e,t,i){do Cu();while(ra!==null);if(jt&6)throw Error(Ae(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ae(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(yU(n,s),n===Kn&&(In=Kn=null,ii=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Cm||(Cm=!0,pL(f0,function(){return Cu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Lr.transition,Lr.transition=null;var o=$t;$t=1;var a=jt;jt|=4,mS.current=null,L5(n,t),sL(t,n),r5(D_),m0=!!k_,D_=k_=null,n.current=t,I5(t),cU(),jt=a,$t=o,Lr.transition=s}else n.current=t;if(Cm&&(Cm=!1,ra=n,R0=r),s=n.pendingLanes,s===0&&(ha=null),hU(t.stateNode),qi(n,Mn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(N0)throw N0=!1,n=tw,tw=null,n;return R0&1&&n.tag!==0&&Cu(),s=n.pendingLanes,s&1?n===nw?Lh++:(Lh=0,nw=n):Lh=0,Da(),null}function Cu(){if(ra!==null){var n=WN(R0),e=Lr.transition,t=$t;try{if(Lr.transition=null,$t=16>n?16:n,ra===null)var i=!1;else{if(n=ra,ra=null,R0=0,jt&6)throw Error(Ae(331));var r=jt;for(jt|=4,Ve=n.current;Ve!==null;){var s=Ve,o=s.child;if(Ve.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ve=c;Ve!==null;){var u=Ve;switch(u.tag){case 0:case 11:case 15:Nh(8,u,s)}var p=u.child;if(p!==null)p.return=u,Ve=p;else for(;Ve!==null;){u=Ve;var m=u.sibling,g=u.return;if(nL(u),u===c){Ve=null;break}if(m!==null){m.return=g,Ve=m;break}Ve=g}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}Ve=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ve=o;else e:for(;Ve!==null;){if(s=Ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nh(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ve=v;break e}Ve=s.return}}var b=n.current;for(Ve=b;Ve!==null;){o=Ve;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ve=w;else e:for(o=b;Ve!==null;){if(a=Ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cv(9,a)}}catch(A){gn(a,a.return,A)}if(a===o){Ve=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,Ve=M;break e}Ve=a.return}}if(jt=r,Da(),Ns&&typeof Ns.onPostCommitFiberRoot=="function")try{Ns.onPostCommitFiberRoot(tv,n)}catch{}i=!0}return i}finally{$t=t,Lr.transition=e}}return!1}function K2(n,e,t){e=Bu(t,e),e=WR(n,e,1),n=da(n,e,1),e=Pi(),n!==null&&(Ff(n,1,e),qi(n,e))}function gn(n,e,t){if(n.tag===3)K2(n,n,t);else for(;e!==null;){if(e.tag===3){K2(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ha===null||!ha.has(i))){n=Bu(t,n),n=$R(e,n,1),e=da(e,n,1),n=Pi(),e!==null&&(Ff(e,1,n),qi(e,n));break}}e=e.return}}function U5(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Pi(),n.pingedLanes|=n.suspendedLanes&t,Kn===n&&(ii&t)===t&&(Fn===4||Fn===3&&(ii&130023424)===ii&&500>Mn()-vS?Pl(n,0):gS|=t),qi(n,e)}function hL(n,e){e===0&&(n.mode&1?(e=ym,ym<<=1,!(ym&130023424)&&(ym=4194304)):e=1);var t=Pi();n=vo(n,e),n!==null&&(Ff(n,e,t),qi(n,t))}function z5(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),hL(n,t)}function B5(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ae(314))}i!==null&&i.delete(e),hL(n,t)}var fL;fL=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||$i.current)Wi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Wi=!1,C5(n,e,t);Wi=!!(n.flags&131072)}else Wi=!1,an&&e.flags&1048576&&vR(e,b0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Gg(n,e),n=e.pendingProps;var r=Ou(e,wi.current);Au(e,t),r=uS(null,e,i,n,r,t);var s=dS();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xi(i)?(s=!0,_0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,sS(e),r.updater=lv,e.stateNode=r,r._reactInternals=e,G_(e,i,n,t),e=X_(null,e,i,!0,s,t)):(e.tag=0,an&&s&&Jb(e),Ai(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Gg(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=H5(i),n=qr(i,n),r){case 0:e=$_(null,e,i,n,t);break e;case 1:e=z2(null,e,i,n,t);break e;case 11:e=F2(null,e,i,n,t);break e;case 14:e=U2(null,e,i,qr(i.type,n),t);break e}throw Error(Ae(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),$_(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),z2(n,e,i,r,t);case 3:e:{if(KR(e),n===null)throw Error(Ae(387));i=e.pendingProps,s=e.memoizedState,r=s.element,SR(n,e),M0(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Bu(Error(Ae(423)),e),e=B2(n,e,i,t,r);break e}else if(i!==r){r=Bu(Error(Ae(424)),e),e=B2(n,e,i,t,r);break e}else for(sr=ua(e.stateNode.containerInfo.firstChild),ar=e,an=!0,Qr=null,t=wR(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Fu(),i===r){e=yo(n,e,t);break e}Ai(n,e,i,t)}e=e.child}return e;case 5:return ER(e),n===null&&B_(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,j_(i,r)?o=null:s!==null&&j_(i,s)&&(e.flags|=32),YR(n,e),Ai(n,e,o,t),e.child;case 6:return n===null&&B_(e),null;case 13:return ZR(n,e,t);case 4:return oS(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Uu(e,null,i,t):Ai(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),F2(n,e,i,r,t);case 7:return Ai(n,e,e.pendingProps,t),e.child;case 8:return Ai(n,e,e.pendingProps.children,t),e.child;case 12:return Ai(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,en(S0,i._currentValue),i._currentValue=o,s!==null)if(os(s.value,o)){if(s.children===r.children&&!$i.current){e=yo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=uo(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),V_(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ae(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),V_(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ai(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Au(e,t),r=Ir(r),i=i(r),e.flags|=1,Ai(n,e,i,t),e.child;case 14:return i=e.type,r=qr(i,e.pendingProps),r=qr(i.type,r),U2(n,e,i,r,t);case 15:return XR(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qr(i,r),Gg(n,e),e.tag=1,Xi(i)?(n=!0,_0(e)):n=!1,Au(e,t),GR(e,i,r),G_(e,i,r,t),X_(null,e,i,!0,n,t);case 19:return JR(n,e,t);case 22:return qR(n,e,t)}throw Error(Ae(156,e.tag))};function pL(n,e){return BN(n,e)}function V5(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(n,e,t,i){return new V5(n,e,t,i)}function wS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function H5(n){if(typeof n=="function")return wS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===zb)return 11;if(n===Bb)return 14}return 2}function pa(n,e){var t=n.alternate;return t===null?(t=Rr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Xg(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")wS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case nu:return Nl(t.children,r,s,e);case Ub:o=8,r|=8;break;case p_:return n=Rr(12,t,e,r|2),n.elementType=p_,n.lanes=s,n;case m_:return n=Rr(13,t,e,r),n.elementType=m_,n.lanes=s,n;case g_:return n=Rr(19,t,e,r),n.elementType=g_,n.lanes=s,n;case EN:return dv(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case bN:o=10;break e;case SN:o=9;break e;case zb:o=11;break e;case Bb:o=14;break e;case Ko:o=16,i=null;break e}throw Error(Ae(130,n==null?n:typeof n,""))}return e=Rr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Nl(n,e,t,i){return n=Rr(7,n,i,e),n.lanes=t,n}function dv(n,e,t,i){return n=Rr(22,n,i,e),n.elementType=EN,n.lanes=t,n.stateNode={isHidden:!1},n}function Fx(n,e,t){return n=Rr(6,n,null,e),n.lanes=t,n}function Ux(n,e,t){return e=Rr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function G5(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xx(0),this.expirationTimes=xx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function bS(n,e,t,i,r,s,o,a,l){return n=new G5(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},sS(s),n}function W5(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tu,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function mL(n){if(!n)return Sa;n=n._reactInternals;e:{if(Yl(n)!==n||n.tag!==1)throw Error(Ae(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(n.tag===1){var t=n.type;if(Xi(t))return mR(n,t,e)}return e}function gL(n,e,t,i,r,s,o,a,l){return n=bS(t,i,!0,n,r,s,o,a,l),n.context=mL(null),t=n.current,i=Pi(),r=fa(t),s=uo(i,r),s.callback=e??null,da(t,s,r),n.current.lanes=r,Ff(n,r,i),qi(n,i),n}function hv(n,e,t,i){var r=e.current,s=Pi(),o=fa(r);return t=mL(t),e.context===null?e.context=t:e.pendingContext=t,e=uo(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=da(r,e,o),n!==null&&(rs(n,r,o,s),Bg(n,r,o)),o}function I0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Z2(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function SS(n,e){Z2(n,e),(n=n.alternate)&&Z2(n,e)}function $5(){return null}var vL=typeof reportError=="function"?reportError:function(n){console.error(n)};function ES(n){this._internalRoot=n}fv.prototype.render=ES.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ae(409));hv(n,e,null,null)};fv.prototype.unmount=ES.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;zl(function(){hv(null,n,null,null)}),e[go]=null}};function fv(n){this._internalRoot=n}fv.prototype.unstable_scheduleHydration=function(n){if(n){var e=qN();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ea.length&&e!==0&&e<ea[t].priority;t++);ea.splice(t,0,n),t===0&&KN(n)}};function MS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function pv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function J2(){}function X5(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=I0(o);s.call(c)}}var o=gL(e,i,n,0,null,!1,!1,"",J2);return n._reactRootContainer=o,n[go]=o.current,tf(n.nodeType===8?n.parentNode:n),zl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=I0(l);a.call(c)}}var l=bS(n,0,!1,null,null,!1,!1,"",J2);return n._reactRootContainer=l,n[go]=l.current,tf(n.nodeType===8?n.parentNode:n),zl(function(){hv(e,l,t,i)}),l}function mv(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=I0(o);a.call(l)}}hv(e,o,n,r)}else o=X5(t,e,n,r,i);return I0(o)}$N=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=gh(e.pendingLanes);t!==0&&(Gb(e,t|1),qi(e,Mn()),!(jt&6)&&(Vu=Mn()+500,Da()))}break;case 13:zl(function(){var i=vo(n,1);if(i!==null){var r=Pi();rs(i,n,1,r)}}),SS(n,1)}};Wb=function(n){if(n.tag===13){var e=vo(n,134217728);if(e!==null){var t=Pi();rs(e,n,134217728,t)}SS(n,134217728)}};XN=function(n){if(n.tag===13){var e=fa(n),t=vo(n,e);if(t!==null){var i=Pi();rs(t,n,e,i)}SS(n,e)}};qN=function(){return $t};YN=function(n,e){var t=$t;try{return $t=n,e()}finally{$t=t}};T_=function(n,e,t){switch(e){case"input":if(x_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=sv(i);if(!r)throw Error(Ae(90));TN(i),x_(i,r)}}}break;case"textarea":CN(n,t);break;case"select":e=t.value,e!=null&&Su(n,!!t.multiple,e,!1)}};DN=yS;jN=zl;var q5={usingClientEntryPoint:!1,Events:[zf,ou,sv,IN,kN,yS]},Hd={findFiberByHostInstance:_l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y5={bundleType:Hd.bundleType,version:Hd.version,rendererPackageName:Hd.rendererPackageName,rendererConfig:Hd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:So.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=UN(n),n===null?null:n.stateNode},findFiberByHostInstance:Hd.findFiberByHostInstance||$5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pm.isDisabled&&Pm.supportsFiber)try{tv=Pm.inject(Y5),Ns=Pm}catch{}}hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q5;hr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!MS(e))throw Error(Ae(200));return W5(n,e,null,t)};hr.createRoot=function(n,e){if(!MS(n))throw Error(Ae(299));var t=!1,i="",r=vL;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=bS(n,1,!1,null,null,t,!1,i,r),n[go]=e.current,tf(n.nodeType===8?n.parentNode:n),new ES(e)};hr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ae(188)):(n=Object.keys(n).join(","),Error(Ae(268,n)));return n=UN(e),n=n===null?null:n.stateNode,n};hr.flushSync=function(n){return zl(n)};hr.hydrate=function(n,e,t){if(!pv(e))throw Error(Ae(200));return mv(null,n,e,!0,t)};hr.hydrateRoot=function(n,e,t){if(!MS(n))throw Error(Ae(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=vL;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=gL(e,null,n,1,t??null,r,!1,s,o),n[go]=e.current,tf(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new fv(e)};hr.render=function(n,e,t){if(!pv(e))throw Error(Ae(200));return mv(null,n,e,!1,t)};hr.unmountComponentAtNode=function(n){if(!pv(n))throw Error(Ae(40));return n._reactRootContainer?(zl(function(){mv(null,null,n,!1,function(){n._reactRootContainer=null,n[go]=null})}),!0):!1};hr.unstable_batchedUpdates=yS;hr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!pv(t))throw Error(Ae(200));if(n==null||n._reactInternals===void 0)throw Error(Ae(38));return mv(n,e,t,!1,i)};hr.version="18.3.1-next-f1338f8080-20240426";function yL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yL)}catch(n){console.error(n)}}yL(),yN.exports=hr;var gv=yN.exports;const K5=Ju(gv);var Q2=gv;h_.createRoot=Q2.createRoot,h_.hydrateRoot=Q2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function df(){return df=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},df.apply(this,arguments)}var sa;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(sa||(sa={}));const eA="popstate";function Z5(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return sw("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:k0(r)}return Q5(e,t,null,n)}function kn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xL(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J5(){return Math.random().toString(36).substr(2,8)}function tA(n,e){return{usr:n.state,key:n.key,idx:e}}function sw(n,e,t,i){return t===void 0&&(t=null),df({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?nd(e):e,{state:t,key:e&&e.key||i||J5()})}function k0(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function nd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function Q5(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=sa.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(df({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function p(){a=sa.Pop;let S=u(),v=S==null?null:S-c;c=S,l&&l({action:a,location:_.location,delta:v})}function m(S,v){a=sa.Push;let b=sw(_.location,S,v);t&&t(b,S),c=u()+1;let w=tA(b,c),M=_.createHref(b);try{o.pushState(w,"",M)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(M)}s&&l&&l({action:a,location:_.location,delta:1})}function g(S,v){a=sa.Replace;let b=sw(_.location,S,v);t&&t(b,S),c=u();let w=tA(b,c),M=_.createHref(b);o.replaceState(w,"",M),s&&l&&l({action:a,location:_.location,delta:0})}function y(S){let v=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof S=="string"?S:k0(S);return b=b.replace(/ $/,"%20"),kn(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let _={get action(){return a},get location(){return n(r,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(eA,p),l=S,()=>{r.removeEventListener(eA,p),l=null}},createHref(S){return e(r,S)},createURL:y,encodeLocation(S){let v=y(S);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:g,go(S){return o.go(S)}};return _}var nA;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(nA||(nA={}));function ez(n,e,t){return t===void 0&&(t="/"),tz(n,e,t,!1)}function tz(n,e,t,i){let r=typeof e=="string"?nd(e):e,s=TS(r.pathname||"/",t);if(s==null)return null;let o=_L(n);nz(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=fz(s);a=dz(o[l],c,i)}return a}function _L(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(kn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ma([i,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(kn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_L(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:cz(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of wL(s.path))r(s,o,l)}),e}function wL(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=wL(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function nz(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:uz(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const iz=/^:[\w-]+$/,rz=3,sz=2,oz=1,az=10,lz=-2,iA=n=>n==="*";function cz(n,e){let t=n.split("/"),i=t.length;return t.some(iA)&&(i+=lz),e&&(i+=sz),t.filter(r=>!iA(r)).reduce((r,s)=>r+(iz.test(s)?rz:s===""?oz:az),i)}function uz(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function dz(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",p=rA({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!p&&c&&t&&!i[i.length-1].route.index&&(p=rA({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!p)return null;Object.assign(r,p.params),o.push({params:r,pathname:ma([s,p.pathname]),pathnameBase:vz(ma([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=ma([s,p.pathnameBase]))}return o}function rA(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=hz(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,p)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let _=a[p]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=a[p];return g&&!y?c[m]=void 0:c[m]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function hz(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),xL(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function fz(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xL(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function TS(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function pz(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?nd(n):n;return{pathname:t?t.startsWith("/")?t:mz(t,e):e,search:yz(i),hash:xz(r)}}function mz(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function zx(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function bL(n,e){let t=gz(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function SL(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=nd(n):(r=df({},n),kn(!r.pathname||!r.pathname.includes("?"),zx("?","pathname","search",r)),kn(!r.pathname||!r.pathname.includes("#"),zx("#","pathname","hash",r)),kn(!r.search||!r.search.includes("#"),zx("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let p=e.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;r.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=pz(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ma=n=>n.join("/").replace(/\/\/+/g,"/"),vz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,xz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function _z(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const EL=["post","put","patch","delete"];new Set(EL);const wz=["get",...EL];new Set(wz);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hf(){return hf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hf.apply(this,arguments)}const AS=N.createContext(null),bz=N.createContext(null),Kl=N.createContext(null),vv=N.createContext(null),ja=N.createContext({outlet:null,matches:[],isDataRoute:!1}),ML=N.createContext(null);function Sz(n,e){let{relative:t}=e===void 0?{}:e;Vf()||kn(!1);let{basename:i,navigator:r}=N.useContext(Kl),{hash:s,pathname:o,search:a}=CL(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:ma([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Vf(){return N.useContext(vv)!=null}function Eo(){return Vf()||kn(!1),N.useContext(vv).location}function TL(n){N.useContext(Kl).static||N.useLayoutEffect(n)}function js(){let{isDataRoute:n}=N.useContext(ja);return n?jz():Ez()}function Ez(){Vf()||kn(!1);let n=N.useContext(AS),{basename:e,future:t,navigator:i}=N.useContext(Kl),{matches:r}=N.useContext(ja),{pathname:s}=Eo(),o=JSON.stringify(bL(r,t.v7_relativeSplatPath)),a=N.useRef(!1);return TL(()=>{a.current=!0}),N.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let p=SL(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ma([e,p.pathname])),(u.replace?i.replace:i.push)(p,u.state,u)},[e,i,o,s,n])}function AL(){let{matches:n}=N.useContext(ja),e=n[n.length-1];return e?e.params:{}}function CL(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=N.useContext(Kl),{matches:r}=N.useContext(ja),{pathname:s}=Eo(),o=JSON.stringify(bL(r,i.v7_relativeSplatPath));return N.useMemo(()=>SL(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function Mz(n,e){return Tz(n,e)}function Tz(n,e,t,i){Vf()||kn(!1);let{navigator:r,static:s}=N.useContext(Kl),{matches:o}=N.useContext(ja),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Eo(),p;if(e){var m;let v=typeof e=="string"?nd(e):e;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||kn(!1),p=v}else p=u;let g=p.pathname||"/",y=g;if(c!=="/"){let v=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let _=!s&&t&&t.matches&&t.matches.length>0?t.matches:ez(n,{pathname:y}),S=Rz(_&&_.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:ma([c,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:ma([c,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,t,i);return e&&S?N.createElement(vv.Provider,{value:{location:hf({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:sa.Pop}},S):S}function Az(){let n=Dz(),e=_z(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:r},t):null,s)}const Cz=N.createElement(Az,null);class Pz extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(ja.Provider,{value:this.props.routeContext},N.createElement(ML.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nz(n){let{routeContext:e,match:t,children:i}=n,r=N.useContext(AS);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(ja.Provider,{value:e},i)}function Rz(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);u>=0||kn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let p=o[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=u),p.route.id){let{loaderData:m,errors:g}=t,y=p.route.loader&&m[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,p,m)=>{let g,y=!1,_=null,S=null;t&&(g=a&&p.route.id?a[p.route.id]:void 0,_=p.route.errorElement||Cz,l&&(c<0&&m===0?(Oz("route-fallback",!1),y=!0,S=null):c===m&&(y=!0,S=p.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),b=()=>{let w;return g?w=_:y?w=S:p.route.Component?w=N.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=u,N.createElement(Nz,{match:p,routeContext:{outlet:u,matches:v,isDataRoute:t!=null},children:w})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?N.createElement(Pz,{location:t.location,revalidation:t.revalidation,component:_,error:g,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var PL=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(PL||{}),D0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(D0||{});function Lz(n){let e=N.useContext(AS);return e||kn(!1),e}function Iz(n){let e=N.useContext(bz);return e||kn(!1),e}function kz(n){let e=N.useContext(ja);return e||kn(!1),e}function NL(n){let e=kz(),t=e.matches[e.matches.length-1];return t.route.id||kn(!1),t.route.id}function Dz(){var n;let e=N.useContext(ML),t=Iz(D0.UseRouteError),i=NL(D0.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function jz(){let{router:n}=Lz(PL.UseNavigateStable),e=NL(D0.UseNavigateStable),t=N.useRef(!1);return TL(()=>{t.current=!0}),N.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,hf({fromRouteId:e},s)))},[n,e])}const sA={};function Oz(n,e,t){!e&&!sA[n]&&(sA[n]=!0)}function Fz(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Ui(n){kn(!1)}function Uz(n){let{basename:e="/",children:t=null,location:i,navigationType:r=sa.Pop,navigator:s,static:o=!1,future:a}=n;Vf()&&kn(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:hf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=nd(i));let{pathname:u="/",search:p="",hash:m="",state:g=null,key:y="default"}=i,_=N.useMemo(()=>{let S=TS(u,l);return S==null?null:{location:{pathname:S,search:p,hash:m,state:g,key:y},navigationType:r}},[l,u,p,m,g,y,r]);return _==null?null:N.createElement(Kl.Provider,{value:c},N.createElement(vv.Provider,{children:t,value:_}))}function zz(n){let{children:e,location:t}=n;return Mz(ow(e),t)}new Promise(()=>{});function ow(n,e){e===void 0&&(e=[]);let t=[];return N.Children.forEach(n,(i,r)=>{if(!N.isValidElement(i))return;let s=[...e,r];if(i.type===N.Fragment){t.push.apply(t,ow(i.props.children,s));return}i.type!==Ui&&kn(!1),!i.props.index||!i.props.children||kn(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=ow(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aw(){return aw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},aw.apply(this,arguments)}function Bz(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Vz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Hz(n,e){return n.button===0&&(!e||e==="_self")&&!Vz(n)}function lw(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(r=>[t,r]):[[t,i]])},[]))}function Gz(n,e){let t=lw(n);return e&&e.forEach((i,r)=>{t.has(r)||e.getAll(r).forEach(s=>{t.append(r,s)})}),t}const Wz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$z="6";try{window.__reactRouterVersion=$z}catch{}const Xz="startTransition",oA=Db[Xz];function qz(n){let{basename:e,children:t,future:i,window:r}=n,s=N.useRef();s.current==null&&(s.current=Z5({window:r,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=N.useCallback(p=>{c&&oA?oA(()=>l(p)):l(p)},[l,c]);return N.useLayoutEffect(()=>o.listen(u),[o,u]),N.useEffect(()=>Fz(i),[i]),N.createElement(Uz,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const Yz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yi=N.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:p}=e,m=Bz(e,Wz),{basename:g}=N.useContext(Kl),y,_=!1;if(typeof c=="string"&&Kz.test(c)&&(y=c,Yz))try{let w=new URL(window.location.href),M=c.startsWith("//")?new URL(w.protocol+c):new URL(c),A=TS(M.pathname,g);M.origin===w.origin&&A!=null?c=A+M.search+M.hash:_=!0}catch{}let S=Sz(c,{relative:r}),v=Zz(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:p});function b(w){i&&i(w),w.defaultPrevented||v(w)}return N.createElement("a",aw({},m,{href:y||S,onClick:_||s?i:b,ref:t,target:l}))});var aA;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(aA||(aA={}));var lA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(lA||(lA={}));function Zz(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=js(),c=Eo(),u=CL(n,{relative:o});return N.useCallback(p=>{if(Hz(p,t)){p.preventDefault();let m=i!==void 0?i:k0(c)===k0(u);l(n,{replace:m,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,i,r,t,n,s,o,a])}function Jz(n){let e=N.useRef(lw(n)),t=N.useRef(!1),i=Eo(),r=N.useMemo(()=>Gz(i.search,t.current?null:e.current),[i.search]),s=js(),o=N.useCallback((a,l)=>{const c=lw(typeof a=="function"?a(r):a);t.current=!0,s("?"+c,l)},[s,r]);return[r,o]}function RL(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=RL(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function LL(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=RL(n))&&(i&&(i+=" "),i+=e);return i}function Qz(){for(var n=0,e,t,i="";n<arguments.length;)(e=arguments[n++])&&(t=IL(e))&&(i&&(i+=" "),i+=t);return i}function IL(n){if(typeof n=="string")return n;for(var e,t="",i=0;i<n.length;i++)n[i]&&(e=IL(n[i]))&&(t&&(t+=" "),t+=e);return t}var CS="-";function e6(n){var e=n6(n),t=n.conflictingClassGroups,i=n.conflictingClassGroupModifiers,r=i===void 0?{}:i;function s(a){var l=a.split(CS);return l[0]===""&&l.length!==1&&l.shift(),kL(l,e)||t6(a)}function o(a,l){var c=t[a]||[];return l&&r[a]?[].concat(c,r[a]):c}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function kL(n,e){var o;if(n.length===0)return e.classGroupId;var t=n[0],i=e.nextPart.get(t),r=i?kL(n.slice(1),i):void 0;if(r)return r;if(e.validators.length!==0){var s=n.join(CS);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var cA=/^\[(.+)\]$/;function t6(n){if(cA.test(n)){var e=cA.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function n6(n){var e=n.theme,t=n.prefix,i={nextPart:new Map,validators:[]},r=r6(Object.entries(n.classGroups),t);return r.forEach(function(s){var o=s[0],a=s[1];cw(a,i,o,e)}),i}function cw(n,e,t,i){n.forEach(function(r){if(typeof r=="string"){var s=r===""?e:uA(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(i6(r)){cw(r(i),e,t,i);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(function(o){var a=o[0],l=o[1];cw(l,uA(e,a),t,i)})})}function uA(n,e){var t=n;return e.split(CS).forEach(function(i){t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t}function i6(n){return n.isThemeGetter}function r6(n,e){return e?n.map(function(t){var i=t[0],r=t[1],s=r.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[i,s]}):n}function s6(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,i=new Map;function r(s,o){t.set(s,o),e++,e>n&&(e=0,i=t,t=new Map)}return{get:function(o){var a=t.get(o);if(a!==void 0)return a;if((a=i.get(o))!==void 0)return r(o,a),a},set:function(o,a){t.has(o)?t.set(o,a):r(o,a)}}}var DL="!";function o6(n){var e=n.separator||":",t=e.length===1,i=e[0],r=e.length;return function(o){for(var a=[],l=0,c=0,u,p=0;p<o.length;p++){var m=o[p];if(l===0){if(m===i&&(t||o.slice(p,p+r)===e)){a.push(o.slice(c,p)),c=p+r;continue}if(m==="/"){u=p;continue}}m==="["?l++:m==="]"&&l--}var g=a.length===0?o:o.substring(c),y=g.startsWith(DL),_=y?g.substring(1):g,S=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:_,maybePostfixModifierPosition:S}}}function a6(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(i){var r=i[0]==="[";r?(e.push.apply(e,t.sort().concat([i])),t=[]):t.push(i)}),e.push.apply(e,t.sort()),e}function l6(n){return{cache:s6(n.cacheSize),splitModifiers:o6(n),...e6(n)}}var c6=/\s+/;function u6(n,e){var t=e.splitModifiers,i=e.getClassGroupId,r=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(c6).map(function(o){var a=t(o),l=a.modifiers,c=a.hasImportantModifier,u=a.baseClassName,p=a.maybePostfixModifierPosition,m=i(p?u.substring(0,p):u),g=!!p;if(!m){if(!p)return{isTailwindClass:!1,originalClassName:o};if(m=i(u),!m)return{isTailwindClass:!1,originalClassName:o};g=!1}var y=a6(l).join(":"),_=c?y+DL:y;return{isTailwindClass:!0,modifierId:_,classGroupId:m,originalClassName:o,hasPostfixModifier:g}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,u=a+l;return s.has(u)?!1:(s.add(u),r(l,c).forEach(function(p){return s.add(a+p)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function d6(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i,r,s,o=a;function a(c){var u=e[0],p=e.slice(1),m=p.reduce(function(g,y){return y(g)},u());return i=l6(m),r=i.cache.get,s=i.cache.set,o=l,l(c)}function l(c){var u=r(c);if(u)return u;var p=u6(c,i);return s(c,p),p}return function(){return o(Qz.apply(null,arguments))}}function tn(n){var e=function(i){return i[n]||[]};return e.isThemeGetter=!0,e}var jL=/^\[(?:([a-z-]+):)?(.+)\]$/i,h6=/^\d+\/\d+$/,f6=new Set(["px","full","screen"]),p6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,m6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,g6=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Gr(n){return Sl(n)||f6.has(n)||h6.test(n)||uw(n)}function uw(n){return Zl(n,"length",b6)}function v6(n){return Zl(n,"size",OL)}function y6(n){return Zl(n,"position",OL)}function x6(n){return Zl(n,"url",S6)}function Nm(n){return Zl(n,"number",Sl)}function Sl(n){return!Number.isNaN(Number(n))}function _6(n){return n.endsWith("%")&&Sl(n.slice(0,-1))}function Gd(n){return dA(n)||Zl(n,"number",dA)}function Rt(n){return jL.test(n)}function Wd(){return!0}function Fo(n){return p6.test(n)}function w6(n){return Zl(n,"",E6)}function Zl(n,e,t){var i=jL.exec(n);return i?i[1]?i[1]===e:t(i[2]):!1}function b6(n){return m6.test(n)}function OL(){return!1}function S6(n){return n.startsWith("url(")}function dA(n){return Number.isInteger(Number(n))}function E6(n){return g6.test(n)}function M6(){var n=tn("colors"),e=tn("spacing"),t=tn("blur"),i=tn("brightness"),r=tn("borderColor"),s=tn("borderRadius"),o=tn("borderSpacing"),a=tn("borderWidth"),l=tn("contrast"),c=tn("grayscale"),u=tn("hueRotate"),p=tn("invert"),m=tn("gap"),g=tn("gradientColorStops"),y=tn("gradientColorStopPositions"),_=tn("inset"),S=tn("margin"),v=tn("opacity"),b=tn("padding"),w=tn("saturate"),M=tn("scale"),A=tn("sepia"),P=tn("skew"),L=tn("space"),I=tn("translate"),C=function(){return["auto","contain","none"]},k=function(){return["auto","hidden","clip","visible","scroll"]},V=function(){return["auto",Rt,e]},q=function(){return[Rt,e]},B=function(){return["",Gr]},U=function(){return["auto",Sl,Rt]},$=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},X=function(){return["solid","dashed","dotted","double","none"]},ee=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},D=function(){return["start","end","center","between","around","evenly","stretch"]},O=function(){return["","0",Rt]},H=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Z=function(){return[Sl,Nm]},te=function(){return[Sl,Rt]};return{cacheSize:500,theme:{colors:[Wd],spacing:[Gr],blur:["none","",Fo,Rt],brightness:Z(),borderColor:[n],borderRadius:["none","","full",Fo,Rt],borderSpacing:q(),borderWidth:B(),contrast:Z(),grayscale:O(),hueRotate:te(),invert:O(),gap:q(),gradientColorStops:[n],gradientColorStopPositions:[_6,uw],inset:V(),margin:V(),opacity:Z(),padding:q(),saturate:Z(),scale:Z(),sepia:O(),skew:te(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",Rt]}],container:["container"],columns:[{columns:[Fo]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat($(),[Rt])}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gd]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Rt]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",Gd]}],"grid-cols":[{"grid-cols":[Wd]}],"col-start-end":[{col:["auto",{span:["full",Gd]},Rt]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Wd]}],"row-start-end":[{row:["auto",{span:[Gd]},Rt]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Rt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(D())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(D(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(D(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Rt,e]}],"min-w":[{"min-w":["min","max","fit",Rt,Gr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Fo]},Fo,Rt]}],h:[{h:[Rt,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Rt,Gr]}],"max-h":[{"max-h":[Rt,e,"min","max","fit"]}],"font-size":[{text:["base",Fo,uw]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nm]}],"font-family":[{font:[Wd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Rt]}],"line-clamp":[{"line-clamp":["none",Sl,Nm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rt,Gr]}],"list-image":[{"list-image":["none",Rt]}],"list-style-type":[{list:["none","disc","decimal",Rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(X(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Gr]}],"underline-offset":[{"underline-offset":["auto",Rt,Gr]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat($(),[y6])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",v6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},x6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(X(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:X()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat(X())}],"outline-offset":[{"outline-offset":[Rt,Gr]}],"outline-w":[{outline:[Gr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Gr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Fo,w6]}],"shadow-color":[{shadow:[Wd]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":ee()}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Fo,Rt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[p]}],saturate:[{saturate:[w]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Rt]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",Rt]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",Rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[Gd,Rt]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Rt]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Gr,Nm]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var T6=d6(M6);function si(...n){return T6(LL(n))}function qn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function hA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function FL(...n){return e=>{let t=!1;const i=n.map(r=>{const s=hA(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():hA(n[r],null)}}}}function as(...n){return N.useCallback(FL(...n),n)}function A6(n,e){const t=N.createContext(e),i=s=>{const{children:o,...a}=s,l=N.useMemo(()=>a,Object.values(a));return f.jsx(t.Provider,{value:l,children:o})};i.displayName=n+"Provider";function r(s){const o=N.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[i,r]}function PS(n,e=[]){let t=[];function i(s,o){const a=N.createContext(o),l=t.length;t=[...t,o];const c=p=>{var v;const{scope:m,children:g,...y}=p,_=((v=m==null?void 0:m[n])==null?void 0:v[l])||a,S=N.useMemo(()=>y,Object.values(y));return f.jsx(_.Provider,{value:S,children:g})};c.displayName=s+"Provider";function u(p,m){var _;const g=((_=m==null?void 0:m[n])==null?void 0:_[l])||a,y=N.useContext(g);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=t.map(o=>N.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return N.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[i,C6(r,...e)]}function C6(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const p=l(s)[`__scope${c}`];return{...a,...p}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function ff(n){const e=N6(n),t=N.forwardRef((i,r)=>{const{children:s,...o}=i,a=N.Children.toArray(s),l=a.find(L6);if(l){const c=l.props.children,u=a.map(p=>p===l?N.Children.count(c)>1?N.Children.only(null):N.isValidElement(c)?c.props.children:null:p);return f.jsx(e,{...o,ref:r,children:N.isValidElement(c)?N.cloneElement(c,void 0,u):null})}return f.jsx(e,{...o,ref:r,children:s})});return t.displayName=`${n}.Slot`,t}var P6=ff("Slot");function N6(n){const e=N.forwardRef((t,i)=>{const{children:r,...s}=t;if(N.isValidElement(r)){const o=k6(r),a=I6(s,r.props);return r.type!==N.Fragment&&(a.ref=i?FL(i,o):o),N.cloneElement(r,a)}return N.Children.count(r)>1?N.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var R6=Symbol("radix.slottable");function L6(n){return N.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===R6}function I6(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...a)=>{s(...a),r(...a)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}function k6(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function D6(n){const e=n+"CollectionProvider",[t,i]=PS(e),[r,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=_=>{const{scope:S,children:v}=_,b=Dt.useRef(null),w=Dt.useRef(new Map).current;return f.jsx(r,{scope:S,itemMap:w,collectionRef:b,children:v})};o.displayName=e;const a=n+"CollectionSlot",l=ff(a),c=Dt.forwardRef((_,S)=>{const{scope:v,children:b}=_,w=s(a,v),M=as(S,w.collectionRef);return f.jsx(l,{ref:M,children:b})});c.displayName=a;const u=n+"CollectionItemSlot",p="data-radix-collection-item",m=ff(u),g=Dt.forwardRef((_,S)=>{const{scope:v,children:b,...w}=_,M=Dt.useRef(null),A=as(S,M),P=s(u,v);return Dt.useEffect(()=>(P.itemMap.set(M,{ref:M,...w}),()=>void P.itemMap.delete(M))),f.jsx(m,{[p]:"",ref:A,children:b})});g.displayName=u;function y(_){const S=s(n+"CollectionConsumer",_);return Dt.useCallback(()=>{const b=S.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((P,L)=>w.indexOf(P.ref.current)-w.indexOf(L.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},y,i]}var j6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oi=j6.reduce((n,e)=>{const t=ff(`Primitive.${e}`),i=N.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function UL(n,e){n&&gv.flushSync(()=>n.dispatchEvent(e))}function xo(n){const e=N.useRef(n);return N.useEffect(()=>{e.current=n}),N.useMemo(()=>(...t)=>{var i;return(i=e.current)==null?void 0:i.call(e,...t)},[])}function O6(n,e=globalThis==null?void 0:globalThis.document){const t=xo(n);N.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var F6="DismissableLayer",dw="dismissableLayer.update",U6="dismissableLayer.pointerDownOutside",z6="dismissableLayer.focusOutside",fA,zL=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),NS=N.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=N.useContext(zL),[u,p]=N.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=N.useState({}),y=as(e,L=>p(L)),_=Array.from(c.layers),[S]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=_.indexOf(S),b=u?_.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,M=b>=v,A=V6(L=>{const I=L.target,C=[...c.branches].some(k=>k.contains(I));!M||C||(r==null||r(L),o==null||o(L),L.defaultPrevented||a==null||a())},m),P=H6(L=>{const I=L.target;[...c.branches].some(k=>k.contains(I))||(s==null||s(L),o==null||o(L),L.defaultPrevented||a==null||a())},m);return O6(L=>{b===c.layers.size-1&&(i==null||i(L),!L.defaultPrevented&&a&&(L.preventDefault(),a()))},m),N.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(fA=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),pA(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=fA)}},[u,m,t,c]),N.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),pA())},[u,c]),N.useEffect(()=>{const L=()=>g({});return document.addEventListener(dw,L),()=>document.removeEventListener(dw,L)},[]),f.jsx(oi.div,{...l,ref:y,style:{pointerEvents:w?M?"auto":"none":void 0,...n.style},onFocusCapture:qn(n.onFocusCapture,P.onFocusCapture),onBlurCapture:qn(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:qn(n.onPointerDownCapture,A.onPointerDownCapture)})});NS.displayName=F6;var B6="DismissableLayerBranch",BL=N.forwardRef((n,e)=>{const t=N.useContext(zL),i=N.useRef(null),r=as(e,i);return N.useEffect(()=>{const s=i.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),f.jsx(oi.div,{...n,ref:r})});BL.displayName=B6;function V6(n,e=globalThis==null?void 0:globalThis.document){const t=xo(n),i=N.useRef(!1),r=N.useRef(()=>{});return N.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){VL(U6,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function H6(n,e=globalThis==null?void 0:globalThis.document){const t=xo(n),i=N.useRef(!1);return N.useEffect(()=>{const r=s=>{s.target&&!i.current&&VL(z6,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function pA(){const n=new CustomEvent(dw);document.dispatchEvent(n)}function VL(n,e,t,{discrete:i}){const r=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?UL(r,s):r.dispatchEvent(s)}var G6=NS,W6=BL,Hu=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},$6="Portal",RS=N.forwardRef((n,e)=>{var a;const{container:t,...i}=n,[r,s]=N.useState(!1);Hu(()=>s(!0),[]);const o=t||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?K5.createPortal(f.jsx(oi.div,{...i,ref:e}),o):null});RS.displayName=$6;function X6(n,e){return N.useReducer((t,i)=>e[t][i]??t,n)}var Hf=n=>{const{present:e,children:t}=n,i=q6(e),r=typeof t=="function"?t({present:i.isPresent}):N.Children.only(t),s=as(i.ref,Y6(r));return typeof t=="function"||i.isPresent?N.cloneElement(r,{ref:s}):null};Hf.displayName="Presence";function q6(n){const[e,t]=N.useState(),i=N.useRef(null),r=N.useRef(n),s=N.useRef("none"),o=n?"mounted":"unmounted",[a,l]=X6(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const c=Rm(i.current);s.current=a==="mounted"?c:"none"},[a]),Hu(()=>{const c=i.current,u=r.current;if(u!==n){const m=s.current,g=Rm(c);n?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),Hu(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,p=g=>{const _=Rm(i.current).includes(g.animationName);if(g.target===e&&_&&(l("ANIMATION_END"),!r.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},m=g=>{g.target===e&&(s.current=Rm(i.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:N.useCallback(c=>{i.current=c?getComputedStyle(c):null,t(c)},[])}}function Rm(n){return(n==null?void 0:n.animationName)||"none"}function Y6(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var K6=Db[" useInsertionEffect ".trim().toString()]||Hu;function HL({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[r,s,o]=Z6({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:r;{const u=N.useRef(n!==void 0);N.useEffect(()=>{const p=u.current;p!==a&&console.warn(`${i} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=N.useCallback(u=>{var p;if(a){const m=J6(u)?u(n):u;m!==n&&((p=o.current)==null||p.call(o,m))}else s(u)},[a,n,s,o]);return[l,c]}function Z6({defaultProp:n,onChange:e}){const[t,i]=N.useState(n),r=N.useRef(t),s=N.useRef(e);return K6(()=>{s.current=e},[e]),N.useEffect(()=>{var o;r.current!==t&&((o=s.current)==null||o.call(s,t),r.current=t)},[t,r]),[t,i,s]}function J6(n){return typeof n=="function"}var Q6=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),eB="VisuallyHidden",LS=N.forwardRef((n,e)=>f.jsx(oi.span,{...n,ref:e,style:{...Q6,...n.style}}));LS.displayName=eB;var IS="ToastProvider",[kS,tB,nB]=D6("Toast"),[GL,Ure]=PS("Toast",[nB]),[iB,yv]=GL(IS),WL=n=>{const{__scopeToast:e,label:t="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=n,[a,l]=N.useState(null),[c,u]=N.useState(0),p=N.useRef(!1),m=N.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${IS}\`. Expected non-empty \`string\`.`),f.jsx(kS.Provider,{scope:e,children:f.jsx(iB,{scope:e,label:t,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:N.useCallback(()=>u(g=>g+1),[]),onToastRemove:N.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:m,children:o})})};WL.displayName=IS;var $L="ToastViewport",rB=["F8"],hw="toast.viewportPause",fw="toast.viewportResume",XL=N.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:i=rB,label:r="Notifications ({hotkey})",...s}=n,o=yv($L,t),a=tB(t),l=N.useRef(null),c=N.useRef(null),u=N.useRef(null),p=N.useRef(null),m=as(e,p,o.onViewportChange),g=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;N.useEffect(()=>{const S=v=>{var w;i.length!==0&&i.every(M=>v[M]||v.code===M)&&((w=p.current)==null||w.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[i]),N.useEffect(()=>{const S=l.current,v=p.current;if(y&&S&&v){const b=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(hw);v.dispatchEvent(P),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(fw);v.dispatchEvent(P),o.isClosePausedRef.current=!1}},M=P=>{!S.contains(P.relatedTarget)&&w()},A=()=>{S.contains(document.activeElement)||w()};return S.addEventListener("focusin",b),S.addEventListener("focusout",M),S.addEventListener("pointermove",b),S.addEventListener("pointerleave",A),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{S.removeEventListener("focusin",b),S.removeEventListener("focusout",M),S.removeEventListener("pointermove",b),S.removeEventListener("pointerleave",A),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[y,o.isClosePausedRef]);const _=N.useCallback(({tabbingDirection:S})=>{const b=a().map(w=>{const M=w.ref.current,A=[M,...vB(M)];return S==="forwards"?A:A.reverse()});return(S==="forwards"?b.reverse():b).flat()},[a]);return N.useEffect(()=>{const S=p.current;if(S){const v=b=>{var A,P,L;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const I=document.activeElement,C=b.shiftKey;if(b.target===S&&C){(A=c.current)==null||A.focus();return}const q=_({tabbingDirection:C?"backwards":"forwards"}),B=q.findIndex(U=>U===I);Bx(q.slice(B+1))?b.preventDefault():C?(P=c.current)==null||P.focus():(L=u.current)==null||L.focus()}};return S.addEventListener("keydown",v),()=>S.removeEventListener("keydown",v)}},[a,_]),f.jsxs(W6,{ref:l,role:"region","aria-label":r.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&f.jsx(pw,{ref:c,onFocusFromOutsideViewport:()=>{const S=_({tabbingDirection:"forwards"});Bx(S)}}),f.jsx(kS.Slot,{scope:t,children:f.jsx(oi.ol,{tabIndex:-1,...s,ref:m})}),y&&f.jsx(pw,{ref:u,onFocusFromOutsideViewport:()=>{const S=_({tabbingDirection:"backwards"});Bx(S)}})]})});XL.displayName=$L;var qL="ToastFocusProxy",pw=N.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:i,...r}=n,s=yv(qL,t);return f.jsx(LS,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});pw.displayName=qL;var Gf="Toast",sB="toast.swipeStart",oB="toast.swipeMove",aB="toast.swipeCancel",lB="toast.swipeEnd",YL=N.forwardRef((n,e)=>{const{forceMount:t,open:i,defaultOpen:r,onOpenChange:s,...o}=n,[a,l]=HL({prop:i,defaultProp:r??!0,onChange:s,caller:Gf});return f.jsx(Hf,{present:t||a,children:f.jsx(dB,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:xo(n.onPause),onResume:xo(n.onResume),onSwipeStart:qn(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:qn(n.onSwipeMove,c=>{const{x:u,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:qn(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:qn(n.onSwipeEnd,c=>{const{x:u,y:p}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),l(!1)})})})});YL.displayName=Gf;var[cB,uB]=GL(Gf,{onClose(){}}),dB=N.forwardRef((n,e)=>{const{__scopeToast:t,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:p,onSwipeCancel:m,onSwipeEnd:g,...y}=n,_=yv(Gf,t),[S,v]=N.useState(null),b=as(e,U=>v(U)),w=N.useRef(null),M=N.useRef(null),A=r||_.duration,P=N.useRef(0),L=N.useRef(A),I=N.useRef(0),{onToastAdd:C,onToastRemove:k}=_,V=xo(()=>{var $;(S==null?void 0:S.contains(document.activeElement))&&(($=_.viewport)==null||$.focus()),o()}),q=N.useCallback(U=>{!U||U===1/0||(window.clearTimeout(I.current),P.current=new Date().getTime(),I.current=window.setTimeout(V,U))},[V]);N.useEffect(()=>{const U=_.viewport;if(U){const $=()=>{q(L.current),c==null||c()},X=()=>{const ee=new Date().getTime()-P.current;L.current=L.current-ee,window.clearTimeout(I.current),l==null||l()};return U.addEventListener(hw,X),U.addEventListener(fw,$),()=>{U.removeEventListener(hw,X),U.removeEventListener(fw,$)}}},[_.viewport,A,l,c,q]),N.useEffect(()=>{s&&!_.isClosePausedRef.current&&q(A)},[s,A,_.isClosePausedRef,q]),N.useEffect(()=>(C(),()=>k()),[C,k]);const B=N.useMemo(()=>S?n4(S):null,[S]);return _.viewport?f.jsxs(f.Fragment,{children:[B&&f.jsx(hB,{__scopeToast:t,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:B}),f.jsx(cB,{scope:t,onClose:V,children:gv.createPortal(f.jsx(kS.ItemSlot,{scope:t,children:f.jsx(G6,{asChild:!0,onEscapeKeyDown:qn(a,()=>{_.isFocusedToastEscapeKeyDownRef.current||V(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:f.jsx(oi.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":_.swipeDirection,...y,ref:b,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:qn(n.onKeyDown,U=>{U.key==="Escape"&&(a==null||a(U.nativeEvent),U.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:qn(n.onPointerDown,U=>{U.button===0&&(w.current={x:U.clientX,y:U.clientY})}),onPointerMove:qn(n.onPointerMove,U=>{if(!w.current)return;const $=U.clientX-w.current.x,X=U.clientY-w.current.y,ee=!!M.current,D=["left","right"].includes(_.swipeDirection),O=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,H=D?O(0,$):0,Z=D?0:O(0,X),te=U.pointerType==="touch"?10:2,Q={x:H,y:Z},se={originalEvent:U,delta:Q};ee?(M.current=Q,Lm(oB,p,se,{discrete:!1})):mA(Q,_.swipeDirection,te)?(M.current=Q,Lm(sB,u,se,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs($)>te||Math.abs(X)>te)&&(w.current=null)}),onPointerUp:qn(n.onPointerUp,U=>{const $=M.current,X=U.target;if(X.hasPointerCapture(U.pointerId)&&X.releasePointerCapture(U.pointerId),M.current=null,w.current=null,$){const ee=U.currentTarget,D={originalEvent:U,delta:$};mA($,_.swipeDirection,_.swipeThreshold)?Lm(lB,g,D,{discrete:!0}):Lm(aB,m,D,{discrete:!0}),ee.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),hB=n=>{const{__scopeToast:e,children:t,...i}=n,r=yv(Gf,e),[s,o]=N.useState(!1),[a,l]=N.useState(!1);return mB(()=>o(!0)),N.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:f.jsx(RS,{asChild:!0,children:f.jsx(LS,{...i,children:s&&f.jsxs(f.Fragment,{children:[r.label," ",t]})})})},fB="ToastTitle",KL=N.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return f.jsx(oi.div,{...i,ref:e})});KL.displayName=fB;var pB="ToastDescription",ZL=N.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return f.jsx(oi.div,{...i,ref:e})});ZL.displayName=pB;var JL="ToastAction",QL=N.forwardRef((n,e)=>{const{altText:t,...i}=n;return t.trim()?f.jsx(t4,{altText:t,asChild:!0,children:f.jsx(DS,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${JL}\`. Expected non-empty \`string\`.`),null)});QL.displayName=JL;var e4="ToastClose",DS=N.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n,r=uB(e4,t);return f.jsx(t4,{asChild:!0,children:f.jsx(oi.button,{type:"button",...i,ref:e,onClick:qn(n.onClick,r.onClose)})})});DS.displayName=e4;var t4=N.forwardRef((n,e)=>{const{__scopeToast:t,altText:i,...r}=n;return f.jsx(oi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function n4(n){const e=[];return Array.from(n.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),gB(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...n4(i))}}),e}function Lm(n,e,t,{discrete:i}){const r=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?UL(r,s):r.dispatchEvent(s)}var mA=(n,e,t=0)=>{const i=Math.abs(n.x),r=Math.abs(n.y),s=i>r;return e==="left"||e==="right"?s&&i>t:!s&&r>t};function mB(n=()=>{}){const e=xo(n);Hu(()=>{let t=0,i=0;return t=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(i)}},[e])}function gB(n){return n.nodeType===n.ELEMENT_NODE}function vB(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Bx(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var yB=WL,i4=XL,r4=YL,s4=KL,o4=ZL,a4=QL,l4=DS;const gA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,vA=LL,c4=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return vA(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:s}=e,o=Object.keys(r).map(c=>{const u=t==null?void 0:t[c],p=s==null?void 0:s[c];if(u===null)return null;const m=gA(u)||gA(p);return r[c][m]}),a=t&&Object.entries(t).reduce((c,u)=>{let[p,m]=u;return m===void 0||(c[p]=m),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,u)=>{let{class:p,className:m,...g}=u;return Object.entries(g).every(y=>{let[_,S]=y;return Array.isArray(S)?S.includes({...s,...a}[_]):{...s,...a}[_]===S})?[...c,p,m]:c},[]);return vA(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};var xB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _B=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),at=(n,e)=>{const t=N.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},c)=>N.createElement("svg",{ref:c,...xB,width:r,height:r,stroke:i,strokeWidth:o?Number(s)*24/Number(r):s,className:`lucide lucide-${_B(n)}`,...l},[...e.map(([u,p])=>N.createElement(u,p)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t},yA=at("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Dr=at("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),wB=at("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),bB=at("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),SB=at("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]),EB=at("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]),MB=at("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),TB=at("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Vx=at("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Wf=at("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),AB=at("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),CB=at("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),xv=at("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),u4=at("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),pf=at("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),_v=at("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),$f=at("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),PB=at("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),NB=at("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),wv=at("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),RB=at("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),LB=at("Ear",[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]]),IB=at("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),kB=at("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),jS=at("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Bl=at("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),d4=at("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),DB=at("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),bv=at("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),jB=at("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),h4=at("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),OB=at("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),FB=at("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),UB=at("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]),zB=at("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),BB=at("Paintbrush",[["path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z",key:"m6k5sh"}],["path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7",key:"arzq70"}],["path",{d:"M14.5 17.5 4.5 15",key:"s7fvrz"}]]),OS=at("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),id=at("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),VB=at("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),FS=at("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),HB=at("SendHorizontal",[["path",{d:"m3 3 3 9-3 9 19-9Z",key:"1aobqy"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]),rd=at("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),GB=at("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Ea=at("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),WB=at("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Sv=at("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Xf=at("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),$B=at("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),f4=at("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Oa=at("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ma=at("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),XB=yB,p4=Dt.forwardRef(({className:n,...e},t)=>f.jsx(i4,{ref:t,className:si("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));p4.displayName=i4.displayName;const qB=c4("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),m4=Dt.forwardRef(({className:n,variant:e,...t},i)=>f.jsx(r4,{ref:i,className:si(qB({variant:e}),n),...t}));m4.displayName=r4.displayName;const YB=Dt.forwardRef(({className:n,...e},t)=>f.jsx(a4,{ref:t,className:si("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));YB.displayName=a4.displayName;const g4=Dt.forwardRef(({className:n,...e},t)=>f.jsx(l4,{ref:t,className:si("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:f.jsx(Ma,{className:"h-4 w-4"})}));g4.displayName=l4.displayName;const v4=Dt.forwardRef(({className:n,...e},t)=>f.jsx(s4,{ref:t,className:si("text-sm font-semibold",n),...e}));v4.displayName=s4.displayName;const y4=Dt.forwardRef(({className:n,...e},t)=>f.jsx(o4,{ref:t,className:si("text-sm opacity-90",n),...e}));y4.displayName=o4.displayName;const xA=n=>{let e;const t=new Set,i=(c,u)=>{const p=typeof c=="function"?c(e):c;if(!Object.is(p,e)){const m=e;e=u??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(g=>g(e,m))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,a);return a},KB=n=>n?xA(n):xA,ZB=n=>n;function JB(n,e=ZB){const t=Dt.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return Dt.useDebugValue(t),t}const _A=n=>{const e=KB(n),t=i=>JB(e,i);return Object.assign(t,e),t},QB=n=>n?_A(n):_A;let e8=0;const US=QB(n=>({toasts:[],addToast:({title:e,description:t,variant:i="default"})=>{const r=(++e8).toString(),o={id:r,title:e,description:t,variant:i,dismiss:()=>n(a=>({toasts:a.toasts.filter(l=>l.id!==r)}))};n(a=>({toasts:[o,...a.toasts].slice(0,1)}))},dismissToast:e=>n(t=>({toasts:t.toasts.filter(i=>i.id!==e)}))}));function t8(){const n=US(e=>e.toasts);return f.jsxs(XB,{children:[n.map(({id:e,title:t,description:i,variant:r,dismiss:s})=>f.jsxs(m4,{variant:r,onOpenChange:s,children:[f.jsxs("div",{className:"grid gap-1",children:[t&&f.jsx(v4,{children:t}),i&&f.jsx(y4,{children:i})]}),f.jsx(g4,{})]},e)),f.jsx(p4,{})]})}function n8(){const{pathname:n}=Eo();return N.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[n]),null}const i8=c4("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Zt=Dt.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...r},s)=>{const o=i?P6:"button";return f.jsx(o,{className:si(i8({variant:e,size:t,className:n})),ref:s,...r})});Zt.displayName="Button";const x4=N.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Ev=N.createContext({}),Mv=N.createContext(null),Tv=typeof document<"u",Av=Tv?N.useLayoutEffect:N.useEffect,_4=N.createContext({strict:!1});function r8(n,e,t,i){const{visualElement:r}=N.useContext(Ev),s=N.useContext(_4),o=N.useContext(Mv),a=N.useContext(x4).reducedMotion,l=N.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;N.useInsertionEffect(()=>{c&&c.update(t,o)});const u=N.useRef(!!window.HandoffAppearAnimations);return Av(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),N.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,u.current=!1)}),c}function fu(n){return typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function s8(n,e,t){return N.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):fu(t)&&(t.current=i))},[e])}function mf(n){return typeof n=="string"||Array.isArray(n)}function Cv(n){return typeof n=="object"&&typeof n.start=="function"}const zS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],BS=["initial",...zS];function Pv(n){return Cv(n.animate)||BS.some(e=>mf(n[e]))}function w4(n){return!!(Pv(n)||n.variants)}function o8(n,e){if(Pv(n)){const{initial:t,animate:i}=n;return{initial:t===!1||mf(t)?t:void 0,animate:mf(i)?i:void 0}}return n.inherit!==!1?e:{}}function a8(n){const{initial:e,animate:t}=o8(n,N.useContext(Ev));return N.useMemo(()=>({initial:e,animate:t}),[wA(e),wA(t)])}function wA(n){return Array.isArray(n)?n.join(" "):n}const bA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gf={};for(const n in bA)gf[n]={isEnabled:e=>bA[n].some(t=>!!e[t])};function l8(n){for(const e in n)gf[e]={...gf[e],...n[e]}}const VS=N.createContext({}),b4=N.createContext({}),c8=Symbol.for("motionComponentSymbol");function u8({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&l8(n);function s(a,l){let c;const u={...N.useContext(x4),...a,layoutId:d8(a)},{isStatic:p}=u,m=a8(a),g=i(a,p);if(!p&&Tv){m.visualElement=r8(r,g,u,e);const y=N.useContext(b4),_=N.useContext(_4).strict;m.visualElement&&(c=m.visualElement.loadFeatures(u,_,n,y))}return N.createElement(Ev.Provider,{value:m},c&&m.visualElement?N.createElement(c,{visualElement:m.visualElement,...u}):null,t(r,a,s8(g,m.visualElement,l),g,p,m.visualElement))}const o=N.forwardRef(s);return o[c8]=r,o}function d8({layoutId:n}){const e=N.useContext(VS).id;return e&&n!==void 0?e+"-"+n:n}function h8(n){function e(i,r={}){return u8(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const f8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function HS(n){return typeof n!="string"||n.includes("-")?!1:!!(f8.indexOf(n)>-1||/[A-Z]/.test(n))}const j0={};function p8(n){Object.assign(j0,n)}const qf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jl=new Set(qf);function S4(n,{layout:e,layoutId:t}){return Jl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!j0[n]||n==="opacity")}const Yi=n=>!!(n&&n.getVelocity),m8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},g8=qf.length;function v8(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,r){let s="";for(let o=0;o<g8;o++){const a=qf[o];if(n[a]!==void 0){const l=m8[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(n,i?"":s):t&&i&&(s="none"),s}const E4=n=>e=>typeof e=="string"&&e.startsWith(n),M4=E4("--"),mw=E4("var(--"),y8=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,x8=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ta=(n,e,t)=>Math.min(Math.max(t,n),e),Ql={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ih={...Ql,transform:n=>Ta(0,1,n)},Im={...Ql,default:1},kh=n=>Math.round(n*1e5)/1e5,Nv=/(-)?([\d]*\.?[\d])+/g,T4=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,_8=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Yf(n){return typeof n=="string"}const Kf=n=>({test:e=>Yf(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Wo=Kf("deg"),Ls=Kf("%"),lt=Kf("px"),w8=Kf("vh"),b8=Kf("vw"),SA={...Ls,parse:n=>Ls.parse(n)/100,transform:n=>Ls.transform(n*100)},EA={...Ql,transform:Math.round},A4={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,size:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,rotate:Wo,rotateX:Wo,rotateY:Wo,rotateZ:Wo,scale:Im,scaleX:Im,scaleY:Im,scaleZ:Im,skew:Wo,skewX:Wo,skewY:Wo,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:Ih,originX:SA,originY:SA,originZ:lt,zIndex:EA,fillOpacity:Ih,strokeOpacity:Ih,numOctaves:EA};function GS(n,e,t,i){const{style:r,vars:s,transform:o,transformOrigin:a}=n;let l=!1,c=!1,u=!0;for(const p in e){const m=e[p];if(M4(p)){s[p]=m;continue}const g=A4[p],y=x8(m,g);if(Jl.has(p)){if(l=!0,o[p]=y,!u)continue;m!==(g.default||0)&&(u=!1)}else p.startsWith("origin")?(c=!0,a[p]=y):r[p]=y}if(e.transform||(l||i?r.transform=v8(n.transform,t,u,i):r.transform&&(r.transform="none")),c){const{originX:p="50%",originY:m="50%",originZ:g=0}=a;r.transformOrigin=`${p} ${m} ${g}`}}const WS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function C4(n,e,t){for(const i in e)!Yi(e[i])&&!S4(i,t)&&(n[i]=e[i])}function S8({transformTemplate:n},e,t){return N.useMemo(()=>{const i=WS();return GS(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function E8(n,e,t){const i=n.style||{},r={};return C4(r,i,n),Object.assign(r,S8(n,e,t)),n.transformValues?n.transformValues(r):r}function M8(n,e,t){const i={},r=E8(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=r,i}const T8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function O0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||T8.has(n)}let P4=n=>!O0(n);function A8(n){n&&(P4=e=>e.startsWith("on")?!O0(e):n(e))}try{A8(require("@emotion/is-prop-valid").default)}catch{}function C8(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(P4(r)||t===!0&&O0(r)||!e&&!O0(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function MA(n,e,t){return typeof n=="string"?n:lt.transform(e+t*n)}function P8(n,e,t){const i=MA(e,n.x,n.width),r=MA(t,n.y,n.height);return`${i} ${r}`}const N8={offset:"stroke-dashoffset",array:"stroke-dasharray"},R8={offset:"strokeDashoffset",array:"strokeDasharray"};function L8(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?N8:R8;n[s.offset]=lt.transform(-i);const o=lt.transform(e),a=lt.transform(t);n[s.array]=`${o} ${a}`}function $S(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,p,m){if(GS(n,c,u,m),p){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:y,dimensions:_}=n;g.transform&&(_&&(y.transform=g.transform),delete g.transform),_&&(r!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=P8(_,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),i!==void 0&&(g.scale=i),o!==void 0&&L8(g,o,a,l,!1)}const N4=()=>({...WS(),attrs:{}}),XS=n=>typeof n=="string"&&n.toLowerCase()==="svg";function I8(n,e,t,i){const r=N.useMemo(()=>{const s=N4();return $S(s,e,{enableHardwareAcceleration:!1},XS(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};C4(s,n.style,n),r.style={...s,...r.style}}return r}function k8(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(HS(t)?I8:M8)(i,s,o,t),u={...C8(i,typeof t=="string",n),...l,ref:r},{children:p}=i,m=N.useMemo(()=>Yi(p)?p.get():p,[p]);return N.createElement(t,{...u,children:m})}}const qS=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function R4(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const L4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function I4(n,e,t,i){R4(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(L4.has(r)?r:qS(r),e.attrs[r])}function YS(n,e){const{style:t}=n,i={};for(const r in t)(Yi(t[r])||e.style&&Yi(e.style[r])||S4(r,n))&&(i[r]=t[r]);return i}function k4(n,e){const t=YS(n,e);for(const i in n)if(Yi(n[i])||Yi(e[i])){const r=qf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[r]=n[i]}return t}function KS(n,e,t,i={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),e}function ZS(n){const e=N.useRef(null);return e.current===null&&(e.current=n()),e.current}const F0=n=>Array.isArray(n),D8=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),j8=n=>F0(n)?n[n.length-1]||0:n;function qg(n){const e=Yi(n)?n.get():n;return D8(e)?e.toValue():e}function O8({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:F8(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const D4=n=>(e,t)=>{const i=N.useContext(Ev),r=N.useContext(Mv),s=()=>O8(n,e,i,r);return t?s():ZS(s)};function F8(n,e,t,i){const r={},s=i(n,{});for(const m in s)r[m]=qg(s[m]);let{initial:o,animate:a}=n;const l=Pv(n),c=w4(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const p=u?a:o;return p&&typeof p!="boolean"&&!Cv(p)&&(Array.isArray(p)?p:[p]).forEach(g=>{const y=KS(n,g);if(!y)return;const{transitionEnd:_,transition:S,...v}=y;for(const b in v){let w=v[b];if(Array.isArray(w)){const M=u?w.length-1:0;w=w[M]}w!==null&&(r[b]=w)}for(const b in _)r[b]=_[b]}),r}const xn=n=>n;class TA{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function U8(n){let e=new TA,t=new TA,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const p=u&&r,m=p?e:t;return c&&o.add(l),m.add(l)&&p&&r&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let c=0;c<i;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),n())}r=!1,s&&(s=!1,a.process(l))}};return a}const km=["prepare","read","update","preRender","render","postRender"],z8=40;function B8(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=km.reduce((p,m)=>(p[m]=U8(()=>t=!0),p),{}),o=p=>s[p].process(r),a=()=>{const p=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(p-r.timestamp,z8),1),r.timestamp=p,r.isProcessing=!0,km.forEach(o),r.isProcessing=!1,t&&e&&(i=!1,n(a))},l=()=>{t=!0,i=!0,r.isProcessing||n(a)};return{schedule:km.reduce((p,m)=>{const g=s[m];return p[m]=(y,_=!1,S=!1)=>(t||l(),g.schedule(y,_,S)),p},{}),cancel:p=>km.forEach(m=>s[m].cancel(p)),state:r,steps:s}}const{schedule:Ht,cancel:ks,state:jn,steps:Hx}=B8(typeof requestAnimationFrame<"u"?requestAnimationFrame:xn,!0),V8={useVisualState:D4({scrapeMotionValuesFromProps:k4,createRenderState:N4,onMount:(n,e,{renderState:t,latestValues:i})=>{Ht.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Ht.render(()=>{$S(t,i,{enableHardwareAcceleration:!1},XS(e.tagName),n.transformTemplate),I4(e,t)})}})},H8={useVisualState:D4({scrapeMotionValuesFromProps:YS,createRenderState:WS})};function G8(n,{forwardMotionProps:e=!1},t,i){return{...HS(n)?V8:H8,preloadedFeatures:t,useRender:k8(e),createVisualElement:i,Component:n}}function lo(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const j4=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Rv(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const W8=n=>e=>j4(e)&&n(e,Rv(e));function ho(n,e,t,i){return lo(n,e,W8(t),i)}const $8=(n,e)=>t=>e(n(t)),ga=(...n)=>n.reduce($8);function O4(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const AA=O4("dragHorizontal"),CA=O4("dragVertical");function F4(n){let e=!1;if(n==="y")e=CA();else if(n==="x")e=AA();else{const t=AA(),i=CA();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function U4(){const n=F4(!0);return n?(n(),!1):!0}class Fa{constructor(e){this.isMounted=!1,this.node=e}update(){}}function PA(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||U4())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[i]&&Ht.update(()=>a[i](s,o))};return ho(n.current,t,r,{passive:!n.getProps()[i]})}class X8 extends Fa{mount(){this.unmount=ga(PA(this.node,!0),PA(this.node,!1))}unmount(){}}class q8 extends Fa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ga(lo(this.node.current,"focus",()=>this.onFocus()),lo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const z4=(n,e)=>e?n===e?!0:z4(n,e.parentElement):!1;function Gx(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Rv(t))}class Y8 extends Fa{constructor(){super(...arguments),this.removeStartListeners=xn,this.removeEndListeners=xn,this.removeAccessibleListeners=xn,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=ho(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u}=this.node.getProps();Ht.update(()=>{z4(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=ho(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=ga(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Gx("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Ht.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=lo(this.node.current,"keyup",o),Gx("down",(a,l)=>{this.startPress(a,l)})},t=lo(this.node.current,"keydown",e),i=()=>{this.isPressing&&Gx("cancel",(s,o)=>this.cancelPress(s,o))},r=lo(this.node.current,"blur",i);this.removeAccessibleListeners=ga(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Ht.update(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!U4()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Ht.update(()=>i(e,t))}mount(){const e=this.node.getProps(),t=ho(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=lo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ga(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const gw=new WeakMap,Wx=new WeakMap,K8=n=>{const e=gw.get(n.target);e&&e(n)},Z8=n=>{n.forEach(K8)};function J8({root:n,...e}){const t=n||document;Wx.has(t)||Wx.set(t,{});const i=Wx.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Z8,{root:n,...e})),i[r]}function Q8(n,e,t){const i=J8(e);return gw.set(n,t),i.observe(n),()=>{gw.delete(n),i.unobserve(n)}}const eV={some:0,all:1};class tV extends Fa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:eV[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:p}=this.node.getProps(),m=c?u:p;m&&m(l)};return Q8(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(nV(e,t))&&this.startObserver()}unmount(){}}function nV({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const iV={inView:{Feature:tV},tap:{Feature:Y8},focus:{Feature:q8},hover:{Feature:X8}};function B4(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function rV(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function sV(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function Lv(n,e,t){const i=n.getProps();return KS(i,e,t!==void 0?t:i.custom,rV(n),sV(n))}const oV="framerAppearId",aV="data-"+qS(oV);let V4=xn,Iv=xn;const va=n=>n*1e3,fo=n=>n/1e3,lV={current:!1},H4=n=>Array.isArray(n)&&typeof n[0]=="number";function G4(n){return!!(!n||typeof n=="string"&&W4[n]||H4(n)||Array.isArray(n)&&n.every(G4))}const yh=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,W4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:yh([0,.65,.55,1]),circOut:yh([.55,0,1,.45]),backIn:yh([.31,.01,.66,-.59]),backOut:yh([.33,1.53,.69,.99])};function $4(n){if(n)return H4(n)?yh(n):Array.isArray(n)?n.map($4):W4[n]}function cV(n,e,t,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=$4(a);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function uV(n,{repeat:e,repeatType:t="loop"}){const i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const X4=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,dV=1e-7,hV=12;function fV(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=X4(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>dV&&++a<hV);return o}function Zf(n,e,t,i){if(n===e&&t===i)return xn;const r=s=>fV(s,0,1,n,t);return s=>s===0||s===1?s:X4(r(s),e,i)}const pV=Zf(.42,0,1,1),mV=Zf(0,0,.58,1),q4=Zf(.42,0,.58,1),gV=n=>Array.isArray(n)&&typeof n[0]!="number",Y4=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,K4=n=>e=>1-n(1-e),Z4=n=>1-Math.sin(Math.acos(n)),JS=K4(Z4),vV=Y4(JS),J4=Zf(.33,1.53,.69,.99),QS=K4(J4),yV=Y4(QS),xV=n=>(n*=2)<1?.5*QS(n):.5*(2-Math.pow(2,-10*(n-1))),_V={linear:xn,easeIn:pV,easeInOut:q4,easeOut:mV,circIn:Z4,circInOut:vV,circOut:JS,backIn:QS,backInOut:yV,backOut:J4,anticipate:xV},NA=n=>{if(Array.isArray(n)){Iv(n.length===4);const[e,t,i,r]=n;return Zf(e,t,i,r)}else if(typeof n=="string")return _V[n];return n},eE=(n,e)=>t=>!!(Yf(t)&&_8.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),Q4=(n,e,t)=>i=>{if(!Yf(i))return i;const[r,s,o,a]=i.match(Nv);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},wV=n=>Ta(0,255,n),$x={...Ql,transform:n=>Math.round(wV(n))},El={test:eE("rgb","red"),parse:Q4("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+$x.transform(n)+", "+$x.transform(e)+", "+$x.transform(t)+", "+kh(Ih.transform(i))+")"};function bV(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const vw={test:eE("#"),parse:bV,transform:El.transform},pu={test:eE("hsl","hue"),parse:Q4("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Ls.transform(kh(e))+", "+Ls.transform(kh(t))+", "+kh(Ih.transform(i))+")"},Ti={test:n=>El.test(n)||vw.test(n)||pu.test(n),parse:n=>El.test(n)?El.parse(n):pu.test(n)?pu.parse(n):vw.parse(n),transform:n=>Yf(n)?n:n.hasOwnProperty("red")?El.transform(n):pu.transform(n)},un=(n,e,t)=>-t*n+t*e+n;function Xx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function SV({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=Xx(l,a,n+1/3),s=Xx(l,a,n),o=Xx(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const qx=(n,e,t)=>{const i=n*n;return Math.sqrt(Math.max(0,t*(e*e-i)+i))},EV=[vw,El,pu],MV=n=>EV.find(e=>e.test(n));function RA(n){const e=MV(n);let t=e.parse(n);return e===pu&&(t=SV(t)),t}const eI=(n,e)=>{const t=RA(n),i=RA(e),r={...t};return s=>(r.red=qx(t.red,i.red,s),r.green=qx(t.green,i.green,s),r.blue=qx(t.blue,i.blue,s),r.alpha=un(t.alpha,i.alpha,s),El.transform(r))};function TV(n){var e,t;return isNaN(n)&&Yf(n)&&(((e=n.match(Nv))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(T4))===null||t===void 0?void 0:t.length)||0)>0}const tI={regex:y8,countKey:"Vars",token:"${v}",parse:xn},nI={regex:T4,countKey:"Colors",token:"${c}",parse:Ti.parse},iI={regex:Nv,countKey:"Numbers",token:"${n}",parse:Ql.parse};function Yx(n,{regex:e,countKey:t,token:i,parse:r}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,i),n.values.push(...s.map(r)))}function U0(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&Yx(t,tI),Yx(t,nI),Yx(t,iI),t}function rI(n){return U0(n).values}function sI(n){const{values:e,numColors:t,numVars:i,tokenised:r}=U0(n),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(tI.token,o[l]):l<i+t?a=a.replace(nI.token,Ti.transform(o[l])):a=a.replace(iI.token,kh(o[l]));return a}}const AV=n=>typeof n=="number"?0:n;function CV(n){const e=rI(n);return sI(n)(e.map(AV))}const Aa={test:TV,parse:rI,createTransformer:sI,getAnimatableNone:CV},oI=(n,e)=>t=>`${t>0?e:n}`;function aI(n,e){return typeof n=="number"?t=>un(n,e,t):Ti.test(n)?eI(n,e):n.startsWith("var(")?oI(n,e):cI(n,e)}const lI=(n,e)=>{const t=[...n],i=t.length,r=n.map((s,o)=>aI(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}},PV=(n,e)=>{const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=aI(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}},cI=(n,e)=>{const t=Aa.createTransformer(e),i=U0(n),r=U0(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?ga(lI(i.values,r.values),t):oI(n,e)},Gu=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},LA=(n,e)=>t=>un(n,e,t);function NV(n){return typeof n=="number"?LA:typeof n=="string"?Ti.test(n)?eI:cI:Array.isArray(n)?lI:typeof n=="object"?PV:LA}function RV(n,e,t){const i=[],r=t||NV(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||xn:e;a=ga(l,a)}i.push(a)}return i}function tE(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(Iv(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=RV(e,i,r),a=o.length,l=c=>{let u=0;if(a>1)for(;u<n.length-2&&!(c<n[u+1]);u++);const p=Gu(n[u],n[u+1],c);return o[u](p)};return t?c=>l(Ta(n[0],n[s-1],c)):l}function LV(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Gu(0,e,i);n.push(un(t,1,r))}}function uI(n){const e=[0];return LV(e,n.length-1),e}function IV(n,e){return n.map(t=>t*e)}function kV(n,e){return n.map(()=>e||q4).splice(0,n.length-1)}function z0({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=gV(i)?i.map(NA):NA(i),s={done:!1,value:e[0]},o=IV(t&&t.length===e.length?t:uI(e),n),a=tE(o,e,{ease:Array.isArray(r)?r:kV(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function nE(n,e){return e?n*(1e3/e):0}const DV=5;function dI(n,e,t){const i=Math.max(e-DV,0);return nE(t-n(i),e-i)}const Kx=.001,jV=.01,IA=10,OV=.05,FV=1;function UV({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s;V4(n<=va(IA));let o=1-e;o=Ta(OV,FV,o),n=Ta(jV,IA,fo(n)),o<1?(r=c=>{const u=c*o,p=u*n,m=u-t,g=yw(c,o),y=Math.exp(-p);return Kx-m/g*y},s=c=>{const p=c*o*n,m=p*t+t,g=Math.pow(o,2)*Math.pow(c,2)*n,y=Math.exp(-p),_=yw(Math.pow(c,2),o);return(-r(c)+Kx>0?-1:1)*((m-g)*y)/_}):(r=c=>{const u=Math.exp(-c*n),p=(c-t)*n+1;return-Kx+u*p},s=c=>{const u=Math.exp(-c*n),p=(t-c)*(n*n);return u*p});const a=5/n,l=BV(r,s,a);if(n=va(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const zV=12;function BV(n,e,t){let i=t;for(let r=1;r<zV;r++)i=i-n(i)/e(i);return i}function yw(n,e){return n*Math.sqrt(1-e*e)}const VV=["duration","bounce"],HV=["stiffness","damping","mass"];function kA(n,e){return e.some(t=>n[t]!==void 0)}function GV(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!kA(n,HV)&&kA(n,VV)){const t=UV(n);e={...e,...t,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function hI({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,velocity:u,duration:p,isResolvedFromDuration:m}=GV(i),g=u?-fo(u):0,y=l/(2*Math.sqrt(a*c)),_=s-r,S=fo(Math.sqrt(a/c)),v=Math.abs(_)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let b;if(y<1){const w=yw(S,y);b=M=>{const A=Math.exp(-y*S*M);return s-A*((g+y*S*_)/w*Math.sin(w*M)+_*Math.cos(w*M))}}else if(y===1)b=w=>s-Math.exp(-S*w)*(_+(g+S*_)*w);else{const w=S*Math.sqrt(y*y-1);b=M=>{const A=Math.exp(-y*S*M),P=Math.min(w*M,300);return s-A*((g+y*S*_)*Math.sinh(P)+w*_*Math.cosh(P))/w}}return{calculatedDuration:m&&p||null,next:w=>{const M=b(w);if(m)o.done=w>=p;else{let A=g;w!==0&&(y<1?A=dI(b,w,M):A=0);const P=Math.abs(A)<=t,L=Math.abs(s-M)<=e;o.done=P&&L}return o.value=o.done?s:M,o}}}function DA({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const p=n[0],m={done:!1,value:p},g=I=>a!==void 0&&I<a||l!==void 0&&I>l,y=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let _=t*e;const S=p+_,v=o===void 0?S:o(S);v!==S&&(_=v-p);const b=I=>-_*Math.exp(-I/i),w=I=>v+b(I),M=I=>{const C=b(I),k=w(I);m.done=Math.abs(C)<=c,m.value=m.done?v:k};let A,P;const L=I=>{g(m.value)&&(A=I,P=hI({keyframes:[m.value,y(m.value)],velocity:dI(w,I,m.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return L(0),{calculatedDuration:null,next:I=>{let C=!1;return!P&&A===void 0&&(C=!0,M(I),L(I)),A!==void 0&&I>A?P.next(I-A):(!C&&M(I),m)}}}const WV=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Ht.update(e,!0),stop:()=>ks(e),now:()=>jn.isProcessing?jn.timestamp:performance.now()}},jA=2e4;function OA(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<jA;)e+=t,i=n.next(e);return e>=jA?1/0:e}const $V={decay:DA,inertia:DA,tween:z0,keyframes:z0,spring:hI};function B0({autoplay:n=!0,delay:e=0,driver:t=WV,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:p,...m}){let g=1,y=!1,_,S;const v=()=>{S=new Promise(Z=>{_=Z})};v();let b;const w=$V[r]||z0;let M;w!==z0&&typeof i[0]!="number"&&(M=tE([0,100],i,{clamp:!1}),i=[0,100]);const A=w({...m,keyframes:i});let P;a==="mirror"&&(P=w({...m,keyframes:[...i].reverse(),velocity:-(m.velocity||0)}));let L="idle",I=null,C=null,k=null;A.calculatedDuration===null&&s&&(A.calculatedDuration=OA(A));const{calculatedDuration:V}=A;let q=1/0,B=1/0;V!==null&&(q=V+o,B=q*(s+1)-o);let U=0;const $=Z=>{if(C===null)return;g>0&&(C=Math.min(C,Z)),g<0&&(C=Math.min(Z-B/g,C)),I!==null?U=I:U=Math.round(Z-C)*g;const te=U-e*(g>=0?1:-1),Q=g>=0?te<0:te>B;U=Math.max(te,0),L==="finished"&&I===null&&(U=B);let se=U,ve=A;if(s){const Xe=U/q;let Ee=Math.floor(Xe),Pe=Xe%1;!Pe&&Xe>=1&&(Pe=1),Pe===1&&Ee--,Ee=Math.min(Ee,s+1);const _e=!!(Ee%2);_e&&(a==="reverse"?(Pe=1-Pe,o&&(Pe-=o/q)):a==="mirror"&&(ve=P));let de=Ta(0,1,Pe);U>B&&(de=a==="reverse"&&_e?1:0),se=de*q}const ge=Q?{done:!1,value:i[0]}:ve.next(se);M&&(ge.value=M(ge.value));let{done:K}=ge;!Q&&V!==null&&(K=g>=0?U>=B:U<=0);const je=I===null&&(L==="finished"||L==="running"&&K);return p&&p(ge.value),je&&D(),ge},X=()=>{b&&b.stop(),b=void 0},ee=()=>{L="idle",X(),_(),v(),C=k=null},D=()=>{L="finished",u&&u(),X(),_()},O=()=>{if(y)return;b||(b=t($));const Z=b.now();l&&l(),I!==null?C=Z-I:(!C||L==="finished")&&(C=Z),L==="finished"&&v(),k=C,I=null,L="running",b.start()};n&&O();const H={then(Z,te){return S.then(Z,te)},get time(){return fo(U)},set time(Z){Z=va(Z),U=Z,I!==null||!b||g===0?I=Z:C=b.now()-Z/g},get duration(){const Z=A.calculatedDuration===null?OA(A):A.calculatedDuration;return fo(Z)},get speed(){return g},set speed(Z){Z===g||!b||(g=Z,H.time=fo(U))},get state(){return L},play:O,pause:()=>{L="paused",I=U},stop:()=>{y=!0,L!=="idle"&&(L="idle",c&&c(),ee())},cancel:()=>{k!==null&&$(k),ee()},complete:()=>{L="finished"},sample:Z=>(C=0,$(Z))};return H}function XV(n){let e;return()=>(e===void 0&&(e=n()),e)}const qV=XV(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),YV=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Dm=10,KV=2e4,ZV=(n,e)=>e.type==="spring"||n==="backgroundColor"||!G4(e.ease);function JV(n,e,{onUpdate:t,onComplete:i,...r}){if(!(qV()&&YV.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l;const c=()=>{l=new Promise(b=>{a=b})};c();let{keyframes:u,duration:p=300,ease:m,times:g}=r;if(ZV(e,r)){const b=B0({...r,repeat:0,delay:0});let w={done:!1,value:u[0]};const M=[];let A=0;for(;!w.done&&A<KV;)w=b.sample(A),M.push(w.value),A+=Dm;g=void 0,u=M,p=A-Dm,m="linear"}const y=cV(n.owner.current,e,u,{...r,duration:p,ease:m,times:g});r.syncStart&&(y.startTime=jn.isProcessing?jn.timestamp:document.timeline?document.timeline.currentTime:performance.now());const _=()=>y.cancel(),S=()=>{Ht.update(_),a(),c()};return y.onfinish=()=>{n.set(uV(u,r)),i&&i(),S()},{then(b,w){return l.then(b,w)},attachTimeline(b){return y.timeline=b,y.onfinish=null,xn},get time(){return fo(y.currentTime||0)},set time(b){y.currentTime=va(b)},get speed(){return y.playbackRate},set speed(b){y.playbackRate=b},get duration(){return fo(p)},play:()=>{o||(y.play(),ks(_))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:b}=y;if(b){const w=B0({...r,autoplay:!1});n.setWithVelocity(w.sample(b-Dm).value,w.sample(b).value,Dm)}S()},complete:()=>y.finish(),cancel:S}}function QV({keyframes:n,delay:e,onUpdate:t,onComplete:i}){const r=()=>(t&&t(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:xn,pause:xn,stop:xn,then:s=>(s(),Promise.resolve()),cancel:xn,complete:xn});return e?B0({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const e7={type:"spring",stiffness:500,damping:25,restSpeed:10},t7=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),n7={type:"keyframes",duration:.8},i7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r7=(n,{keyframes:e})=>e.length>2?n7:Jl.has(n)?n.startsWith("scale")?t7(e[1]):e7:i7,xw=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Aa.test(e)||e==="0")&&!e.startsWith("url(")),s7=new Set(["brightness","contrast","saturate","opacity"]);function o7(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Nv)||[];if(!i)return n;const r=t.replace(i,"");let s=s7.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const a7=/([a-z-]*)\(.*?\)/g,_w={...Aa,getAnimatableNone:n=>{const e=n.match(a7);return e?e.map(o7).join(" "):n}},l7={...A4,color:Ti,backgroundColor:Ti,outlineColor:Ti,fill:Ti,stroke:Ti,borderColor:Ti,borderTopColor:Ti,borderRightColor:Ti,borderBottomColor:Ti,borderLeftColor:Ti,filter:_w,WebkitFilter:_w},iE=n=>l7[n];function fI(n,e){let t=iE(n);return t!==_w&&(t=Aa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const pI=n=>/^0[^.\s]+$/.test(n);function c7(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||pI(n)}function u7(n,e,t,i){const r=xw(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=i.from!==void 0?i.from:n.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),c7(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(r&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];s[u]=fI(e,a)}return s}function d7({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function mI(n,e){return n[e]||n.default||n}const rE=(n,e,t,i={})=>r=>{const s=mI(i,n)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-va(o);const l=u7(e,n,t,s),c=l[0],u=l[l.length-1],p=xw(n,c),m=xw(n,u);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:y=>{e.set(y),s.onUpdate&&s.onUpdate(y)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(d7(s)||(g={...g,...r7(n,g)}),g.duration&&(g.duration=va(g.duration)),g.repeatDelay&&(g.repeatDelay=va(g.repeatDelay)),!p||!m||lV.current||s.type===!1)return QV(g);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=JV(e,n,g);if(y)return y}return B0(g)};function V0(n){return!!(Yi(n)&&n.add)}const gI=n=>/^\-?\d*\.?\d+$/.test(n);function sE(n,e){n.indexOf(e)===-1&&n.push(e)}function oE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class aE{constructor(){this.subscriptions=[]}add(e){return sE(this.subscriptions,e),()=>oE(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const h7=n=>!isNaN(parseFloat(n));class f7{constructor(e,t={}){this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=jn;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Ht.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ht.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=h7(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new aE);const i=this.events[e].add(t);return e==="change"?()=>{i(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?nE(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ps(n,e){return new f7(n,e)}const vI=n=>e=>e.test(n),p7={test:n=>n==="auto",parse:n=>n},yI=[Ql,lt,Ls,Wo,b8,w8,p7],$d=n=>yI.find(vI(n)),m7=[...yI,Ti,Aa],g7=n=>m7.find(vI(n));function v7(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ps(t))}function y7(n,e){const t=Lv(n,e);let{transitionEnd:i={},transition:r={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...i};for(const o in s){const a=j8(s[o]);v7(n,o,a)}}function x7(n,e,t){var i,r;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(r=(i=t[l])!==null&&i!==void 0?i:n.readValue(l))!==null&&r!==void 0?r:e[l]),u!=null&&(typeof u=="string"&&(gI(u)||pI(u))?u=parseFloat(u):!g7(u)&&Aa.test(c)&&(u=fI(l,c)),n.addValue(l,Ps(u,{owner:n})),t[l]===void 0&&(t[l]=u),u!==null&&n.setBaseTarget(l,u))}}function _7(n,e){return e?(e[n]||e.default||e).from:void 0}function w7(n,e,t){const i={};for(const r in n){const s=_7(r,e);if(s!==void 0)i[r]=s;else{const o=t.getValue(r);o&&(i[r]=o.get())}}return i}function b7({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function xI(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");i&&(s=i);const c=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const p in a){const m=n.getValue(p),g=a[p];if(!m||g===void 0||u&&b7(u,p))continue;const y={delay:t,elapsed:0,...s};if(window.HandoffAppearAnimations&&!m.hasAnimated){const S=n.getProps()[aV];S&&(y.elapsed=window.HandoffAppearAnimations(S,p,m,Ht),y.syncStart=!0)}m.start(rE(p,m,g,n.shouldReduceMotion&&Jl.has(p)?{type:!1}:y));const _=m.animation;V0(l)&&(l.add(p),_.then(()=>l.remove(p))),c.push(_)}return o&&Promise.all(c).then(()=>{o&&y7(n,o)}),c}function ww(n,e,t={}){const i=Lv(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(xI(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:p}=r;return S7(n,e,c+l,u,p,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(t.delay)])}function S7(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(E7).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(ww(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function E7(n,e){return n.sortNodePosition(e)}function M7(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>ww(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=ww(n,e,t);else{const r=typeof e=="function"?Lv(n,e,t.custom):e;i=Promise.all(xI(n,r,t))}return i.then(()=>n.notify("AnimationComplete",e))}const T7=[...zS].reverse(),A7=zS.length;function C7(n){return e=>Promise.all(e.map(({animation:t,options:i})=>M7(n,t,i)))}function P7(n){let e=C7(n);const t=R7();let i=!0;const r=(l,c)=>{const u=Lv(n,c);if(u){const{transition:p,transitionEnd:m,...g}=u;l={...l,...g,...m}}return l};function s(l){e=l(n)}function o(l,c){const u=n.getProps(),p=n.getVariantContext(!0)||{},m=[],g=new Set;let y={},_=1/0;for(let v=0;v<A7;v++){const b=T7[v],w=t[b],M=u[b]!==void 0?u[b]:p[b],A=mf(M),P=b===c?w.isActive:null;P===!1&&(_=v);let L=M===p[b]&&M!==u[b]&&A;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),w.protectedKeys={...y},!w.isActive&&P===null||!M&&!w.prevProp||Cv(M)||typeof M=="boolean")continue;const I=N7(w.prevProp,M);let C=I||b===c&&w.isActive&&!L&&A||v>_&&A;const k=Array.isArray(M)?M:[M];let V=k.reduce(r,{});P===!1&&(V={});const{prevResolvedValues:q={}}=w,B={...q,...V},U=$=>{C=!0,g.delete($),w.needsAnimating[$]=!0};for(const $ in B){const X=V[$],ee=q[$];y.hasOwnProperty($)||(X!==ee?F0(X)&&F0(ee)?!B4(X,ee)||I?U($):w.protectedKeys[$]=!0:X!==void 0?U($):g.add($):X!==void 0&&g.has($)?U($):w.protectedKeys[$]=!0)}w.prevProp=M,w.prevResolvedValues=V,w.isActive&&(y={...y,...V}),i&&n.blockInitialAnimation&&(C=!1),C&&!L&&m.push(...k.map($=>({animation:$,options:{type:b,...l}})))}if(g.size){const v={};g.forEach(b=>{const w=n.getBaseTarget(b);w!==void 0&&(v[b]=w)}),m.push({animation:v})}let S=!!m.length;return i&&u.initial===!1&&!n.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(m):Promise.resolve()}function a(l,c,u){var p;if(t[l].isActive===c)return Promise.resolve();(p=n.variantChildren)===null||p===void 0||p.forEach(g=>{var y;return(y=g.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),t[l].isActive=c;const m=o(u,l);for(const g in t)t[g].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function N7(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!B4(e,n):!1}function el(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function R7(){return{animate:el(!0),whileInView:el(),whileHover:el(),whileTap:el(),whileDrag:el(),whileFocus:el(),exit:el()}}class L7 extends Fa{constructor(e){super(e),e.animationState||(e.animationState=P7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Cv(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let I7=0;class k7 extends Fa{constructor(){super(...arguments),this.id=I7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const D7={animation:{Feature:L7},exit:{Feature:k7}},FA=(n,e)=>Math.abs(n-e);function j7(n,e){const t=FA(n.x,e.x),i=FA(n.y,e.y);return Math.sqrt(t**2+i**2)}class _I{constructor(e,t,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=Jx(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,p=j7(c.offset,{x:0,y:0})>=3;if(!u&&!p)return;const{point:m}=c,{timestamp:g}=jn;this.history.push({...m,timestamp:g});const{onStart:y,onMove:_}=this.handlers;u||(y&&y(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,c)},this.handlePointerMove=(c,u)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=Zx(u,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(c,u)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:p,onSessionEnd:m}=this.handlers,g=Jx(c.type==="pointercancel"?this.lastMoveEventInfo:Zx(u,this.transformPagePoint),this.history);this.startEvent&&p&&p(c,g),m&&m(c,g)},!j4(e))return;this.handlers=t,this.transformPagePoint=i;const r=Rv(e),s=Zx(r,this.transformPagePoint),{point:o}=s,{timestamp:a}=jn;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,Jx(s,this.history)),this.removeListeners=ga(ho(window,"pointermove",this.handlePointerMove),ho(window,"pointerup",this.handlePointerUp),ho(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ks(this.updatePoint)}}function Zx(n,e){return e?{point:e(n.point)}:n}function UA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Jx({point:n},e){return{point:n,delta:UA(n,wI(e)),offset:UA(n,O7(e)),velocity:F7(e,.1)}}function O7(n){return n[0]}function wI(n){return n[n.length-1]}function F7(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=wI(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>va(e)));)t--;if(!i)return{x:0,y:0};const s=fo(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function dr(n){return n.max-n.min}function bw(n,e=0,t=.01){return Math.abs(n-e)<=t}function zA(n,e,t,i=.5){n.origin=i,n.originPoint=un(e.min,e.max,n.origin),n.scale=dr(t)/dr(e),(bw(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=un(t.min,t.max,n.origin)-n.originPoint,(bw(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Dh(n,e,t,i){zA(n.x,e.x,t.x,i?i.originX:void 0),zA(n.y,e.y,t.y,i?i.originY:void 0)}function BA(n,e,t){n.min=t.min+e.min,n.max=n.min+dr(e)}function U7(n,e,t){BA(n.x,e.x,t.x),BA(n.y,e.y,t.y)}function VA(n,e,t){n.min=e.min-t.min,n.max=n.min+dr(e)}function jh(n,e,t){VA(n.x,e.x,t.x),VA(n.y,e.y,t.y)}function z7(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?un(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?un(t,n,i.max):Math.min(n,t)),n}function HA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function B7(n,{top:e,left:t,bottom:i,right:r}){return{x:HA(n.x,t,r),y:HA(n.y,e,i)}}function GA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function V7(n,e){return{x:GA(n.x,e.x),y:GA(n.y,e.y)}}function H7(n,e){let t=.5;const i=dr(n),r=dr(e);return r>i?t=Gu(e.min,e.max-i,n.min):i>r&&(t=Gu(n.min,n.max-r,e.min)),Ta(0,1,t)}function G7(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Sw=.35;function W7(n=Sw){return n===!1?n=0:n===!0&&(n=Sw),{x:WA(n,"left","right"),y:WA(n,"top","bottom")}}function WA(n,e,t){return{min:$A(n,e),max:$A(n,t)}}function $A(n,e){return typeof n=="number"?n:n[e]||0}const XA=()=>({translate:0,scale:1,origin:0,originPoint:0}),mu=()=>({x:XA(),y:XA()}),qA=()=>({min:0,max:0}),Ln=()=>({x:qA(),y:qA()});function Es(n){return[n("x"),n("y")]}function bI({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function $7({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function X7(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function Qx(n){return n===void 0||n===1}function Ew({scale:n,scaleX:e,scaleY:t}){return!Qx(n)||!Qx(e)||!Qx(t)}function hl(n){return Ew(n)||SI(n)||n.z||n.rotate||n.rotateX||n.rotateY}function SI(n){return YA(n.x)||YA(n.y)}function YA(n){return n&&n!=="0%"}function H0(n,e,t){const i=n-t,r=e*i;return t+r}function KA(n,e,t,i,r){return r!==void 0&&(n=H0(n,r,i)),H0(n,t,i)+e}function Mw(n,e=0,t=1,i,r){n.min=KA(n.min,e,t,i,r),n.max=KA(n.max,e,t,i,r)}function EI(n,{x:e,y:t}){Mw(n.x,e.translate,e.scale,e.originPoint),Mw(n.y,t.translate,t.scale,t.originPoint)}function q7(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&gu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,EI(n,o)),i&&hl(s.latestValues)&&gu(n,s.latestValues))}e.x=ZA(e.x),e.y=ZA(e.y)}function ZA(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Jo(n,e){n.min=n.min+e,n.max=n.max+e}function JA(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=un(n.min,n.max,s);Mw(n,e[t],e[i],o,e.scale)}const Y7=["x","scaleX","originX"],K7=["y","scaleY","originY"];function gu(n,e){JA(n.x,e,Y7),JA(n.y,e,K7)}function MI(n,e){return bI(X7(n.getBoundingClientRect(),e))}function Z7(n,e,t){const i=MI(n,t),{scroll:r}=e;return r&&(Jo(i.x,r.offset.x),Jo(i.y,r.offset.y)),i}const J7=new WeakMap;class Q7{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ln(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=l=>{this.stopAnimation(),t&&this.snapToCursor(Rv(l,"page").point)},s=(l,c)=>{const{drag:u,dragPropagation:p,onDragStart:m}=this.getProps();if(u&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=F4(u),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Es(y=>{let _=this.getAxisMotionValue(y).get()||0;if(Ls.test(_)){const{projection:S}=this.visualElement;if(S&&S.layout){const v=S.layout.layoutBox[y];v&&(_=dr(v)*(parseFloat(_)/100))}}this.originPoint[y]=_}),m&&Ht.update(()=>m(l,c),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(l,c)=>{const{dragPropagation:u,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!u&&!this.openGlobalLock)return;const{offset:y}=c;if(p&&this.currentDirection===null){this.currentDirection=eH(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",c.point,y),this.updateAxis("y",c.point,y),this.visualElement.render(),g&&g(l,c)},a=(l,c)=>this.stop(l,c);this.panSession=new _I(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ht.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!jm(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=z7(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:i}=this.visualElement.projection||{},r=this.constraints;e&&fu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=B7(i.layoutBox,e):this.constraints=!1,this.elastic=W7(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Es(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=G7(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!fu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Z7(i,r.root,this.visualElement.getTransformPagePoint());let o=V7(r.layout.layoutBox,s);if(t){const a=t($7(o));this.hasMutatedConstraints=!!a,a&&(o=bI(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Es(u=>{if(!jm(u,t,this.currentDirection))return;let p=l&&l[u]||{};o&&(p={min:0,max:0});const m=r?200:1e6,g=r?40:1e7,y={type:"inertia",velocity:i?e[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(rE(e,i,0,t))}stopAnimation(){Es(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Es(t=>{const{drag:i}=this.getProps();if(!jm(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-un(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!fu(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Es(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=H7({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Es(o=>{if(!jm(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(un(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;J7.set(this.visualElement,this);const e=this.visualElement.current,t=ho(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();fu(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=lo(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Es(u=>{const p=this.getAxisMotionValue(u);p&&(this.originPoint[u]+=l[u].translate,p.set(p.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=Sw,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function jm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function eH(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class tH extends Fa{constructor(e){super(e),this.removeGroupControls=xn,this.removeListeners=xn,this.controls=new Q7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xn}unmount(){this.removeGroupControls(),this.removeListeners()}}const QA=n=>(e,t)=>{n&&Ht.update(()=>n(e,t))};class nH extends Fa{constructor(){super(...arguments),this.removePointerDownListener=xn}onPointerDown(e){this.session=new _I(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:QA(e),onStart:QA(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Ht.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=ho(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function iH(){const n=N.useContext(Mv);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=N.useId();return N.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const Yg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function eC(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Xd={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(lt.test(n))n=parseFloat(n);else return n;const t=eC(n,e.target.x),i=eC(n,e.target.y);return`${t}% ${i}%`}},rH={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Aa.parse(n);if(r.length>5)return i;const s=Aa.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=un(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class sH extends Dt.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;p8(oH),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Yg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ht.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TI(n){const[e,t]=iH(),i=N.useContext(VS);return Dt.createElement(sH,{...n,layoutGroup:i,switchLayoutGroup:N.useContext(b4),isPresent:e,safeToRemove:t})}const oH={borderRadius:{...Xd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xd,borderTopRightRadius:Xd,borderBottomLeftRadius:Xd,borderBottomRightRadius:Xd,boxShadow:rH},AI=["TopLeft","TopRight","BottomLeft","BottomRight"],aH=AI.length,tC=n=>typeof n=="string"?parseFloat(n):n,nC=n=>typeof n=="number"||lt.test(n);function lH(n,e,t,i,r,s){r?(n.opacity=un(0,t.opacity!==void 0?t.opacity:1,cH(i)),n.opacityExit=un(e.opacity!==void 0?e.opacity:1,0,uH(i))):s&&(n.opacity=un(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<aH;o++){const a=`border${AI[o]}Radius`;let l=iC(e,a),c=iC(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||nC(l)===nC(c)?(n[a]=Math.max(un(tC(l),tC(c),i),0),(Ls.test(c)||Ls.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=un(e.rotate||0,t.rotate||0,i))}function iC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const cH=CI(0,.5,JS),uH=CI(.5,.95,xn);function CI(n,e,t){return i=>i<n?0:i>e?1:t(Gu(n,e,i))}function rC(n,e){n.min=e.min,n.max=e.max}function Sr(n,e){rC(n.x,e.x),rC(n.y,e.y)}function sC(n,e,t,i,r){return n-=e,n=H0(n,1/t,i),r!==void 0&&(n=H0(n,1/r,i)),n}function dH(n,e=0,t=1,i=.5,r,s=n,o=n){if(Ls.test(e)&&(e=parseFloat(e),e=un(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=un(s.min,s.max,i);n===s&&(a-=e),n.min=sC(n.min,e,t,a,r),n.max=sC(n.max,e,t,a,r)}function oC(n,e,[t,i,r],s,o){dH(n,e[t],e[i],e[r],e.scale,s,o)}const hH=["x","scaleX","originX"],fH=["y","scaleY","originY"];function aC(n,e,t,i){oC(n.x,e,hH,t?t.x:void 0,i?i.x:void 0),oC(n.y,e,fH,t?t.y:void 0,i?i.y:void 0)}function lC(n){return n.translate===0&&n.scale===1}function PI(n){return lC(n.x)&&lC(n.y)}function pH(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function NI(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function cC(n){return dr(n.x)/dr(n.y)}class mH{constructor(){this.members=[]}add(e){sE(this.members,e),e.scheduleRender()}remove(e){if(oE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uC(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:c,rotateY:u}=t;l&&(i+=`rotate(${l}deg) `),c&&(i+=`rotateX(${c}deg) `),u&&(i+=`rotateY(${u}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const gH=(n,e)=>n.depth-e.depth;class vH{constructor(){this.children=[],this.isDirty=!1}add(e){sE(this.children,e),this.isDirty=!0}remove(e){oE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gH),this.isDirty=!1,this.children.forEach(e)}}function yH(n,e){const t=performance.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(ks(i),n(s-e))};return Ht.read(i,!0),()=>ks(i)}function xH(n){window.MotionDebug&&window.MotionDebug.record(n)}function _H(n){return n instanceof SVGElement&&n.tagName!=="svg"}function wH(n,e,t){const i=Yi(n)?n:Ps(n);return i.start(rE("",i,e,t)),i.animation}const dC=["","X","Y","Z"],hC=1e3;let bH=0;const fl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function RI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=bH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{fl.totalNodes=fl.resolvedTargetDeltas=fl.recalculatedProjection=0,this.nodes.forEach(MH),this.nodes.forEach(NH),this.nodes.forEach(RH),this.nodes.forEach(TH),xH(fl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new vH)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new aE),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_H(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let p;const m=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=yH(m,250),Yg.hasAnimatedSinceResize&&(Yg.hasAnimatedSinceResize=!1,this.nodes.forEach(pC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||jH,{onLayoutAnimationStart:S,onLayoutAnimationComplete:v}=u.getProps(),b=!this.targetLayout||!NI(this.targetLayout,y)||g,w=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||m&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,w);const M={...mI(_,"layout"),onPlay:S,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else m||pC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ks(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const p=this.path[u];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fC);return}this.isUpdating||this.nodes.forEach(CH),this.isUpdating=!1,this.nodes.forEach(PH),this.nodes.forEach(SH),this.nodes.forEach(EH),this.clearAllSnapshots();const a=performance.now();jn.delta=Ta(0,1e3/60,a-jn.timestamp),jn.timestamp=a,jn.isProcessing=!0,Hx.update.process(jn),Hx.preRender.process(jn),Hx.render.process(jn),jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(AH),this.sharedNodes.forEach(IH)}scheduleUpdateProjection(){Ht.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!PI(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||hl(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),OH(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ln();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Jo(a.x,l.offset.x),Jo(a.y,l.offset.y)),a}removeElementScroll(o){const a=Ln();Sr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:p}=c;if(c!==this.root&&u&&p.layoutScroll){if(u.isRoot){Sr(a,o);const{scroll:m}=this.root;m&&(Jo(a.x,-m.offset.x),Jo(a.y,-m.offset.y))}Jo(a.x,u.offset.x),Jo(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=Ln();Sr(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&gu(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),hl(u.latestValues)&&gu(l,u.latestValues)}return hl(this.latestValues)&&gu(l,this.latestValues),l}removeTransform(o){const a=Ln();Sr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!hl(c.latestValues))continue;Ew(c.latestValues)&&c.updateSnapshot();const u=Ln(),p=c.measurePageBox();Sr(u,p),aC(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return hl(this.latestValues)&&aC(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=jn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),jh(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ln(),this.targetWithTransforms=Ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),U7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Sr(this.target,this.layout.layoutBox),EI(this.target,this.targetDelta)):Sr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),jh(this.relativeTargetOrigin,this.target,g.target),Sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ew(this.parent.latestValues)||SI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===jn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||p))return;Sr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;q7(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=mu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=mu(),this.projectionDeltaWithTransform=mu());const _=this.projectionTransform;Dh(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=uC(this.projectionDelta,this.treeScale),(this.projectionTransform!==_||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),fl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},p=mu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Ln(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,_=g!==y,S=this.getStack(),v=!S||S.members.length<=1,b=!!(_&&!v&&this.options.crossfade===!0&&!this.path.some(DH));this.animationProgress=0;let w;this.mixTargetDelta=M=>{const A=M/1e3;mC(p.x,o.x,A),mC(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jh(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kH(this.relativeTarget,this.relativeTargetOrigin,m,A),w&&pH(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Ln()),Sr(w,this.relativeTarget)),_&&(this.animationValues=u,lH(u,c,this.latestValues,A,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ks(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{Yg.hasAnimatedSinceResize=!0,this.currentAnimation=wH(0,hC,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&LI(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ln();const p=dr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const m=dr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Sr(a,l),gu(a,u),Dh(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mH),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<dC.length;u++){const p="rotate"+dC[u];l[p]&&(c[p]=l[p],o.setStaticValue(p,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=qg(o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=qg(o.pointerEvents)||""),this.hasProjected&&!hl(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=uC(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:g,y}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,p.animationValues?c.opacity=p===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const _ in j0){if(m[_]===void 0)continue;const{correct:S,applyTo:v}=j0[_],b=c.transform==="none"?m[_]:S(m[_],p);if(v){const w=v.length;for(let M=0;M<w;M++)c[v[M]]=b}else c[_]=b}return this.options.layoutId&&(c.pointerEvents=p===this?qg(o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(fC),this.root.sharedNodes.clear()}}}function SH(n){n.updateLayout()}function EH(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Es(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],g=dr(m);m.min=i[p].min,m.max=m.min+g}):LI(s,t.layoutBox,i)&&Es(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],g=dr(i[p]);m.max=m.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+g)});const a=mu();Dh(a,i,t.layoutBox);const l=mu();o?Dh(l,n.applyTransform(r,!0),t.measuredBox):Dh(l,i,t.layoutBox);const c=!PI(a);let u=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:g}=p;if(m&&g){const y=Ln();jh(y,t.layoutBox,m.layoutBox);const _=Ln();jh(_,i,g.layoutBox),NI(y,_)||(u=!0),p.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=y,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function MH(n){fl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function TH(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function AH(n){n.clearSnapshot()}function fC(n){n.clearMeasurements()}function CH(n){n.isLayoutDirty=!1}function PH(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function pC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function NH(n){n.resolveTargetDelta()}function RH(n){n.calcProjection()}function LH(n){n.resetRotation()}function IH(n){n.removeLeadSnapshot()}function mC(n,e,t){n.translate=un(e.translate,0,t),n.scale=un(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function gC(n,e,t,i){n.min=un(e.min,t.min,i),n.max=un(e.max,t.max,i)}function kH(n,e,t,i){gC(n.x,e.x,t.x,i),gC(n.y,e.y,t.y,i)}function DH(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const jH={duration:.45,ease:[.4,0,.1,1]},vC=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),yC=vC("applewebkit/")&&!vC("chrome/")?Math.round:xn;function xC(n){n.min=yC(n.min),n.max=yC(n.max)}function OH(n){xC(n.x),xC(n.y)}function LI(n,e,t){return n==="position"||n==="preserve-aspect"&&!bw(cC(e),cC(t),.2)}const FH=RI({attachResizeListener:(n,e)=>lo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),e1={current:void 0},II=RI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!e1.current){const n=new FH({});n.mount(window),n.setOptions({layoutScroll:!0}),e1.current=n}return e1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),UH={pan:{Feature:nH},drag:{Feature:tH,ProjectionNode:II,MeasureLayout:TI}},zH=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function BH(n){const e=zH.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]}function Tw(n,e,t=1){const[i,r]=BH(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return gI(o)?parseFloat(o):o}else return mw(r)?Tw(r,e,t+1):r}function VH(n,{...e},t){const i=n.current;if(!(i instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const s=r.get();if(!mw(s))return;const o=Tw(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!mw(s))continue;const o=Tw(s,i);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=s))}return{target:e,transitionEnd:t}}const HH=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),kI=n=>HH.has(n),GH=n=>Object.keys(n).some(kI),_C=n=>n===Ql||n===lt,wC=(n,e)=>parseFloat(n.split(", ")[e]),bC=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return wC(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?wC(s[1],n):0}},WH=new Set(["x","y","z"]),$H=qf.filter(n=>!WH.has(n));function XH(n){const e=[];return $H.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Wu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:bC(4,13),y:bC(5,14)};Wu.translateX=Wu.x;Wu.translateY=Wu.y;const qH=(n,e,t)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(c=>{a[c]=Wu[c](i,s)}),e.render();const l=e.measureViewportBox();return t.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),n[c]=Wu[c](l,s)}),n},YH=(n,e,t={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(kI);let s=[],o=!1;const a=[];if(r.forEach(l=>{const c=n.getValue(l);if(!n.hasValue(l))return;let u=t[l],p=$d(u);const m=e[l];let g;if(F0(m)){const y=m.length,_=m[0]===null?1:0;u=m[_],p=$d(u);for(let S=_;S<y&&m[S]!==null;S++)g?Iv($d(m[S])===g):g=$d(m[S])}else g=$d(m);if(p!==g)if(_C(p)&&_C(g)){const y=c.get();typeof y=="string"&&c.set(parseFloat(y)),typeof m=="string"?e[l]=parseFloat(m):Array.isArray(m)&&g===lt&&(e[l]=m.map(parseFloat))}else p!=null&&p.transform&&(g!=null&&g.transform)&&(u===0||m===0)?u===0?c.set(g.transform(u)):e[l]=p.transform(m):(o||(s=XH(n),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],c.jump(m))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=qH(e,n,a);return s.length&&s.forEach(([u,p])=>{n.getValue(u).set(p)}),n.render(),Tv&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:e,transitionEnd:i}};function KH(n,e,t,i){return GH(e)?YH(n,e,t,i):{target:e,transitionEnd:i}}const ZH=(n,e,t,i)=>{const r=VH(n,e,i);return e=r.target,i=r.transitionEnd,KH(n,e,t,i)},Aw={current:null},DI={current:!1};function JH(){if(DI.current=!0,!!Tv)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Aw.current=n.matches;n.addListener(e),e()}else Aw.current=!1}function QH(n,e,t){const{willChange:i}=e;for(const r in e){const s=e[r],o=t[r];if(Yi(s))n.addValue(r,s),V0(i)&&i.add(r);else if(Yi(o))n.addValue(r,Ps(s,{owner:n})),V0(i)&&i.remove(r);else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,Ps(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const SC=new WeakMap,jI=Object.keys(gf),e9=jI.length,EC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],t9=BS.length;class n9{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ht.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=Pv(t),this.isVariantNode=w4(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(t,{});for(const p in u){const m=u[p];a[p]!==void 0&&Yi(m)&&(m.set(a[p],!1),V0(c)&&c.add(p))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,SC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),DI.current||JH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Aw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){SC.delete(this.current),this.projection&&this.projection.unmount(),ks(this.notifyUpdate),ks(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=Jl.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ht.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,r,s){let o,a;for(let l=0;l<e9;l++){const c=jI[l],{isEnabled:u,Feature:p,ProjectionNode:m,MeasureLayout:g}=gf[c];m&&(o=m),u(t)&&(!this.features[c]&&p&&(this.features[c]=new p(this)),g&&(a=g))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:p,layoutScroll:m,layoutRoot:g}=t;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||p&&fu(p),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:m,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<EC.length;i++){const r=EC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=QH(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<t9;i++){const r=BS[i],s=this.props[r];(mf(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Ps(t,{owner:this}),this.addValue(e,i)),i}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(t=KS(this.props,i))===null||t===void 0?void 0:t[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Yi(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new aE),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class OI extends n9{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...i},{transformValues:r},s){let o=w7(i,e||{},this);if(r&&(t&&(t=r(t)),i&&(i=r(i)),o&&(o=r(o))),s){x7(this,i,o);const a=ZH(this,i,o,t);t=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:t,...i}}}function i9(n){return window.getComputedStyle(n)}class r9 extends OI{readValueFromInstance(e,t){if(Jl.has(t)){const i=iE(t);return i&&i.default||0}else{const i=i9(e),r=(M4(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return MI(e,t)}build(e,t,i,r){GS(e,t,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return YS(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){R4(e,t,i,r)}}class s9 extends OI{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Jl.has(t)){const i=iE(t);return i&&i.default||0}return t=L4.has(t)?t:qS(t),e.getAttribute(t)}measureInstanceViewportBox(){return Ln()}scrapeMotionValuesFromProps(e,t){return k4(e,t)}build(e,t,i,r){$S(e,t,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,i,r){I4(e,t,i,r)}mount(e){this.isSVGTag=XS(e.tagName),super.mount(e)}}const o9=(n,e)=>HS(n)?new s9(e,{enableHardwareAcceleration:!1}):new r9(e,{enableHardwareAcceleration:!0}),a9={layout:{ProjectionNode:II,MeasureLayout:TI}},l9={...D7,...iV,...UH,...a9},le=h8((n,e)=>G8(n,e,l9,o9));function FI(){const n=N.useRef(!1);return Av(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function c9(){const n=FI(),[e,t]=N.useState(0),i=N.useCallback(()=>{n.current&&t(e+1)},[e]);return[N.useCallback(()=>Ht.postRender(i),[i]),e]}class u9 extends N.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d9({children:n,isPresent:e}){const t=N.useId(),i=N.useRef(null),r=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=r.current;if(e||!i.current||!s||!o)return;i.current.dataset.motionPopId=t;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),N.createElement(u9,{isPresent:e,childRef:i,sizeRef:r},N.cloneElement(n,{ref:i}))}const t1=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=ZS(h9),l=N.useId(),c=N.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:u=>{a.set(u,!0);for(const p of a.values())if(!p)return;i&&i()},register:u=>(a.set(u,!1),()=>a.delete(u))}),s?void 0:[t]);return N.useMemo(()=>{a.forEach((u,p)=>a.set(p,!1))},[t]),N.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=N.createElement(d9,{isPresent:t},n)),N.createElement(Mv.Provider,{value:c},n)};function h9(){return new Map}function f9(n){return N.useEffect(()=>()=>n(),[])}const Zc=n=>n.key||"";function p9(n,e){n.forEach(t=>{const i=Zc(t);e.set(i,t)})}function m9(n){const e=[];return N.Children.forEach(n,t=>{N.isValidElement(t)&&e.push(t)}),e}const G0=({children:n,custom:e,initial:t=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=N.useContext(VS).forceRender||c9()[0],l=FI(),c=m9(n);let u=c;const p=N.useRef(new Map).current,m=N.useRef(u),g=N.useRef(new Map).current,y=N.useRef(!0);if(Av(()=>{y.current=!1,p9(c,g),m.current=u}),f9(()=>{y.current=!0,g.clear(),p.clear()}),y.current)return N.createElement(N.Fragment,null,u.map(b=>N.createElement(t1,{key:Zc(b),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},b)));u=[...u];const _=m.current.map(Zc),S=c.map(Zc),v=_.length;for(let b=0;b<v;b++){const w=_[b];S.indexOf(w)===-1&&!p.has(w)&&p.set(w,void 0)}return o==="wait"&&p.size&&(u=[]),p.forEach((b,w)=>{if(S.indexOf(w)!==-1)return;const M=g.get(w);if(!M)return;const A=_.indexOf(w);let P=b;if(!P){const L=()=>{g.delete(w),p.delete(w);const I=m.current.findIndex(C=>C.key===w);if(m.current.splice(I,1),!p.size){if(m.current=c,l.current===!1)return;a(),i&&i()}};P=N.createElement(t1,{key:Zc(M),isPresent:!1,onExitComplete:L,custom:e,presenceAffectsLayout:s,mode:o},M),p.set(w,P)}u.splice(A,0,P)}),u=u.map(b=>{const w=b.key;return p.has(w)?b:N.createElement(t1,{key:Zc(b),isPresent:!0,presenceAffectsLayout:s,mode:o},b)}),N.createElement(N.Fragment,null,p.size?u:u.map(b=>N.cloneElement(b)))};function UI(n,e,t){var i;if(typeof n=="string"){let r=document;e&&(Iv(!!e.current),r=e.current),t?((i=t[n])!==null&&i!==void 0||(t[n]=r.querySelectorAll(n)),n=t[n]):n=r.querySelectorAll(n)}else n instanceof Element&&(n=[n]);return Array.from(n||[])}const Kg=new WeakMap;let $o;function g9(n,e){if(e){const{inlineSize:t,blockSize:i}=e[0];return{width:t,height:i}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function v9({target:n,contentRect:e,borderBoxSize:t}){var i;(i=Kg.get(n))===null||i===void 0||i.forEach(r=>{r({target:n,contentSize:e,get size(){return g9(n,t)}})})}function y9(n){n.forEach(v9)}function x9(){typeof ResizeObserver>"u"||($o=new ResizeObserver(y9))}function _9(n,e){$o||x9();const t=UI(n);return t.forEach(i=>{let r=Kg.get(i);r||(r=new Set,Kg.set(i,r)),r.add(e),$o==null||$o.observe(i)}),()=>{t.forEach(i=>{const r=Kg.get(i);r==null||r.delete(e),r!=null&&r.size||$o==null||$o.unobserve(i)})}}const Zg=new Set;let Oh;function w9(){Oh=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};Zg.forEach(t=>t(e))},window.addEventListener("resize",Oh)}function b9(n){return Zg.add(n),Oh||w9(),()=>{Zg.delete(n),!Zg.size&&Oh&&(Oh=void 0)}}function S9(n,e){return typeof n=="function"?b9(n):_9(n,e)}const E9=50,MC=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),M9=()=>({time:0,x:MC(),y:MC()}),T9={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function TC(n,e,t,i){const r=t[e],{length:s,position:o}=T9[e],a=r.current,l=t.time;r.current=n["scroll"+o],r.scrollLength=n["scroll"+s]-n["client"+s],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=Gu(0,r.scrollLength,r.current);const c=i-l;r.velocity=c>E9?0:nE(r.current-a,c)}function A9(n,e,t){TC(n,"x",e,t),TC(n,"y",e,t),e.time=t}function C9(n,e){const t={x:0,y:0};let i=n;for(;i&&i!==e;)if(i instanceof HTMLElement)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const r=i.getBoundingClientRect();i=i.parentElement;const s=i.getBoundingClientRect();t.x+=r.left-s.left,t.y+=r.top-s.top}else if(i instanceof SVGGraphicsElement){const{x:r,y:s}=i.getBBox();t.x+=r,t.y+=s;let o=null,a=i.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=i.parentNode;i=o}else break;return t}const P9={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},Cw={start:0,center:.5,end:1};function AC(n,e,t=0){let i=0;if(Cw[n]!==void 0&&(n=Cw[n]),typeof n=="string"){const r=parseFloat(n);n.endsWith("px")?i=r:n.endsWith("%")?n=r/100:n.endsWith("vw")?i=r/100*document.documentElement.clientWidth:n.endsWith("vh")?i=r/100*document.documentElement.clientHeight:n=r}return typeof n=="number"&&(i=e*n),t+i}const N9=[0,0];function R9(n,e,t,i){let r=Array.isArray(n)?n:N9,s=0,o=0;return typeof n=="number"?r=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?r=n.split(" "):r=[n,Cw[n]?n:"0"]),s=AC(r[0],t,i),o=AC(r[1],e),s-o}const L9={x:0,y:0};function I9(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function k9(n,e,t){let{offset:i=P9.All}=t;const{target:r=n,axis:s="y"}=t,o=s==="y"?"height":"width",a=r!==n?C9(r,n):L9,l=r===n?{width:n.scrollWidth,height:n.scrollHeight}:I9(r),c={width:n.clientWidth,height:n.clientHeight};e[s].offset.length=0;let u=!e[s].interpolate;const p=i.length;for(let m=0;m<p;m++){const g=R9(i[m],c[o],l[o],a[s]);!u&&g!==e[s].interpolatorOffsets[m]&&(u=!0),e[s].offset[m]=g}u&&(e[s].interpolate=tE(e[s].offset,uI(i)),e[s].interpolatorOffsets=[...e[s].offset]),e[s].progress=e[s].interpolate(e[s].current)}function D9(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let i=e;for(;i&&i!==n;)t.x.targetOffset+=i.offsetLeft,t.y.targetOffset+=i.offsetTop,i=i.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function j9(n,e,t,i={}){return{measure:()=>D9(n,i.target,t),update:r=>{A9(n,t,r),(i.offset||i.target)&&k9(n,t,i)},notify:()=>e(t)}}const qd=new WeakMap,CC=new WeakMap,n1=new WeakMap,PC=n=>n===document.documentElement?window:n;function O9(n,{container:e=document.documentElement,...t}={}){let i=n1.get(e);i||(i=new Set,n1.set(e,i));const r=M9(),s=j9(e,n,r,t);if(i.add(s),!qd.has(e)){const a=()=>{for(const m of i)m.measure()},l=()=>{for(const m of i)m.update(jn.timestamp)},c=()=>{for(const m of i)m.notify()},u=()=>{Ht.read(a,!1,!0),Ht.update(l,!1,!0),Ht.update(c,!1,!0)};qd.set(e,u);const p=PC(e);window.addEventListener("resize",u,{passive:!0}),e!==document.documentElement&&CC.set(e,S9(e,u)),p.addEventListener("scroll",u,{passive:!0})}const o=qd.get(e);return Ht.read(o,!1,!0),()=>{var a;ks(o);const l=n1.get(e);if(!l||(l.delete(s),l.size))return;const c=qd.get(e);qd.delete(e),c&&(PC(e).removeEventListener("scroll",c),(a=CC.get(e))===null||a===void 0||a(),window.removeEventListener("resize",c))}}function NC(n,e){V4(!!(!e||e.current))}const F9=()=>({scrollX:Ps(0),scrollY:Ps(0),scrollXProgress:Ps(0),scrollYProgress:Ps(0)});function U9({container:n,target:e,layoutEffect:t=!0,...i}={}){const r=ZS(F9);return(t?Av:N.useEffect)(()=>(NC("target",e),NC("container",n),O9(({x:o,y:a})=>{r.scrollX.set(o.current),r.scrollXProgress.set(o.progress),r.scrollY.set(a.current),r.scrollYProgress.set(a.progress)},{...i,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(i.offset)]),r}const z9={some:0,all:1};function B9(n,e,{root:t,margin:i,amount:r="some"}={}){const s=UI(n),o=new WeakMap,a=c=>{c.forEach(u=>{const p=o.get(u.target);if(u.isIntersecting!==!!p)if(u.isIntersecting){const m=e(u);typeof m=="function"?o.set(u.target,m):l.unobserve(u.target)}else p&&(p(u),o.delete(u.target))})},l=new IntersectionObserver(a,{root:t,rootMargin:i,threshold:typeof r=="number"?r:z9[r]});return s.forEach(c=>l.observe(c)),()=>l.disconnect()}function lE(n,{root:e,margin:t,amount:i,once:r=!1}={}){const[s,o]=N.useState(!1);return N.useEffect(()=>{if(!n.current||r&&s)return;const a=()=>(o(!0),r?void 0:()=>o(!1)),l={root:e&&e.current||void 0,margin:t,amount:i};return B9(n.current,a,l)},[e,n,t,r]),s}var V9=Db[" useId ".trim().toString()]||(()=>{}),H9=0;function i1(n){const[e,t]=N.useState(V9());return Hu(()=>{n||t(i=>i??String(H9++))},[n]),n||(e?`radix-${e}`:"")}var r1="focusScope.autoFocusOnMount",s1="focusScope.autoFocusOnUnmount",RC={bubbles:!1,cancelable:!0},G9="FocusScope",zI=N.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=n,[a,l]=N.useState(null),c=xo(r),u=xo(s),p=N.useRef(null),m=as(e,_=>l(_)),g=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(i){let _=function(w){if(g.paused||!a)return;const M=w.target;a.contains(M)?p.current=M:Xo(p.current,{select:!0})},S=function(w){if(g.paused||!a)return;const M=w.relatedTarget;M!==null&&(a.contains(M)||Xo(p.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const A of w)A.removedNodes.length>0&&Xo(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",S);const b=new MutationObserver(v);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",S),b.disconnect()}}},[i,a,g.paused]),N.useEffect(()=>{if(a){IC.add(g);const _=document.activeElement;if(!a.contains(_)){const v=new CustomEvent(r1,RC);a.addEventListener(r1,c),a.dispatchEvent(v),v.defaultPrevented||(W9(K9(BI(a)),{select:!0}),document.activeElement===_&&Xo(a))}return()=>{a.removeEventListener(r1,c),setTimeout(()=>{const v=new CustomEvent(s1,RC);a.addEventListener(s1,u),a.dispatchEvent(v),v.defaultPrevented||Xo(_??document.body,{select:!0}),a.removeEventListener(s1,u),IC.remove(g)},0)}}},[a,c,u,g]);const y=N.useCallback(_=>{if(!t&&!i||g.paused)return;const S=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,v=document.activeElement;if(S&&v){const b=_.currentTarget,[w,M]=$9(b);w&&M?!_.shiftKey&&v===M?(_.preventDefault(),t&&Xo(w,{select:!0})):_.shiftKey&&v===w&&(_.preventDefault(),t&&Xo(M,{select:!0})):v===b&&_.preventDefault()}},[t,i,g.paused]);return f.jsx(oi.div,{tabIndex:-1,...o,ref:m,onKeyDown:y})});zI.displayName=G9;function W9(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(Xo(i,{select:e}),document.activeElement!==t)return}function $9(n){const e=BI(n),t=LC(e,n),i=LC(e.reverse(),n);return[t,i]}function BI(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function LC(n,e){for(const t of n)if(!X9(t,{upTo:e}))return t}function X9(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function q9(n){return n instanceof HTMLInputElement&&"select"in n}function Xo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&q9(n)&&e&&n.select()}}var IC=Y9();function Y9(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=kC(n,e),n.unshift(e)},remove(e){var t;n=kC(n,e),(t=n[0])==null||t.resume()}}}function kC(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function K9(n){return n.filter(e=>e.tagName!=="A")}var o1=0;function Z9(){N.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??DC()),document.body.insertAdjacentElement("beforeend",n[1]??DC()),o1++,()=>{o1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),o1--}},[])}function DC(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var As=function(){return As=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},As.apply(this,arguments)};function VI(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function J9(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}var Jg="right-scroll-bar-position",Qg="width-before-scroll-bar",Q9="with-scroll-bars-hidden",eG="--removed-body-scroll-bar-size";function a1(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function tG(n,e){var t=N.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var r=t.value;r!==i&&(t.value=i,t.callback(i,r))}}}})[0];return t.callback=e,t.facade}var nG=typeof window<"u"?N.useLayoutEffect:N.useEffect,jC=new WeakMap;function iG(n,e){var t=tG(e||null,function(i){return n.forEach(function(r){return a1(r,i)})});return nG(function(){var i=jC.get(t);if(i){var r=new Set(i),s=new Set(n),o=t.current;r.forEach(function(a){s.has(a)||a1(a,null)}),s.forEach(function(a){r.has(a)||a1(a,o)})}jC.set(t,n)},[n]),t}function rG(n){return n}function sG(n,e){e===void 0&&(e=rG);var t=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,i);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){i=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return r}function oG(n){n===void 0&&(n={});var e=sG(null);return e.options=As({async:!0,ssr:!1},n),e}var HI=function(n){var e=n.sideCar,t=VI(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return N.createElement(i,As({},t))};HI.isSideCarExport=!0;function aG(n,e){return n.useMedium(e),HI}var GI=oG(),l1=function(){},kv=N.forwardRef(function(n,e){var t=N.useRef(null),i=N.useState({onScrollCapture:l1,onWheelCapture:l1,onTouchMoveCapture:l1}),r=i[0],s=i[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,u=n.enabled,p=n.shards,m=n.sideCar,g=n.noIsolation,y=n.inert,_=n.allowPinchZoom,S=n.as,v=S===void 0?"div":S,b=n.gapMode,w=VI(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=m,A=iG([t,e]),P=As(As({},w),r);return N.createElement(N.Fragment,null,u&&N.createElement(M,{sideCar:GI,removeScrollBar:c,shards:p,noIsolation:g,inert:y,setCallbacks:s,allowPinchZoom:!!_,lockRef:t,gapMode:b}),o?N.cloneElement(N.Children.only(a),As(As({},P),{ref:A})):N.createElement(v,As({},P,{className:l,ref:A}),a))});kv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kv.classNames={fullWidth:Qg,zeroRight:Jg};var OC,lG=function(){if(OC)return OC;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cG(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=lG();return e&&n.setAttribute("nonce",e),n}function uG(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function dG(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var hG=function(){var n=0,e=null;return{add:function(t){n==0&&(e=cG())&&(uG(e,t),dG(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fG=function(){var n=hG();return function(e,t){N.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},WI=function(){var n=fG(),e=function(t){var i=t.styles,r=t.dynamic;return n(i,r),null};return e},pG={left:0,top:0,right:0,gap:0},c1=function(n){return parseInt(n||"",10)||0},mG=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],r=e[n==="padding"?"paddingRight":"marginRight"];return[c1(t),c1(i),c1(r)]},gG=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return pG;var e=mG(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},vG=WI(),Pu="data-scroll-locked",yG=function(n,e,t,i){var r=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Q9,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Pu,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jg,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Qg,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Jg," .").concat(Jg,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Qg," .").concat(Qg,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Pu,`] {
    `).concat(eG,": ").concat(a,`px;
  }
`)},FC=function(){var n=parseInt(document.body.getAttribute(Pu)||"0",10);return isFinite(n)?n:0},xG=function(){N.useEffect(function(){return document.body.setAttribute(Pu,(FC()+1).toString()),function(){var n=FC()-1;n<=0?document.body.removeAttribute(Pu):document.body.setAttribute(Pu,n.toString())}},[])},_G=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,r=i===void 0?"margin":i;xG();var s=N.useMemo(function(){return gG(r)},[r]);return N.createElement(vG,{styles:yG(s,!e,r,t?"":"!important")})},Pw=!1;if(typeof window<"u")try{var Om=Object.defineProperty({},"passive",{get:function(){return Pw=!0,!0}});window.addEventListener("test",Om,Om),window.removeEventListener("test",Om,Om)}catch{Pw=!1}var _c=Pw?{passive:!1}:!1,wG=function(n){return n.tagName==="TEXTAREA"},$I=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!wG(n)&&t[e]==="visible")},bG=function(n){return $I(n,"overflowY")},SG=function(n){return $I(n,"overflowX")},UC=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=XI(n,i);if(r){var s=qI(n,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},EG=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},MG=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},XI=function(n,e){return n==="v"?bG(e):SG(e)},qI=function(n,e){return n==="v"?EG(e):MG(e)},TG=function(n,e){return n==="h"&&e==="rtl"?-1:1},AG=function(n,e,t,i,r){var s=TG(n,window.getComputedStyle(e).direction),o=s*i,a=t.target,l=e.contains(a),c=!1,u=o>0,p=0,m=0;do{var g=qI(n,a),y=g[0],_=g[1],S=g[2],v=_-S-s*y;(y||v)&&XI(n,a)&&(p+=v,m+=y),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(r&&Math.abs(p)<1||!r&&o>p)||!u&&(r&&Math.abs(m)<1||!r&&-o>m))&&(c=!0),c},Fm=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},zC=function(n){return[n.deltaX,n.deltaY]},BC=function(n){return n&&"current"in n?n.current:n},CG=function(n,e){return n[0]===e[0]&&n[1]===e[1]},PG=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},NG=0,wc=[];function RG(n){var e=N.useRef([]),t=N.useRef([0,0]),i=N.useRef(),r=N.useState(NG++)[0],s=N.useState(WI)[0],o=N.useRef(n);N.useEffect(function(){o.current=n},[n]),N.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(r));var _=J9([n.lockRef.current],(n.shards||[]).map(BC),!0).filter(Boolean);return _.forEach(function(S){return S.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),_.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(r))})}}},[n.inert,n.lockRef.current,n.shards]);var a=N.useCallback(function(_,S){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var v=Fm(_),b=t.current,w="deltaX"in _?_.deltaX:b[0]-v[0],M="deltaY"in _?_.deltaY:b[1]-v[1],A,P=_.target,L=Math.abs(w)>Math.abs(M)?"h":"v";if("touches"in _&&L==="h"&&P.type==="range")return!1;var I=UC(L,P);if(!I)return!0;if(I?A=L:(A=L==="v"?"h":"v",I=UC(L,P)),!I)return!1;if(!i.current&&"changedTouches"in _&&(w||M)&&(i.current=A),!A)return!0;var C=i.current||A;return AG(C,S,_,C==="h"?w:M,!0)},[]),l=N.useCallback(function(_){var S=_;if(!(!wc.length||wc[wc.length-1]!==s)){var v="deltaY"in S?zC(S):Fm(S),b=e.current.filter(function(A){return A.name===S.type&&(A.target===S.target||S.target===A.shadowParent)&&CG(A.delta,v)})[0];if(b&&b.should){S.cancelable&&S.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(BC).filter(Boolean).filter(function(A){return A.contains(S.target)}),M=w.length>0?a(S,w[0]):!o.current.noIsolation;M&&S.cancelable&&S.preventDefault()}}},[]),c=N.useCallback(function(_,S,v,b){var w={name:_,delta:S,target:v,should:b,shadowParent:LG(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(M){return M!==w})},1)},[]),u=N.useCallback(function(_){t.current=Fm(_),i.current=void 0},[]),p=N.useCallback(function(_){c(_.type,zC(_),_.target,a(_,n.lockRef.current))},[]),m=N.useCallback(function(_){c(_.type,Fm(_),_.target,a(_,n.lockRef.current))},[]);N.useEffect(function(){return wc.push(s),n.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",l,_c),document.addEventListener("touchmove",l,_c),document.addEventListener("touchstart",u,_c),function(){wc=wc.filter(function(_){return _!==s}),document.removeEventListener("wheel",l,_c),document.removeEventListener("touchmove",l,_c),document.removeEventListener("touchstart",u,_c)}},[]);var g=n.removeScrollBar,y=n.inert;return N.createElement(N.Fragment,null,y?N.createElement(s,{styles:PG(r)}):null,g?N.createElement(_G,{gapMode:n.gapMode}):null)}function LG(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const IG=aG(GI,RG);var YI=N.forwardRef(function(n,e){return N.createElement(kv,As({},n,{ref:e,sideCar:IG}))});YI.classNames=kv.classNames;const kG=YI;var DG=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},bc=new WeakMap,Um=new WeakMap,zm={},u1=0,KI=function(n){return n&&(n.host||KI(n.parentNode))},jG=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=KI(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},OG=function(n,e,t,i){var r=jG(e,Array.isArray(n)?n:[n]);zm[t]||(zm[t]=new WeakMap);var s=zm[t],o=[],a=new Set,l=new Set(r),c=function(p){!p||a.has(p)||(a.add(p),c(p.parentNode))};r.forEach(c);var u=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(i),y=g!==null&&g!=="false",_=(bc.get(m)||0)+1,S=(s.get(m)||0)+1;bc.set(m,_),s.set(m,S),o.push(m),_===1&&y&&Um.set(m,!0),S===1&&m.setAttribute(t,"true"),y||m.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return u(e),a.clear(),u1++,function(){o.forEach(function(p){var m=bc.get(p)-1,g=s.get(p)-1;bc.set(p,m),s.set(p,g),m||(Um.has(p)||p.removeAttribute(i),Um.delete(p)),g||p.removeAttribute(t)}),u1--,u1||(bc=new WeakMap,bc=new WeakMap,Um=new WeakMap,zm={})}},FG=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),r=e||DG(n);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),OG(i,r,t,"aria-hidden")):function(){return null}},Dv="Dialog",[ZI,Bre]=PS(Dv),[UG,us]=ZI(Dv),JI=n=>{const{__scopeDialog:e,children:t,open:i,defaultOpen:r,onOpenChange:s,modal:o=!0}=n,a=N.useRef(null),l=N.useRef(null),[c,u]=HL({prop:i,defaultProp:r??!1,onChange:s,caller:Dv});return f.jsx(UG,{scope:e,triggerRef:a,contentRef:l,contentId:i1(),titleId:i1(),descriptionId:i1(),open:c,onOpenChange:u,onOpenToggle:N.useCallback(()=>u(p=>!p),[u]),modal:o,children:t})};JI.displayName=Dv;var QI="DialogTrigger",zG=N.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,r=us(QI,t),s=as(e,r.triggerRef);return f.jsx(oi.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":dE(r.open),...i,ref:s,onClick:qn(n.onClick,r.onOpenToggle)})});zG.displayName=QI;var cE="DialogPortal",[BG,ek]=ZI(cE,{forceMount:void 0}),tk=n=>{const{__scopeDialog:e,forceMount:t,children:i,container:r}=n,s=us(cE,e);return f.jsx(BG,{scope:e,forceMount:t,children:N.Children.map(i,o=>f.jsx(Hf,{present:t||s.open,children:f.jsx(RS,{asChild:!0,container:r,children:o})}))})};tk.displayName=cE;var W0="DialogOverlay",nk=N.forwardRef((n,e)=>{const t=ek(W0,n.__scopeDialog),{forceMount:i=t.forceMount,...r}=n,s=us(W0,n.__scopeDialog);return s.modal?f.jsx(Hf,{present:i||s.open,children:f.jsx(HG,{...r,ref:e})}):null});nk.displayName=W0;var VG=ff("DialogOverlay.RemoveScroll"),HG=N.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,r=us(W0,t);return f.jsx(kG,{as:VG,allowPinchZoom:!0,shards:[r.contentRef],children:f.jsx(oi.div,{"data-state":dE(r.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),Vl="DialogContent",ik=N.forwardRef((n,e)=>{const t=ek(Vl,n.__scopeDialog),{forceMount:i=t.forceMount,...r}=n,s=us(Vl,n.__scopeDialog);return f.jsx(Hf,{present:i||s.open,children:s.modal?f.jsx(GG,{...r,ref:e}):f.jsx(WG,{...r,ref:e})})});ik.displayName=Vl;var GG=N.forwardRef((n,e)=>{const t=us(Vl,n.__scopeDialog),i=N.useRef(null),r=as(e,t.contentRef,i);return N.useEffect(()=>{const s=i.current;if(s)return FG(s)},[]),f.jsx(rk,{...n,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qn(n.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qn(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:qn(n.onFocusOutside,s=>s.preventDefault())})}),WG=N.forwardRef((n,e)=>{const t=us(Vl,n.__scopeDialog),i=N.useRef(!1),r=N.useRef(!1);return f.jsx(rk,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,s),s.defaultPrevented||(i.current||(a=t.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),rk=N.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,...o}=n,a=us(Vl,t),l=N.useRef(null),c=as(e,l);return Z9(),f.jsxs(f.Fragment,{children:[f.jsx(zI,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:f.jsx(NS,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":dE(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx($G,{titleId:a.titleId}),f.jsx(qG,{contentRef:l,descriptionId:a.descriptionId})]})]})}),uE="DialogTitle",sk=N.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,r=us(uE,t);return f.jsx(oi.h2,{id:r.titleId,...i,ref:e})});sk.displayName=uE;var ok="DialogDescription",ak=N.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,r=us(ok,t);return f.jsx(oi.p,{id:r.descriptionId,...i,ref:e})});ak.displayName=ok;var lk="DialogClose",ck=N.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,r=us(lk,t);return f.jsx(oi.button,{type:"button",...i,ref:e,onClick:qn(n.onClick,()=>r.onOpenChange(!1))})});ck.displayName=lk;function dE(n){return n?"open":"closed"}var uk="DialogTitleWarning",[Vre,dk]=A6(uk,{contentName:Vl,titleName:uE,docsSlug:"dialog"}),$G=({titleId:n})=>{const e=dk(uk),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},XG="DialogDescriptionWarning",qG=({contentRef:n,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${dk(XG).contentName}}.`;return N.useEffect(()=>{var s;const r=(s=n.current)==null?void 0:s.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(i))},[i,n,e]),null},YG=JI,KG=tk,hk=nk,fk=ik,pk=sk,mk=ak,ZG=ck;const JG=YG,QG=KG,gk=N.forwardRef(({className:n,...e},t)=>f.jsx(hk,{ref:t,className:si("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));gk.displayName=hk.displayName;const vk=N.forwardRef(({className:n,children:e,...t},i)=>f.jsxs(QG,{children:[f.jsx(gk,{}),f.jsxs(fk,{ref:i,className:si("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-2xl",n),...t,children:[e,f.jsxs(ZG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(Ma,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vk.displayName=fk.displayName;const yk=({className:n,...e})=>f.jsx("div",{className:si("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});yk.displayName="DialogHeader";const xk=N.forwardRef(({className:n,...e},t)=>f.jsx(pk,{ref:t,className:si("text-lg font-semibold leading-none tracking-tight",n),...e}));xk.displayName=pk.displayName;const eW=N.forwardRef(({className:n,...e},t)=>f.jsx(mk,{ref:t,className:si("text-sm text-muted-foreground",n),...e}));eW.displayName=mk.displayName;function tW(n){return/^[6789]\d{8}$/.test(n.replace(/\D/g,""))}function nW(n){return n&&n.trim().length>0}function Mo({open:n,onOpenChange:e}){const t=US(y=>y.addToast),[i,r]=N.useState(0),[s,o]=N.useState({nombre:"",telefono:"",mensaje:""}),[a,l]=N.useState(!1),c=[{label:"Nombre completo",field:"nombre",placeholder:"Tu nombre",icon:"👤"},{label:"Teléfono",field:"telefono",placeholder:"6xxxxxxxx",icon:"📱"},{label:"Mensaje",field:"mensaje",placeholder:"¿En qué podemos ayudarte?",icon:"💬"}],u=()=>{const{field:y}=c[i],_=s[y].trim();return!nW(_)||y==="telefono"&&!tW(_)?(t({title:"Error en el formulario",description:y==="telefono"?"Introduce un teléfono válido de 9 dígitos":`Por favor, introduce tu ${c[i].label.toLowerCase()}`,variant:"destructive"}),!1):!0},p=y=>{y.preventDefault(),u()&&r(_=>_+1)},m=async y=>{if(y.preventDefault(),!!u()){l(!0);try{await fetch("https://zzwebhookzz.iakonnect.com/webhook/llamadaweb",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,origen:"web"})}),t({title:"Te llamaremos en breve 📞",description:"Gracias por confiar en Casaia. Un asesor se pondrá en contacto contigo."}),o({nombre:"",telefono:"",mensaje:""}),r(0),e(!1)}catch{t({title:"Error al enviar",description:"Hubo un problema. Por favor, inténtalo de nuevo.",variant:"destructive"})}finally{l(!1)}}},g=(i+1)/c.length*100;return f.jsx(JG,{open:n,onOpenChange:y=>{y||r(0),e(y)},children:f.jsx(vk,{className:"sm:max-w-lg border-0 bg-transparent p-0 shadow-none",children:f.jsxs(le.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.4,ease:"easeOut"},className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-white/95 via-white/90 to-white/80 backdrop-blur-xl border border-white/20 shadow-2xl",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#D4AF37]/10 via-transparent to-purple-500/5 pointer-events-none"}),f.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-gradient-to-br from-[#D4AF37]/20 to-transparent rounded-full blur-2xl"}),f.jsx("div",{className:"absolute -bottom-10 -left-10 w-24 h-24 bg-gradient-to-tr from-purple-500/10 to-transparent rounded-full blur-xl"}),f.jsxs("div",{className:"relative p-8",children:[f.jsxs(yk,{className:"text-center mb-8",children:[f.jsx(le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center justify-center mb-4",children:f.jsxs("div",{className:"relative",children:[f.jsx(id,{className:"h-8 w-8 text-[#D4AF37]"}),f.jsx(le.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},className:"absolute -inset-2 rounded-full border-2 border-dashed border-[#D4AF37]/30"})]})}),f.jsx(xk,{className:"font-serif text-3xl bg-gradient-to-r from-gray-900 via-[#D4AF37] to-gray-900 bg-clip-text text-transparent",children:"Llamada rápida"}),f.jsx("p",{className:"text-gray-600 mt-2 font-medium",children:"Te contactamos en menos de 5 minutos"})]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("div",{className:"flex items-center justify-between mb-3",children:c.map((y,_)=>f.jsxs(le.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:_===i?1.1:1},transition:{delay:_*.1},className:`relative flex items-center justify-center w-10 h-10 rounded-full text-sm font-bold transition-all duration-500 ${_<=i?"bg-gradient-to-r from-[#D4AF37] to-[#B8941F] text-white shadow-lg shadow-[#D4AF37]/30":"bg-gray-200 text-gray-500"}`,children:[_<i?f.jsx(pf,{className:"h-5 w-5"}):f.jsx("span",{className:"text-lg",children:y.icon}),_===i&&f.jsx(le.div,{className:"absolute -inset-1 bg-gradient-to-r from-[#D4AF37] to-[#B8941F] rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},style:{zIndex:-1}})]},_))}),f.jsxs("div",{className:"relative h-2 bg-gray-200 rounded-full overflow-hidden",children:[f.jsx(le.div,{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-[#D4AF37] via-[#E6C56A] to-[#D4AF37] rounded-full",initial:{width:"0%"},animate:{width:`${g}%`},transition:{duration:.6,ease:"easeOut"}}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-pulse"})]})]}),f.jsxs("form",{onSubmit:i===c.length-1?m:p,children:[f.jsx(G0,{mode:"wait",children:f.jsx(le.div,{initial:{opacity:0,x:100,rotateY:-15},animate:{opacity:1,x:0,rotateY:0},exit:{opacity:0,x:-100,rotateY:15},transition:{duration:.5,ease:"easeOut"},className:"perspective-1000",children:f.jsxs("div",{className:"mb-6",children:[f.jsxs(le.label,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center gap-3 mb-4 text-lg font-semibold text-gray-800",children:[f.jsx("span",{className:"text-2xl",children:c[i].icon}),c[i].label]}),i<2?f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"relative group",children:[f.jsx("input",{type:i===1?"tel":"text",required:!0,pattern:i===1?"[6789][0-9]{8}":void 0,inputMode:i===1?"numeric":void 0,maxLength:i===1?9:void 0,className:"w-full rounded-2xl border-2 border-gray-200 bg-white/80 backdrop-blur-sm p-4 text-lg transition-all duration-300 focus:border-[#D4AF37] focus:outline-none focus:ring-4 focus:ring-[#D4AF37]/20 focus:bg-white group-hover:border-gray-300 group-hover:shadow-lg",placeholder:c[i].placeholder,value:s[c[i].field],onChange:y=>o({...s,[c[i].field]:y.target.value})}),f.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-[#D4AF37]/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]}):f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"relative group",children:[f.jsx("textarea",{required:!0,className:"w-full h-36 rounded-2xl border-2 border-gray-200 bg-white/80 backdrop-blur-sm p-4 text-lg resize-none transition-all duration-300 focus:border-[#D4AF37] focus:outline-none focus:ring-4 focus:ring-[#D4AF37]/20 focus:bg-white group-hover:border-gray-300 group-hover:shadow-lg",placeholder:c[i].placeholder,value:s.mensaje,onChange:y=>o({...s,mensaje:y.target.value})}),f.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-[#D4AF37]/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]})},i)}),f.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex justify-end",children:f.jsxs(Zt,{type:"submit",disabled:a,className:"group relative overflow-hidden rounded-2xl bg-gradient-to-r from-[#D4AF37] via-[#E6C56A] to-[#D4AF37] px-8 py-4 text-lg font-semibold text-white shadow-xl shadow-[#D4AF37]/30 transition-all duration-300 hover:shadow-2xl hover:shadow-[#D4AF37]/40 hover:scale-105 disabled:opacity-70 disabled:cursor-not-allowed disabled:hover:scale-100",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 via-transparent to-white/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),f.jsxs("div",{className:"flex items-center space-x-3 relative z-10",children:[a?f.jsx(le.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}):i===c.length-1?f.jsx(le.div,{whileHover:{scale:1.2,rotate:360},transition:{duration:.3},children:f.jsx(pf,{className:"h-5 w-5"})}):f.jsx(le.div,{whileHover:{x:5},transition:{duration:.2},children:f.jsx($f,{className:"h-5 w-5"})}),f.jsx("span",{children:a?"Enviando...":i===c.length-1?"Enviar solicitud":"Continuar"})]}),i===c.length-1&&f.jsx(le.div,{className:"absolute top-1/2 right-4 transform -translate-y-1/2",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:f.jsx(Ea,{className:"h-4 w-4 text-white/60"})})]})})]}),f.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-6 text-center",children:f.jsxs("p",{className:"text-sm text-gray-500 flex items-center justify-center gap-2",children:[f.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Respuesta garantizada en 5 minutos"]})})]})]})})})}function iW({isOpen:n,onClose:e,onContactClick:t}){const i=Eo();js();const r=N.useRef(null);N.useEffect(()=>{const m=g=>{var y;n&&r.current&&!r.current.contains(g.target)&&((y=g.stopImmediatePropagation)==null||y.call(g),g.preventDefault(),e())};return document.addEventListener("click",m,!0),()=>document.removeEventListener("click",m,!0)},[n,e]);const s=m=>i.pathname===m,o=[{path:"/",label:"Inicio",icon:Bl},{path:"/vender",label:"Vender",icon:GB},{path:"/comprar-casa-madrid",label:"Comprar",icon:d4},{path:"/alquiler-casa-madrid",label:"Alquiler",icon:Bl},{path:"/nosotros",label:"Nosotros",icon:Oa},{path:"/blog",label:"Blog",icon:MB}],a=m=>["group relative flex items-center gap-3 py-3 px-4 text-sm font-medium transition-all duration-300 rounded-xl overflow-hidden",s(m)?"text-white bg-gradient-to-r from-[#D4AF37] to-[#B8941F] shadow-lg shadow-[#D4AF37]/30":"text-gray-700 hover:text-[#D4AF37] hover:bg-gradient-to-r hover:from-[#D4AF37]/10 hover:to-transparent"].join(" "),l=()=>{e(),window.scrollTo({top:0,behavior:"smooth"})},c=()=>{e(),t()},u={hidden:{opacity:0,height:0,transition:{duration:.3,staggerChildren:.05,staggerDirection:-1}},visible:{opacity:1,height:"auto",transition:{duration:.3,staggerChildren:.05,delayChildren:.1}}},p={hidden:{opacity:0,x:-50,scale:.9},visible:{opacity:1,x:0,scale:1,transition:{type:"spring",stiffness:300,damping:20}}};return f.jsx(G0,{children:n&&f.jsxs(le.div,{ref:r,initial:"hidden",animate:"visible",exit:"hidden",variants:u,className:"md:hidden relative overflow-hidden shadow-lg",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/95 via-gray-50/95 to-white/95 backdrop-blur-xl"}),f.jsxs("div",{className:"absolute inset-0 opacity-[0.03]",children:[f.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-[#D4AF37] rounded-full blur-3xl"}),f.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-[#F4E4C1] rounded-full blur-3xl"})]}),f.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent"}),f.jsxs("div",{className:"relative flex flex-col p-4 space-y-1",children:[o.map(({path:m,label:g,icon:y})=>f.jsx(le.div,{variants:p,children:f.jsxs(yi,{to:m,className:a(m),onClick:l,children:[f.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-700"})}),f.jsx(le.div,{whileHover:{rotate:360},transition:{duration:.6},className:`relative flex items-center justify-center w-8 h-8 rounded-lg transition-all ${s(m)?"bg-white/20 shadow-inner":"bg-gradient-to-br from-[#D4AF37]/20 to-[#D4AF37]/10 group-hover:from-[#D4AF37]/30 group-hover:to-[#D4AF37]/20"}`,children:f.jsx(y,{className:`h-4 w-4 ${s(m)?"text-white":"text-[#D4AF37]"}`})}),f.jsx("span",{className:"relative z-10 font-medium",children:g}),s(m)&&f.jsx(le.div,{layoutId:"activeMenuIndicator",className:"absolute right-4 top-1/2 -translate-y-1/2",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:f.jsx(Ea,{className:"h-4 w-4 text-white animate-pulse"})})]})},m)),f.jsxs(le.div,{variants:p,className:"relative my-2 h-px overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-[#D4AF37]/30 to-transparent"}),f.jsx("div",{className:"absolute inset-0 w-1/3 bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent animate-slide"})]}),f.jsx(le.div,{variants:p,children:f.jsxs(Zt,{className:"relative w-full h-12 overflow-hidden rounded-xl bg-gradient-to-r from-[#D4AF37] to-[#B8941F] text-white shadow-xl hover:shadow-2xl hover:shadow-[#D4AF37]/30 transform hover:scale-[1.02] transition-all duration-300",onClick:c,children:[f.jsxs("div",{className:"absolute inset-0 opacity-30",children:[f.jsx("div",{className:"absolute top-1/2 left-1/4 w-20 h-20 bg-white rounded-full blur-xl animate-pulse"}),f.jsx("div",{className:"absolute top-1/2 right-1/4 w-16 h-16 bg-white rounded-full blur-xl animate-pulse delay-300"})]}),f.jsxs("span",{className:"relative flex items-center justify-center gap-3",children:[f.jsx(le.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:f.jsx(id,{className:"h-5 w-5"})}),f.jsx("span",{className:"font-semibold text-base",children:"Contactar"})]}),f.jsx("div",{className:"absolute inset-0 -top-4 -bottom-4 opacity-0 hover:opacity-100 transition-opacity duration-300",children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 translate-x-[-200%] animate-shimmer"})})]})})]})]})})}function rW(){const[n,e]=N.useState(!1),[t,i]=N.useState(!1),[r,s]=N.useState(!1),o=Eo(),a=js();U9(),N.useEffect(()=>{const p=()=>s(window.scrollY>20);return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[]);const l=p=>o.pathname===p,c=p=>m=>{m.preventDefault(),o.pathname===p?window.scrollTo({top:0,behavior:"smooth"}):a(p)},u=p=>`relative px-4 py-2 text-sm font-semibold rounded-xl overflow-hidden group transition-all duration-300 ${l(p)?"text-white":"text-gray-900 hover:text-black"}`;return f.jsxs(le.nav,{className:`fixed top-0 z-50 w-full overflow-hidden transition-all duration-500 ${r?"py-2 shadow-lg":"py-3 shadow-md"}`,style:{backgroundColor:`rgba(255,255,255,${r?.98:.95})`,backdropFilter:`blur(${r?20:15}px)`},children:[f.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-[#D4AF37]/50 to-transparent"}),f.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none hidden sm:block",children:[f.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 rounded-full bg-[#D4AF37]/5 blur-3xl animate-pulse"}),f.jsx("div",{className:"absolute -top-40 -left-40  w-80 h-80 rounded-full bg-[#F4E4C1]/5 blur-3xl animate-pulse delay-700"})]}),f.jsxs("div",{className:"relative flex items-center justify-between w-full px-4 sm:px-6 md:container md:mx-auto",children:[f.jsx(yi,{to:"/",onClick:c("/"),className:"relative group flex-shrink-0",children:f.jsxs(le.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:[f.jsx("div",{className:"absolute inset-0 rounded-full scale-150 blur-xl bg-gradient-to-r from-[#D4AF37]/20 to-[#F4E4C1]/20 opacity-0 group-hover:opacity-100 transition-opacity"}),f.jsx("img",{src:"https://pptkdbygswenchxurwkz.supabase.co/storage/v1/object/public/public-logo/logo-casaia.svg",alt:"Casaia Logo",className:"relative z-10 h-8 w-auto md:h-10 transition-all"})]})}),f.jsx(le.button,{onClick:()=>e(!n),className:"md:hidden p-2 rounded-xl bg-gray-900 hover:bg-black shadow-md transition-all",whileTap:{scale:.9},children:f.jsx(G0,{mode:"wait",children:n?f.jsx(le.div,{initial:{opacity:0,rotate:-180,scale:.8},animate:{opacity:1,rotate:0,scale:1},exit:{opacity:0,rotate:180,scale:.8},transition:{duration:.3,type:"spring",stiffness:200},children:f.jsx(Ma,{className:"h-6 w-6 text-white"})},"close"):f.jsx(le.div,{initial:{opacity:0,rotate:180,scale:.8},animate:{opacity:1,rotate:0,scale:1},exit:{opacity:0,rotate:-180,scale:.8},transition:{duration:.3,type:"spring",stiffness:200},children:f.jsx(OB,{className:"h-6 w-6 text-white"})},"menu")})}),f.jsx("div",{className:"hidden md:flex items-center space-x-2",children:[{path:"/",label:"Inicio"},{path:"/vender",label:"Vender"},{path:"/comprar-casa-madrid",label:"Comprar"},{path:"/alquiler-casa-madrid",label:"Alquiler"},{path:"/nosotros",label:"Nosotros"},{path:"/blog",label:"Blog"}].map(p=>f.jsxs(yi,{to:p.path,onClick:c(p.path),className:u(p.path),children:[l(p.path)&&f.jsx(le.div,{layoutId:"activeNavBg",className:"absolute inset-0 rounded-xl bg-gradient-to-r from-[#D4AF37] to-[#B8941F] shadow-lg",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"spring",stiffness:400,damping:30}}),f.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-gray-200/0 to-gray-200/0 group-hover:from-gray-200 group-hover:to-gray-100 transition-all"}),f.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-gray-300 transition-all"}),f.jsx("span",{className:"relative z-10",children:p.label}),!l(p.path)&&f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900 origin-left transform scale-x-0 group-hover:scale-x-100 transition-transform"}),l(p.path)&&f.jsx(le.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1",children:f.jsx(Ea,{className:"h-3 w-3 text-white animate-pulse"})})]},p.path))}),f.jsx(le.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"hidden md:block",children:f.jsxs(Zt,{onClick:()=>i(!0),className:"relative px-6 py-2.5 rounded-xl text-white font-semibold bg-gradient-to-r from-[#D4AF37] to-[#B8941F] shadow-lg hover:shadow-xl hover:shadow-[#D4AF37]/25 transition-all",children:[f.jsxs("div",{className:"absolute inset-0 opacity-30",children:[f.jsx("div",{className:"absolute top-1/2 left-1/4 w-10 h-10 bg-white rounded-full blur-md animate-pulse"}),f.jsx("div",{className:"absolute top-1/2 right-1/4 w-8 h-8 bg-white rounded-full blur-md animate-pulse delay-300"})]}),f.jsx("div",{className:"absolute inset-0 -top-2 -bottom-2",children:f.jsx("div",{className:"absolute inset-0 -translate-x-full -skew-x-12 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"})}),f.jsxs("span",{className:"relative flex items-center gap-2",children:[f.jsx(le.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:f.jsx(id,{className:"h-4 w-4"})}),"Contactar"]})]})})]}),f.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent transition-opacity ${r?"opacity-100":"opacity-0"}`}),f.jsx(G0,{children:n&&f.jsx(iW,{isOpen:n,onClose:()=>e(!1),onContactClick:()=>{e(!1),i(!0)}})}),f.jsx(Mo,{open:t,onOpenChange:i})]})}function sW(){return f.jsxs("footer",{className:"bg-gray-900 text-gray-300",children:[f.jsx("div",{className:"container py-12",children:f.jsxs("div",{className:"grid gap-8 md:grid-cols-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"mb-4 text-xl font-bold text-white",children:"Casaia"}),f.jsx("p",{className:"text-sm",children:"Tu inmobiliaria de confianza en Madrid. Más de 20 años de experiencia en el sector inmobiliario."})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"mb-4 font-semibold text-white",children:"Enlaces"}),f.jsxs("ul",{className:"space-y-2 text-sm",children:[f.jsx("li",{children:f.jsx(yi,{to:"/propiedades",className:"hover:text-white",children:"Propiedades"})}),f.jsx("li",{children:f.jsx(yi,{to:"/vender",className:"hover:text-white",children:"Vender"})}),f.jsx("li",{children:f.jsx(yi,{to:"/nosotros",className:"hover:text-white",children:"Sobre nosotros"})})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"mb-4 font-semibold text-white",children:"Contacto"}),f.jsxs("ul",{className:"space-y-2 text-sm",children:[f.jsx("li",{children:"28400 Madrid"}),f.jsx("li",{children:"+34 919932451"}),f.jsx("li",{children:"info@casaiamadrid.com"})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"mb-4 font-semibold text-white",children:"Legal"}),f.jsxs("ul",{className:"space-y-2 text-sm",children:[f.jsx("li",{children:f.jsx(yi,{to:"/politica-privacidad",className:"hover:text-white",children:"Política de privacidad"})}),f.jsx("li",{children:f.jsx(yi,{to:"/cookies",className:"hover:text-white",children:"Política de cookies"})}),f.jsx("li",{children:f.jsx(yi,{to:"/aviso-legal",className:"hover:text-white",children:"Aviso legal"})})]})]})]})}),f.jsx("div",{className:"border-t border-gray-800 py-4",children:f.jsxs("div",{className:"container text-center text-sm",children:["© ",new Date().getFullYear()," Casaia. Todos los derechos reservados."]})})]})}const oW="https://zzwebhookzz.iakonnect.com/webhook/chatbotweb";function aW(n){return n.split(new RegExp('(?<=[.!?])\\s+(?=[A-ZÁÉÍÓÚÑ0-9\\"—-])')).map(e=>e.trim()).filter(e=>e.length>0)}function lW(){const[n,e]=N.useState(""),[t,i]=N.useState(!1),[r,s]=N.useState(""),[o,a]=N.useState([]),[l,c]=N.useState(""),[u,p]=N.useState(!1),m=N.useRef(null);N.useEffect(()=>{c(crypto.randomUUID())},[]),N.useEffect(()=>{m.current&&m.current.scrollIntoView({behavior:"smooth"})},[o,u,t]);const g=async()=>{var S,v;if(!r.trim())return;a(b=>[...b,{role:"user",content:r}]);const _={sessionId:l,intencion:n,mensajes:[r],message:r};s("");try{const w=await(await fetch(oW,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).json(),M=((S=w[0])==null?void 0:S.chunks)||[((v=w[0])==null?void 0:v.output)||"Lo siento, hubo un error."];for(const A of M)p(!0),await new Promise(P=>setTimeout(P,Math.max(A.length*50,600))),aW(A).forEach(P=>a(L=>[...L,{role:"assistant",content:P}])),p(!1),await new Promise(P=>setTimeout(P,200))}catch{a(w=>[...w,{role:"assistant",content:"⚠️ Error de red o servidor."}]),p(!1)}},y=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),g())};return f.jsxs(f.Fragment,{children:[!t&&f.jsx("div",{id:"floating-button",onClick:()=>i(!0),className:"fixed bottom-6 right-4 sm:right-6 z-50 group cursor-pointer",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 rounded-full blur-xl opacity-75 group-hover:opacity-100 animate-pulse"}),f.jsxs("div",{className:"relative flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white shadow-2xl transform transition-all duration-300 group-hover:scale-110 group-hover:rotate-12",children:[f.jsx(FB,{className:"h-7 w-7"}),f.jsx(Ea,{className:"absolute -top-1 -right-1 h-4 w-4 text-yellow-400 animate-pulse"})]})]})}),t&&f.jsx("div",{className:"fixed inset-0 z-40",onClick:_=>{_.preventDefault(),_.stopPropagation(),i(!1)},style:{backgroundColor:"transparent"}}),t&&f.jsxs("div",{id:"chat-container",className:"fixed bottom-20 right-4 sm:right-6 z-50 w-[calc(100%-2rem)] sm:w-[420px] max-h-[80vh] overflow-hidden flex flex-col",style:{background:"rgba(17, 24, 39, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(139, 92, 246, 0.3)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 50px rgba(139, 92, 246, 0.2)"},children:[f.jsx("div",{className:"relative bg-gradient-to-r from-purple-900/50 via-pink-900/50 to-blue-900/50 backdrop-blur-xl text-white px-6 py-4 border-b border-white/10",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Vx,{className:"h-8 w-8 text-purple-400"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 h-3 w-3 bg-green-400 rounded-full animate-pulse"})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg bg-gradient-to-r from-purple-200 to-pink-200 bg-clip-text text-transparent",children:"Casaia AI"}),f.jsx("p",{className:"text-xs text-purple-300/80",children:"Asistente Premium"})]})]}),f.jsx("button",{onClick:()=>i(!1),className:"text-white/60 hover:text-white p-1 rounded-lg hover:bg-white/10",children:f.jsx(Ma,{className:"h-5 w-5"})})]})}),n?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",style:{maxHeight:"500px"},children:[o.map((_,S)=>f.jsxs("div",{className:`flex items-start gap-3 ${_.role==="user"?"flex-row-reverse":""}`,children:[f.jsx("div",{className:`flex-shrink-0 ${_.role==="user"?"ml-2":"mr-2"}`,children:_.role==="user"?f.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:f.jsx(f4,{className:"h-4 w-4 text-white"})}):f.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:f.jsx(Vx,{className:"h-4 w-4 text-white"})})}),f.jsx("div",{className:`relative max-w-[75%] px-4 py-3 rounded-2xl ${_.role==="user"?"bg-gradient-to-br from-purple-600/80 to-pink-600/80 text-white":"bg-white/10 text-gray-100 backdrop-blur-sm border border-white/10"}`,style:{boxShadow:_.role==="user"?"0 4px 15px rgba(139, 92, 246, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.2)"},children:f.jsx("p",{className:"text-sm leading-relaxed",children:_.content})})]},S)),u&&f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:f.jsx(Vx,{className:"h-4 w-4 text-white"})}),f.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-white/10 rounded-2xl px-4 py-3",children:f.jsxs("div",{className:"flex gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),f.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),f.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),f.jsx("div",{ref:m})]}),f.jsx("div",{className:"border-t border-white/10 p-4 bg-black/20 backdrop-blur-sm",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"flex-1 relative",children:f.jsx("textarea",{rows:1,value:r,onChange:_=>s(_.target.value),onKeyDown:y,placeholder:"Escribe tu mensaje...",className:"w-full rounded-2xl bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-3 text-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 resize-none",style:{minHeight:"44px"}})}),f.jsxs("button",{onClick:g,disabled:!r.trim(),className:"group relative rounded-2xl bg-gradient-to-br from-purple-600 to-pink-600 p-3 text-white shadow-lg hover:shadow-purple-500/25 transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[f.jsx(HB,{className:"h-5 w-5"}),f.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white opacity-0 group-hover:opacity-20 transition-opacity"})]})]})})]}):f.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 space-y-4",children:[f.jsx(Ea,{className:"h-12 w-12 text-purple-400 mx-auto mb-3"}),f.jsx("h4",{className:"text-white text-xl font-semibold mb-2",children:"¿En qué puedo ayudarte?"}),f.jsx("p",{className:"text-purple-300/70 text-sm",children:"Selecciona una opción para comenzar"}),f.jsxs("button",{onClick:()=>e("comprar"),className:"w-full group relative overflow-hidden rounded-2xl px-6 py-4 transition-all duration-300",style:{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(219, 39, 119, 0.1) 100%)",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-pink-600/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),f.jsx("span",{className:"relative text-lg font-semibold text-purple-300 group-hover:text-white",children:"🏠 Quiero Comprar"})]}),f.jsxs("button",{onClick:()=>e("vender"),className:"w-full group relative overflow-hidden rounded-2xl px-6 py-4 transition-all duration-300",style:{background:"linear-gradient(135deg, rgba(219, 39, 119, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%)",border:"1px solid rgba(219, 39, 119, 0.3)"},children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-600/20 to-purple-600/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),f.jsx("span",{className:"relative text-lg font-semibold text-pink-300 group-hover:text-white",children:"💰 Quiero Vender"})]})]})]})]})}function cW(){if(typeof window>"u"||!/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))return;const e=t=>{const i=t.target;!i||!i.scrollIntoView||setTimeout(()=>{i.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},300)};document.addEventListener("focusin",t=>{(t.target.tagName==="INPUT"||t.target.tagName==="TEXTAREA")&&e(t)})}var uW=typeof Element<"u",dW=typeof Map=="function",hW=typeof Set=="function",fW=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function e0(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,i,r;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!e0(n[i],e[i]))return!1;return!0}var s;if(dW&&n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(s=n.entries();!(i=s.next()).done;)if(!e.has(i.value[0]))return!1;for(s=n.entries();!(i=s.next()).done;)if(!e0(i.value[1],e.get(i.value[0])))return!1;return!0}if(hW&&n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(s=n.entries();!(i=s.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(fW&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(n[i]!==e[i])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof e.valueOf=="function")return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof e.toString=="function")return n.toString()===e.toString();if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(uW&&n instanceof Element)return!1;for(i=t;i--!==0;)if(!((r[i]==="_owner"||r[i]==="__v"||r[i]==="__o")&&n.$$typeof)&&!e0(n[r[i]],e[r[i]]))return!1;return!0}return n!==n&&e!==e}var pW=function(e,t){try{return e0(e,t)}catch(i){if((i.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw i}};const mW=Ju(pW);var gW=function(n,e,t,i,r,s,o,a){if(!n){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[t,i,r,s,o,a],u=0;l=new Error(e.replace(/%s/g,function(){return c[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},vW=gW;const VC=Ju(vW);var yW=function(e,t,i,r){var s=i?i.call(r,e,t):void 0;if(s!==void 0)return!!s;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var u=o[c];if(!l(u))return!1;var p=e[u],m=t[u];if(s=i?i.call(r,p,m,u):void 0,s===!1||s===void 0&&p!==m)return!1}return!0};const xW=Ju(yW);var _k=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(_k||{}),d1={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},HC=Object.values(_k),hE={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},_W=Object.entries(hE).reduce((n,[e,t])=>(n[t]=e,n),{}),ns="data-rh",Nu={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Ru=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const i=n[t];if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}return null},wW=n=>{let e=Ru(n,"title");const t=Ru(n,Nu.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const i=Ru(n,Nu.DEFAULT_TITLE);return e||i||void 0},bW=n=>Ru(n,Nu.ON_CHANGE_CLIENT_STATE)||(()=>{}),h1=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,i)=>({...t,...i}),{}),SW=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,i)=>{if(!t.length){const r=Object.keys(i);for(let s=0;s<r.length;s+=1){const a=r[s].toLowerCase();if(n.indexOf(a)!==-1&&i[a])return t.concat(i)}}return t},[]),EW=n=>console&&typeof console.warn=="function"&&console.warn(n),Yd=(n,e,t)=>{const i={};return t.filter(r=>Array.isArray(r[n])?!0:(typeof r[n]<"u"&&EW(`Helmet: ${n} should be of type "Array". Instead found type "${typeof r[n]}"`),!1)).map(r=>r[n]).reverse().reduce((r,s)=>{const o={};s.filter(l=>{let c;const u=Object.keys(l);for(let m=0;m<u.length;m+=1){const g=u[m],y=g.toLowerCase();e.indexOf(y)!==-1&&!(c==="rel"&&l[c].toLowerCase()==="canonical")&&!(y==="rel"&&l[y].toLowerCase()==="stylesheet")&&(c=y),e.indexOf(g)!==-1&&(g==="innerHTML"||g==="cssText"||g==="itemprop")&&(c=g)}if(!c||!l[c])return!1;const p=l[c].toLowerCase();return i[c]||(i[c]={}),o[c]||(o[c]={}),i[c][p]?!1:(o[c][p]=!0,!0)}).reverse().forEach(l=>r.push(l));const a=Object.keys(o);for(let l=0;l<a.length;l+=1){const c=a[l],u={...i[c],...o[c]};i[c]=u}return r},[]).reverse()},MW=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},TW=n=>({baseTag:SW(["href"],n),bodyAttributes:h1("bodyAttributes",n),defer:Ru(n,Nu.DEFER),encode:Ru(n,Nu.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:h1("htmlAttributes",n),linkTags:Yd("link",["rel","href"],n),metaTags:Yd("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:Yd("noscript",["innerHTML"],n),onChangeClientState:bW(n),scriptTags:Yd("script",["src","innerHTML"],n),styleTags:Yd("style",["cssText"],n),title:wW(n),titleAttributes:h1("titleAttributes",n),prioritizeSeoTags:MW(n,Nu.PRIORITIZE_SEO_TAGS)}),wk=n=>Array.isArray(n)?n.join(""):n,AW=(n,e)=>{const t=Object.keys(n);for(let i=0;i<t.length;i+=1)if(e[t[i]]&&e[t[i]].includes(n[t[i]]))return!0;return!1},f1=(n,e)=>Array.isArray(n)?n.reduce((t,i)=>(AW(i,e)?t.priority.push(i):t.default.push(i),t),{priority:[],default:[]}):{default:n,priority:[]},GC=(n,e)=>({...n,[e]:void 0}),CW=["noscript","script","style"],Nw=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),bk=n=>Object.keys(n).reduce((e,t)=>{const i=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${i}`:i},""),PW=(n,e,t,i)=>{const r=bk(t),s=wk(e);return r?`<${n} ${ns}="true" ${r}>${Nw(s,i)}</${n}>`:`<${n} ${ns}="true">${Nw(s,i)}</${n}>`},NW=(n,e,t=!0)=>e.reduce((i,r)=>{const s=r,o=Object.keys(s).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,u)=>{const p=typeof s[u]>"u"?u:`${u}="${Nw(s[u],t)}"`;return c?`${c} ${p}`:p},""),a=s.innerHTML||s.cssText||"",l=CW.indexOf(n)===-1;return`${i}<${n} ${ns}="true" ${o}${l?"/>":`>${a}</${n}>`}`},""),Sk=(n,e={})=>Object.keys(n).reduce((t,i)=>{const r=hE[i];return t[r||i]=n[i],t},e),RW=(n,e,t)=>{const i={key:e,[ns]:!0},r=Sk(t,i);return[Dt.createElement("title",r,e)]},t0=(n,e)=>e.map((t,i)=>{const r={key:i,[ns]:!0};return Object.keys(t).forEach(s=>{const a=hE[s]||s;if(a==="innerHTML"||a==="cssText"){const l=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:l}}else r[a]=t[s]}),Dt.createElement(n,r)}),Ar=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>RW(n,e.title,e.titleAttributes),toString:()=>PW(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Sk(e),toString:()=>bk(e)};default:return{toComponent:()=>t0(n,e),toString:()=>NW(n,e,t)}}},LW=({metaTags:n,linkTags:e,scriptTags:t,encode:i})=>{const r=f1(n,d1.meta),s=f1(e,d1.link),o=f1(t,d1.script);return{priorityMethods:{toComponent:()=>[...t0("meta",r.priority),...t0("link",s.priority),...t0("script",o.priority)],toString:()=>`${Ar("meta",r.priority,i)} ${Ar("link",s.priority,i)} ${Ar("script",o.priority,i)}`},metaTags:r.default,linkTags:s.default,scriptTags:o.default}},IW=n=>{const{baseTag:e,bodyAttributes:t,encode:i=!0,htmlAttributes:r,noscriptTags:s,styleTags:o,title:a="",titleAttributes:l,prioritizeSeoTags:c}=n;let{linkTags:u,metaTags:p,scriptTags:m}=n,g={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:g,linkTags:u,metaTags:p,scriptTags:m}=LW(n)),{priority:g,base:Ar("base",e,i),bodyAttributes:Ar("bodyAttributes",t,i),htmlAttributes:Ar("htmlAttributes",r,i),link:Ar("link",u,i),meta:Ar("meta",p,i),noscript:Ar("noscript",s,i),script:Ar("script",m,i),style:Ar("style",o,i),title:Ar("title",{title:a,titleAttributes:l},i)}},Rw=IW,Bm=[],Ek=!!(typeof window<"u"&&window.document&&window.document.createElement),Lw=class{constructor(n,e){Xs(this,"instances",[]);Xs(this,"canUseDOM",Ek);Xs(this,"context");Xs(this,"value",{setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?Bm:this.instances,add:n=>{(this.canUseDOM?Bm:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?Bm:this.instances).indexOf(n);(this.canUseDOM?Bm:this.instances).splice(e,1)}}});this.context=n,this.canUseDOM=e||!1,e||(n.helmet=Rw({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},kW={},Mk=Dt.createContext(kW),Du,Tk=(Du=class extends N.Component{constructor(t){super(t);Xs(this,"helmetData");this.helmetData=new Lw(this.props.context||{},Du.canUseDOM)}render(){return Dt.createElement(Mk.Provider,{value:this.helmetData.value},this.props.children)}},Xs(Du,"canUseDOM",Ek),Du),Sc=(n,e)=>{const t=document.head||document.querySelector("head"),i=t.querySelectorAll(`${n}[${ns}]`),r=[].slice.call(i),s=[];let o;return e&&e.length&&e.forEach(a=>{const l=document.createElement(n);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(c==="innerHTML")l.innerHTML=a.innerHTML;else if(c==="cssText")l.styleSheet?l.styleSheet.cssText=a.cssText:l.appendChild(document.createTextNode(a.cssText));else{const u=c,p=typeof a[u]>"u"?"":a[u];l.setAttribute(c,p)}l.setAttribute(ns,"true"),r.some((c,u)=>(o=u,l.isEqualNode(c)))?r.splice(o,1):s.push(l)}),r.forEach(a=>{var l;return(l=a.parentNode)==null?void 0:l.removeChild(a)}),s.forEach(a=>t.appendChild(a)),{oldTags:r,newTags:s}},Iw=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const i=t.getAttribute(ns),r=i?i.split(","):[],s=[...r],o=Object.keys(e);for(const a of o){const l=e[a]||"";t.getAttribute(a)!==l&&t.setAttribute(a,l),r.indexOf(a)===-1&&r.push(a);const c=s.indexOf(a);c!==-1&&s.splice(c,1)}for(let a=s.length-1;a>=0;a-=1)t.removeAttribute(s[a]);r.length===s.length?t.removeAttribute(ns):t.getAttribute(ns)!==o.join(",")&&t.setAttribute(ns,o.join(","))},DW=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=wk(n)),Iw("title",e)},WC=(n,e)=>{const{baseTag:t,bodyAttributes:i,htmlAttributes:r,linkTags:s,metaTags:o,noscriptTags:a,onChangeClientState:l,scriptTags:c,styleTags:u,title:p,titleAttributes:m}=n;Iw("body",i),Iw("html",r),DW(p,m);const g={baseTag:Sc("base",t),linkTags:Sc("link",s),metaTags:Sc("meta",o),noscriptTags:Sc("noscript",a),scriptTags:Sc("script",c),styleTags:Sc("style",u)},y={},_={};Object.keys(g).forEach(S=>{const{newTags:v,oldTags:b}=g[S];v.length&&(y[S]=v),b.length&&(_[S]=g[S].oldTags)}),e&&e(),l(n,y,_)},Kd=null,jW=n=>{Kd&&cancelAnimationFrame(Kd),n.defer?Kd=requestAnimationFrame(()=>{WC(n,()=>{Kd=null})}):(WC(n),Kd=null)},OW=jW,$C=class extends N.Component{constructor(){super(...arguments);Xs(this,"rendered",!1)}shouldComponentUpdate(e){return!xW(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let i=null;const r=TW(e.get().map(s=>{const o={...s.props};return delete o.context,o}));Tk.canUseDOM?OW(r):Rw&&(i=Rw(r)),t(i)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},d_,Jf=(d_=class extends N.Component{shouldComponentUpdate(n){return!mW(GC(this.props,"helmetData"),GC(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,i){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,i)}]}}mapObjectTypeChildren(n,e,t,i){switch(n.type){case"title":return{...e,[n.type]:i,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(i=>{t={...t,[i]:n[i]}}),t}warnOnInvalidChildren(n,e){return VC(HC.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${HC.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),VC(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return Dt.Children.forEach(n,i=>{if(!i||!i.props)return;const{children:r,...s}=i.props,o=Object.keys(s).reduce((l,c)=>(l[_W[c]||c]=s[c],l),{});let{type:a}=i;switch(typeof a=="symbol"?a=a.toString():this.warnOnInvalidChildren(i,r),a){case"Symbol(react.fragment)":e=this.mapChildrenToProps(r,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(i,t,o,r);break;default:e=this.mapObjectTypeChildren(i,e,o,r);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:i}=e;if(n&&(t=this.mapChildrenToProps(n,t)),i&&!(i instanceof Lw)){const r=i;i=new Lw(r.context,!0),delete t.helmetData}return i?Dt.createElement($C,{...t,context:i.value}):Dt.createElement(Mk.Consumer,null,r=>Dt.createElement($C,{...t,context:r}))}},Xs(d_,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),d_);const FW=1;let p1=0;function UW(){return p1=(p1+1)%Number.MAX_VALUE,p1.toString()}function jv(){const[n,e]=N.useState({toasts:[]});N.useEffect(()=>{const i=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const s=setTimeout(()=>{r.dismiss()},r.duration||5e3);i.push(s)}),()=>{i.forEach(r=>clearTimeout(r))}},[n.toasts]);function t({...i}){const r=UW(),s=a=>e(l=>({...l,toasts:l.toasts.map(c=>c.id===r?{...c,...a}:c)})),o=()=>e(a=>({...a,toasts:a.toasts.filter(l=>l.id!==r)}));return e(a=>({...a,toasts:[{...i,id:r,dismiss:o},...a.toasts].slice(0,FW)})),{id:r,dismiss:o,update:s}}return{toast:t,toasts:n.toasts}}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ov="152",Ms={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},pl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ak=0,kw=1,Ck=2,zW=3,Pk=0,Fv=1,Fh=2,Yr=3,_o=0,Ni=1,Cs=2,BW=2,po=0,Rl=1,$0=2,Dw=3,jw=4,Nk=5,vl=100,Rk=101,Lk=102,Ow=103,Fw=104,Ik=200,kk=201,Dk=202,jk=203,fE=204,pE=205,Ok=206,Fk=207,Uk=208,zk=209,Bk=210,Vk=0,Hk=1,Gk=2,X0=3,Wk=4,$k=5,Xk=6,qk=7,Qf=0,Yk=1,Kk=2,ss=0,Zk=1,Jk=2,Qk=3,mE=4,eD=5,Uv=300,Ca=301,Pa=302,vf=303,yf=304,sd=306,xf=1e3,xi=1001,_f=1002,En=1003,q0=1004,VW=1004,Uh=1005,HW=1005,Tn=1006,gE=1007,GW=1007,Na=1008,WW=1008,wo=1009,tD=1010,nD=1011,vE=1012,iD=1013,oa=1014,co=1015,$u=1016,rD=1017,sD=1018,Ll=1020,oD=1021,Gi=1023,aD=1024,lD=1025,ya=1026,Hl=1027,cD=1028,uD=1029,dD=1030,hD=1031,fD=1033,n0=33776,i0=33777,r0=33778,s0=33779,Uw=35840,zw=35841,Bw=35842,Vw=35843,pD=36196,Hw=37492,Gw=37496,Ww=37808,$w=37809,Xw=37810,qw=37811,Yw=37812,Kw=37813,Zw=37814,Jw=37815,Qw=37816,eb=37817,tb=37818,nb=37819,ib=37820,rb=37821,o0=36492,mD=36283,sb=36284,ob=36285,ab=36286,gD=2200,vD=2201,yD=2202,wf=2300,bf=2301,a0=2302,Ml=2400,Tl=2401,Sf=2402,zv=2500,yE=2501,$W=0,XW=1,qW=2,xE=3e3,xa=3001,xD=3200,_D=3201,Ua=0,wD=1,_a="",vt="srgb",ls="srgb-linear",_E="display-p3",YW=0,l0=7680,KW=7681,ZW=7682,JW=7683,QW=34055,e$=34056,t$=5386,n$=512,i$=513,r$=514,s$=515,o$=516,a$=517,l$=518,bD=519,Ef=35044,c$=35048,u$=35040,d$=35045,h$=35049,f$=35041,p$=35046,m$=35050,g$=35042,v$="100",lb="300 es",Y0=1035;let To=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const mi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let XC=1234567;const Il=Math.PI/180,Xu=180/Math.PI;function lr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(mi[n&255]+mi[n>>8&255]+mi[n>>16&255]+mi[n>>24&255]+"-"+mi[e&255]+mi[e>>8&255]+"-"+mi[e>>16&15|64]+mi[e>>24&255]+"-"+mi[t&63|128]+mi[t>>8&255]+"-"+mi[t>>16&255]+mi[t>>24&255]+mi[i&255]+mi[i>>8&255]+mi[i>>16&255]+mi[i>>24&255]).toLowerCase()}function vn(n,e,t){return Math.max(e,Math.min(t,n))}function wE(n,e){return(n%e+e)%e}function y$(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function x$(n,e,t){return n!==e?(t-n)/(e-n):0}function zh(n,e,t){return(1-t)*n+t*e}function _$(n,e,t,i){return zh(n,e,1-Math.exp(-t*i))}function w$(n,e=1){return e-Math.abs(wE(n,e*2)-e)}function b$(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function S$(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function E$(n,e){return n+Math.floor(Math.random()*(e-n+1))}function M$(n,e){return n+Math.random()*(e-n)}function T$(n){return n*(.5-Math.random())}function A$(n){n!==void 0&&(XC=n);let e=XC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function C$(n){return n*Il}function P$(n){return n*Xu}function cb(n){return(n&n-1)===0&&n!==0}function SD(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ED(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function N$(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),p=s((e-i)/2),m=o((e-i)/2),g=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*p,l*m,a*c);break;case"YZY":n.set(l*m,a*u,l*p,a*c);break;case"ZXZ":n.set(l*p,l*m,a*u,a*c);break;case"XZX":n.set(a*u,l*y,l*g,a*c);break;case"YXY":n.set(l*g,a*u,l*y,a*c);break;case"ZYZ":n.set(l*y,l*g,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function or(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function bt(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const R$={DEG2RAD:Il,RAD2DEG:Xu,generateUUID:lr,clamp:vn,euclideanModulo:wE,mapLinear:y$,inverseLerp:x$,lerp:zh,damp:_$,pingpong:w$,smoothstep:b$,smootherstep:S$,randInt:E$,randFloat:M$,randFloatSpread:T$,seededRandom:A$,degToRad:C$,radToDeg:P$,isPowerOfTwo:cb,ceilPowerOfTwo:SD,floorPowerOfTwo:ED,setQuaternionFromProperEuler:N$,normalize:bt,denormalize:or};class xe{constructor(e=0,t=0){xe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(vn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ct{constructor(){Ct.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],p=i[7],m=i[2],g=i[5],y=i[8],_=r[0],S=r[3],v=r[6],b=r[1],w=r[4],M=r[7],A=r[2],P=r[5],L=r[8];return s[0]=o*_+a*b+l*A,s[3]=o*S+a*w+l*P,s[6]=o*v+a*M+l*L,s[1]=c*_+u*b+p*A,s[4]=c*S+u*w+p*P,s[7]=c*v+u*M+p*L,s[2]=m*_+g*b+y*A,s[5]=m*S+g*w+y*P,s[8]=m*v+g*M+y*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],p=u*o-a*c,m=a*l-u*s,g=c*s-o*l,y=t*p+i*m+r*g;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/y;return e[0]=p*_,e[1]=(r*c-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=m*_,e[4]=(u*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=g*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(m1.makeScale(e,t)),this}rotate(e){return this.premultiply(m1.makeRotation(-e)),this}translate(e,t){return this.premultiply(m1.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const m1=new Ct;function MD(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const L$={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function vu(n,e){return new L$[n](e)}function Mf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const qC={};function Bh(n){n in qC||(qC[n]=!0,console.warn(n))}function Lu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function g1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const I$=new Ct().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),k$=new Ct().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function D$(n){return n.convertSRGBToLinear().applyMatrix3(k$)}function j$(n){return n.applyMatrix3(I$).convertLinearToSRGB()}const O$={[ls]:n=>n,[vt]:n=>n.convertSRGBToLinear(),[_E]:D$},F$={[ls]:n=>n,[vt]:n=>n.convertLinearToSRGB(),[_E]:j$},Tr={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return ls},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=O$[e],r=F$[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Ec;class bE{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ec===void 0&&(Ec=Mf("canvas")),Ec.width=e.width,Ec.height=e.height;const i=Ec.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ec}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Mf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Lu(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Lu(t[i]/255)*255):t[i]=Lu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Al{constructor(e=null){this.isSource=!0,this.uuid=lr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(v1(r[o].image)):s.push(v1(r[o]))}else s=v1(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function v1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?bE.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let U$=0;class _n extends To{constructor(e=_n.DEFAULT_IMAGE,t=_n.DEFAULT_MAPPING,i=xi,r=xi,s=Tn,o=Na,a=Gi,l=wo,c=_n.DEFAULT_ANISOTROPY,u=_a){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:U$++}),this.uuid=lr(),this.name="",this.source=new Al(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new xe(0,0),this.repeat=new xe(1,1),this.center=new xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ct,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Bh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===xa?vt:_a),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Uv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case xf:e.x=e.x-Math.floor(e.x);break;case xi:e.x=e.x<0?0:1;break;case _f:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case xf:e.y=e.y-Math.floor(e.y);break;case xi:e.y=e.y<0?0:1;break;case _f:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Bh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===vt?xa:xE}set encoding(e){Bh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===xa?vt:_a}}_n.DEFAULT_IMAGE=null;_n.DEFAULT_MAPPING=Uv;_n.DEFAULT_ANISOTROPY=1;class Wt{constructor(e=0,t=0,i=0,r=1){Wt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],p=l[8],m=l[1],g=l[5],y=l[9],_=l[2],S=l[6],v=l[10];if(Math.abs(u-m)<.01&&Math.abs(p-_)<.01&&Math.abs(y-S)<.01){if(Math.abs(u+m)<.1&&Math.abs(p+_)<.1&&Math.abs(y+S)<.1&&Math.abs(c+g+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(c+1)/2,M=(g+1)/2,A=(v+1)/2,P=(u+m)/4,L=(p+_)/4,I=(y+S)/4;return w>M&&w>A?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=P/i,s=L/i):M>A?M<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(M),i=P/r,s=I/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=L/s,r=I/s),this.set(i,r,s,t),this}let b=Math.sqrt((S-y)*(S-y)+(p-_)*(p-_)+(m-u)*(m-u));return Math.abs(b)<.001&&(b=1),this.x=(S-y)/b,this.y=(p-_)/b,this.z=(m-u)/b,this.w=Math.acos((c+g+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class cs extends To{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Wt(0,0,e,t),this.scissorTest=!1,this.viewport=new Wt(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(Bh("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===xa?vt:_a),this.texture=new _n(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Tn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Al(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Bv extends _n{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=En,this.minFilter=En,this.wrapR=xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class z$ extends cs{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Bv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class SE extends _n{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=En,this.minFilter=En,this.wrapR=xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class B$ extends cs{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new SE(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class V$ extends cs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class _i{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],p=i[r+3];const m=s[o+0],g=s[o+1],y=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=p;return}if(a===1){e[t+0]=m,e[t+1]=g,e[t+2]=y,e[t+3]=_;return}if(p!==_||l!==m||c!==g||u!==y){let S=1-a;const v=l*m+c*g+u*y+p*_,b=v>=0?1:-1,w=1-v*v;if(w>Number.EPSILON){const A=Math.sqrt(w),P=Math.atan2(A,v*b);S=Math.sin(S*P)/A,a=Math.sin(a*P)/A}const M=a*b;if(l=l*S+m*M,c=c*S+g*M,u=u*S+y*M,p=p*S+_*M,S===1-a){const A=1/Math.sqrt(l*l+c*c+u*u+p*p);l*=A,c*=A,u*=A,p*=A}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],p=s[o],m=s[o+1],g=s[o+2],y=s[o+3];return e[t]=a*y+u*p+l*g-c*m,e[t+1]=l*y+u*m+c*p-a*g,e[t+2]=c*y+u*g+a*m-l*p,e[t+3]=u*y-a*p-l*m-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),p=a(s/2),m=l(i/2),g=l(r/2),y=l(s/2);switch(o){case"XYZ":this._x=m*u*p+c*g*y,this._y=c*g*p-m*u*y,this._z=c*u*y+m*g*p,this._w=c*u*p-m*g*y;break;case"YXZ":this._x=m*u*p+c*g*y,this._y=c*g*p-m*u*y,this._z=c*u*y-m*g*p,this._w=c*u*p+m*g*y;break;case"ZXY":this._x=m*u*p-c*g*y,this._y=c*g*p+m*u*y,this._z=c*u*y+m*g*p,this._w=c*u*p-m*g*y;break;case"ZYX":this._x=m*u*p-c*g*y,this._y=c*g*p+m*u*y,this._z=c*u*y-m*g*p,this._w=c*u*p+m*g*y;break;case"YZX":this._x=m*u*p+c*g*y,this._y=c*g*p+m*u*y,this._z=c*u*y-m*g*p,this._w=c*u*p-m*g*y;break;case"XZY":this._x=m*u*p-c*g*y,this._y=c*g*p-m*u*y,this._z=c*u*y+m*g*p,this._w=c*u*p+m*g*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],p=t[10],m=i+a+p;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(u-l)*g,this._y=(s-c)*g,this._z=(o-r)*g}else if(i>a&&i>p){const g=2*Math.sqrt(1+i-a-p);this._w=(u-l)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+c)/g}else if(a>p){const g=2*Math.sqrt(1+a-i-p);this._w=(s-c)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(l+u)/g}else{const g=2*Math.sqrt(1+p-i-a);this._w=(o-r)/g,this._x=(s+c)/g,this._y=(l+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(vn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),p=Math.sin((1-t)*u)/c,m=Math.sin(t*u)/c;return this._w=o*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,t=0,i=0){F.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(YC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(YC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,p=l*r+s*i-o*t,m=-s*t-o*i-a*r;return this.x=c*l+m*-s+u*-a-p*-o,this.y=u*l+m*-o+p*-s-c*-a,this.z=p*l+m*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return y1.copy(this).projectOnVector(e),this.sub(y1)}reflect(e){return this.sub(y1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(vn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const y1=new F,YC=new _i;class Os{constructor(e=new F(1/0,1/0,1/0),t=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ys.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ys.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ys.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Mc.copy(e.boundingBox),Mc.applyMatrix4(e.matrixWorld),this.union(Mc);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Ys.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Ys)}else r.boundingBox===null&&r.computeBoundingBox(),Mc.copy(r.boundingBox),Mc.applyMatrix4(e.matrixWorld),this.union(Mc)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ys),Ys.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Zd),Vm.subVectors(this.max,Zd),Tc.subVectors(e.a,Zd),Ac.subVectors(e.b,Zd),Cc.subVectors(e.c,Zd),Uo.subVectors(Ac,Tc),zo.subVectors(Cc,Ac),tl.subVectors(Tc,Cc);let t=[0,-Uo.z,Uo.y,0,-zo.z,zo.y,0,-tl.z,tl.y,Uo.z,0,-Uo.x,zo.z,0,-zo.x,tl.z,0,-tl.x,-Uo.y,Uo.x,0,-zo.y,zo.x,0,-tl.y,tl.x,0];return!x1(t,Tc,Ac,Cc,Vm)||(t=[1,0,0,0,1,0,0,0,1],!x1(t,Tc,Ac,Cc,Vm))?!1:(Hm.crossVectors(Uo,zo),t=[Hm.x,Hm.y,Hm.z],x1(t,Tc,Ac,Cc,Vm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ys).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ys).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qs=[new F,new F,new F,new F,new F,new F,new F,new F],Ys=new F,Mc=new Os,Tc=new F,Ac=new F,Cc=new F,Uo=new F,zo=new F,tl=new F,Zd=new F,Vm=new F,Hm=new F,nl=new F;function x1(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){nl.fromArray(n,s);const a=r.x*Math.abs(nl.x)+r.y*Math.abs(nl.y)+r.z*Math.abs(nl.z),l=e.dot(nl),c=t.dot(nl),u=i.dot(nl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const H$=new Os,Jd=new F,_1=new F;class Fs{constructor(e=new F,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):H$.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Jd.subVectors(e,this.center);const t=Jd.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Jd,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(_1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Jd.copy(e.center).add(_1)),this.expandByPoint(Jd.copy(e.center).sub(_1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ks=new F,w1=new F,Gm=new F,Bo=new F,b1=new F,Wm=new F,S1=new F;class od{constructor(e=new F,t=new F(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ks)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ks.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ks.copy(this.origin).addScaledVector(this.direction,t),Ks.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){w1.copy(e).add(t).multiplyScalar(.5),Gm.copy(t).sub(e).normalize(),Bo.copy(this.origin).sub(w1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Gm),a=Bo.dot(this.direction),l=-Bo.dot(Gm),c=Bo.lengthSq(),u=Math.abs(1-o*o);let p,m,g,y;if(u>0)if(p=o*l-a,m=o*a-l,y=s*u,p>=0)if(m>=-y)if(m<=y){const _=1/u;p*=_,m*=_,g=p*(p+o*m+2*a)+m*(o*p+m+2*l)+c}else m=s,p=Math.max(0,-(o*m+a)),g=-p*p+m*(m+2*l)+c;else m=-s,p=Math.max(0,-(o*m+a)),g=-p*p+m*(m+2*l)+c;else m<=-y?(p=Math.max(0,-(-o*s+a)),m=p>0?-s:Math.min(Math.max(-s,-l),s),g=-p*p+m*(m+2*l)+c):m<=y?(p=0,m=Math.min(Math.max(-s,-l),s),g=m*(m+2*l)+c):(p=Math.max(0,-(o*s+a)),m=p>0?s:Math.min(Math.max(-s,-l),s),g=-p*p+m*(m+2*l)+c);else m=o>0?-s:s,p=Math.max(0,-(o*m+a)),g=-p*p+m*(m+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(w1).addScaledVector(Gm,m),g}intersectSphere(e,t){Ks.subVectors(e.center,this.origin);const i=Ks.dot(this.direction),r=Ks.dot(Ks)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,p=1/this.direction.z,m=this.origin;return c>=0?(i=(e.min.x-m.x)*c,r=(e.max.x-m.x)*c):(i=(e.max.x-m.x)*c,r=(e.min.x-m.x)*c),u>=0?(s=(e.min.y-m.y)*u,o=(e.max.y-m.y)*u):(s=(e.max.y-m.y)*u,o=(e.min.y-m.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),p>=0?(a=(e.min.z-m.z)*p,l=(e.max.z-m.z)*p):(a=(e.max.z-m.z)*p,l=(e.min.z-m.z)*p),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ks)!==null}intersectTriangle(e,t,i,r,s){b1.subVectors(t,e),Wm.subVectors(i,e),S1.crossVectors(b1,Wm);let o=this.direction.dot(S1),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Bo.subVectors(this.origin,e);const l=a*this.direction.dot(Wm.crossVectors(Bo,Wm));if(l<0)return null;const c=a*this.direction.dot(b1.cross(Bo));if(c<0||l+c>o)return null;const u=-a*Bo.dot(S1);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class mt{constructor(){mt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,l,c,u,p,m,g,y,_,S){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=p,v[14]=m,v[3]=g,v[7]=y,v[11]=_,v[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new mt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Pc.setFromMatrixColumn(e,0).length(),s=1/Pc.setFromMatrixColumn(e,1).length(),o=1/Pc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const m=o*u,g=o*p,y=a*u,_=a*p;t[0]=l*u,t[4]=-l*p,t[8]=c,t[1]=g+y*c,t[5]=m-_*c,t[9]=-a*l,t[2]=_-m*c,t[6]=y+g*c,t[10]=o*l}else if(e.order==="YXZ"){const m=l*u,g=l*p,y=c*u,_=c*p;t[0]=m+_*a,t[4]=y*a-g,t[8]=o*c,t[1]=o*p,t[5]=o*u,t[9]=-a,t[2]=g*a-y,t[6]=_+m*a,t[10]=o*l}else if(e.order==="ZXY"){const m=l*u,g=l*p,y=c*u,_=c*p;t[0]=m-_*a,t[4]=-o*p,t[8]=y+g*a,t[1]=g+y*a,t[5]=o*u,t[9]=_-m*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const m=o*u,g=o*p,y=a*u,_=a*p;t[0]=l*u,t[4]=y*c-g,t[8]=m*c+_,t[1]=l*p,t[5]=_*c+m,t[9]=g*c-y,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const m=o*l,g=o*c,y=a*l,_=a*c;t[0]=l*u,t[4]=_-m*p,t[8]=y*p+g,t[1]=p,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=g*p+y,t[10]=m-_*p}else if(e.order==="XZY"){const m=o*l,g=o*c,y=a*l,_=a*c;t[0]=l*u,t[4]=-p,t[8]=c*u,t[1]=m*p+_,t[5]=o*u,t[9]=g*p-y,t[2]=y*p-g,t[6]=a*u,t[10]=_*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(G$,e,W$)}lookAt(e,t,i){const r=this.elements;return tr.subVectors(e,t),tr.lengthSq()===0&&(tr.z=1),tr.normalize(),Vo.crossVectors(i,tr),Vo.lengthSq()===0&&(Math.abs(i.z)===1?tr.x+=1e-4:tr.z+=1e-4,tr.normalize(),Vo.crossVectors(i,tr)),Vo.normalize(),$m.crossVectors(tr,Vo),r[0]=Vo.x,r[4]=$m.x,r[8]=tr.x,r[1]=Vo.y,r[5]=$m.y,r[9]=tr.y,r[2]=Vo.z,r[6]=$m.z,r[10]=tr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],p=i[5],m=i[9],g=i[13],y=i[2],_=i[6],S=i[10],v=i[14],b=i[3],w=i[7],M=i[11],A=i[15],P=r[0],L=r[4],I=r[8],C=r[12],k=r[1],V=r[5],q=r[9],B=r[13],U=r[2],$=r[6],X=r[10],ee=r[14],D=r[3],O=r[7],H=r[11],Z=r[15];return s[0]=o*P+a*k+l*U+c*D,s[4]=o*L+a*V+l*$+c*O,s[8]=o*I+a*q+l*X+c*H,s[12]=o*C+a*B+l*ee+c*Z,s[1]=u*P+p*k+m*U+g*D,s[5]=u*L+p*V+m*$+g*O,s[9]=u*I+p*q+m*X+g*H,s[13]=u*C+p*B+m*ee+g*Z,s[2]=y*P+_*k+S*U+v*D,s[6]=y*L+_*V+S*$+v*O,s[10]=y*I+_*q+S*X+v*H,s[14]=y*C+_*B+S*ee+v*Z,s[3]=b*P+w*k+M*U+A*D,s[7]=b*L+w*V+M*$+A*O,s[11]=b*I+w*q+M*X+A*H,s[15]=b*C+w*B+M*ee+A*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],p=e[6],m=e[10],g=e[14],y=e[3],_=e[7],S=e[11],v=e[15];return y*(+s*l*p-r*c*p-s*a*m+i*c*m+r*a*g-i*l*g)+_*(+t*l*g-t*c*m+s*o*m-r*o*g+r*c*u-s*l*u)+S*(+t*c*p-t*a*g-s*o*p+i*o*g+s*a*u-i*c*u)+v*(-r*a*u-t*l*p+t*a*m+r*o*p-i*o*m+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],p=e[9],m=e[10],g=e[11],y=e[12],_=e[13],S=e[14],v=e[15],b=p*S*c-_*m*c+_*l*g-a*S*g-p*l*v+a*m*v,w=y*m*c-u*S*c-y*l*g+o*S*g+u*l*v-o*m*v,M=u*_*c-y*p*c+y*a*g-o*_*g-u*a*v+o*p*v,A=y*p*l-u*_*l-y*a*m+o*_*m+u*a*S-o*p*S,P=t*b+i*w+r*M+s*A;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/P;return e[0]=b*L,e[1]=(_*m*s-p*S*s-_*r*g+i*S*g+p*r*v-i*m*v)*L,e[2]=(a*S*s-_*l*s+_*r*c-i*S*c-a*r*v+i*l*v)*L,e[3]=(p*l*s-a*m*s-p*r*c+i*m*c+a*r*g-i*l*g)*L,e[4]=w*L,e[5]=(u*S*s-y*m*s+y*r*g-t*S*g-u*r*v+t*m*v)*L,e[6]=(y*l*s-o*S*s-y*r*c+t*S*c+o*r*v-t*l*v)*L,e[7]=(o*m*s-u*l*s+u*r*c-t*m*c-o*r*g+t*l*g)*L,e[8]=M*L,e[9]=(y*p*s-u*_*s-y*i*g+t*_*g+u*i*v-t*p*v)*L,e[10]=(o*_*s-y*a*s+y*i*c-t*_*c-o*i*v+t*a*v)*L,e[11]=(u*a*s-o*p*s-u*i*c+t*p*c+o*i*g-t*a*g)*L,e[12]=A*L,e[13]=(u*_*r-y*p*r+y*i*m-t*_*m-u*i*S+t*p*S)*L,e[14]=(y*a*r-o*_*r-y*i*l+t*_*l+o*i*S-t*a*S)*L,e[15]=(o*p*r-u*a*r+u*i*l-t*p*l-o*i*m+t*a*m)*L,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,p=a+a,m=s*c,g=s*u,y=s*p,_=o*u,S=o*p,v=a*p,b=l*c,w=l*u,M=l*p,A=i.x,P=i.y,L=i.z;return r[0]=(1-(_+v))*A,r[1]=(g+M)*A,r[2]=(y-w)*A,r[3]=0,r[4]=(g-M)*P,r[5]=(1-(m+v))*P,r[6]=(S+b)*P,r[7]=0,r[8]=(y+w)*L,r[9]=(S-b)*L,r[10]=(1-(m+_))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Pc.set(r[0],r[1],r[2]).length();const o=Pc.set(r[4],r[5],r[6]).length(),a=Pc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Wr.copy(this);const c=1/s,u=1/o,p=1/a;return Wr.elements[0]*=c,Wr.elements[1]*=c,Wr.elements[2]*=c,Wr.elements[4]*=u,Wr.elements[5]*=u,Wr.elements[6]*=u,Wr.elements[8]*=p,Wr.elements[9]*=p,Wr.elements[10]*=p,t.setFromRotationMatrix(Wr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(t-e),c=2*s/(i-r),u=(t+e)/(t-e),p=(i+r)/(i-r),m=-(o+s)/(o-s),g=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=p,a[13]=0,a[2]=0,a[6]=0,a[10]=m,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(o-s),p=(t+e)*l,m=(i+r)*c,g=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-p,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-m,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Pc=new F,Wr=new mt,G$=new F(0,0,0),W$=new F(1,1,1),Vo=new F,$m=new F,tr=new F,KC=new mt,ZC=new _i;class ep{constructor(e=0,t=0,i=0,r=ep.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],p=r[2],m=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(vn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-vn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(vn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-vn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(vn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-vn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return KC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(KC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ZC.setFromEuler(this),this.setFromQuaternion(ZC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ep.DEFAULT_ORDER="XYZ";class kl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let $$=0;const JC=new F,Nc=new _i,Zs=new mt,Xm=new F,Qd=new F,X$=new F,q$=new _i,QC=new F(1,0,0),eP=new F(0,1,0),tP=new F(0,0,1),Y$={type:"added"},nP={type:"removed"};class zt extends To{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$$++}),this.uuid=lr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zt.DEFAULT_UP.clone();const e=new F,t=new ep,i=new _i,r=new F(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new mt},normalMatrix:{value:new Ct}}),this.matrix=new mt,this.matrixWorld=new mt,this.matrixAutoUpdate=zt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new kl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Nc.setFromAxisAngle(e,t),this.quaternion.multiply(Nc),this}rotateOnWorldAxis(e,t){return Nc.setFromAxisAngle(e,t),this.quaternion.premultiply(Nc),this}rotateX(e){return this.rotateOnAxis(QC,e)}rotateY(e){return this.rotateOnAxis(eP,e)}rotateZ(e){return this.rotateOnAxis(tP,e)}translateOnAxis(e,t){return JC.copy(e).applyQuaternion(this.quaternion),this.position.add(JC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(QC,e)}translateY(e){return this.translateOnAxis(eP,e)}translateZ(e){return this.translateOnAxis(tP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Zs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Xm.copy(e):Xm.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Qd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Zs.lookAt(Qd,Xm,this.up):Zs.lookAt(Xm,Qd,this.up),this.quaternion.setFromRotationMatrix(Zs),r&&(Zs.extractRotation(r.matrixWorld),Nc.setFromRotationMatrix(Zs),this.quaternion.premultiply(Nc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Y$)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nP)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(nP)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Zs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Zs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Zs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qd,e,X$),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qd,q$,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const p=l[c];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),p=o(e.shapes),m=o(e.skeletons),g=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),p.length>0&&(i.shapes=p),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}zt.DEFAULT_UP=new F(0,1,0);zt.DEFAULT_MATRIX_AUTO_UPDATE=!0;zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const $r=new F,Js=new F,E1=new F,Qs=new F,Rc=new F,Lc=new F,iP=new F,M1=new F,T1=new F,A1=new F;let qm=!1;class Vi{constructor(e=new F,t=new F,i=new F){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),$r.subVectors(e,t),r.cross($r);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){$r.subVectors(r,t),Js.subVectors(i,t),E1.subVectors(e,t);const o=$r.dot($r),a=$r.dot(Js),l=$r.dot(E1),c=Js.dot(Js),u=Js.dot(E1),p=o*c-a*a;if(p===0)return s.set(-2,-1,-1);const m=1/p,g=(c*l-a*u)*m,y=(o*u-a*l)*m;return s.set(1-g-y,y,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Qs),Qs.x>=0&&Qs.y>=0&&Qs.x+Qs.y<=1}static getUV(e,t,i,r,s,o,a,l){return qm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),qm=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Qs),l.setScalar(0),l.addScaledVector(s,Qs.x),l.addScaledVector(o,Qs.y),l.addScaledVector(a,Qs.z),l}static isFrontFacing(e,t,i,r){return $r.subVectors(i,t),Js.subVectors(e,t),$r.cross(Js).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return $r.subVectors(this.c,this.b),Js.subVectors(this.a,this.b),$r.cross(Js).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Vi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return qm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),qm=!0),Vi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return Vi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Vi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Rc.subVectors(r,i),Lc.subVectors(s,i),M1.subVectors(e,i);const l=Rc.dot(M1),c=Lc.dot(M1);if(l<=0&&c<=0)return t.copy(i);T1.subVectors(e,r);const u=Rc.dot(T1),p=Lc.dot(T1);if(u>=0&&p<=u)return t.copy(r);const m=l*p-u*c;if(m<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Rc,o);A1.subVectors(e,s);const g=Rc.dot(A1),y=Lc.dot(A1);if(y>=0&&g<=y)return t.copy(s);const _=g*c-l*y;if(_<=0&&c>=0&&y<=0)return a=c/(c-y),t.copy(i).addScaledVector(Lc,a);const S=u*y-g*p;if(S<=0&&p-u>=0&&g-y>=0)return iP.subVectors(s,r),a=(p-u)/(p-u+(g-y)),t.copy(r).addScaledVector(iP,a);const v=1/(S+_+m);return o=_*v,a=m*v,t.copy(i).addScaledVector(Rc,o).addScaledVector(Lc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let K$=0;class ai extends To{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:K$++}),this.uuid=lr(),this.name="",this.type="Material",this.blending=Rl,this.side=_o,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=fE,this.blendDst=pE,this.blendEquation=vl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=X0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=l0,this.stencilZFail=l0,this.stencilZPass=l0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Rl&&(i.blending=this.blending),this.side!==_o&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const TD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xr={h:0,s:0,l:0},Ym={h:0,s:0,l:0};function C1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ze{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=vt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tr.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Tr.workingColorSpace){return this.r=e,this.g=t,this.b=i,Tr.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Tr.workingColorSpace){if(e=wE(e,1),t=vn(t,0,1),i=vn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=C1(o,s,e+1/3),this.g=C1(o,s,e),this.b=C1(o,s,e-1/3)}return Tr.toWorkingColorSpace(this,r),this}setStyle(e,t=vt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=vt){const i=TD[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lu(e.r),this.g=Lu(e.g),this.b=Lu(e.b),this}copyLinearToSRGB(e){return this.r=g1(e.r),this.g=g1(e.g),this.b=g1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=vt){return Tr.fromWorkingColorSpace(gi.copy(this),e),Math.round(vn(gi.r*255,0,255))*65536+Math.round(vn(gi.g*255,0,255))*256+Math.round(vn(gi.b*255,0,255))}getHexString(e=vt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Tr.workingColorSpace){Tr.fromWorkingColorSpace(gi.copy(this),t);const i=gi.r,r=gi.g,s=gi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const p=o-a;switch(c=u<=.5?p/(o+a):p/(2-o-a),o){case i:l=(r-s)/p+(r<s?6:0);break;case r:l=(s-i)/p+2;break;case s:l=(i-r)/p+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Tr.workingColorSpace){return Tr.fromWorkingColorSpace(gi.copy(this),t),e.r=gi.r,e.g=gi.g,e.b=gi.b,e}getStyle(e=vt){Tr.fromWorkingColorSpace(gi.copy(this),e);const t=gi.r,i=gi.g,r=gi.b;return e!==vt?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Xr),Xr.h+=e,Xr.s+=t,Xr.l+=i,this.setHSL(Xr.h,Xr.s,Xr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Xr),e.getHSL(Ym);const i=zh(Xr.h,Ym.h,t),r=zh(Xr.s,Ym.s,t),s=zh(Xr.l,Ym.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const gi=new ze;ze.NAMES=TD;class za extends ai{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Qf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const so=Z$();function Z$(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function zi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=vn(n,-65504,65504),so.floatView[0]=n;const e=so.uint32View[0],t=e>>23&511;return so.baseTable[t]+((e&8388607)>>so.shiftTable[t])}function xh(n){const e=n>>10;return so.uint32View[0]=so.mantissaTable[so.offsetTable[e]+(n&1023)]+so.exponentTable[e],so.floatView[0]}const J$={toHalfFloat:zi,fromHalfFloat:xh},Rn=new F,Km=new xe;class Yt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Ef,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Km.fromBufferAttribute(this,t),Km.applyMatrix3(e),this.setXY(t,Km.x,Km.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Rn.fromBufferAttribute(this,t),Rn.applyMatrix3(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Rn.fromBufferAttribute(this,t),Rn.applyMatrix4(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Rn.fromBufferAttribute(this,t),Rn.applyNormalMatrix(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Rn.fromBufferAttribute(this,t),Rn.transformDirection(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=or(t,this.array)),t}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=or(t,this.array)),t}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=or(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=or(t,this.array)),t}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ef&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Q$ extends Yt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class eX extends Yt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class tX extends Yt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class nX extends Yt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class EE extends Yt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class iX extends Yt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class ME extends Yt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class rX extends Yt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=xh(this.array[e*this.itemSize]);return this.normalized&&(t=or(t,this.array)),t}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize]=zi(t),this}getY(e){let t=xh(this.array[e*this.itemSize+1]);return this.normalized&&(t=or(t,this.array)),t}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+1]=zi(t),this}getZ(e){let t=xh(this.array[e*this.itemSize+2]);return this.normalized&&(t=or(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+2]=zi(t),this}getW(e){let t=xh(this.array[e*this.itemSize+3]);return this.normalized&&(t=or(t,this.array)),t}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+3]=zi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.array[e+0]=zi(t),this.array[e+1]=zi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.array[e+0]=zi(t),this.array[e+1]=zi(i),this.array[e+2]=zi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.array[e+0]=zi(t),this.array[e+1]=zi(i),this.array[e+2]=zi(r),this.array[e+3]=zi(s),this}}class $e extends Yt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class sX extends Yt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let oX=0;const Er=new mt,P1=new zt,Ic=new F,nr=new Os,eh=new Os,Gn=new F;class yt extends To{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:oX++}),this.uuid=lr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(MD(e)?ME:EE)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Ct().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Er.makeRotationFromQuaternion(e),this.applyMatrix4(Er),this}rotateX(e){return Er.makeRotationX(e),this.applyMatrix4(Er),this}rotateY(e){return Er.makeRotationY(e),this.applyMatrix4(Er),this}rotateZ(e){return Er.makeRotationZ(e),this.applyMatrix4(Er),this}translate(e,t,i){return Er.makeTranslation(e,t,i),this.applyMatrix4(Er),this}scale(e,t,i){return Er.makeScale(e,t,i),this.applyMatrix4(Er),this}lookAt(e){return P1.lookAt(e),P1.updateMatrix(),this.applyMatrix4(P1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ic).negate(),this.translate(Ic.x,Ic.y,Ic.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new $e(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Os);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];nr.setFromBufferAttribute(s),this.morphTargetsRelative?(Gn.addVectors(this.boundingBox.min,nr.min),this.boundingBox.expandByPoint(Gn),Gn.addVectors(this.boundingBox.max,nr.max),this.boundingBox.expandByPoint(Gn)):(this.boundingBox.expandByPoint(nr.min),this.boundingBox.expandByPoint(nr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new F,1/0);return}if(e){const i=this.boundingSphere.center;if(nr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];eh.setFromBufferAttribute(a),this.morphTargetsRelative?(Gn.addVectors(nr.min,eh.min),nr.expandByPoint(Gn),Gn.addVectors(nr.max,eh.max),nr.expandByPoint(Gn)):(nr.expandByPoint(eh.min),nr.expandByPoint(eh.max))}nr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Gn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Gn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Gn.fromBufferAttribute(a,c),l&&(Ic.fromBufferAttribute(e,c),Gn.add(Ic)),r=Math.max(r,i.distanceToSquared(Gn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Yt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let k=0;k<a;k++)c[k]=new F,u[k]=new F;const p=new F,m=new F,g=new F,y=new xe,_=new xe,S=new xe,v=new F,b=new F;function w(k,V,q){p.fromArray(r,k*3),m.fromArray(r,V*3),g.fromArray(r,q*3),y.fromArray(o,k*2),_.fromArray(o,V*2),S.fromArray(o,q*2),m.sub(p),g.sub(p),_.sub(y),S.sub(y);const B=1/(_.x*S.y-S.x*_.y);isFinite(B)&&(v.copy(m).multiplyScalar(S.y).addScaledVector(g,-_.y).multiplyScalar(B),b.copy(g).multiplyScalar(_.x).addScaledVector(m,-S.x).multiplyScalar(B),c[k].add(v),c[V].add(v),c[q].add(v),u[k].add(b),u[V].add(b),u[q].add(b))}let M=this.groups;M.length===0&&(M=[{start:0,count:i.length}]);for(let k=0,V=M.length;k<V;++k){const q=M[k],B=q.start,U=q.count;for(let $=B,X=B+U;$<X;$+=3)w(i[$+0],i[$+1],i[$+2])}const A=new F,P=new F,L=new F,I=new F;function C(k){L.fromArray(s,k*3),I.copy(L);const V=c[k];A.copy(V),A.sub(L.multiplyScalar(L.dot(V))).normalize(),P.crossVectors(I,V);const B=P.dot(u[k])<0?-1:1;l[k*4]=A.x,l[k*4+1]=A.y,l[k*4+2]=A.z,l[k*4+3]=B}for(let k=0,V=M.length;k<V;++k){const q=M[k],B=q.start,U=q.count;for(let $=B,X=B+U;$<X;$+=3)C(i[$+0]),C(i[$+1]),C(i[$+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Yt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const r=new F,s=new F,o=new F,a=new F,l=new F,c=new F,u=new F,p=new F;if(e)for(let m=0,g=e.count;m<g;m+=3){const y=e.getX(m+0),_=e.getX(m+1),S=e.getX(m+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,S),u.subVectors(o,s),p.subVectors(r,s),u.cross(p),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,S),a.add(u),l.add(u),c.add(u),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(S,c.x,c.y,c.z)}else for(let m=0,g=t.count;m<g;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),u.subVectors(o,s),p.subVectors(r,s),u.cross(p),i.setXYZ(m+0,u.x,u.y,u.z),i.setXYZ(m+1,u.x,u.y,u.z),i.setXYZ(m+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Gn.fromBufferAttribute(e,t),Gn.normalize(),e.setXYZ(t,Gn.x,Gn.y,Gn.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,p=a.normalized,m=new c.constructor(l.length*u);let g=0,y=0;for(let _=0,S=l.length;_<S;_++){a.isInterleavedBufferAttribute?g=l[_]*a.data.stride+a.offset:g=l[_]*u;for(let v=0;v<u;v++)m[y++]=c[g++]}return new Yt(m,u,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new yt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,p=c.length;u<p;u++){const m=c[u],g=e(m,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let p=0,m=c.length;p<m;p++){const g=c[p];u.push(g.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],p=s[c];for(let m=0,g=p.length;m<g;m++)u.push(p[m].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const p=o[c];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const rP=new mt,ws=new od,Zm=new Fs,sP=new F,kc=new F,Dc=new F,jc=new F,N1=new F,Jm=new F,Qm=new xe,eg=new xe,tg=new xe,oP=new F,aP=new F,lP=new F,ng=new F,ig=new F;class Yn extends zt{constructor(e=new yt,t=new za){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Jm.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],p=s[l];u!==0&&(N1.fromBufferAttribute(p,e),o?Jm.addScaledVector(N1,u):Jm.addScaledVector(N1.sub(t),u))}t.add(Jm)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Zm.copy(i.boundingSphere),Zm.applyMatrix4(s),ws.copy(e.ray).recast(e.near),!(Zm.containsPoint(ws.origin)===!1&&(ws.intersectSphere(Zm,sP)===null||ws.origin.distanceToSquared(sP)>(e.far-e.near)**2))&&(rP.copy(s).invert(),ws.copy(e.ray).applyMatrix4(rP),!(i.boundingBox!==null&&ws.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t)))}_computeIntersections(e,t){let i;const r=this.geometry,s=this.material,o=r.index,a=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,p=r.groups,m=r.drawRange;if(o!==null)if(Array.isArray(s))for(let g=0,y=p.length;g<y;g++){const _=p[g],S=s[_.materialIndex],v=Math.max(_.start,m.start),b=Math.min(o.count,Math.min(_.start+_.count,m.start+m.count));for(let w=v,M=b;w<M;w+=3){const A=o.getX(w),P=o.getX(w+1),L=o.getX(w+2);i=rg(this,S,e,ws,l,c,u,A,P,L),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const g=Math.max(0,m.start),y=Math.min(o.count,m.start+m.count);for(let _=g,S=y;_<S;_+=3){const v=o.getX(_),b=o.getX(_+1),w=o.getX(_+2);i=rg(this,s,e,ws,l,c,u,v,b,w),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(a!==void 0)if(Array.isArray(s))for(let g=0,y=p.length;g<y;g++){const _=p[g],S=s[_.materialIndex],v=Math.max(_.start,m.start),b=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let w=v,M=b;w<M;w+=3){const A=w,P=w+1,L=w+2;i=rg(this,S,e,ws,l,c,u,A,P,L),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const g=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let _=g,S=y;_<S;_+=3){const v=_,b=_+1,w=_+2;i=rg(this,s,e,ws,l,c,u,v,b,w),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function aX(n,e,t,i,r,s,o,a){let l;if(e.side===Ni?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===_o,a),l===null)return null;ig.copy(a),ig.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(ig);return c<t.near||c>t.far?null:{distance:c,point:ig.clone(),object:n}}function rg(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,kc),n.getVertexPosition(l,Dc),n.getVertexPosition(c,jc);const u=aX(n,e,t,i,kc,Dc,jc,ng);if(u){r&&(Qm.fromBufferAttribute(r,a),eg.fromBufferAttribute(r,l),tg.fromBufferAttribute(r,c),u.uv=Vi.getInterpolation(ng,kc,Dc,jc,Qm,eg,tg,new xe)),s&&(Qm.fromBufferAttribute(s,a),eg.fromBufferAttribute(s,l),tg.fromBufferAttribute(s,c),u.uv1=Vi.getInterpolation(ng,kc,Dc,jc,Qm,eg,tg,new xe),u.uv2=u.uv1),o&&(oP.fromBufferAttribute(o,a),aP.fromBufferAttribute(o,l),lP.fromBufferAttribute(o,c),u.normal=Vi.getInterpolation(ng,kc,Dc,jc,oP,aP,lP,new F),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new F,materialIndex:0};Vi.getNormal(kc,Dc,jc,p.normal),u.face=p}return u}class Ba extends yt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],p=[];let m=0,g=0;y("z","y","x",-1,-1,i,t,e,o,s,0),y("z","y","x",1,-1,i,t,-e,o,s,1),y("x","z","y",1,1,e,i,t,r,o,2),y("x","z","y",1,-1,e,i,-t,r,o,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new $e(c,3)),this.setAttribute("normal",new $e(u,3)),this.setAttribute("uv",new $e(p,2));function y(_,S,v,b,w,M,A,P,L,I,C){const k=M/L,V=A/I,q=M/2,B=A/2,U=P/2,$=L+1,X=I+1;let ee=0,D=0;const O=new F;for(let H=0;H<X;H++){const Z=H*V-B;for(let te=0;te<$;te++){const Q=te*k-q;O[_]=Q*b,O[S]=Z*w,O[v]=U,c.push(O.x,O.y,O.z),O[_]=0,O[S]=0,O[v]=P>0?1:-1,u.push(O.x,O.y,O.z),p.push(te/L),p.push(1-H/I),ee+=1}}for(let H=0;H<I;H++)for(let Z=0;Z<L;Z++){const te=m+Z+$*H,Q=m+Z+$*(H+1),se=m+(Z+1)+$*(H+1),ve=m+(Z+1)+$*H;l.push(te,Q,ve),l.push(Q,se,ve),D+=6}a.addGroup(g,D,C),g+=D,m+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ba(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function qu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Mi(n){const e={};for(let t=0;t<n.length;t++){const i=qu(n[t]);for(const r in i)e[r]=i[r]}return e}function lX(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function AD(n){return n.getRenderTarget()===null?n.outputColorSpace:ls}const CD={clone:qu,merge:Mi};var cX=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,uX=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ds extends ai{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=cX,this.fragmentShader=uX,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qu(e.uniforms),this.uniformsGroups=lX(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class tp extends zt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new mt,this.projectionMatrix=new mt,this.projectionMatrixInverse=new mt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class yn extends tp{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Xu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Il*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Xu*2*Math.atan(Math.tan(Il*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Il*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Oc=-90,Fc=1;class PD extends zt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new yn(Oc,Fc,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new yn(Oc,Fc,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new yn(Oc,Fc,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new yn(Oc,Fc,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new yn(Oc,Fc,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new yn(Oc,Fc,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),p=e.toneMapping,m=e.xr.enabled;e.toneMapping=ss,e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=g,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=p,e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class np extends _n{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ca,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ND extends cs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(Bh("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===xa?vt:_a),this.texture=new np(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Tn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ba(5,5,5),s=new Ds({name:"CubemapFromEquirect",uniforms:qu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ni,blending:po});s.uniforms.tEquirect.value=t;const o=new Yn(r,s),a=t.minFilter;return t.minFilter===Na&&(t.minFilter=Tn),new PD(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const R1=new F,dX=new F,hX=new Ct;class ro{constructor(e=new F(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=R1.subVectors(i,t).cross(dX.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(R1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||hX.getNormalMatrix(e),r=this.coplanarPoint(R1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const il=new Fs,sg=new F;class Vv{constructor(e=new ro,t=new ro,i=new ro,r=new ro,s=new ro,o=new ro){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],p=i[7],m=i[8],g=i[9],y=i[10],_=i[11],S=i[12],v=i[13],b=i[14],w=i[15];return t[0].setComponents(a-r,p-l,_-m,w-S).normalize(),t[1].setComponents(a+r,p+l,_+m,w+S).normalize(),t[2].setComponents(a+s,p+c,_+g,w+v).normalize(),t[3].setComponents(a-s,p-c,_-g,w-v).normalize(),t[4].setComponents(a-o,p-u,_-y,w-b).normalize(),t[5].setComponents(a+o,p+u,_+y,w+b).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),il.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),il.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(il)}intersectsSprite(e){return il.center.set(0,0,0),il.radius=.7071067811865476,il.applyMatrix4(e.matrixWorld),this.intersectsSphere(il)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(sg.x=r.normal.x>0?e.max.x:e.min.x,sg.y=r.normal.y>0?e.max.y:e.min.y,sg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(sg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function RD(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function fX(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const p=c.array,m=c.usage,g=n.createBuffer();n.bindBuffer(u,g),n.bufferData(u,p,m),c.onUploadCallback();let y;if(p instanceof Float32Array)y=n.FLOAT;else if(p instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)y=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)y=n.SHORT;else if(p instanceof Uint32Array)y=n.UNSIGNED_INT;else if(p instanceof Int32Array)y=n.INT;else if(p instanceof Int8Array)y=n.BYTE;else if(p instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:g,type:y,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,p){const m=u.array,g=u.updateRange;n.bindBuffer(p,c),g.count===-1?n.bufferSubData(p,0,m):(t?n.bufferSubData(p,g.offset*m.BYTES_PER_ELEMENT,m,g.offset,g.count):n.bufferSubData(p,g.offset*m.BYTES_PER_ELEMENT,m.subarray(g.offset,g.offset+g.count)),g.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const m=i.get(c);(!m||m.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const p=i.get(c);p===void 0?i.set(c,r(c,u)):p.version<c.version&&(s(p.buffer,c,u),p.version=c.version)}return{get:o,remove:a,update:l}}class ad extends yt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,p=e/a,m=t/l,g=[],y=[],_=[],S=[];for(let v=0;v<u;v++){const b=v*m-o;for(let w=0;w<c;w++){const M=w*p-s;y.push(M,-b,0),_.push(0,0,1),S.push(w/a),S.push(1-v/l)}}for(let v=0;v<l;v++)for(let b=0;b<a;b++){const w=b+c*v,M=b+c*(v+1),A=b+1+c*(v+1),P=b+1+c*v;g.push(w,M,P),g.push(M,A,P)}this.setIndex(g),this.setAttribute("position",new $e(y,3)),this.setAttribute("normal",new $e(_,3)),this.setAttribute("uv",new $e(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ad(e.width,e.height,e.widthSegments,e.heightSegments)}}var pX=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mX=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gX=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,vX=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,yX=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,xX=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_X="vec3 transformed = vec3( position );",wX=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bX=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,SX=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,EX=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,MX=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,TX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,AX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,CX=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,PX=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,NX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,RX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,LX=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,IX=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,kX=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,DX=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,jX=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,OX=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,FX=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,UX=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,zX="gl_FragColor = linearToOutputTexel( gl_FragColor );",BX=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,VX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,HX=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,GX=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,WX=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$X=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,XX=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,qX=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,YX=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,KX=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ZX=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,JX=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,QX=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eq=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,tq=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,nq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,iq=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,rq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,sq=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,oq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,aq=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,cq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,uq=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,dq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,hq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,fq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,pq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mq=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,gq=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,vq=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,yq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_q=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,bq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Sq=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Eq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Mq=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Tq=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Aq=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,Cq=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Pq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Nq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Rq=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Lq=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Iq=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,kq=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Dq=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,jq=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Oq=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Fq=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Uq=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zq=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Bq=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Vq=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Hq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Gq=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Wq=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,$q=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Xq=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,qq=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Yq=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Kq=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Zq=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Jq=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Qq=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,eY=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tY=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,nY=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,iY=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,rY=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,sY=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oY=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,aY=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,lY=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cY=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uY=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,dY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hY=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,fY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pY=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,mY=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,gY=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vY=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,yY=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,xY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,_Y=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wY=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bY=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,SY=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,EY=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MY=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TY=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AY=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,CY=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PY=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,NY=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,RY=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LY=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IY=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,kY=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DY=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jY=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OY=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,FY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,UY=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zY=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,BY=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,VY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,wt={alphamap_fragment:pX,alphamap_pars_fragment:mX,alphatest_fragment:gX,alphatest_pars_fragment:vX,aomap_fragment:yX,aomap_pars_fragment:xX,begin_vertex:_X,beginnormal_vertex:wX,bsdfs:bX,iridescence_fragment:SX,bumpmap_pars_fragment:EX,clipping_planes_fragment:MX,clipping_planes_pars_fragment:TX,clipping_planes_pars_vertex:AX,clipping_planes_vertex:CX,color_fragment:PX,color_pars_fragment:NX,color_pars_vertex:RX,color_vertex:LX,common:IX,cube_uv_reflection_fragment:kX,defaultnormal_vertex:DX,displacementmap_pars_vertex:jX,displacementmap_vertex:OX,emissivemap_fragment:FX,emissivemap_pars_fragment:UX,encodings_fragment:zX,encodings_pars_fragment:BX,envmap_fragment:VX,envmap_common_pars_fragment:HX,envmap_pars_fragment:GX,envmap_pars_vertex:WX,envmap_physical_pars_fragment:iq,envmap_vertex:$X,fog_vertex:XX,fog_pars_vertex:qX,fog_fragment:YX,fog_pars_fragment:KX,gradientmap_pars_fragment:ZX,lightmap_fragment:JX,lightmap_pars_fragment:QX,lights_lambert_fragment:eq,lights_lambert_pars_fragment:tq,lights_pars_begin:nq,lights_toon_fragment:rq,lights_toon_pars_fragment:sq,lights_phong_fragment:oq,lights_phong_pars_fragment:aq,lights_physical_fragment:lq,lights_physical_pars_fragment:cq,lights_fragment_begin:uq,lights_fragment_maps:dq,lights_fragment_end:hq,logdepthbuf_fragment:fq,logdepthbuf_pars_fragment:pq,logdepthbuf_pars_vertex:mq,logdepthbuf_vertex:gq,map_fragment:vq,map_pars_fragment:yq,map_particle_fragment:xq,map_particle_pars_fragment:_q,metalnessmap_fragment:wq,metalnessmap_pars_fragment:bq,morphcolor_vertex:Sq,morphnormal_vertex:Eq,morphtarget_pars_vertex:Mq,morphtarget_vertex:Tq,normal_fragment_begin:Aq,normal_fragment_maps:Cq,normal_pars_fragment:Pq,normal_pars_vertex:Nq,normal_vertex:Rq,normalmap_pars_fragment:Lq,clearcoat_normal_fragment_begin:Iq,clearcoat_normal_fragment_maps:kq,clearcoat_pars_fragment:Dq,iridescence_pars_fragment:jq,output_fragment:Oq,packing:Fq,premultiplied_alpha_fragment:Uq,project_vertex:zq,dithering_fragment:Bq,dithering_pars_fragment:Vq,roughnessmap_fragment:Hq,roughnessmap_pars_fragment:Gq,shadowmap_pars_fragment:Wq,shadowmap_pars_vertex:$q,shadowmap_vertex:Xq,shadowmask_pars_fragment:qq,skinbase_vertex:Yq,skinning_pars_vertex:Kq,skinning_vertex:Zq,skinnormal_vertex:Jq,specularmap_fragment:Qq,specularmap_pars_fragment:eY,tonemapping_fragment:tY,tonemapping_pars_fragment:nY,transmission_fragment:iY,transmission_pars_fragment:rY,uv_pars_fragment:sY,uv_pars_vertex:oY,uv_vertex:aY,worldpos_vertex:lY,background_vert:cY,background_frag:uY,backgroundCube_vert:dY,backgroundCube_frag:hY,cube_vert:fY,cube_frag:pY,depth_vert:mY,depth_frag:gY,distanceRGBA_vert:vY,distanceRGBA_frag:yY,equirect_vert:xY,equirect_frag:_Y,linedashed_vert:wY,linedashed_frag:bY,meshbasic_vert:SY,meshbasic_frag:EY,meshlambert_vert:MY,meshlambert_frag:TY,meshmatcap_vert:AY,meshmatcap_frag:CY,meshnormal_vert:PY,meshnormal_frag:NY,meshphong_vert:RY,meshphong_frag:LY,meshphysical_vert:IY,meshphysical_frag:kY,meshtoon_vert:DY,meshtoon_frag:jY,points_vert:OY,points_frag:FY,shadow_vert:UY,shadow_frag:zY,sprite_vert:BY,sprite_frag:VY},Ie={common:{diffuse:{value:new ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ct},alphaMap:{value:null},alphaMapTransform:{value:new Ct},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ct}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ct}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ct}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ct},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ct},normalScale:{value:new xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ct},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ct}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ct}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ct}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ct}},sprite:{diffuse:{value:new ze(16777215)},opacity:{value:1},center:{value:new xe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ct},alphaMap:{value:null},alphaTest:{value:0}}},es={basic:{uniforms:Mi([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.fog]),vertexShader:wt.meshbasic_vert,fragmentShader:wt.meshbasic_frag},lambert:{uniforms:Mi([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new ze(0)}}]),vertexShader:wt.meshlambert_vert,fragmentShader:wt.meshlambert_frag},phong:{uniforms:Mi([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new ze(0)},specular:{value:new ze(1118481)},shininess:{value:30}}]),vertexShader:wt.meshphong_vert,fragmentShader:wt.meshphong_frag},standard:{uniforms:Mi([Ie.common,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.roughnessmap,Ie.metalnessmap,Ie.fog,Ie.lights,{emissive:{value:new ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag},toon:{uniforms:Mi([Ie.common,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.gradientmap,Ie.fog,Ie.lights,{emissive:{value:new ze(0)}}]),vertexShader:wt.meshtoon_vert,fragmentShader:wt.meshtoon_frag},matcap:{uniforms:Mi([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,{matcap:{value:null}}]),vertexShader:wt.meshmatcap_vert,fragmentShader:wt.meshmatcap_frag},points:{uniforms:Mi([Ie.points,Ie.fog]),vertexShader:wt.points_vert,fragmentShader:wt.points_frag},dashed:{uniforms:Mi([Ie.common,Ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wt.linedashed_vert,fragmentShader:wt.linedashed_frag},depth:{uniforms:Mi([Ie.common,Ie.displacementmap]),vertexShader:wt.depth_vert,fragmentShader:wt.depth_frag},normal:{uniforms:Mi([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,{opacity:{value:1}}]),vertexShader:wt.meshnormal_vert,fragmentShader:wt.meshnormal_frag},sprite:{uniforms:Mi([Ie.sprite,Ie.fog]),vertexShader:wt.sprite_vert,fragmentShader:wt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ct},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wt.background_vert,fragmentShader:wt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:wt.backgroundCube_vert,fragmentShader:wt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wt.cube_vert,fragmentShader:wt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wt.equirect_vert,fragmentShader:wt.equirect_frag},distanceRGBA:{uniforms:Mi([Ie.common,Ie.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wt.distanceRGBA_vert,fragmentShader:wt.distanceRGBA_frag},shadow:{uniforms:Mi([Ie.lights,Ie.fog,{color:{value:new ze(0)},opacity:{value:1}}]),vertexShader:wt.shadow_vert,fragmentShader:wt.shadow_frag}};es.physical={uniforms:Mi([es.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ct},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ct},clearcoatNormalScale:{value:new xe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ct},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ct},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ct},sheen:{value:0},sheenColor:{value:new ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ct},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ct},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ct},transmissionSamplerSize:{value:new xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ct},attenuationDistance:{value:0},attenuationColor:{value:new ze(0)},specularColor:{value:new ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ct},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ct}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag};const og={r:0,b:0,g:0};function HY(n,e,t,i,r,s,o){const a=new ze(0);let l=s===!0?0:1,c,u,p=null,m=0,g=null;function y(S,v){let b=!1,w=v.isScene===!0?v.background:null;switch(w&&w.isTexture&&(w=(v.backgroundBlurriness>0?t:e).get(w)),w===null?_(a,l):w&&w.isColor&&(_(w,1),b=!0),n.xr.getEnvironmentBlendMode()){case"opaque":b=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),b=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),b=!0;break}(n.autoClear||b)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),w&&(w.isCubeTexture||w.mapping===sd)?(u===void 0&&(u=new Yn(new Ba(1,1,1),new Ds({name:"BackgroundCubeMaterial",uniforms:qu(es.backgroundCube.uniforms),vertexShader:es.backgroundCube.vertexShader,fragmentShader:es.backgroundCube.fragmentShader,side:Ni,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(P,L,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=w,u.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=w.colorSpace!==vt,(p!==w||m!==w.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,p=w,m=w.version,g=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new Yn(new ad(2,2),new Ds({name:"BackgroundMaterial",uniforms:qu(es.background.uniforms),vertexShader:es.background.vertexShader,fragmentShader:es.background.fragmentShader,side:_o,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=w.colorSpace!==vt,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(p!==w||m!==w.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,p=w,m=w.version,g=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))}function _(S,v){S.getRGB(og,AD(n)),i.buffers.color.setClear(og.r,og.g,og.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(S,v=1){a.set(S),l=v,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,_(a,l)},render:y}}function GY(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=S(null);let c=l,u=!1;function p(U,$,X,ee,D){let O=!1;if(o){const H=_(ee,X,$);c!==H&&(c=H,g(c.object)),O=v(U,ee,X,D),O&&b(U,ee,X,D)}else{const H=$.wireframe===!0;(c.geometry!==ee.id||c.program!==X.id||c.wireframe!==H)&&(c.geometry=ee.id,c.program=X.id,c.wireframe=H,O=!0)}D!==null&&t.update(D,n.ELEMENT_ARRAY_BUFFER),(O||u)&&(u=!1,I(U,$,X,ee),D!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(D).buffer))}function m(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function g(U){return i.isWebGL2?n.bindVertexArray(U):s.bindVertexArrayOES(U)}function y(U){return i.isWebGL2?n.deleteVertexArray(U):s.deleteVertexArrayOES(U)}function _(U,$,X){const ee=X.wireframe===!0;let D=a[U.id];D===void 0&&(D={},a[U.id]=D);let O=D[$.id];O===void 0&&(O={},D[$.id]=O);let H=O[ee];return H===void 0&&(H=S(m()),O[ee]=H),H}function S(U){const $=[],X=[],ee=[];for(let D=0;D<r;D++)$[D]=0,X[D]=0,ee[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:X,attributeDivisors:ee,object:U,attributes:{},index:null}}function v(U,$,X,ee){const D=c.attributes,O=$.attributes;let H=0;const Z=X.getAttributes();for(const te in Z)if(Z[te].location>=0){const se=D[te];let ve=O[te];if(ve===void 0&&(te==="instanceMatrix"&&U.instanceMatrix&&(ve=U.instanceMatrix),te==="instanceColor"&&U.instanceColor&&(ve=U.instanceColor)),se===void 0||se.attribute!==ve||ve&&se.data!==ve.data)return!0;H++}return c.attributesNum!==H||c.index!==ee}function b(U,$,X,ee){const D={},O=$.attributes;let H=0;const Z=X.getAttributes();for(const te in Z)if(Z[te].location>=0){let se=O[te];se===void 0&&(te==="instanceMatrix"&&U.instanceMatrix&&(se=U.instanceMatrix),te==="instanceColor"&&U.instanceColor&&(se=U.instanceColor));const ve={};ve.attribute=se,se&&se.data&&(ve.data=se.data),D[te]=ve,H++}c.attributes=D,c.attributesNum=H,c.index=ee}function w(){const U=c.newAttributes;for(let $=0,X=U.length;$<X;$++)U[$]=0}function M(U){A(U,0)}function A(U,$){const X=c.newAttributes,ee=c.enabledAttributes,D=c.attributeDivisors;X[U]=1,ee[U]===0&&(n.enableVertexAttribArray(U),ee[U]=1),D[U]!==$&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](U,$),D[U]=$)}function P(){const U=c.newAttributes,$=c.enabledAttributes;for(let X=0,ee=$.length;X<ee;X++)$[X]!==U[X]&&(n.disableVertexAttribArray(X),$[X]=0)}function L(U,$,X,ee,D,O){i.isWebGL2===!0&&(X===n.INT||X===n.UNSIGNED_INT)?n.vertexAttribIPointer(U,$,X,D,O):n.vertexAttribPointer(U,$,X,ee,D,O)}function I(U,$,X,ee){if(i.isWebGL2===!1&&(U.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const D=ee.attributes,O=X.getAttributes(),H=$.defaultAttributeValues;for(const Z in O){const te=O[Z];if(te.location>=0){let Q=D[Z];if(Q===void 0&&(Z==="instanceMatrix"&&U.instanceMatrix&&(Q=U.instanceMatrix),Z==="instanceColor"&&U.instanceColor&&(Q=U.instanceColor)),Q!==void 0){const se=Q.normalized,ve=Q.itemSize,ge=t.get(Q);if(ge===void 0)continue;const K=ge.buffer,je=ge.type,Xe=ge.bytesPerElement;if(Q.isInterleavedBufferAttribute){const Ee=Q.data,Pe=Ee.stride,_e=Q.offset;if(Ee.isInstancedInterleavedBuffer){for(let de=0;de<te.locationSize;de++)A(te.location+de,Ee.meshPerAttribute);U.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let de=0;de<te.locationSize;de++)M(te.location+de);n.bindBuffer(n.ARRAY_BUFFER,K);for(let de=0;de<te.locationSize;de++)L(te.location+de,ve/te.locationSize,je,se,Pe*Xe,(_e+ve/te.locationSize*de)*Xe)}else{if(Q.isInstancedBufferAttribute){for(let Ee=0;Ee<te.locationSize;Ee++)A(te.location+Ee,Q.meshPerAttribute);U.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let Ee=0;Ee<te.locationSize;Ee++)M(te.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,K);for(let Ee=0;Ee<te.locationSize;Ee++)L(te.location+Ee,ve/te.locationSize,je,se,ve*Xe,ve/te.locationSize*Ee*Xe)}}else if(H!==void 0){const se=H[Z];if(se!==void 0)switch(se.length){case 2:n.vertexAttrib2fv(te.location,se);break;case 3:n.vertexAttrib3fv(te.location,se);break;case 4:n.vertexAttrib4fv(te.location,se);break;default:n.vertexAttrib1fv(te.location,se)}}}}P()}function C(){q();for(const U in a){const $=a[U];for(const X in $){const ee=$[X];for(const D in ee)y(ee[D].object),delete ee[D];delete $[X]}delete a[U]}}function k(U){if(a[U.id]===void 0)return;const $=a[U.id];for(const X in $){const ee=$[X];for(const D in ee)y(ee[D].object),delete ee[D];delete $[X]}delete a[U.id]}function V(U){for(const $ in a){const X=a[$];if(X[U.id]===void 0)continue;const ee=X[U.id];for(const D in ee)y(ee[D].object),delete ee[D];delete X[U.id]}}function q(){B(),u=!0,c!==l&&(c=l,g(c.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:p,reset:q,resetDefaultState:B,dispose:C,releaseStatesOfGeometry:k,releaseStatesOfProgram:V,initAttributes:w,enableAttribute:M,disableUnusedAttributes:P}}function WY(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,p){if(p===0)return;let m,g;if(r)m=n,g="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,c,u,p),t.update(u,s,p)}this.setMode=o,this.render=a,this.renderInstances=l}function $Y(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=m>0,M=o||e.has("OES_texture_float"),A=w&&M,P=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:S,maxVaryings:v,maxFragmentUniforms:b,vertexTextures:w,floatFragmentTextures:M,floatVertexTextures:A,maxSamples:P}}function XY(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ro,a=new Ct,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const g=p.length!==0||m||i!==0||r;return r=m,i=p.length,g},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=u(p,m,0)},this.setState=function(p,m,g){const y=p.clippingPlanes,_=p.clipIntersection,S=p.clipShadows,v=n.get(p);if(!r||y===null||y.length===0||s&&!S)s?u(null):c();else{const b=s?0:i,w=b*4;let M=v.clippingState||null;l.value=M,M=u(y,m,w,g);for(let A=0;A!==w;++A)M[A]=t[A];v.clippingState=M,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(p,m,g,y){const _=p!==null?p.length:0;let S=null;if(_!==0){if(S=l.value,y!==!0||S===null){const v=g+_*4,b=m.matrixWorldInverse;a.getNormalMatrix(b),(S===null||S.length<v)&&(S=new Float32Array(v));for(let w=0,M=g;w!==_;++w,M+=4)o.copy(p[w]).applyMatrix4(b,a),o.normal.toArray(S,M),S[M+3]=o.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,S}}function qY(n){let e=new WeakMap;function t(o,a){return a===vf?o.mapping=Ca:a===yf&&(o.mapping=Pa),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===vf||a===yf)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new ND(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class wa extends tp{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const yu=4,cP=[.125,.215,.35,.446,.526,.582],yl=20,L1=new wa,uP=new ze;let I1=null;const ml=(1+Math.sqrt(5))/2,Uc=1/ml,dP=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,ml,Uc),new F(0,ml,-Uc),new F(Uc,0,ml),new F(-Uc,0,ml),new F(ml,Uc,0),new F(-ml,Uc,0)];class ub{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){I1=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=pP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=fP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(I1),e.scissorTest=!1,ag(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ca||e.mapping===Pa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),I1=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Tn,minFilter:Tn,generateMipmaps:!1,type:$u,format:Gi,colorSpace:ls,depthBuffer:!1},r=hP(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=hP(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=YY(s)),this._blurMaterial=KY(s,e,t)}return r}_compileMaterial(e){const t=new Yn(this._lodPlanes[0],e);this._renderer.compile(t,L1)}_sceneToCubeUV(e,t,i,r){const a=new yn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,p=u.autoClear,m=u.toneMapping;u.getClearColor(uP),u.toneMapping=ss,u.autoClear=!1;const g=new za({name:"PMREM.Background",side:Ni,depthWrite:!1,depthTest:!1}),y=new Yn(new Ba,g);let _=!1;const S=e.background;S?S.isColor&&(g.color.copy(S),e.background=null,_=!0):(g.color.copy(uP),_=!0);for(let v=0;v<6;v++){const b=v%3;b===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):b===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const w=this._cubeSize;ag(r,b*w,v>2?w:0,w,w),u.setRenderTarget(r),_&&u.render(y,a),u.render(e,a)}y.geometry.dispose(),y.material.dispose(),u.toneMapping=m,u.autoClear=p,e.background=S}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ca||e.mapping===Pa;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=pP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=fP());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Yn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;ag(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,L1)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=dP[(r-1)%dP.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,p=new Yn(this._lodPlanes[r],c),m=c.uniforms,g=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*yl-1),_=s/y,S=isFinite(s)?1+Math.floor(u*_):yl;S>yl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${yl}`);const v=[];let b=0;for(let L=0;L<yl;++L){const I=L/_,C=Math.exp(-I*I/2);v.push(C),L===0?b+=C:L<S&&(b+=2*C)}for(let L=0;L<v.length;L++)v[L]=v[L]/b;m.envMap.value=e.texture,m.samples.value=S,m.weights.value=v,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:w}=this;m.dTheta.value=y,m.mipInt.value=w-i;const M=this._sizeLods[r],A=3*M*(r>w-yu?r-w+yu:0),P=4*(this._cubeSize-M);ag(t,A,P,3*M,2*M),l.setRenderTarget(t),l.render(p,L1)}}function YY(n){const e=[],t=[],i=[];let r=n;const s=n-yu+1+cP.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-yu?l=cP[o-n+yu-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,p=1+c,m=[u,u,p,u,p,p,u,u,p,p,u,p],g=6,y=6,_=3,S=2,v=1,b=new Float32Array(_*y*g),w=new Float32Array(S*y*g),M=new Float32Array(v*y*g);for(let P=0;P<g;P++){const L=P%3*2/3-1,I=P>2?0:-1,C=[L,I,0,L+2/3,I,0,L+2/3,I+1,0,L,I,0,L+2/3,I+1,0,L,I+1,0];b.set(C,_*y*P),w.set(m,S*y*P);const k=[P,P,P,P,P,P];M.set(k,v*y*P)}const A=new yt;A.setAttribute("position",new Yt(b,_)),A.setAttribute("uv",new Yt(w,S)),A.setAttribute("faceIndex",new Yt(M,v)),e.push(A),r>yu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function hP(n,e,t){const i=new cs(n,e,t);return i.texture.mapping=sd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ag(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function KY(n,e,t){const i=new Float32Array(yl),r=new F(0,1,0);return new Ds({name:"SphericalGaussianBlur",defines:{n:yl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:TE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function fP(){return new Ds({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:TE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function pP(){return new Ds({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:TE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function TE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ZY(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===vf||l===yf,u=l===Ca||l===Pa;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return t===null&&(t=new ub(n)),p=c?t.fromEquirectangular(a,p):t.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(c&&p&&p.height>0||u&&p&&r(p)){t===null&&(t=new ub(n));const m=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,m),a.addEventListener("dispose",s),m.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function JY(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function QY(n,e,t,i){const r={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const y in m.attributes)e.remove(m.attributes[y]);m.removeEventListener("dispose",o),delete r[m.id];const g=s.get(m);g&&(e.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(p,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function l(p){const m=p.attributes;for(const y in m)e.update(m[y],n.ARRAY_BUFFER);const g=p.morphAttributes;for(const y in g){const _=g[y];for(let S=0,v=_.length;S<v;S++)e.update(_[S],n.ARRAY_BUFFER)}}function c(p){const m=[],g=p.index,y=p.attributes.position;let _=0;if(g!==null){const b=g.array;_=g.version;for(let w=0,M=b.length;w<M;w+=3){const A=b[w+0],P=b[w+1],L=b[w+2];m.push(A,P,P,L,L,A)}}else{const b=y.array;_=y.version;for(let w=0,M=b.length/3-1;w<M;w+=3){const A=w+0,P=w+1,L=w+2;m.push(A,P,P,L,L,A)}}const S=new(MD(m)?ME:EE)(m,1);S.version=_;const v=s.get(p);v&&e.remove(v),s.set(p,S)}function u(p){const m=s.get(p);if(m){const g=p.index;g!==null&&m.version<g.version&&c(p)}else c(p);return s.get(p)}return{get:a,update:l,getWireframeAttribute:u}}function eK(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function u(m,g){n.drawElements(s,g,a,m*l),t.update(g,s,1)}function p(m,g,y){if(y===0)return;let _,S;if(r)_=n,S="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[S](s,g,a,m*l,y),t.update(g,s,y)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=p}function tK(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function nK(n,e){return n[0]-e[0]}function iK(n,e){return Math.abs(e[1])-Math.abs(n[1])}function rK(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Wt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,p){const m=c.morphTargetInfluences;if(e.isWebGL2===!0){const g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=g!==void 0?g.length:0;let _=s.get(u);if(_===void 0||_.count!==y){let U=function(){q.dispose(),s.delete(u),u.removeEventListener("dispose",U)};_!==void 0&&_.texture.dispose();const b=u.morphAttributes.position!==void 0,w=u.morphAttributes.normal!==void 0,M=u.morphAttributes.color!==void 0,A=u.morphAttributes.position||[],P=u.morphAttributes.normal||[],L=u.morphAttributes.color||[];let I=0;b===!0&&(I=1),w===!0&&(I=2),M===!0&&(I=3);let C=u.attributes.position.count*I,k=1;C>e.maxTextureSize&&(k=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const V=new Float32Array(C*k*4*y),q=new Bv(V,C,k,y);q.type=co,q.needsUpdate=!0;const B=I*4;for(let $=0;$<y;$++){const X=A[$],ee=P[$],D=L[$],O=C*k*4*$;for(let H=0;H<X.count;H++){const Z=H*B;b===!0&&(o.fromBufferAttribute(X,H),V[O+Z+0]=o.x,V[O+Z+1]=o.y,V[O+Z+2]=o.z,V[O+Z+3]=0),w===!0&&(o.fromBufferAttribute(ee,H),V[O+Z+4]=o.x,V[O+Z+5]=o.y,V[O+Z+6]=o.z,V[O+Z+7]=0),M===!0&&(o.fromBufferAttribute(D,H),V[O+Z+8]=o.x,V[O+Z+9]=o.y,V[O+Z+10]=o.z,V[O+Z+11]=D.itemSize===4?o.w:1)}}_={count:y,texture:q,size:new xe(C,k)},s.set(u,_),u.addEventListener("dispose",U)}let S=0;for(let b=0;b<m.length;b++)S+=m[b];const v=u.morphTargetsRelative?1:1-S;p.getUniforms().setValue(n,"morphTargetBaseInfluence",v),p.getUniforms().setValue(n,"morphTargetInfluences",m),p.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const g=m===void 0?0:m.length;let y=i[u.id];if(y===void 0||y.length!==g){y=[];for(let w=0;w<g;w++)y[w]=[w,0];i[u.id]=y}for(let w=0;w<g;w++){const M=y[w];M[0]=w,M[1]=m[w]}y.sort(iK);for(let w=0;w<8;w++)w<g&&y[w][1]?(a[w][0]=y[w][0],a[w][1]=y[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(nK);const _=u.morphAttributes.position,S=u.morphAttributes.normal;let v=0;for(let w=0;w<8;w++){const M=a[w],A=M[0],P=M[1];A!==Number.MAX_SAFE_INTEGER&&P?(_&&u.getAttribute("morphTarget"+w)!==_[A]&&u.setAttribute("morphTarget"+w,_[A]),S&&u.getAttribute("morphNormal"+w)!==S[A]&&u.setAttribute("morphNormal"+w,S[A]),r[w]=P,v+=P):(_&&u.hasAttribute("morphTarget"+w)===!0&&u.deleteAttribute("morphTarget"+w),S&&u.hasAttribute("morphNormal"+w)===!0&&u.deleteAttribute("morphNormal"+w),r[w]=0)}const b=u.morphTargetsRelative?1:1-v;p.getUniforms().setValue(n,"morphTargetBaseInfluence",b),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function sK(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,p=e.get(l,u);return r.get(p)!==c&&(e.update(p),r.set(p,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER)),p}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const LD=new _n,ID=new Bv,kD=new SE,DD=new np,mP=[],gP=[],vP=new Float32Array(16),yP=new Float32Array(9),xP=new Float32Array(4);function ld(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=mP[r];if(s===void 0&&(s=new Float32Array(r),mP[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Un(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function zn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Hv(n,e){let t=gP[e];t===void 0&&(t=new Int32Array(e),gP[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function oK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function aK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2fv(this.addr,e),zn(t,e)}}function lK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Un(t,e))return;n.uniform3fv(this.addr,e),zn(t,e)}}function cK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4fv(this.addr,e),zn(t,e)}}function uK(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Un(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),zn(t,e)}else{if(Un(t,i))return;xP.set(i),n.uniformMatrix2fv(this.addr,!1,xP),zn(t,i)}}function dK(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Un(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),zn(t,e)}else{if(Un(t,i))return;yP.set(i),n.uniformMatrix3fv(this.addr,!1,yP),zn(t,i)}}function hK(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Un(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),zn(t,e)}else{if(Un(t,i))return;vP.set(i),n.uniformMatrix4fv(this.addr,!1,vP),zn(t,i)}}function fK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function pK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2iv(this.addr,e),zn(t,e)}}function mK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Un(t,e))return;n.uniform3iv(this.addr,e),zn(t,e)}}function gK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4iv(this.addr,e),zn(t,e)}}function vK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function yK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2uiv(this.addr,e),zn(t,e)}}function xK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Un(t,e))return;n.uniform3uiv(this.addr,e),zn(t,e)}}function _K(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4uiv(this.addr,e),zn(t,e)}}function wK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||LD,r)}function bK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||kD,r)}function SK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||DD,r)}function EK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||ID,r)}function MK(n){switch(n){case 5126:return oK;case 35664:return aK;case 35665:return lK;case 35666:return cK;case 35674:return uK;case 35675:return dK;case 35676:return hK;case 5124:case 35670:return fK;case 35667:case 35671:return pK;case 35668:case 35672:return mK;case 35669:case 35673:return gK;case 5125:return vK;case 36294:return yK;case 36295:return xK;case 36296:return _K;case 35678:case 36198:case 36298:case 36306:case 35682:return wK;case 35679:case 36299:case 36307:return bK;case 35680:case 36300:case 36308:case 36293:return SK;case 36289:case 36303:case 36311:case 36292:return EK}}function TK(n,e){n.uniform1fv(this.addr,e)}function AK(n,e){const t=ld(e,this.size,2);n.uniform2fv(this.addr,t)}function CK(n,e){const t=ld(e,this.size,3);n.uniform3fv(this.addr,t)}function PK(n,e){const t=ld(e,this.size,4);n.uniform4fv(this.addr,t)}function NK(n,e){const t=ld(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function RK(n,e){const t=ld(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function LK(n,e){const t=ld(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function IK(n,e){n.uniform1iv(this.addr,e)}function kK(n,e){n.uniform2iv(this.addr,e)}function DK(n,e){n.uniform3iv(this.addr,e)}function jK(n,e){n.uniform4iv(this.addr,e)}function OK(n,e){n.uniform1uiv(this.addr,e)}function FK(n,e){n.uniform2uiv(this.addr,e)}function UK(n,e){n.uniform3uiv(this.addr,e)}function zK(n,e){n.uniform4uiv(this.addr,e)}function BK(n,e,t){const i=this.cache,r=e.length,s=Hv(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),zn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||LD,s[o])}function VK(n,e,t){const i=this.cache,r=e.length,s=Hv(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),zn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||kD,s[o])}function HK(n,e,t){const i=this.cache,r=e.length,s=Hv(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),zn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||DD,s[o])}function GK(n,e,t){const i=this.cache,r=e.length,s=Hv(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),zn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||ID,s[o])}function WK(n){switch(n){case 5126:return TK;case 35664:return AK;case 35665:return CK;case 35666:return PK;case 35674:return NK;case 35675:return RK;case 35676:return LK;case 5124:case 35670:return IK;case 35667:case 35671:return kK;case 35668:case 35672:return DK;case 35669:case 35673:return jK;case 5125:return OK;case 36294:return FK;case 36295:return UK;case 36296:return zK;case 35678:case 36198:case 36298:case 36306:case 35682:return BK;case 35679:case 36299:case 36307:return VK;case 35680:case 36300:case 36308:case 36293:return HK;case 36289:case 36303:case 36311:case 36292:return GK}}class $K{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=MK(t.type)}}class XK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=WK(t.type)}}class qK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const k1=/(\w+)(\])?(\[|\.)?/g;function _P(n,e){n.seq.push(e),n.map[e.id]=e}function YK(n,e,t){const i=n.name,r=i.length;for(k1.lastIndex=0;;){const s=k1.exec(i),o=k1.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){_P(t,c===void 0?new $K(a,n,e):new XK(a,n,e));break}else{let p=t.map[a];p===void 0&&(p=new qK(a),_P(t,p)),t=p}}}class c0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);YK(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function wP(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let KK=0;function ZK(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function JK(n){switch(n){case ls:return["Linear","( value )"];case vt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function bP(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+ZK(n.getShaderSource(e),o)}else return r}function QK(n,e){const t=JK(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function eZ(n,e){let t;switch(e){case Zk:t="Linear";break;case Jk:t="Reinhard";break;case Qk:t="OptimizedCineon";break;case mE:t="ACESFilmic";break;case eD:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function tZ(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_h).join(`
`)}function nZ(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function iZ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function _h(n){return n!==""}function SP(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function EP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const rZ=/^[ \t]*#include +<([\w\d./]+)>/gm;function db(n){return n.replace(rZ,sZ)}function sZ(n,e){const t=wt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return db(t)}const oZ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function MP(n){return n.replace(oZ,aZ)}function aZ(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function TP(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function lZ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Fv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Fh?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Yr&&(e="SHADOWMAP_TYPE_VSM"),e}function cZ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ca:case Pa:e="ENVMAP_TYPE_CUBE";break;case sd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function uZ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Pa:e="ENVMAP_MODE_REFRACTION";break}return e}function dZ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Qf:e="ENVMAP_BLENDING_MULTIPLY";break;case Yk:e="ENVMAP_BLENDING_MIX";break;case Kk:e="ENVMAP_BLENDING_ADD";break}return e}function hZ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function fZ(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=lZ(t),c=cZ(t),u=uZ(t),p=dZ(t),m=hZ(t),g=t.isWebGL2?"":tZ(t),y=nZ(s),_=r.createProgram();let S,v,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=[y].filter(_h).join(`
`),S.length>0&&(S+=`
`),v=[g,y].filter(_h).join(`
`),v.length>0&&(v+=`
`)):(S=[TP(t),"#define SHADER_NAME "+t.shaderName,y,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_h).join(`
`),v=[g,TP(t),"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ss?"#define TONE_MAPPING":"",t.toneMapping!==ss?wt.tonemapping_pars_fragment:"",t.toneMapping!==ss?eZ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",wt.encodings_pars_fragment,QK("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(_h).join(`
`)),o=db(o),o=SP(o,t),o=EP(o,t),a=db(a),a=SP(a,t),a=EP(a,t),o=MP(o),a=MP(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,S=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,v=["#define varying in",t.glslVersion===lb?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===lb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const w=b+S+o,M=b+v+a,A=wP(r,r.VERTEX_SHADER,w),P=wP(r,r.FRAGMENT_SHADER,M);if(r.attachShader(_,A),r.attachShader(_,P),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),n.debug.checkShaderErrors){const C=r.getProgramInfoLog(_).trim(),k=r.getShaderInfoLog(A).trim(),V=r.getShaderInfoLog(P).trim();let q=!0,B=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,_,A,P);else{const U=bP(r,A,"vertex"),$=bP(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Program Info Log: `+C+`
`+U+`
`+$)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(k===""||V==="")&&(B=!1);B&&(this.diagnostics={runnable:q,programLog:C,vertexShader:{log:k,prefix:S},fragmentShader:{log:V,prefix:v}})}r.deleteShader(A),r.deleteShader(P);let L;this.getUniforms=function(){return L===void 0&&(L=new c0(r,_)),L};let I;return this.getAttributes=function(){return I===void 0&&(I=iZ(r,_)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.name=t.shaderName,this.id=KK++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=A,this.fragmentShader=P,this}let pZ=0;class mZ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new gZ(e),t.set(e,i)),i}}class gZ{constructor(e){this.id=pZ++,this.code=e,this.usedTimes=0}}function vZ(n,e,t,i,r,s,o){const a=new kl,l=new mZ,c=[],u=r.isWebGL2,p=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(C){return C===1?"uv1":C===2?"uv2":C===3?"uv3":"uv"}function S(C,k,V,q,B){const U=q.fog,$=B.geometry,X=C.isMeshStandardMaterial?q.environment:null,ee=(C.isMeshStandardMaterial?t:e).get(C.envMap||X),D=ee&&ee.mapping===sd?ee.image.height:null,O=y[C.type];C.precision!==null&&(g=r.getMaxPrecision(C.precision),g!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",g,"instead."));const H=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,Z=H!==void 0?H.length:0;let te=0;$.morphAttributes.position!==void 0&&(te=1),$.morphAttributes.normal!==void 0&&(te=2),$.morphAttributes.color!==void 0&&(te=3);let Q,se,ve,ge;if(O){const It=es[O];Q=It.vertexShader,se=It.fragmentShader}else Q=C.vertexShader,se=C.fragmentShader,l.update(C),ve=l.getVertexShaderID(C),ge=l.getFragmentShaderID(C);const K=n.getRenderTarget(),je=B.isInstancedMesh===!0,Xe=!!C.map,Ee=!!C.matcap,Pe=!!ee,_e=!!C.aoMap,de=!!C.lightMap,Se=!!C.bumpMap,Be=!!C.normalMap,Ne=!!C.displacementMap,Qe=!!C.emissiveMap,et=!!C.metalnessMap,Ke=!!C.roughnessMap,ct=C.clearcoat>0,Nt=C.iridescence>0,W=C.sheen>0,j=C.transmission>0,ce=ct&&!!C.clearcoatMap,Me=ct&&!!C.clearcoatNormalMap,Te=ct&&!!C.clearcoatRoughnessMap,Re=Nt&&!!C.iridescenceMap,tt=Nt&&!!C.iridescenceThicknessMap,Fe=W&&!!C.sheenColorMap,me=W&&!!C.sheenRoughnessMap,Ge=!!C.specularMap,Je=!!C.specularColorMap,it=!!C.specularIntensityMap,Ue=j&&!!C.transmissionMap,We=j&&!!C.thicknessMap,J=!!C.gradientMap,we=!!C.alphaMap,Oe=C.alphaTest>0,Y=!!C.extensions,ue=!!$.attributes.uv1,be=!!$.attributes.uv2,Le=!!$.attributes.uv3;return{isWebGL2:u,shaderID:O,shaderName:C.type,vertexShader:Q,fragmentShader:se,defines:C.defines,customVertexShaderID:ve,customFragmentShaderID:ge,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:g,instancing:je,instancingColor:je&&B.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:K===null?n.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:ls,map:Xe,matcap:Ee,envMap:Pe,envMapMode:Pe&&ee.mapping,envMapCubeUVHeight:D,aoMap:_e,lightMap:de,bumpMap:Se,normalMap:Be,displacementMap:m&&Ne,emissiveMap:Qe,normalMapObjectSpace:Be&&C.normalMapType===wD,normalMapTangentSpace:Be&&C.normalMapType===Ua,metalnessMap:et,roughnessMap:Ke,clearcoat:ct,clearcoatMap:ce,clearcoatNormalMap:Me,clearcoatRoughnessMap:Te,iridescence:Nt,iridescenceMap:Re,iridescenceThicknessMap:tt,sheen:W,sheenColorMap:Fe,sheenRoughnessMap:me,specularMap:Ge,specularColorMap:Je,specularIntensityMap:it,transmission:j,transmissionMap:Ue,thicknessMap:We,gradientMap:J,opaque:C.transparent===!1&&C.blending===Rl,alphaMap:we,alphaTest:Oe,combine:C.combine,mapUv:Xe&&_(C.map.channel),aoMapUv:_e&&_(C.aoMap.channel),lightMapUv:de&&_(C.lightMap.channel),bumpMapUv:Se&&_(C.bumpMap.channel),normalMapUv:Be&&_(C.normalMap.channel),displacementMapUv:Ne&&_(C.displacementMap.channel),emissiveMapUv:Qe&&_(C.emissiveMap.channel),metalnessMapUv:et&&_(C.metalnessMap.channel),roughnessMapUv:Ke&&_(C.roughnessMap.channel),clearcoatMapUv:ce&&_(C.clearcoatMap.channel),clearcoatNormalMapUv:Me&&_(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Te&&_(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Re&&_(C.iridescenceMap.channel),iridescenceThicknessMapUv:tt&&_(C.iridescenceThicknessMap.channel),sheenColorMapUv:Fe&&_(C.sheenColorMap.channel),sheenRoughnessMapUv:me&&_(C.sheenRoughnessMap.channel),specularMapUv:Ge&&_(C.specularMap.channel),specularColorMapUv:Je&&_(C.specularColorMap.channel),specularIntensityMapUv:it&&_(C.specularIntensityMap.channel),transmissionMapUv:Ue&&_(C.transmissionMap.channel),thicknessMapUv:We&&_(C.thicknessMap.channel),alphaMapUv:we&&_(C.alphaMap.channel),vertexTangents:Be&&!!$.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,vertexUv1s:ue,vertexUv2s:be,vertexUv3s:Le,pointsUvs:B.isPoints===!0&&!!$.attributes.uv&&(Xe||we),fog:!!U,useFog:C.fog===!0,fogExp2:U&&U.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:B.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:te,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&V.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:ss,useLegacyLights:n.useLegacyLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Cs,flipSided:C.side===Ni,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:Y&&C.extensions.derivatives===!0,extensionFragDepth:Y&&C.extensions.fragDepth===!0,extensionDrawBuffers:Y&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:Y&&C.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function v(C){const k=[];if(C.shaderID?k.push(C.shaderID):(k.push(C.customVertexShaderID),k.push(C.customFragmentShaderID)),C.defines!==void 0)for(const V in C.defines)k.push(V),k.push(C.defines[V]);return C.isRawShaderMaterial===!1&&(b(k,C),w(k,C),k.push(n.outputColorSpace)),k.push(C.customProgramCacheKey),k.join()}function b(C,k){C.push(k.precision),C.push(k.outputColorSpace),C.push(k.envMapMode),C.push(k.envMapCubeUVHeight),C.push(k.mapUv),C.push(k.alphaMapUv),C.push(k.lightMapUv),C.push(k.aoMapUv),C.push(k.bumpMapUv),C.push(k.normalMapUv),C.push(k.displacementMapUv),C.push(k.emissiveMapUv),C.push(k.metalnessMapUv),C.push(k.roughnessMapUv),C.push(k.clearcoatMapUv),C.push(k.clearcoatNormalMapUv),C.push(k.clearcoatRoughnessMapUv),C.push(k.iridescenceMapUv),C.push(k.iridescenceThicknessMapUv),C.push(k.sheenColorMapUv),C.push(k.sheenRoughnessMapUv),C.push(k.specularMapUv),C.push(k.specularColorMapUv),C.push(k.specularIntensityMapUv),C.push(k.transmissionMapUv),C.push(k.thicknessMapUv),C.push(k.combine),C.push(k.fogExp2),C.push(k.sizeAttenuation),C.push(k.morphTargetsCount),C.push(k.morphAttributeCount),C.push(k.numDirLights),C.push(k.numPointLights),C.push(k.numSpotLights),C.push(k.numSpotLightMaps),C.push(k.numHemiLights),C.push(k.numRectAreaLights),C.push(k.numDirLightShadows),C.push(k.numPointLightShadows),C.push(k.numSpotLightShadows),C.push(k.numSpotLightShadowsWithMaps),C.push(k.shadowMapType),C.push(k.toneMapping),C.push(k.numClippingPlanes),C.push(k.numClipIntersection),C.push(k.depthPacking)}function w(C,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.matcap&&a.enable(4),k.envMap&&a.enable(5),k.normalMapObjectSpace&&a.enable(6),k.normalMapTangentSpace&&a.enable(7),k.clearcoat&&a.enable(8),k.iridescence&&a.enable(9),k.alphaTest&&a.enable(10),k.vertexColors&&a.enable(11),k.vertexAlphas&&a.enable(12),k.vertexUv1s&&a.enable(13),k.vertexUv2s&&a.enable(14),k.vertexUv3s&&a.enable(15),k.vertexTangents&&a.enable(16),C.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.useLegacyLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.transmission&&a.enable(15),k.sheen&&a.enable(16),k.opaque&&a.enable(17),k.pointsUvs&&a.enable(18),C.push(a.mask)}function M(C){const k=y[C.type];let V;if(k){const q=es[k];V=CD.clone(q.uniforms)}else V=C.uniforms;return V}function A(C,k){let V;for(let q=0,B=c.length;q<B;q++){const U=c[q];if(U.cacheKey===k){V=U,++V.usedTimes;break}}return V===void 0&&(V=new fZ(n,k,C,s),c.push(V)),V}function P(C){if(--C.usedTimes===0){const k=c.indexOf(C);c[k]=c[c.length-1],c.pop(),C.destroy()}}function L(C){l.remove(C)}function I(){l.dispose()}return{getParameters:S,getProgramCacheKey:v,getUniforms:M,acquireProgram:A,releaseProgram:P,releaseShaderCache:L,programs:c,dispose:I}}function yZ(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function xZ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function AP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function CP(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(p,m,g,y,_,S){let v=n[e];return v===void 0?(v={id:p.id,object:p,geometry:m,material:g,groupOrder:y,renderOrder:p.renderOrder,z:_,group:S},n[e]=v):(v.id=p.id,v.object=p,v.geometry=m,v.material=g,v.groupOrder=y,v.renderOrder=p.renderOrder,v.z=_,v.group=S),e++,v}function a(p,m,g,y,_,S){const v=o(p,m,g,y,_,S);g.transmission>0?i.push(v):g.transparent===!0?r.push(v):t.push(v)}function l(p,m,g,y,_,S){const v=o(p,m,g,y,_,S);g.transmission>0?i.unshift(v):g.transparent===!0?r.unshift(v):t.unshift(v)}function c(p,m){t.length>1&&t.sort(p||xZ),i.length>1&&i.sort(m||AP),r.length>1&&r.sort(m||AP)}function u(){for(let p=e,m=n.length;p<m;p++){const g=n[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function _Z(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new CP,n.set(i,[o])):r>=s.length?(o=new CP,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function wZ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new F,color:new ze};break;case"SpotLight":t={position:new F,direction:new F,color:new ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new F,color:new ze,distance:0,decay:0};break;case"HemisphereLight":t={direction:new F,skyColor:new ze,groundColor:new ze};break;case"RectAreaLight":t={color:new ze,position:new F,halfWidth:new F,halfHeight:new F};break}return n[e.id]=t,t}}}function bZ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let SZ=0;function EZ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function MZ(n,e){const t=new wZ,i=bZ(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new F);const s=new F,o=new mt,a=new mt;function l(u,p){let m=0,g=0,y=0;for(let V=0;V<9;V++)r.probe[V].set(0,0,0);let _=0,S=0,v=0,b=0,w=0,M=0,A=0,P=0,L=0,I=0;u.sort(EZ);const C=p===!0?Math.PI:1;for(let V=0,q=u.length;V<q;V++){const B=u[V],U=B.color,$=B.intensity,X=B.distance,ee=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)m+=U.r*$*C,g+=U.g*$*C,y+=U.b*$*C;else if(B.isLightProbe)for(let D=0;D<9;D++)r.probe[D].addScaledVector(B.sh.coefficients[D],$);else if(B.isDirectionalLight){const D=t.get(B);if(D.color.copy(B.color).multiplyScalar(B.intensity*C),B.castShadow){const O=B.shadow,H=i.get(B);H.shadowBias=O.bias,H.shadowNormalBias=O.normalBias,H.shadowRadius=O.radius,H.shadowMapSize=O.mapSize,r.directionalShadow[_]=H,r.directionalShadowMap[_]=ee,r.directionalShadowMatrix[_]=B.shadow.matrix,M++}r.directional[_]=D,_++}else if(B.isSpotLight){const D=t.get(B);D.position.setFromMatrixPosition(B.matrixWorld),D.color.copy(U).multiplyScalar($*C),D.distance=X,D.coneCos=Math.cos(B.angle),D.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),D.decay=B.decay,r.spot[v]=D;const O=B.shadow;if(B.map&&(r.spotLightMap[L]=B.map,L++,O.updateMatrices(B),B.castShadow&&I++),r.spotLightMatrix[v]=O.matrix,B.castShadow){const H=i.get(B);H.shadowBias=O.bias,H.shadowNormalBias=O.normalBias,H.shadowRadius=O.radius,H.shadowMapSize=O.mapSize,r.spotShadow[v]=H,r.spotShadowMap[v]=ee,P++}v++}else if(B.isRectAreaLight){const D=t.get(B);D.color.copy(U).multiplyScalar($),D.halfWidth.set(B.width*.5,0,0),D.halfHeight.set(0,B.height*.5,0),r.rectArea[b]=D,b++}else if(B.isPointLight){const D=t.get(B);if(D.color.copy(B.color).multiplyScalar(B.intensity*C),D.distance=B.distance,D.decay=B.decay,B.castShadow){const O=B.shadow,H=i.get(B);H.shadowBias=O.bias,H.shadowNormalBias=O.normalBias,H.shadowRadius=O.radius,H.shadowMapSize=O.mapSize,H.shadowCameraNear=O.camera.near,H.shadowCameraFar=O.camera.far,r.pointShadow[S]=H,r.pointShadowMap[S]=ee,r.pointShadowMatrix[S]=B.shadow.matrix,A++}r.point[S]=D,S++}else if(B.isHemisphereLight){const D=t.get(B);D.skyColor.copy(B.color).multiplyScalar($*C),D.groundColor.copy(B.groundColor).multiplyScalar($*C),r.hemi[w]=D,w++}}b>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ie.LTC_FLOAT_1,r.rectAreaLTC2=Ie.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ie.LTC_HALF_1,r.rectAreaLTC2=Ie.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=m,r.ambient[1]=g,r.ambient[2]=y;const k=r.hash;(k.directionalLength!==_||k.pointLength!==S||k.spotLength!==v||k.rectAreaLength!==b||k.hemiLength!==w||k.numDirectionalShadows!==M||k.numPointShadows!==A||k.numSpotShadows!==P||k.numSpotMaps!==L)&&(r.directional.length=_,r.spot.length=v,r.rectArea.length=b,r.point.length=S,r.hemi.length=w,r.directionalShadow.length=M,r.directionalShadowMap.length=M,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=P,r.spotShadowMap.length=P,r.directionalShadowMatrix.length=M,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=P+L-I,r.spotLightMap.length=L,r.numSpotLightShadowsWithMaps=I,k.directionalLength=_,k.pointLength=S,k.spotLength=v,k.rectAreaLength=b,k.hemiLength=w,k.numDirectionalShadows=M,k.numPointShadows=A,k.numSpotShadows=P,k.numSpotMaps=L,r.version=SZ++)}function c(u,p){let m=0,g=0,y=0,_=0,S=0;const v=p.matrixWorldInverse;for(let b=0,w=u.length;b<w;b++){const M=u[b];if(M.isDirectionalLight){const A=r.directional[m];A.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(v),m++}else if(M.isSpotLight){const A=r.spot[y];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(v),A.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(v),y++}else if(M.isRectAreaLight){const A=r.rectArea[_];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(v),a.identity(),o.copy(M.matrixWorld),o.premultiply(v),a.extractRotation(o),A.halfWidth.set(M.width*.5,0,0),A.halfHeight.set(0,M.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),_++}else if(M.isPointLight){const A=r.point[g];A.position.setFromMatrixPosition(M.matrixWorld),A.position.applyMatrix4(v),g++}else if(M.isHemisphereLight){const A=r.hemi[S];A.direction.setFromMatrixPosition(M.matrixWorld),A.direction.transformDirection(v),S++}}}return{setup:l,setupView:c,state:r}}function PP(n,e){const t=new MZ(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(p){i.push(p)}function a(p){r.push(p)}function l(p){t.setup(i,p)}function c(p){t.setupView(i,p)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function TZ(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new PP(n,e),t.set(s,[l])):o>=a.length?(l=new PP(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class AE extends ai{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=xD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class CE extends ai{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const AZ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,CZ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function PZ(n,e,t){let i=new Vv;const r=new xe,s=new xe,o=new Wt,a=new AE({depthPacking:_D}),l=new CE,c={},u=t.maxTextureSize,p={[_o]:Ni,[Ni]:_o,[Cs]:Cs},m=new Ds({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new xe},radius:{value:4}},vertexShader:AZ,fragmentShader:CZ}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const y=new yt;y.setAttribute("position",new Yt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Yn(y,m),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fv;let v=this.type;this.render=function(A,P,L){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||A.length===0)return;const I=n.getRenderTarget(),C=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),V=n.state;V.setBlending(po),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const q=v!==Yr&&this.type===Yr,B=v===Yr&&this.type!==Yr;for(let U=0,$=A.length;U<$;U++){const X=A[U],ee=X.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;r.copy(ee.mapSize);const D=ee.getFrameExtents();if(r.multiply(D),s.copy(ee.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/D.x),r.x=s.x*D.x,ee.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/D.y),r.y=s.y*D.y,ee.mapSize.y=s.y)),ee.map===null||q===!0||B===!0){const H=this.type!==Yr?{minFilter:En,magFilter:En}:{};ee.map!==null&&ee.map.dispose(),ee.map=new cs(r.x,r.y,H),ee.map.texture.name=X.name+".shadowMap",ee.camera.updateProjectionMatrix()}n.setRenderTarget(ee.map),n.clear();const O=ee.getViewportCount();for(let H=0;H<O;H++){const Z=ee.getViewport(H);o.set(s.x*Z.x,s.y*Z.y,s.x*Z.z,s.y*Z.w),V.viewport(o),ee.updateMatrices(X,H),i=ee.getFrustum(),M(P,L,ee.camera,X,this.type)}ee.isPointLightShadow!==!0&&this.type===Yr&&b(ee,L),ee.needsUpdate=!1}v=this.type,S.needsUpdate=!1,n.setRenderTarget(I,C,k)};function b(A,P){const L=e.update(_);m.defines.VSM_SAMPLES!==A.blurSamples&&(m.defines.VSM_SAMPLES=A.blurSamples,g.defines.VSM_SAMPLES=A.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new cs(r.x,r.y)),m.uniforms.shadow_pass.value=A.map.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(P,null,L,m,_,null),g.uniforms.shadow_pass.value=A.mapPass.texture,g.uniforms.resolution.value=A.mapSize,g.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(P,null,L,g,_,null)}function w(A,P,L,I){let C=null;const k=L.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(k!==void 0)C=k;else if(C=L.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const V=C.uuid,q=P.uuid;let B=c[V];B===void 0&&(B={},c[V]=B);let U=B[q];U===void 0&&(U=C.clone(),B[q]=U),C=U}if(C.visible=P.visible,C.wireframe=P.wireframe,I===Yr?C.side=P.shadowSide!==null?P.shadowSide:P.side:C.side=P.shadowSide!==null?P.shadowSide:p[P.side],C.alphaMap=P.alphaMap,C.alphaTest=P.alphaTest,C.map=P.map,C.clipShadows=P.clipShadows,C.clippingPlanes=P.clippingPlanes,C.clipIntersection=P.clipIntersection,C.displacementMap=P.displacementMap,C.displacementScale=P.displacementScale,C.displacementBias=P.displacementBias,C.wireframeLinewidth=P.wireframeLinewidth,C.linewidth=P.linewidth,L.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const V=n.properties.get(C);V.light=L}return C}function M(A,P,L,I,C){if(A.visible===!1)return;if(A.layers.test(P.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&C===Yr)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,A.matrixWorld);const q=e.update(A),B=A.material;if(Array.isArray(B)){const U=q.groups;for(let $=0,X=U.length;$<X;$++){const ee=U[$],D=B[ee.materialIndex];if(D&&D.visible){const O=w(A,D,I,C);n.renderBufferDirect(L,null,q,O,A,ee)}}}else if(B.visible){const U=w(A,B,I,C);n.renderBufferDirect(L,null,q,U,A,null)}}const V=A.children;for(let q=0,B=V.length;q<B;q++)M(V[q],P,L,I,C)}}function NZ(n,e,t){const i=t.isWebGL2;function r(){let Y=!1;const ue=new Wt;let be=null;const Le=new Wt(0,0,0,0);return{setMask:function(qe){be!==qe&&!Y&&(n.colorMask(qe,qe,qe,qe),be=qe)},setLocked:function(qe){Y=qe},setClear:function(qe,It,xt,Xt,Zn){Zn===!0&&(qe*=Xt,It*=Xt,xt*=Xt),ue.set(qe,It,xt,Xt),Le.equals(ue)===!1&&(n.clearColor(qe,It,xt,Xt),Le.copy(ue))},reset:function(){Y=!1,be=null,Le.set(-1,0,0,0)}}}function s(){let Y=!1,ue=null,be=null,Le=null;return{setTest:function(qe){qe?K(n.DEPTH_TEST):je(n.DEPTH_TEST)},setMask:function(qe){ue!==qe&&!Y&&(n.depthMask(qe),ue=qe)},setFunc:function(qe){if(be!==qe){switch(qe){case Vk:n.depthFunc(n.NEVER);break;case Hk:n.depthFunc(n.ALWAYS);break;case Gk:n.depthFunc(n.LESS);break;case X0:n.depthFunc(n.LEQUAL);break;case Wk:n.depthFunc(n.EQUAL);break;case $k:n.depthFunc(n.GEQUAL);break;case Xk:n.depthFunc(n.GREATER);break;case qk:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}be=qe}},setLocked:function(qe){Y=qe},setClear:function(qe){Le!==qe&&(n.clearDepth(qe),Le=qe)},reset:function(){Y=!1,ue=null,be=null,Le=null}}}function o(){let Y=!1,ue=null,be=null,Le=null,qe=null,It=null,xt=null,Xt=null,Zn=null;return{setTest:function(Bt){Y||(Bt?K(n.STENCIL_TEST):je(n.STENCIL_TEST))},setMask:function(Bt){ue!==Bt&&!Y&&(n.stencilMask(Bt),ue=Bt)},setFunc:function(Bt,wn,Jn){(be!==Bt||Le!==wn||qe!==Jn)&&(n.stencilFunc(Bt,wn,Jn),be=Bt,Le=wn,qe=Jn)},setOp:function(Bt,wn,Jn){(It!==Bt||xt!==wn||Xt!==Jn)&&(n.stencilOp(Bt,wn,Jn),It=Bt,xt=wn,Xt=Jn)},setLocked:function(Bt){Y=Bt},setClear:function(Bt){Zn!==Bt&&(n.clearStencil(Bt),Zn=Bt)},reset:function(){Y=!1,ue=null,be=null,Le=null,qe=null,It=null,xt=null,Xt=null,Zn=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,p=new WeakMap;let m={},g={},y=new WeakMap,_=[],S=null,v=!1,b=null,w=null,M=null,A=null,P=null,L=null,I=null,C=!1,k=null,V=null,q=null,B=null,U=null;const $=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,ee=0;const D=n.getParameter(n.VERSION);D.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(D)[1]),X=ee>=1):D.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),X=ee>=2);let O=null,H={};const Z=n.getParameter(n.SCISSOR_BOX),te=n.getParameter(n.VIEWPORT),Q=new Wt().fromArray(Z),se=new Wt().fromArray(te);function ve(Y,ue,be,Le){const qe=new Uint8Array(4),It=n.createTexture();n.bindTexture(Y,It),n.texParameteri(Y,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Y,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let xt=0;xt<be;xt++)i&&(Y===n.TEXTURE_3D||Y===n.TEXTURE_2D_ARRAY)?n.texImage3D(ue,0,n.RGBA,1,1,Le,0,n.RGBA,n.UNSIGNED_BYTE,qe):n.texImage2D(ue+xt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,qe);return It}const ge={};ge[n.TEXTURE_2D]=ve(n.TEXTURE_2D,n.TEXTURE_2D,1),ge[n.TEXTURE_CUBE_MAP]=ve(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(ge[n.TEXTURE_2D_ARRAY]=ve(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ge[n.TEXTURE_3D]=ve(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),K(n.DEPTH_TEST),l.setFunc(X0),Ne(!1),Qe(kw),K(n.CULL_FACE),Se(po);function K(Y){m[Y]!==!0&&(n.enable(Y),m[Y]=!0)}function je(Y){m[Y]!==!1&&(n.disable(Y),m[Y]=!1)}function Xe(Y,ue){return g[Y]!==ue?(n.bindFramebuffer(Y,ue),g[Y]=ue,i&&(Y===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=ue),Y===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=ue)),!0):!1}function Ee(Y,ue){let be=_,Le=!1;if(Y)if(be=y.get(ue),be===void 0&&(be=[],y.set(ue,be)),Y.isWebGLMultipleRenderTargets){const qe=Y.texture;if(be.length!==qe.length||be[0]!==n.COLOR_ATTACHMENT0){for(let It=0,xt=qe.length;It<xt;It++)be[It]=n.COLOR_ATTACHMENT0+It;be.length=qe.length,Le=!0}}else be[0]!==n.COLOR_ATTACHMENT0&&(be[0]=n.COLOR_ATTACHMENT0,Le=!0);else be[0]!==n.BACK&&(be[0]=n.BACK,Le=!0);Le&&(t.isWebGL2?n.drawBuffers(be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(be))}function Pe(Y){return S!==Y?(n.useProgram(Y),S=Y,!0):!1}const _e={[vl]:n.FUNC_ADD,[Rk]:n.FUNC_SUBTRACT,[Lk]:n.FUNC_REVERSE_SUBTRACT};if(i)_e[Ow]=n.MIN,_e[Fw]=n.MAX;else{const Y=e.get("EXT_blend_minmax");Y!==null&&(_e[Ow]=Y.MIN_EXT,_e[Fw]=Y.MAX_EXT)}const de={[Ik]:n.ZERO,[kk]:n.ONE,[Dk]:n.SRC_COLOR,[fE]:n.SRC_ALPHA,[Bk]:n.SRC_ALPHA_SATURATE,[Uk]:n.DST_COLOR,[Ok]:n.DST_ALPHA,[jk]:n.ONE_MINUS_SRC_COLOR,[pE]:n.ONE_MINUS_SRC_ALPHA,[zk]:n.ONE_MINUS_DST_COLOR,[Fk]:n.ONE_MINUS_DST_ALPHA};function Se(Y,ue,be,Le,qe,It,xt,Xt){if(Y===po){v===!0&&(je(n.BLEND),v=!1);return}if(v===!1&&(K(n.BLEND),v=!0),Y!==Nk){if(Y!==b||Xt!==C){if((w!==vl||P!==vl)&&(n.blendEquation(n.FUNC_ADD),w=vl,P=vl),Xt)switch(Y){case Rl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $0:n.blendFunc(n.ONE,n.ONE);break;case Dw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case jw:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}else switch(Y){case Rl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $0:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Dw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case jw:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}M=null,A=null,L=null,I=null,b=Y,C=Xt}return}qe=qe||ue,It=It||be,xt=xt||Le,(ue!==w||qe!==P)&&(n.blendEquationSeparate(_e[ue],_e[qe]),w=ue,P=qe),(be!==M||Le!==A||It!==L||xt!==I)&&(n.blendFuncSeparate(de[be],de[Le],de[It],de[xt]),M=be,A=Le,L=It,I=xt),b=Y,C=!1}function Be(Y,ue){Y.side===Cs?je(n.CULL_FACE):K(n.CULL_FACE);let be=Y.side===Ni;ue&&(be=!be),Ne(be),Y.blending===Rl&&Y.transparent===!1?Se(po):Se(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.premultipliedAlpha),l.setFunc(Y.depthFunc),l.setTest(Y.depthTest),l.setMask(Y.depthWrite),a.setMask(Y.colorWrite);const Le=Y.stencilWrite;c.setTest(Le),Le&&(c.setMask(Y.stencilWriteMask),c.setFunc(Y.stencilFunc,Y.stencilRef,Y.stencilFuncMask),c.setOp(Y.stencilFail,Y.stencilZFail,Y.stencilZPass)),Ke(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits),Y.alphaToCoverage===!0?K(n.SAMPLE_ALPHA_TO_COVERAGE):je(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ne(Y){k!==Y&&(Y?n.frontFace(n.CW):n.frontFace(n.CCW),k=Y)}function Qe(Y){Y!==Ak?(K(n.CULL_FACE),Y!==V&&(Y===kw?n.cullFace(n.BACK):Y===Ck?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):je(n.CULL_FACE),V=Y}function et(Y){Y!==q&&(X&&n.lineWidth(Y),q=Y)}function Ke(Y,ue,be){Y?(K(n.POLYGON_OFFSET_FILL),(B!==ue||U!==be)&&(n.polygonOffset(ue,be),B=ue,U=be)):je(n.POLYGON_OFFSET_FILL)}function ct(Y){Y?K(n.SCISSOR_TEST):je(n.SCISSOR_TEST)}function Nt(Y){Y===void 0&&(Y=n.TEXTURE0+$-1),O!==Y&&(n.activeTexture(Y),O=Y)}function W(Y,ue,be){be===void 0&&(O===null?be=n.TEXTURE0+$-1:be=O);let Le=H[be];Le===void 0&&(Le={type:void 0,texture:void 0},H[be]=Le),(Le.type!==Y||Le.texture!==ue)&&(O!==be&&(n.activeTexture(be),O=be),n.bindTexture(Y,ue||ge[Y]),Le.type=Y,Le.texture=ue)}function j(){const Y=H[O];Y!==void 0&&Y.type!==void 0&&(n.bindTexture(Y.type,null),Y.type=void 0,Y.texture=void 0)}function ce(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Me(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Te(){try{n.texSubImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Re(){try{n.texSubImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function tt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Fe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function me(){try{n.texStorage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Ge(){try{n.texStorage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Je(){try{n.texImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function it(){try{n.texImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Ue(Y){Q.equals(Y)===!1&&(n.scissor(Y.x,Y.y,Y.z,Y.w),Q.copy(Y))}function We(Y){se.equals(Y)===!1&&(n.viewport(Y.x,Y.y,Y.z,Y.w),se.copy(Y))}function J(Y,ue){let be=p.get(ue);be===void 0&&(be=new WeakMap,p.set(ue,be));let Le=be.get(Y);Le===void 0&&(Le=n.getUniformBlockIndex(ue,Y.name),be.set(Y,Le))}function we(Y,ue){const Le=p.get(ue).get(Y);u.get(ue)!==Le&&(n.uniformBlockBinding(ue,Le,Y.__bindingPointIndex),u.set(ue,Le))}function Oe(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},O=null,H={},g={},y=new WeakMap,_=[],S=null,v=!1,b=null,w=null,M=null,A=null,P=null,L=null,I=null,C=!1,k=null,V=null,q=null,B=null,U=null,Q.set(0,0,n.canvas.width,n.canvas.height),se.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:K,disable:je,bindFramebuffer:Xe,drawBuffers:Ee,useProgram:Pe,setBlending:Se,setMaterial:Be,setFlipSided:Ne,setCullFace:Qe,setLineWidth:et,setPolygonOffset:Ke,setScissorTest:ct,activeTexture:Nt,bindTexture:W,unbindTexture:j,compressedTexImage2D:ce,compressedTexImage3D:Me,texImage2D:Je,texImage3D:it,updateUBOMapping:J,uniformBlockBinding:we,texStorage2D:me,texStorage3D:Ge,texSubImage2D:Te,texSubImage3D:Re,compressedTexSubImage2D:tt,compressedTexSubImage3D:Fe,scissor:Ue,viewport:We,reset:Oe}}function RZ(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,p=r.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let _;const S=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(W,j){return v?new OffscreenCanvas(W,j):Mf("canvas")}function w(W,j,ce,Me){let Te=1;if((W.width>Me||W.height>Me)&&(Te=Me/Math.max(W.width,W.height)),Te<1||j===!0)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const Re=j?ED:Math.floor,tt=Re(Te*W.width),Fe=Re(Te*W.height);_===void 0&&(_=b(tt,Fe));const me=ce?b(tt,Fe):_;return me.width=tt,me.height=Fe,me.getContext("2d").drawImage(W,0,0,tt,Fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+tt+"x"+Fe+")."),me}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W;return W}function M(W){return cb(W.width)&&cb(W.height)}function A(W){return a?!1:W.wrapS!==xi||W.wrapT!==xi||W.minFilter!==En&&W.minFilter!==Tn}function P(W,j){return W.generateMipmaps&&j&&W.minFilter!==En&&W.minFilter!==Tn}function L(W){n.generateMipmap(W)}function I(W,j,ce,Me,Te=!1){if(a===!1)return j;if(W!==null){if(n[W]!==void 0)return n[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Re=j;return j===n.RED&&(ce===n.FLOAT&&(Re=n.R32F),ce===n.HALF_FLOAT&&(Re=n.R16F),ce===n.UNSIGNED_BYTE&&(Re=n.R8)),j===n.RG&&(ce===n.FLOAT&&(Re=n.RG32F),ce===n.HALF_FLOAT&&(Re=n.RG16F),ce===n.UNSIGNED_BYTE&&(Re=n.RG8)),j===n.RGBA&&(ce===n.FLOAT&&(Re=n.RGBA32F),ce===n.HALF_FLOAT&&(Re=n.RGBA16F),ce===n.UNSIGNED_BYTE&&(Re=Me===vt&&Te===!1?n.SRGB8_ALPHA8:n.RGBA8),ce===n.UNSIGNED_SHORT_4_4_4_4&&(Re=n.RGBA4),ce===n.UNSIGNED_SHORT_5_5_5_1&&(Re=n.RGB5_A1)),(Re===n.R16F||Re===n.R32F||Re===n.RG16F||Re===n.RG32F||Re===n.RGBA16F||Re===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Re}function C(W,j,ce){return P(W,ce)===!0||W.isFramebufferTexture&&W.minFilter!==En&&W.minFilter!==Tn?Math.log2(Math.max(j.width,j.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?j.mipmaps.length:1}function k(W){return W===En||W===q0||W===Uh?n.NEAREST:n.LINEAR}function V(W){const j=W.target;j.removeEventListener("dispose",V),B(j),j.isVideoTexture&&y.delete(j)}function q(W){const j=W.target;j.removeEventListener("dispose",q),$(j)}function B(W){const j=i.get(W);if(j.__webglInit===void 0)return;const ce=W.source,Me=S.get(ce);if(Me){const Te=Me[j.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&U(W),Object.keys(Me).length===0&&S.delete(ce)}i.remove(W)}function U(W){const j=i.get(W);n.deleteTexture(j.__webglTexture);const ce=W.source,Me=S.get(ce);delete Me[j.__cacheKey],o.memory.textures--}function $(W){const j=W.texture,ce=i.get(W),Me=i.get(j);if(Me.__webglTexture!==void 0&&(n.deleteTexture(Me.__webglTexture),o.memory.textures--),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++)n.deleteFramebuffer(ce.__webglFramebuffer[Te]),ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer[Te]);else{if(n.deleteFramebuffer(ce.__webglFramebuffer),ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer),ce.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ce.__webglMultisampledFramebuffer),ce.__webglColorRenderbuffer)for(let Te=0;Te<ce.__webglColorRenderbuffer.length;Te++)ce.__webglColorRenderbuffer[Te]&&n.deleteRenderbuffer(ce.__webglColorRenderbuffer[Te]);ce.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ce.__webglDepthRenderbuffer)}if(W.isWebGLMultipleRenderTargets)for(let Te=0,Re=j.length;Te<Re;Te++){const tt=i.get(j[Te]);tt.__webglTexture&&(n.deleteTexture(tt.__webglTexture),o.memory.textures--),i.remove(j[Te])}i.remove(j),i.remove(W)}let X=0;function ee(){X=0}function D(){const W=X;return W>=l&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+l),X+=1,W}function O(W){const j=[];return j.push(W.wrapS),j.push(W.wrapT),j.push(W.wrapR||0),j.push(W.magFilter),j.push(W.minFilter),j.push(W.anisotropy),j.push(W.internalFormat),j.push(W.format),j.push(W.type),j.push(W.generateMipmaps),j.push(W.premultiplyAlpha),j.push(W.flipY),j.push(W.unpackAlignment),j.push(W.colorSpace),j.join()}function H(W,j){const ce=i.get(W);if(W.isVideoTexture&&ct(W),W.isRenderTargetTexture===!1&&W.version>0&&ce.__version!==W.version){const Me=W.image;if(Me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{je(ce,W,j);return}}t.bindTexture(n.TEXTURE_2D,ce.__webglTexture,n.TEXTURE0+j)}function Z(W,j){const ce=i.get(W);if(W.version>0&&ce.__version!==W.version){je(ce,W,j);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ce.__webglTexture,n.TEXTURE0+j)}function te(W,j){const ce=i.get(W);if(W.version>0&&ce.__version!==W.version){je(ce,W,j);return}t.bindTexture(n.TEXTURE_3D,ce.__webglTexture,n.TEXTURE0+j)}function Q(W,j){const ce=i.get(W);if(W.version>0&&ce.__version!==W.version){Xe(ce,W,j);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture,n.TEXTURE0+j)}const se={[xf]:n.REPEAT,[xi]:n.CLAMP_TO_EDGE,[_f]:n.MIRRORED_REPEAT},ve={[En]:n.NEAREST,[q0]:n.NEAREST_MIPMAP_NEAREST,[Uh]:n.NEAREST_MIPMAP_LINEAR,[Tn]:n.LINEAR,[gE]:n.LINEAR_MIPMAP_NEAREST,[Na]:n.LINEAR_MIPMAP_LINEAR};function ge(W,j,ce){if(ce?(n.texParameteri(W,n.TEXTURE_WRAP_S,se[j.wrapS]),n.texParameteri(W,n.TEXTURE_WRAP_T,se[j.wrapT]),(W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY)&&n.texParameteri(W,n.TEXTURE_WRAP_R,se[j.wrapR]),n.texParameteri(W,n.TEXTURE_MAG_FILTER,ve[j.magFilter]),n.texParameteri(W,n.TEXTURE_MIN_FILTER,ve[j.minFilter])):(n.texParameteri(W,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(W,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY)&&n.texParameteri(W,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(j.wrapS!==xi||j.wrapT!==xi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(W,n.TEXTURE_MAG_FILTER,k(j.magFilter)),n.texParameteri(W,n.TEXTURE_MIN_FILTER,k(j.minFilter)),j.minFilter!==En&&j.minFilter!==Tn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Me=e.get("EXT_texture_filter_anisotropic");if(j.magFilter===En||j.minFilter!==Uh&&j.minFilter!==Na||j.type===co&&e.has("OES_texture_float_linear")===!1||a===!1&&j.type===$u&&e.has("OES_texture_half_float_linear")===!1)return;(j.anisotropy>1||i.get(j).__currentAnisotropy)&&(n.texParameterf(W,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,r.getMaxAnisotropy())),i.get(j).__currentAnisotropy=j.anisotropy)}}function K(W,j){let ce=!1;W.__webglInit===void 0&&(W.__webglInit=!0,j.addEventListener("dispose",V));const Me=j.source;let Te=S.get(Me);Te===void 0&&(Te={},S.set(Me,Te));const Re=O(j);if(Re!==W.__cacheKey){Te[Re]===void 0&&(Te[Re]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ce=!0),Te[Re].usedTimes++;const tt=Te[W.__cacheKey];tt!==void 0&&(Te[W.__cacheKey].usedTimes--,tt.usedTimes===0&&U(j)),W.__cacheKey=Re,W.__webglTexture=Te[Re].texture}return ce}function je(W,j,ce){let Me=n.TEXTURE_2D;(j.isDataArrayTexture||j.isCompressedArrayTexture)&&(Me=n.TEXTURE_2D_ARRAY),j.isData3DTexture&&(Me=n.TEXTURE_3D);const Te=K(W,j),Re=j.source;t.bindTexture(Me,W.__webglTexture,n.TEXTURE0+ce);const tt=i.get(Re);if(Re.version!==tt.__version||Te===!0){t.activeTexture(n.TEXTURE0+ce),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Fe=A(j)&&M(j.image)===!1;let me=w(j.image,Fe,!1,u);me=Nt(j,me);const Ge=M(me)||a,Je=s.convert(j.format,j.colorSpace);let it=s.convert(j.type),Ue=I(j.internalFormat,Je,it,j.colorSpace);ge(Me,j,Ge);let We;const J=j.mipmaps,we=a&&j.isVideoTexture!==!0,Oe=tt.__version===void 0||Te===!0,Y=C(j,me,Ge);if(j.isDepthTexture)Ue=n.DEPTH_COMPONENT,a?j.type===co?Ue=n.DEPTH_COMPONENT32F:j.type===oa?Ue=n.DEPTH_COMPONENT24:j.type===Ll?Ue=n.DEPTH24_STENCIL8:Ue=n.DEPTH_COMPONENT16:j.type===co&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),j.format===ya&&Ue===n.DEPTH_COMPONENT&&j.type!==vE&&j.type!==oa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),j.type=oa,it=s.convert(j.type)),j.format===Hl&&Ue===n.DEPTH_COMPONENT&&(Ue=n.DEPTH_STENCIL,j.type!==Ll&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),j.type=Ll,it=s.convert(j.type))),Oe&&(we?t.texStorage2D(n.TEXTURE_2D,1,Ue,me.width,me.height):t.texImage2D(n.TEXTURE_2D,0,Ue,me.width,me.height,0,Je,it,null));else if(j.isDataTexture)if(J.length>0&&Ge){we&&Oe&&t.texStorage2D(n.TEXTURE_2D,Y,Ue,J[0].width,J[0].height);for(let ue=0,be=J.length;ue<be;ue++)We=J[ue],we?t.texSubImage2D(n.TEXTURE_2D,ue,0,0,We.width,We.height,Je,it,We.data):t.texImage2D(n.TEXTURE_2D,ue,Ue,We.width,We.height,0,Je,it,We.data);j.generateMipmaps=!1}else we?(Oe&&t.texStorage2D(n.TEXTURE_2D,Y,Ue,me.width,me.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,me.width,me.height,Je,it,me.data)):t.texImage2D(n.TEXTURE_2D,0,Ue,me.width,me.height,0,Je,it,me.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){we&&Oe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Y,Ue,J[0].width,J[0].height,me.depth);for(let ue=0,be=J.length;ue<be;ue++)We=J[ue],j.format!==Gi?Je!==null?we?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,0,We.width,We.height,me.depth,Je,We.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ue,Ue,We.width,We.height,me.depth,0,We.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?t.texSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,0,We.width,We.height,me.depth,Je,it,We.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ue,Ue,We.width,We.height,me.depth,0,Je,it,We.data)}else{we&&Oe&&t.texStorage2D(n.TEXTURE_2D,Y,Ue,J[0].width,J[0].height);for(let ue=0,be=J.length;ue<be;ue++)We=J[ue],j.format!==Gi?Je!==null?we?t.compressedTexSubImage2D(n.TEXTURE_2D,ue,0,0,We.width,We.height,Je,We.data):t.compressedTexImage2D(n.TEXTURE_2D,ue,Ue,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?t.texSubImage2D(n.TEXTURE_2D,ue,0,0,We.width,We.height,Je,it,We.data):t.texImage2D(n.TEXTURE_2D,ue,Ue,We.width,We.height,0,Je,it,We.data)}else if(j.isDataArrayTexture)we?(Oe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Y,Ue,me.width,me.height,me.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,me.width,me.height,me.depth,Je,it,me.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ue,me.width,me.height,me.depth,0,Je,it,me.data);else if(j.isData3DTexture)we?(Oe&&t.texStorage3D(n.TEXTURE_3D,Y,Ue,me.width,me.height,me.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,me.width,me.height,me.depth,Je,it,me.data)):t.texImage3D(n.TEXTURE_3D,0,Ue,me.width,me.height,me.depth,0,Je,it,me.data);else if(j.isFramebufferTexture){if(Oe)if(we)t.texStorage2D(n.TEXTURE_2D,Y,Ue,me.width,me.height);else{let ue=me.width,be=me.height;for(let Le=0;Le<Y;Le++)t.texImage2D(n.TEXTURE_2D,Le,Ue,ue,be,0,Je,it,null),ue>>=1,be>>=1}}else if(J.length>0&&Ge){we&&Oe&&t.texStorage2D(n.TEXTURE_2D,Y,Ue,J[0].width,J[0].height);for(let ue=0,be=J.length;ue<be;ue++)We=J[ue],we?t.texSubImage2D(n.TEXTURE_2D,ue,0,0,Je,it,We):t.texImage2D(n.TEXTURE_2D,ue,Ue,Je,it,We);j.generateMipmaps=!1}else we?(Oe&&t.texStorage2D(n.TEXTURE_2D,Y,Ue,me.width,me.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Je,it,me)):t.texImage2D(n.TEXTURE_2D,0,Ue,Je,it,me);P(j,Ge)&&L(Me),tt.__version=Re.version,j.onUpdate&&j.onUpdate(j)}W.__version=j.version}function Xe(W,j,ce){if(j.image.length!==6)return;const Me=K(W,j),Te=j.source;t.bindTexture(n.TEXTURE_CUBE_MAP,W.__webglTexture,n.TEXTURE0+ce);const Re=i.get(Te);if(Te.version!==Re.__version||Me===!0){t.activeTexture(n.TEXTURE0+ce),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const tt=j.isCompressedTexture||j.image[0].isCompressedTexture,Fe=j.image[0]&&j.image[0].isDataTexture,me=[];for(let ue=0;ue<6;ue++)!tt&&!Fe?me[ue]=w(j.image[ue],!1,!0,c):me[ue]=Fe?j.image[ue].image:j.image[ue],me[ue]=Nt(j,me[ue]);const Ge=me[0],Je=M(Ge)||a,it=s.convert(j.format,j.colorSpace),Ue=s.convert(j.type),We=I(j.internalFormat,it,Ue,j.colorSpace),J=a&&j.isVideoTexture!==!0,we=Re.__version===void 0||Me===!0;let Oe=C(j,Ge,Je);ge(n.TEXTURE_CUBE_MAP,j,Je);let Y;if(tt){J&&we&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,We,Ge.width,Ge.height);for(let ue=0;ue<6;ue++){Y=me[ue].mipmaps;for(let be=0;be<Y.length;be++){const Le=Y[be];j.format!==Gi?it!==null?J?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,be,0,0,Le.width,Le.height,it,Le.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,be,We,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,be,0,0,Le.width,Le.height,it,Ue,Le.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,be,We,Le.width,Le.height,0,it,Ue,Le.data)}}}else{Y=j.mipmaps,J&&we&&(Y.length>0&&Oe++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,We,me[0].width,me[0].height));for(let ue=0;ue<6;ue++)if(Fe){J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,0,0,me[ue].width,me[ue].height,it,Ue,me[ue].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,We,me[ue].width,me[ue].height,0,it,Ue,me[ue].data);for(let be=0;be<Y.length;be++){const qe=Y[be].image[ue].image;J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,be+1,0,0,qe.width,qe.height,it,Ue,qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,be+1,We,qe.width,qe.height,0,it,Ue,qe.data)}}else{J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,0,0,it,Ue,me[ue]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,We,it,Ue,me[ue]);for(let be=0;be<Y.length;be++){const Le=Y[be];J?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,be+1,0,0,it,Ue,Le.image[ue]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ue,be+1,We,it,Ue,Le.image[ue])}}}P(j,Je)&&L(n.TEXTURE_CUBE_MAP),Re.__version=Te.version,j.onUpdate&&j.onUpdate(j)}W.__version=j.version}function Ee(W,j,ce,Me,Te){const Re=s.convert(ce.format,ce.colorSpace),tt=s.convert(ce.type),Fe=I(ce.internalFormat,Re,tt,ce.colorSpace);i.get(j).__hasExternalTextures||(Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?t.texImage3D(Te,0,Fe,j.width,j.height,j.depth,0,Re,tt,null):t.texImage2D(Te,0,Fe,j.width,j.height,0,Re,tt,null)),t.bindFramebuffer(n.FRAMEBUFFER,W),Ke(j)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Me,Te,i.get(ce).__webglTexture,0,et(j)):(Te===n.TEXTURE_2D||Te>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Me,Te,i.get(ce).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Pe(W,j,ce){if(n.bindRenderbuffer(n.RENDERBUFFER,W),j.depthBuffer&&!j.stencilBuffer){let Me=n.DEPTH_COMPONENT16;if(ce||Ke(j)){const Te=j.depthTexture;Te&&Te.isDepthTexture&&(Te.type===co?Me=n.DEPTH_COMPONENT32F:Te.type===oa&&(Me=n.DEPTH_COMPONENT24));const Re=et(j);Ke(j)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,Me,j.width,j.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,Me,j.width,j.height)}else n.renderbufferStorage(n.RENDERBUFFER,Me,j.width,j.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,W)}else if(j.depthBuffer&&j.stencilBuffer){const Me=et(j);ce&&Ke(j)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Me,n.DEPTH24_STENCIL8,j.width,j.height):Ke(j)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Me,n.DEPTH24_STENCIL8,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,W)}else{const Me=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let Te=0;Te<Me.length;Te++){const Re=Me[Te],tt=s.convert(Re.format,Re.colorSpace),Fe=s.convert(Re.type),me=I(Re.internalFormat,tt,Fe,Re.colorSpace),Ge=et(j);ce&&Ke(j)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ge,me,j.width,j.height):Ke(j)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ge,me,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,me,j.width,j.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function _e(W,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,W),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(j.depthTexture).__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)&&(j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0),H(j.depthTexture,0);const Me=i.get(j.depthTexture).__webglTexture,Te=et(j);if(j.depthTexture.format===ya)Ke(j)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0);else if(j.depthTexture.format===Hl)Ke(j)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0);else throw new Error("Unknown depthTexture format")}function de(W){const j=i.get(W),ce=W.isWebGLCubeRenderTarget===!0;if(W.depthTexture&&!j.__autoAllocateDepthBuffer){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");_e(j.__webglFramebuffer,W)}else if(ce){j.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer[Me]),j.__webglDepthbuffer[Me]=n.createRenderbuffer(),Pe(j.__webglDepthbuffer[Me],W,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer=n.createRenderbuffer(),Pe(j.__webglDepthbuffer,W,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Se(W,j,ce){const Me=i.get(W);j!==void 0&&Ee(Me.__webglFramebuffer,W,W.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),ce!==void 0&&de(W)}function Be(W){const j=W.texture,ce=i.get(W),Me=i.get(j);W.addEventListener("dispose",q),W.isWebGLMultipleRenderTargets!==!0&&(Me.__webglTexture===void 0&&(Me.__webglTexture=n.createTexture()),Me.__version=j.version,o.memory.textures++);const Te=W.isWebGLCubeRenderTarget===!0,Re=W.isWebGLMultipleRenderTargets===!0,tt=M(W)||a;if(Te){ce.__webglFramebuffer=[];for(let Fe=0;Fe<6;Fe++)ce.__webglFramebuffer[Fe]=n.createFramebuffer()}else{if(ce.__webglFramebuffer=n.createFramebuffer(),Re)if(r.drawBuffers){const Fe=W.texture;for(let me=0,Ge=Fe.length;me<Ge;me++){const Je=i.get(Fe[me]);Je.__webglTexture===void 0&&(Je.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&W.samples>0&&Ke(W)===!1){const Fe=Re?j:[j];ce.__webglMultisampledFramebuffer=n.createFramebuffer(),ce.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ce.__webglMultisampledFramebuffer);for(let me=0;me<Fe.length;me++){const Ge=Fe[me];ce.__webglColorRenderbuffer[me]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ce.__webglColorRenderbuffer[me]);const Je=s.convert(Ge.format,Ge.colorSpace),it=s.convert(Ge.type),Ue=I(Ge.internalFormat,Je,it,Ge.colorSpace,W.isXRRenderTarget===!0),We=et(W);n.renderbufferStorageMultisample(n.RENDERBUFFER,We,Ue,W.width,W.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+me,n.RENDERBUFFER,ce.__webglColorRenderbuffer[me])}n.bindRenderbuffer(n.RENDERBUFFER,null),W.depthBuffer&&(ce.__webglDepthRenderbuffer=n.createRenderbuffer(),Pe(ce.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Te){t.bindTexture(n.TEXTURE_CUBE_MAP,Me.__webglTexture),ge(n.TEXTURE_CUBE_MAP,j,tt);for(let Fe=0;Fe<6;Fe++)Ee(ce.__webglFramebuffer[Fe],W,j,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe);P(j,tt)&&L(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Re){const Fe=W.texture;for(let me=0,Ge=Fe.length;me<Ge;me++){const Je=Fe[me],it=i.get(Je);t.bindTexture(n.TEXTURE_2D,it.__webglTexture),ge(n.TEXTURE_2D,Je,tt),Ee(ce.__webglFramebuffer,W,Je,n.COLOR_ATTACHMENT0+me,n.TEXTURE_2D),P(Je,tt)&&L(n.TEXTURE_2D)}t.unbindTexture()}else{let Fe=n.TEXTURE_2D;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(a?Fe=W.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Fe,Me.__webglTexture),ge(Fe,j,tt),Ee(ce.__webglFramebuffer,W,j,n.COLOR_ATTACHMENT0,Fe),P(j,tt)&&L(Fe),t.unbindTexture()}W.depthBuffer&&de(W)}function Ne(W){const j=M(W)||a,ce=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let Me=0,Te=ce.length;Me<Te;Me++){const Re=ce[Me];if(P(Re,j)){const tt=W.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Fe=i.get(Re).__webglTexture;t.bindTexture(tt,Fe),L(tt),t.unbindTexture()}}}function Qe(W){if(a&&W.samples>0&&Ke(W)===!1){const j=W.isWebGLMultipleRenderTargets?W.texture:[W.texture],ce=W.width,Me=W.height;let Te=n.COLOR_BUFFER_BIT;const Re=[],tt=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=i.get(W),me=W.isWebGLMultipleRenderTargets===!0;if(me)for(let Ge=0;Ge<j.length;Ge++)t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglFramebuffer);for(let Ge=0;Ge<j.length;Ge++){Re.push(n.COLOR_ATTACHMENT0+Ge),W.depthBuffer&&Re.push(tt);const Je=Fe.__ignoreDepthValues!==void 0?Fe.__ignoreDepthValues:!1;if(Je===!1&&(W.depthBuffer&&(Te|=n.DEPTH_BUFFER_BIT),W.stencilBuffer&&(Te|=n.STENCIL_BUFFER_BIT)),me&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Ge]),Je===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[tt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[tt])),me){const it=i.get(j[Ge]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,it,0)}n.blitFramebuffer(0,0,ce,Me,0,0,ce,Me,Te,n.NEAREST),g&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Re)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),me)for(let Ge=0;Ge<j.length;Ge++){t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Ge]);const Je=i.get(j[Ge]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.TEXTURE_2D,Je,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer)}}function et(W){return Math.min(p,W.samples)}function Ke(W){const j=i.get(W);return a&&W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function ct(W){const j=o.render.frame;y.get(W)!==j&&(y.set(W,j),W.update())}function Nt(W,j){const ce=W.colorSpace,Me=W.format,Te=W.type;return W.isCompressedTexture===!0||W.format===Y0||ce!==ls&&ce!==_a&&(ce===vt?a===!1?e.has("EXT_sRGB")===!0&&Me===Gi?(W.format=Y0,W.minFilter=Tn,W.generateMipmaps=!1):j=bE.sRGBToLinear(j):(Me!==Gi||Te!==wo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ce)),j}this.allocateTextureUnit=D,this.resetTextureUnits=ee,this.setTexture2D=H,this.setTexture2DArray=Z,this.setTexture3D=te,this.setTextureCube=Q,this.rebindTextures=Se,this.setupRenderTarget=Be,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=Qe,this.setupDepthRenderbuffer=de,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=Ke}function jD(n,e,t){const i=t.isWebGL2;function r(s,o=_a){let a;if(s===wo)return n.UNSIGNED_BYTE;if(s===rD)return n.UNSIGNED_SHORT_4_4_4_4;if(s===sD)return n.UNSIGNED_SHORT_5_5_5_1;if(s===tD)return n.BYTE;if(s===nD)return n.SHORT;if(s===vE)return n.UNSIGNED_SHORT;if(s===iD)return n.INT;if(s===oa)return n.UNSIGNED_INT;if(s===co)return n.FLOAT;if(s===$u)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===oD)return n.ALPHA;if(s===Gi)return n.RGBA;if(s===aD)return n.LUMINANCE;if(s===lD)return n.LUMINANCE_ALPHA;if(s===ya)return n.DEPTH_COMPONENT;if(s===Hl)return n.DEPTH_STENCIL;if(s===Y0)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===cD)return n.RED;if(s===uD)return n.RED_INTEGER;if(s===dD)return n.RG;if(s===hD)return n.RG_INTEGER;if(s===fD)return n.RGBA_INTEGER;if(s===n0||s===i0||s===r0||s===s0)if(o===vt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===n0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===i0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===r0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===s0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===n0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===i0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===r0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===s0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Uw||s===zw||s===Bw||s===Vw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Uw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===zw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Bw)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Vw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===pD)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Hw||s===Gw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Hw)return o===vt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Gw)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Ww||s===$w||s===Xw||s===qw||s===Yw||s===Kw||s===Zw||s===Jw||s===Qw||s===eb||s===tb||s===nb||s===ib||s===rb)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Ww)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===$w)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Xw)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===qw)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Yw)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Kw)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Zw)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Jw)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Qw)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===eb)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===tb)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===nb)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===ib)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===rb)return o===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===o0)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===o0)return o===vt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===mD||s===sb||s===ob||s===ab)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===o0)return a.COMPRESSED_RED_RGTC1_EXT;if(s===sb)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===ob)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===ab)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ll?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class OD extends yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class xu extends zt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const LZ={type:"move"};class D1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new xu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new xu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new xu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const S=t.getJointPose(_,i),v=this._getHandJoint(c,_);S!==null&&(v.matrix.fromArray(S.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=S.radius),v.visible=S!==null}const u=c.joints["index-finger-tip"],p=c.joints["thumb-tip"],m=u.position.distanceTo(p.position),g=.02,y=.005;c.inputState.pinching&&m>g+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=g-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(LZ)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new xu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class FD extends _n{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:ya,u!==ya&&u!==Hl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===ya&&(i=oa),i===void 0&&u===Hl&&(i=Ll),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:En,this.minFilter=l!==void 0?l:En,this.flipY=!1,this.generateMipmaps=!1}}class IZ extends To{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,p=null,m=null,g=null,y=null;const _=t.getContextAttributes();let S=null,v=null;const b=[],w=[],M=new Set,A=new Map,P=new yn;P.layers.enable(1),P.viewport=new Wt;const L=new yn;L.layers.enable(2),L.viewport=new Wt;const I=[P,L],C=new OD;C.layers.enable(1),C.layers.enable(2);let k=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let se=b[Q];return se===void 0&&(se=new D1,b[Q]=se),se.getTargetRaySpace()},this.getControllerGrip=function(Q){let se=b[Q];return se===void 0&&(se=new D1,b[Q]=se),se.getGripSpace()},this.getHand=function(Q){let se=b[Q];return se===void 0&&(se=new D1,b[Q]=se),se.getHandSpace()};function q(Q){const se=w.indexOf(Q.inputSource);if(se===-1)return;const ve=b[se];ve!==void 0&&(ve.update(Q.inputSource,Q.frame,c||o),ve.dispatchEvent({type:Q.type,data:Q.inputSource}))}function B(){r.removeEventListener("select",q),r.removeEventListener("selectstart",q),r.removeEventListener("selectend",q),r.removeEventListener("squeeze",q),r.removeEventListener("squeezestart",q),r.removeEventListener("squeezeend",q),r.removeEventListener("end",B),r.removeEventListener("inputsourceschange",U);for(let Q=0;Q<b.length;Q++){const se=w[Q];se!==null&&(w[Q]=null,b[Q].disconnect(se))}k=null,V=null,e.setRenderTarget(S),g=null,m=null,p=null,r=null,v=null,te.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){s=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){a=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Q){c=Q},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return p},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(Q){if(r=Q,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",q),r.addEventListener("selectstart",q),r.addEventListener("selectend",q),r.addEventListener("squeeze",q),r.addEventListener("squeezestart",q),r.addEventListener("squeezeend",q),r.addEventListener("end",B),r.addEventListener("inputsourceschange",U),_.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const se={antialias:r.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,se),r.updateRenderState({baseLayer:g}),v=new cs(g.framebufferWidth,g.framebufferHeight,{format:Gi,type:wo,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let se=null,ve=null,ge=null;_.depth&&(ge=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,se=_.stencil?Hl:ya,ve=_.stencil?Ll:oa);const K={colorFormat:t.RGBA8,depthFormat:ge,scaleFactor:s};p=new XRWebGLBinding(r,t),m=p.createProjectionLayer(K),r.updateRenderState({layers:[m]}),v=new cs(m.textureWidth,m.textureHeight,{format:Gi,type:wo,depthTexture:new FD(m.textureWidth,m.textureHeight,ve,void 0,void 0,void 0,void 0,void 0,void 0,se),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0});const je=e.properties.get(v);je.__ignoreDepthValues=m.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),te.setContext(r),te.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function U(Q){for(let se=0;se<Q.removed.length;se++){const ve=Q.removed[se],ge=w.indexOf(ve);ge>=0&&(w[ge]=null,b[ge].disconnect(ve))}for(let se=0;se<Q.added.length;se++){const ve=Q.added[se];let ge=w.indexOf(ve);if(ge===-1){for(let je=0;je<b.length;je++)if(je>=w.length){w.push(ve),ge=je;break}else if(w[je]===null){w[je]=ve,ge=je;break}if(ge===-1)break}const K=b[ge];K&&K.connect(ve)}}const $=new F,X=new F;function ee(Q,se,ve){$.setFromMatrixPosition(se.matrixWorld),X.setFromMatrixPosition(ve.matrixWorld);const ge=$.distanceTo(X),K=se.projectionMatrix.elements,je=ve.projectionMatrix.elements,Xe=K[14]/(K[10]-1),Ee=K[14]/(K[10]+1),Pe=(K[9]+1)/K[5],_e=(K[9]-1)/K[5],de=(K[8]-1)/K[0],Se=(je[8]+1)/je[0],Be=Xe*de,Ne=Xe*Se,Qe=ge/(-de+Se),et=Qe*-de;se.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(et),Q.translateZ(Qe),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();const Ke=Xe+Qe,ct=Ee+Qe,Nt=Be-et,W=Ne+(ge-et),j=Pe*Ee/ct*Ke,ce=_e*Ee/ct*Ke;Q.projectionMatrix.makePerspective(Nt,W,j,ce,Ke,ct),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}function D(Q,se){se===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(se.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(r===null)return;C.near=L.near=P.near=Q.near,C.far=L.far=P.far=Q.far,(k!==C.near||V!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),k=C.near,V=C.far);const se=Q.parent,ve=C.cameras;D(C,se);for(let ge=0;ge<ve.length;ge++)D(ve[ge],se);ve.length===2?ee(C,P,L):C.projectionMatrix.copy(P.projectionMatrix),O(Q,C,se)};function O(Q,se,ve){ve===null?Q.matrix.copy(se.matrixWorld):(Q.matrix.copy(ve.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(se.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0);const ge=Q.children;for(let K=0,je=ge.length;K<je;K++)ge[K].updateMatrixWorld(!0);Q.projectionMatrix.copy(se.projectionMatrix),Q.projectionMatrixInverse.copy(se.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=Xu*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(m===null&&g===null))return l},this.setFoveation=function(Q){l=Q,m!==null&&(m.fixedFoveation=Q),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=Q)},this.getPlanes=function(){return M};let H=null;function Z(Q,se){if(u=se.getViewerPose(c||o),y=se,u!==null){const ve=u.views;g!==null&&(e.setRenderTargetFramebuffer(v,g.framebuffer),e.setRenderTarget(v));let ge=!1;ve.length!==C.cameras.length&&(C.cameras.length=0,ge=!0);for(let K=0;K<ve.length;K++){const je=ve[K];let Xe=null;if(g!==null)Xe=g.getViewport(je);else{const Pe=p.getViewSubImage(m,je);Xe=Pe.viewport,K===0&&(e.setRenderTargetTextures(v,Pe.colorTexture,m.ignoreDepthValues?void 0:Pe.depthStencilTexture),e.setRenderTarget(v))}let Ee=I[K];Ee===void 0&&(Ee=new yn,Ee.layers.enable(K),Ee.viewport=new Wt,I[K]=Ee),Ee.matrix.fromArray(je.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(je.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(Xe.x,Xe.y,Xe.width,Xe.height),K===0&&(C.matrix.copy(Ee.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),ge===!0&&C.cameras.push(Ee)}}for(let ve=0;ve<b.length;ve++){const ge=w[ve],K=b[ve];ge!==null&&K!==void 0&&K.update(ge,se,c||o)}if(H&&H(Q,se),se.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:se.detectedPlanes});let ve=null;for(const ge of M)se.detectedPlanes.has(ge)||(ve===null&&(ve=[]),ve.push(ge));if(ve!==null)for(const ge of ve)M.delete(ge),A.delete(ge),i.dispatchEvent({type:"planeremoved",data:ge});for(const ge of se.detectedPlanes)if(!M.has(ge))M.add(ge),A.set(ge,se.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ge});else{const K=A.get(ge);ge.lastChangedTime>K&&(A.set(ge,ge.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ge}))}}y=null}const te=new RD;te.setAnimationLoop(Z),this.setAnimationLoop=function(Q){H=Q},this.dispose=function(){}}}function kZ(n,e){function t(S,v){S.matrixAutoUpdate===!0&&S.updateMatrix(),v.value.copy(S.matrix)}function i(S,v){v.color.getRGB(S.fogColor.value,AD(n)),v.isFog?(S.fogNear.value=v.near,S.fogFar.value=v.far):v.isFogExp2&&(S.fogDensity.value=v.density)}function r(S,v,b,w,M){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(S,v):v.isMeshToonMaterial?(s(S,v),p(S,v)):v.isMeshPhongMaterial?(s(S,v),u(S,v)):v.isMeshStandardMaterial?(s(S,v),m(S,v),v.isMeshPhysicalMaterial&&g(S,v,M)):v.isMeshMatcapMaterial?(s(S,v),y(S,v)):v.isMeshDepthMaterial?s(S,v):v.isMeshDistanceMaterial?(s(S,v),_(S,v)):v.isMeshNormalMaterial?s(S,v):v.isLineBasicMaterial?(o(S,v),v.isLineDashedMaterial&&a(S,v)):v.isPointsMaterial?l(S,v,b,w):v.isSpriteMaterial?c(S,v):v.isShadowMaterial?(S.color.value.copy(v.color),S.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(S,v){S.opacity.value=v.opacity,v.color&&S.diffuse.value.copy(v.color),v.emissive&&S.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(S.map.value=v.map,t(v.map,S.mapTransform)),v.alphaMap&&(S.alphaMap.value=v.alphaMap,t(v.alphaMap,S.alphaMapTransform)),v.bumpMap&&(S.bumpMap.value=v.bumpMap,t(v.bumpMap,S.bumpMapTransform),S.bumpScale.value=v.bumpScale,v.side===Ni&&(S.bumpScale.value*=-1)),v.normalMap&&(S.normalMap.value=v.normalMap,t(v.normalMap,S.normalMapTransform),S.normalScale.value.copy(v.normalScale),v.side===Ni&&S.normalScale.value.negate()),v.displacementMap&&(S.displacementMap.value=v.displacementMap,t(v.displacementMap,S.displacementMapTransform),S.displacementScale.value=v.displacementScale,S.displacementBias.value=v.displacementBias),v.emissiveMap&&(S.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,S.emissiveMapTransform)),v.specularMap&&(S.specularMap.value=v.specularMap,t(v.specularMap,S.specularMapTransform)),v.alphaTest>0&&(S.alphaTest.value=v.alphaTest);const b=e.get(v).envMap;if(b&&(S.envMap.value=b,S.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=v.reflectivity,S.ior.value=v.ior,S.refractionRatio.value=v.refractionRatio),v.lightMap){S.lightMap.value=v.lightMap;const w=n.useLegacyLights===!0?Math.PI:1;S.lightMapIntensity.value=v.lightMapIntensity*w,t(v.lightMap,S.lightMapTransform)}v.aoMap&&(S.aoMap.value=v.aoMap,S.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,S.aoMapTransform))}function o(S,v){S.diffuse.value.copy(v.color),S.opacity.value=v.opacity,v.map&&(S.map.value=v.map,t(v.map,S.mapTransform))}function a(S,v){S.dashSize.value=v.dashSize,S.totalSize.value=v.dashSize+v.gapSize,S.scale.value=v.scale}function l(S,v,b,w){S.diffuse.value.copy(v.color),S.opacity.value=v.opacity,S.size.value=v.size*b,S.scale.value=w*.5,v.map&&(S.map.value=v.map,t(v.map,S.uvTransform)),v.alphaMap&&(S.alphaMap.value=v.alphaMap),v.alphaTest>0&&(S.alphaTest.value=v.alphaTest)}function c(S,v){S.diffuse.value.copy(v.color),S.opacity.value=v.opacity,S.rotation.value=v.rotation,v.map&&(S.map.value=v.map,t(v.map,S.mapTransform)),v.alphaMap&&(S.alphaMap.value=v.alphaMap),v.alphaTest>0&&(S.alphaTest.value=v.alphaTest)}function u(S,v){S.specular.value.copy(v.specular),S.shininess.value=Math.max(v.shininess,1e-4)}function p(S,v){v.gradientMap&&(S.gradientMap.value=v.gradientMap)}function m(S,v){S.metalness.value=v.metalness,v.metalnessMap&&(S.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,S.metalnessMapTransform)),S.roughness.value=v.roughness,v.roughnessMap&&(S.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,S.roughnessMapTransform)),e.get(v).envMap&&(S.envMapIntensity.value=v.envMapIntensity)}function g(S,v,b){S.ior.value=v.ior,v.sheen>0&&(S.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),S.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(S.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,S.sheenColorMapTransform)),v.sheenRoughnessMap&&(S.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,S.sheenRoughnessMapTransform))),v.clearcoat>0&&(S.clearcoat.value=v.clearcoat,S.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(S.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,S.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(S.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Ni&&S.clearcoatNormalScale.value.negate())),v.iridescence>0&&(S.iridescence.value=v.iridescence,S.iridescenceIOR.value=v.iridescenceIOR,S.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(S.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,S.iridescenceMapTransform)),v.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),v.transmission>0&&(S.transmission.value=v.transmission,S.transmissionSamplerMap.value=b.texture,S.transmissionSamplerSize.value.set(b.width,b.height),v.transmissionMap&&(S.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,S.transmissionMapTransform)),S.thickness.value=v.thickness,v.thicknessMap&&(S.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=v.attenuationDistance,S.attenuationColor.value.copy(v.attenuationColor)),S.specularIntensity.value=v.specularIntensity,S.specularColor.value.copy(v.specularColor),v.specularColorMap&&(S.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,S.specularColorMapTransform)),v.specularIntensityMap&&(S.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,S.specularIntensityMapTransform))}function y(S,v){v.matcap&&(S.matcap.value=v.matcap)}function _(S,v){const b=e.get(v).light;S.referencePosition.value.setFromMatrixPosition(b.matrixWorld),S.nearDistance.value=b.shadow.camera.near,S.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function DZ(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(b,w){const M=w.program;i.uniformBlockBinding(b,M)}function c(b,w){let M=r[b.id];M===void 0&&(y(b),M=u(b),r[b.id]=M,b.addEventListener("dispose",S));const A=w.program;i.updateUBOMapping(b,A);const P=e.render.frame;s[b.id]!==P&&(m(b),s[b.id]=P)}function u(b){const w=p();b.__bindingPointIndex=w;const M=n.createBuffer(),A=b.__size,P=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,M),n.bufferData(n.UNIFORM_BUFFER,A,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,M),M}function p(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(b){const w=r[b.id],M=b.uniforms,A=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let P=0,L=M.length;P<L;P++){const I=M[P];if(g(I,P,A)===!0){const C=I.__offset,k=Array.isArray(I.value)?I.value:[I.value];let V=0;for(let q=0;q<k.length;q++){const B=k[q],U=_(B);typeof B=="number"?(I.__data[0]=B,n.bufferSubData(n.UNIFORM_BUFFER,C+V,I.__data)):B.isMatrix3?(I.__data[0]=B.elements[0],I.__data[1]=B.elements[1],I.__data[2]=B.elements[2],I.__data[3]=B.elements[0],I.__data[4]=B.elements[3],I.__data[5]=B.elements[4],I.__data[6]=B.elements[5],I.__data[7]=B.elements[0],I.__data[8]=B.elements[6],I.__data[9]=B.elements[7],I.__data[10]=B.elements[8],I.__data[11]=B.elements[0]):(B.toArray(I.__data,V),V+=U.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,C,I.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(b,w,M){const A=b.value;if(M[w]===void 0){if(typeof A=="number")M[w]=A;else{const P=Array.isArray(A)?A:[A],L=[];for(let I=0;I<P.length;I++)L.push(P[I].clone());M[w]=L}return!0}else if(typeof A=="number"){if(M[w]!==A)return M[w]=A,!0}else{const P=Array.isArray(M[w])?M[w]:[M[w]],L=Array.isArray(A)?A:[A];for(let I=0;I<P.length;I++){const C=P[I];if(C.equals(L[I])===!1)return C.copy(L[I]),!0}}return!1}function y(b){const w=b.uniforms;let M=0;const A=16;let P=0;for(let L=0,I=w.length;L<I;L++){const C=w[L],k={boundary:0,storage:0},V=Array.isArray(C.value)?C.value:[C.value];for(let q=0,B=V.length;q<B;q++){const U=V[q],$=_(U);k.boundary+=$.boundary,k.storage+=$.storage}if(C.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=M,L>0){P=M%A;const q=A-P;P!==0&&q-k.boundary<0&&(M+=A-P,C.__offset=M)}M+=k.storage}return P=M%A,P>0&&(M+=A-P),b.__size=M,b.__cache={},this}function _(b){const w={boundary:0,storage:0};return typeof b=="number"?(w.boundary=4,w.storage=4):b.isVector2?(w.boundary=8,w.storage=8):b.isVector3||b.isColor?(w.boundary=16,w.storage=12):b.isVector4?(w.boundary=16,w.storage=16):b.isMatrix3?(w.boundary=48,w.storage=48):b.isMatrix4?(w.boundary=64,w.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),w}function S(b){const w=b.target;w.removeEventListener("dispose",S);const M=o.indexOf(w.__bindingPointIndex);o.splice(M,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function v(){for(const b in r)n.deleteBuffer(r[b]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}function jZ(){const n=Mf("canvas");return n.style.display="block",n}class Gv{constructor(e={}){const{canvas:t=jZ(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let m;i!==null?m=i.getContextAttributes().alpha:m=o;let g=null,y=null;const _=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=vt,this.useLegacyLights=!0,this.toneMapping=ss,this.toneMappingExposure=1;const v=this;let b=!1,w=0,M=0,A=null,P=-1,L=null;const I=new Wt,C=new Wt;let k=null,V=t.width,q=t.height,B=1,U=null,$=null;const X=new Wt(0,0,V,q),ee=new Wt(0,0,V,q);let D=!1;const O=new Vv;let H=!1,Z=!1,te=null;const Q=new mt,se=new F,ve={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ge(){return A===null?B:1}let K=i;function je(z,ae){for(let pe=0;pe<z.length;pe++){const re=z[pe],ye=t.getContext(re,ae);if(ye!==null)return ye}return null}try{const z={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ov}`),t.addEventListener("webglcontextlost",We,!1),t.addEventListener("webglcontextrestored",J,!1),t.addEventListener("webglcontextcreationerror",we,!1),K===null){const ae=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&ae.shift(),K=je(ae,z),K===null)throw je(ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let Xe,Ee,Pe,_e,de,Se,Be,Ne,Qe,et,Ke,ct,Nt,W,j,ce,Me,Te,Re,tt,Fe,me,Ge,Je;function it(){Xe=new JY(K),Ee=new $Y(K,Xe,e),Xe.init(Ee),me=new jD(K,Xe,Ee),Pe=new NZ(K,Xe,Ee),_e=new tK(K),de=new yZ,Se=new RZ(K,Xe,Pe,de,Ee,me,_e),Be=new qY(v),Ne=new ZY(v),Qe=new fX(K,Ee),Ge=new GY(K,Xe,Qe,Ee),et=new QY(K,Qe,_e,Ge),Ke=new sK(K,et,Qe,_e),Re=new rK(K,Ee,Se),ce=new XY(de),ct=new vZ(v,Be,Ne,Xe,Ee,Ge,ce),Nt=new kZ(v,de),W=new _Z,j=new TZ(Xe,Ee),Te=new HY(v,Be,Ne,Pe,Ke,m,l),Me=new PZ(v,Ke,Ee),Je=new DZ(K,_e,Ee,Pe),tt=new WY(K,Xe,_e,Ee),Fe=new eK(K,Xe,_e,Ee),_e.programs=ct.programs,v.capabilities=Ee,v.extensions=Xe,v.properties=de,v.renderLists=W,v.shadowMap=Me,v.state=Pe,v.info=_e}it();const Ue=new IZ(v,K);this.xr=Ue,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const z=Xe.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=Xe.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(z){z!==void 0&&(B=z,this.setSize(V,q,!1))},this.getSize=function(z){return z.set(V,q)},this.setSize=function(z,ae,pe=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=z,q=ae,t.width=Math.floor(z*B),t.height=Math.floor(ae*B),pe===!0&&(t.style.width=z+"px",t.style.height=ae+"px"),this.setViewport(0,0,z,ae)},this.getDrawingBufferSize=function(z){return z.set(V*B,q*B).floor()},this.setDrawingBufferSize=function(z,ae,pe){V=z,q=ae,B=pe,t.width=Math.floor(z*pe),t.height=Math.floor(ae*pe),this.setViewport(0,0,z,ae)},this.getCurrentViewport=function(z){return z.copy(I)},this.getViewport=function(z){return z.copy(X)},this.setViewport=function(z,ae,pe,re){z.isVector4?X.set(z.x,z.y,z.z,z.w):X.set(z,ae,pe,re),Pe.viewport(I.copy(X).multiplyScalar(B).floor())},this.getScissor=function(z){return z.copy(ee)},this.setScissor=function(z,ae,pe,re){z.isVector4?ee.set(z.x,z.y,z.z,z.w):ee.set(z,ae,pe,re),Pe.scissor(C.copy(ee).multiplyScalar(B).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(z){Pe.setScissorTest(D=z)},this.setOpaqueSort=function(z){U=z},this.setTransparentSort=function(z){$=z},this.getClearColor=function(z){return z.copy(Te.getClearColor())},this.setClearColor=function(){Te.setClearColor.apply(Te,arguments)},this.getClearAlpha=function(){return Te.getClearAlpha()},this.setClearAlpha=function(){Te.setClearAlpha.apply(Te,arguments)},this.clear=function(z=!0,ae=!0,pe=!0){let re=0;z&&(re|=K.COLOR_BUFFER_BIT),ae&&(re|=K.DEPTH_BUFFER_BIT),pe&&(re|=K.STENCIL_BUFFER_BIT),K.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",We,!1),t.removeEventListener("webglcontextrestored",J,!1),t.removeEventListener("webglcontextcreationerror",we,!1),W.dispose(),j.dispose(),de.dispose(),Be.dispose(),Ne.dispose(),Ke.dispose(),Ge.dispose(),Je.dispose(),ct.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",qe),Ue.removeEventListener("sessionend",It),te&&(te.dispose(),te=null),xt.stop()};function We(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function J(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const z=_e.autoReset,ae=Me.enabled,pe=Me.autoUpdate,re=Me.needsUpdate,ye=Me.type;it(),_e.autoReset=z,Me.enabled=ae,Me.autoUpdate=pe,Me.needsUpdate=re,Me.type=ye}function we(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function Oe(z){const ae=z.target;ae.removeEventListener("dispose",Oe),Y(ae)}function Y(z){ue(z),de.remove(z)}function ue(z){const ae=de.get(z).programs;ae!==void 0&&(ae.forEach(function(pe){ct.releaseProgram(pe)}),z.isShaderMaterial&&ct.releaseShaderCache(z))}this.renderBufferDirect=function(z,ae,pe,re,ye,nt){ae===null&&(ae=ve);const ot=ye.isMesh&&ye.matrixWorld.determinant()<0,ut=yp(z,ae,pe,re,ye);Pe.setMaterial(re,ot);let ft=pe.index,St=1;re.wireframe===!0&&(ft=et.getWireframeAttribute(pe),St=2);const Et=pe.drawRange,Tt=pe.attributes.position;let Vt=Et.start*St,Qn=(Et.start+Et.count)*St;nt!==null&&(Vt=Math.max(Vt,nt.start*St),Qn=Math.min(Qn,(nt.start+nt.count)*St)),ft!==null?(Vt=Math.max(Vt,0),Qn=Math.min(Qn,ft.count)):Tt!=null&&(Vt=Math.max(Vt,0),Qn=Math.min(Qn,Tt.count));const Ki=Qn-Vt;if(Ki<0||Ki===1/0)return;Ge.setup(ye,re,ut,pe,ft);let Or,Jt=tt;if(ft!==null&&(Or=Qe.get(ft),Jt=Fe,Jt.setIndex(Or)),ye.isMesh)re.wireframe===!0?(Pe.setLineWidth(re.wireframeLinewidth*ge()),Jt.setMode(K.LINES)):Jt.setMode(K.TRIANGLES);else if(ye.isLine){let At=re.linewidth;At===void 0&&(At=1),Pe.setLineWidth(At*ge()),ye.isLineSegments?Jt.setMode(K.LINES):ye.isLineLoop?Jt.setMode(K.LINE_LOOP):Jt.setMode(K.LINE_STRIP)}else ye.isPoints?Jt.setMode(K.POINTS):ye.isSprite&&Jt.setMode(K.TRIANGLES);if(ye.isInstancedMesh)Jt.renderInstances(Vt,Ki,ye.count);else if(pe.isInstancedBufferGeometry){const At=pe._maxInstanceCount!==void 0?pe._maxInstanceCount:1/0,Ga=Math.min(pe.instanceCount,At);Jt.renderInstances(Vt,Ki,Ga)}else Jt.render(Vt,Ki)},this.compile=function(z,ae){function pe(re,ye,nt){re.transparent===!0&&re.side===Cs&&re.forceSinglePass===!1?(re.side=Ni,re.needsUpdate=!0,oc(re,ye,nt),re.side=_o,re.needsUpdate=!0,oc(re,ye,nt),re.side=Cs):oc(re,ye,nt)}y=j.get(z),y.init(),S.push(y),z.traverseVisible(function(re){re.isLight&&re.layers.test(ae.layers)&&(y.pushLight(re),re.castShadow&&y.pushShadow(re))}),y.setupLights(v.useLegacyLights),z.traverse(function(re){const ye=re.material;if(ye)if(Array.isArray(ye))for(let nt=0;nt<ye.length;nt++){const ot=ye[nt];pe(ot,z,re)}else pe(ye,z,re)}),S.pop(),y=null};let be=null;function Le(z){be&&be(z)}function qe(){xt.stop()}function It(){xt.start()}const xt=new RD;xt.setAnimationLoop(Le),typeof self<"u"&&xt.setContext(self),this.setAnimationLoop=function(z){be=z,Ue.setAnimationLoop(z),z===null?xt.stop():xt.start()},Ue.addEventListener("sessionstart",qe),Ue.addEventListener("sessionend",It),this.render=function(z,ae){if(ae!==void 0&&ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),ae.parent===null&&ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(ae),ae=Ue.getCamera()),z.isScene===!0&&z.onBeforeRender(v,z,ae,A),y=j.get(z,S.length),y.init(),S.push(y),Q.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),O.setFromProjectionMatrix(Q),Z=this.localClippingEnabled,H=ce.init(this.clippingPlanes,Z),g=W.get(z,_.length),g.init(),_.push(g),Xt(z,ae,0,v.sortObjects),g.finish(),v.sortObjects===!0&&g.sort(U,$),H===!0&&ce.beginShadows();const pe=y.state.shadowsArray;if(Me.render(pe,z,ae),H===!0&&ce.endShadows(),this.info.autoReset===!0&&this.info.reset(),Te.render(g,z),y.setupLights(v.useLegacyLights),ae.isArrayCamera){const re=ae.cameras;for(let ye=0,nt=re.length;ye<nt;ye++){const ot=re[ye];Zn(g,z,ot,ot.viewport)}}else Zn(g,z,ae);A!==null&&(Se.updateMultisampleRenderTarget(A),Se.updateRenderTargetMipmap(A)),z.isScene===!0&&z.onAfterRender(v,z,ae),Ge.resetDefaultState(),P=-1,L=null,S.pop(),S.length>0?y=S[S.length-1]:y=null,_.pop(),_.length>0?g=_[_.length-1]:g=null};function Xt(z,ae,pe,re){if(z.visible===!1)return;if(z.layers.test(ae.layers)){if(z.isGroup)pe=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(ae);else if(z.isLight)y.pushLight(z),z.castShadow&&y.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||O.intersectsSprite(z)){re&&se.setFromMatrixPosition(z.matrixWorld).applyMatrix4(Q);const ot=Ke.update(z),ut=z.material;ut.visible&&g.push(z,ot,ut,pe,se.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||O.intersectsObject(z))){z.isSkinnedMesh&&z.skeleton.frame!==_e.render.frame&&(z.skeleton.update(),z.skeleton.frame=_e.render.frame);const ot=Ke.update(z),ut=z.material;if(re&&(ot.boundingSphere===null&&ot.computeBoundingSphere(),se.copy(ot.boundingSphere.center).applyMatrix4(z.matrixWorld).applyMatrix4(Q)),Array.isArray(ut)){const ft=ot.groups;for(let St=0,Et=ft.length;St<Et;St++){const Tt=ft[St],Vt=ut[Tt.materialIndex];Vt&&Vt.visible&&g.push(z,ot,Vt,pe,se.z,Tt)}}else ut.visible&&g.push(z,ot,ut,pe,se.z,null)}}const nt=z.children;for(let ot=0,ut=nt.length;ot<ut;ot++)Xt(nt[ot],ae,pe,re)}function Zn(z,ae,pe,re){const ye=z.opaque,nt=z.transmissive,ot=z.transparent;y.setupLightsView(pe),H===!0&&ce.setGlobalState(v.clippingPlanes,pe),nt.length>0&&Bt(ye,nt,ae,pe),re&&Pe.viewport(I.copy(re)),ye.length>0&&wn(ye,ae,pe),nt.length>0&&wn(nt,ae,pe),ot.length>0&&wn(ot,ae,pe),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function Bt(z,ae,pe,re){if(te===null){const ut=Ee.isWebGL2;te=new cs(1024,1024,{generateMipmaps:!0,type:Xe.has("EXT_color_buffer_half_float")?$u:wo,minFilter:Na,samples:ut&&a===!0?4:0})}const ye=v.getRenderTarget();v.setRenderTarget(te),v.clear();const nt=v.toneMapping;v.toneMapping=ss,wn(z,pe,re),Se.updateMultisampleRenderTarget(te),Se.updateRenderTargetMipmap(te);let ot=!1;for(let ut=0,ft=ae.length;ut<ft;ut++){const St=ae[ut],Et=St.object,Tt=St.geometry,Vt=St.material,Qn=St.group;if(Vt.side===Cs&&Et.layers.test(re.layers)){const Ki=Vt.side;Vt.side=Ni,Vt.needsUpdate=!0,Jn(Et,pe,re,Tt,Vt,Qn),Vt.side=Ki,Vt.needsUpdate=!0,ot=!0}}ot===!0&&(Se.updateMultisampleRenderTarget(te),Se.updateRenderTargetMipmap(te)),v.setRenderTarget(ye),v.toneMapping=nt}function wn(z,ae,pe){const re=ae.isScene===!0?ae.overrideMaterial:null;for(let ye=0,nt=z.length;ye<nt;ye++){const ot=z[ye],ut=ot.object,ft=ot.geometry,St=re===null?ot.material:re,Et=ot.group;ut.layers.test(pe.layers)&&Jn(ut,ae,pe,ft,St,Et)}}function Jn(z,ae,pe,re,ye,nt){z.onBeforeRender(v,ae,pe,re,ye,nt),z.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),ye.onBeforeRender(v,ae,pe,re,z,nt),ye.transparent===!0&&ye.side===Cs&&ye.forceSinglePass===!1?(ye.side=Ni,ye.needsUpdate=!0,v.renderBufferDirect(pe,ae,re,ye,z,nt),ye.side=_o,ye.needsUpdate=!0,v.renderBufferDirect(pe,ae,re,ye,z,nt),ye.side=Cs):v.renderBufferDirect(pe,ae,re,ye,z,nt),z.onAfterRender(v,ae,pe,re,ye,nt)}function oc(z,ae,pe){ae.isScene!==!0&&(ae=ve);const re=de.get(z),ye=y.state.lights,nt=y.state.shadowsArray,ot=ye.state.version,ut=ct.getParameters(z,ye.state,nt,ae,pe),ft=ct.getProgramCacheKey(ut);let St=re.programs;re.environment=z.isMeshStandardMaterial?ae.environment:null,re.fog=ae.fog,re.envMap=(z.isMeshStandardMaterial?Ne:Be).get(z.envMap||re.environment),St===void 0&&(z.addEventListener("dispose",Oe),St=new Map,re.programs=St);let Et=St.get(ft);if(Et!==void 0){if(re.currentProgram===Et&&re.lightsStateVersion===ot)return vp(z,ut),Et}else ut.uniforms=ct.getUniforms(z),z.onBuild(pe,ut,v),z.onBeforeCompile(ut,v),Et=ct.acquireProgram(ut,ft),St.set(ft,Et),re.uniforms=ut.uniforms;const Tt=re.uniforms;(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(Tt.clippingPlanes=ce.uniform),vp(z,ut),re.needsLights=cy(z),re.lightsStateVersion=ot,re.needsLights&&(Tt.ambientLightColor.value=ye.state.ambient,Tt.lightProbe.value=ye.state.probe,Tt.directionalLights.value=ye.state.directional,Tt.directionalLightShadows.value=ye.state.directionalShadow,Tt.spotLights.value=ye.state.spot,Tt.spotLightShadows.value=ye.state.spotShadow,Tt.rectAreaLights.value=ye.state.rectArea,Tt.ltc_1.value=ye.state.rectAreaLTC1,Tt.ltc_2.value=ye.state.rectAreaLTC2,Tt.pointLights.value=ye.state.point,Tt.pointLightShadows.value=ye.state.pointShadow,Tt.hemisphereLights.value=ye.state.hemi,Tt.directionalShadowMap.value=ye.state.directionalShadowMap,Tt.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,Tt.spotShadowMap.value=ye.state.spotShadowMap,Tt.spotLightMatrix.value=ye.state.spotLightMatrix,Tt.spotLightMap.value=ye.state.spotLightMap,Tt.pointShadowMap.value=ye.state.pointShadowMap,Tt.pointShadowMatrix.value=ye.state.pointShadowMatrix);const Vt=Et.getUniforms(),Qn=c0.seqWithValue(Vt.seq,Tt);return re.currentProgram=Et,re.uniformsList=Qn,Et}function vp(z,ae){const pe=de.get(z);pe.outputColorSpace=ae.outputColorSpace,pe.instancing=ae.instancing,pe.skinning=ae.skinning,pe.morphTargets=ae.morphTargets,pe.morphNormals=ae.morphNormals,pe.morphColors=ae.morphColors,pe.morphTargetsCount=ae.morphTargetsCount,pe.numClippingPlanes=ae.numClippingPlanes,pe.numIntersection=ae.numClipIntersection,pe.vertexAlphas=ae.vertexAlphas,pe.vertexTangents=ae.vertexTangents,pe.toneMapping=ae.toneMapping}function yp(z,ae,pe,re,ye){ae.isScene!==!0&&(ae=ve),Se.resetTextureUnits();const nt=ae.fog,ot=re.isMeshStandardMaterial?ae.environment:null,ut=A===null?v.outputColorSpace:A.isXRRenderTarget===!0?A.texture.colorSpace:ls,ft=(re.isMeshStandardMaterial?Ne:Be).get(re.envMap||ot),St=re.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,Et=!!re.normalMap&&!!pe.attributes.tangent,Tt=!!pe.morphAttributes.position,Vt=!!pe.morphAttributes.normal,Qn=!!pe.morphAttributes.color,Ki=re.toneMapped?v.toneMapping:ss,Or=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,Jt=Or!==void 0?Or.length:0,At=de.get(re),Ga=y.state.lights;if(H===!0&&(Z===!0||z!==L)){const qt=z===L&&re.id===P;ce.setState(re,z,qt)}let An=!1;re.version===At.__version?(At.needsLights&&At.lightsStateVersion!==Ga.state.version||At.outputColorSpace!==ut||ye.isInstancedMesh&&At.instancing===!1||!ye.isInstancedMesh&&At.instancing===!0||ye.isSkinnedMesh&&At.skinning===!1||!ye.isSkinnedMesh&&At.skinning===!0||At.envMap!==ft||re.fog===!0&&At.fog!==nt||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==ce.numPlanes||At.numIntersection!==ce.numIntersection)||At.vertexAlphas!==St||At.vertexTangents!==Et||At.morphTargets!==Tt||At.morphNormals!==Vt||At.morphColors!==Qn||At.toneMapping!==Ki||Ee.isWebGL2===!0&&At.morphTargetsCount!==Jt)&&(An=!0):(An=!0,At.__version=re.version);let Fr=At.currentProgram;An===!0&&(Fr=oc(re,ae,ye));let zs=!1,ki=!1,Gt=!1;const pt=Fr.getUniforms(),li=At.uniforms;if(Pe.useProgram(Fr.program)&&(zs=!0,ki=!0,Gt=!0),re.id!==P&&(P=re.id,ki=!0),zs||L!==z){if(pt.setValue(K,"projectionMatrix",z.projectionMatrix),Ee.logarithmicDepthBuffer&&pt.setValue(K,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),L!==z&&(L=z,ki=!0,Gt=!0),re.isShaderMaterial||re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshStandardMaterial||re.envMap){const qt=pt.map.cameraPosition;qt!==void 0&&qt.setValue(K,se.setFromMatrixPosition(z.matrixWorld))}(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&pt.setValue(K,"isOrthographic",z.isOrthographicCamera===!0),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial||re.isShadowMaterial||ye.isSkinnedMesh)&&pt.setValue(K,"viewMatrix",z.matrixWorldInverse)}if(ye.isSkinnedMesh){pt.setOptional(K,ye,"bindMatrix"),pt.setOptional(K,ye,"bindMatrixInverse");const qt=ye.skeleton;qt&&(Ee.floatVertexTextures?(qt.boneTexture===null&&qt.computeBoneTexture(),pt.setValue(K,"boneTexture",qt.boneTexture,Se),pt.setValue(K,"boneTextureSize",qt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Cn=pe.morphAttributes;if((Cn.position!==void 0||Cn.normal!==void 0||Cn.color!==void 0&&Ee.isWebGL2===!0)&&Re.update(ye,pe,Fr),(ki||At.receiveShadow!==ye.receiveShadow)&&(At.receiveShadow=ye.receiveShadow,pt.setValue(K,"receiveShadow",ye.receiveShadow)),re.isMeshGouraudMaterial&&re.envMap!==null&&(li.envMap.value=ft,li.flipEnvMap.value=ft.isCubeTexture&&ft.isRenderTargetTexture===!1?-1:1),ki&&(pt.setValue(K,"toneMappingExposure",v.toneMappingExposure),At.needsLights&&gd(li,Gt),nt&&re.fog===!0&&Nt.refreshFogUniforms(li,nt),Nt.refreshMaterialUniforms(li,re,B,q,te),c0.upload(K,At.uniformsList,li,Se)),re.isShaderMaterial&&re.uniformsNeedUpdate===!0&&(c0.upload(K,At.uniformsList,li,Se),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&pt.setValue(K,"center",ye.center),pt.setValue(K,"modelViewMatrix",ye.modelViewMatrix),pt.setValue(K,"normalMatrix",ye.normalMatrix),pt.setValue(K,"modelMatrix",ye.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){const qt=re.uniformsGroups;for(let Ur=0,Co=qt.length;Ur<Co;Ur++)if(Ee.isWebGL2){const ei=qt[Ur];Je.update(ei,Fr),Je.bind(ei,Fr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Fr}function gd(z,ae){z.ambientLightColor.needsUpdate=ae,z.lightProbe.needsUpdate=ae,z.directionalLights.needsUpdate=ae,z.directionalLightShadows.needsUpdate=ae,z.pointLights.needsUpdate=ae,z.pointLightShadows.needsUpdate=ae,z.spotLights.needsUpdate=ae,z.spotLightShadows.needsUpdate=ae,z.rectAreaLights.needsUpdate=ae,z.hemisphereLights.needsUpdate=ae}function cy(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(z,ae,pe){de.get(z.texture).__webglTexture=ae,de.get(z.depthTexture).__webglTexture=pe;const re=de.get(z);re.__hasExternalTextures=!0,re.__hasExternalTextures&&(re.__autoAllocateDepthBuffer=pe===void 0,re.__autoAllocateDepthBuffer||Xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(z,ae){const pe=de.get(z);pe.__webglFramebuffer=ae,pe.__useDefaultFramebuffer=ae===void 0},this.setRenderTarget=function(z,ae=0,pe=0){A=z,w=ae,M=pe;let re=!0,ye=null,nt=!1,ot=!1;if(z){const ft=de.get(z);ft.__useDefaultFramebuffer!==void 0?(Pe.bindFramebuffer(K.FRAMEBUFFER,null),re=!1):ft.__webglFramebuffer===void 0?Se.setupRenderTarget(z):ft.__hasExternalTextures&&Se.rebindTextures(z,de.get(z.texture).__webglTexture,de.get(z.depthTexture).__webglTexture);const St=z.texture;(St.isData3DTexture||St.isDataArrayTexture||St.isCompressedArrayTexture)&&(ot=!0);const Et=de.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(ye=Et[ae],nt=!0):Ee.isWebGL2&&z.samples>0&&Se.useMultisampledRTT(z)===!1?ye=de.get(z).__webglMultisampledFramebuffer:ye=Et,I.copy(z.viewport),C.copy(z.scissor),k=z.scissorTest}else I.copy(X).multiplyScalar(B).floor(),C.copy(ee).multiplyScalar(B).floor(),k=D;if(Pe.bindFramebuffer(K.FRAMEBUFFER,ye)&&Ee.drawBuffers&&re&&Pe.drawBuffers(z,ye),Pe.viewport(I),Pe.scissor(C),Pe.setScissorTest(k),nt){const ft=de.get(z.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ft.__webglTexture,pe)}else if(ot){const ft=de.get(z.texture),St=ae||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,ft.__webglTexture,pe||0,St)}P=-1},this.readRenderTargetPixels=function(z,ae,pe,re,ye,nt,ot){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ut=de.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&ot!==void 0&&(ut=ut[ot]),ut){Pe.bindFramebuffer(K.FRAMEBUFFER,ut);try{const ft=z.texture,St=ft.format,Et=ft.type;if(St!==Gi&&me.convert(St)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Tt=Et===$u&&(Xe.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&Xe.has("EXT_color_buffer_float"));if(Et!==wo&&me.convert(Et)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Et===co&&(Ee.isWebGL2||Xe.has("OES_texture_float")||Xe.has("WEBGL_color_buffer_float")))&&!Tt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ae>=0&&ae<=z.width-re&&pe>=0&&pe<=z.height-ye&&K.readPixels(ae,pe,re,ye,me.convert(St),me.convert(Et),nt)}finally{const ft=A!==null?de.get(A).__webglFramebuffer:null;Pe.bindFramebuffer(K.FRAMEBUFFER,ft)}}},this.copyFramebufferToTexture=function(z,ae,pe=0){const re=Math.pow(2,-pe),ye=Math.floor(ae.image.width*re),nt=Math.floor(ae.image.height*re);Se.setTexture2D(ae,0),K.copyTexSubImage2D(K.TEXTURE_2D,pe,0,0,z.x,z.y,ye,nt),Pe.unbindTexture()},this.copyTextureToTexture=function(z,ae,pe,re=0){const ye=ae.image.width,nt=ae.image.height,ot=me.convert(pe.format),ut=me.convert(pe.type);Se.setTexture2D(pe,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,pe.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,pe.unpackAlignment),ae.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,re,z.x,z.y,ye,nt,ot,ut,ae.image.data):ae.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,re,z.x,z.y,ae.mipmaps[0].width,ae.mipmaps[0].height,ot,ae.mipmaps[0].data):K.texSubImage2D(K.TEXTURE_2D,re,z.x,z.y,ot,ut,ae.image),re===0&&pe.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),Pe.unbindTexture()},this.copyTextureToTexture3D=function(z,ae,pe,re,ye=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const nt=z.max.x-z.min.x+1,ot=z.max.y-z.min.y+1,ut=z.max.z-z.min.z+1,ft=me.convert(re.format),St=me.convert(re.type);let Et;if(re.isData3DTexture)Se.setTexture3D(re,0),Et=K.TEXTURE_3D;else if(re.isDataArrayTexture)Se.setTexture2DArray(re,0),Et=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,re.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,re.unpackAlignment);const Tt=K.getParameter(K.UNPACK_ROW_LENGTH),Vt=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Qn=K.getParameter(K.UNPACK_SKIP_PIXELS),Ki=K.getParameter(K.UNPACK_SKIP_ROWS),Or=K.getParameter(K.UNPACK_SKIP_IMAGES),Jt=pe.isCompressedTexture?pe.mipmaps[0]:pe.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,Jt.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Jt.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,z.min.x),K.pixelStorei(K.UNPACK_SKIP_ROWS,z.min.y),K.pixelStorei(K.UNPACK_SKIP_IMAGES,z.min.z),pe.isDataTexture||pe.isData3DTexture?K.texSubImage3D(Et,ye,ae.x,ae.y,ae.z,nt,ot,ut,ft,St,Jt.data):pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(Et,ye,ae.x,ae.y,ae.z,nt,ot,ut,ft,Jt.data)):K.texSubImage3D(Et,ye,ae.x,ae.y,ae.z,nt,ot,ut,ft,St,Jt),K.pixelStorei(K.UNPACK_ROW_LENGTH,Tt),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Vt),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Qn),K.pixelStorei(K.UNPACK_SKIP_ROWS,Ki),K.pixelStorei(K.UNPACK_SKIP_IMAGES,Or),ye===0&&re.generateMipmaps&&K.generateMipmap(Et),Pe.unbindTexture()},this.initTexture=function(z){z.isCubeTexture?Se.setTextureCube(z,0):z.isData3DTexture?Se.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?Se.setTexture2DArray(z,0):Se.setTexture2D(z,0),Pe.unbindTexture()},this.resetState=function(){w=0,M=0,A=null,Pe.reset(),Ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===vt?xa:xE}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===xa?vt:ls}}class UD extends Gv{}UD.prototype.isWebGL1Renderer=!0;class Wv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ze(e),this.density=t}clone(){return new Wv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class $v{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ze(e),this.near=t,this.far=i}clone(){return new $v(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Tf extends zt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Xv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ef,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=lr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=lr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=lr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ei=new F;class Gl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ei.fromBufferAttribute(this,t),Ei.applyMatrix4(e),this.setXYZ(t,Ei.x,Ei.y,Ei.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ei.fromBufferAttribute(this,t),Ei.applyNormalMatrix(e),this.setXYZ(t,Ei.x,Ei.y,Ei.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ei.fromBufferAttribute(this,t),Ei.transformDirection(e),this.setXYZ(t,Ei.x,Ei.y,Ei.z);return this}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=or(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=or(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=or(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=or(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Yt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Gl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class PE extends ai{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let zc;const th=new F,Bc=new F,Vc=new F,Hc=new xe,nh=new xe,zD=new mt,lg=new F,ih=new F,cg=new F,NP=new xe,j1=new xe,RP=new xe;class BD extends zt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",zc===void 0){zc=new yt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Xv(t,5);zc.setIndex([0,1,2,0,2,3]),zc.setAttribute("position",new Gl(i,3,0,!1)),zc.setAttribute("uv",new Gl(i,2,3,!1))}this.geometry=zc,this.material=e!==void 0?e:new PE,this.center=new xe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Bc.setFromMatrixScale(this.matrixWorld),zD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Vc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Bc.multiplyScalar(-Vc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;ug(lg.set(-.5,-.5,0),Vc,o,Bc,r,s),ug(ih.set(.5,-.5,0),Vc,o,Bc,r,s),ug(cg.set(.5,.5,0),Vc,o,Bc,r,s),NP.set(0,0),j1.set(1,0),RP.set(1,1);let a=e.ray.intersectTriangle(lg,ih,cg,!1,th);if(a===null&&(ug(ih.set(-.5,.5,0),Vc,o,Bc,r,s),j1.set(0,1),a=e.ray.intersectTriangle(lg,cg,ih,!1,th),a===null))return;const l=e.ray.origin.distanceTo(th);l<e.near||l>e.far||t.push({distance:l,point:th.clone(),uv:Vi.getInterpolation(th,lg,ih,cg,NP,j1,RP,new xe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function ug(n,e,t,i,r,s){Hc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(nh.x=s*Hc.x-r*Hc.y,nh.y=r*Hc.x+s*Hc.y):nh.copy(Hc),n.copy(e),n.x+=nh.x,n.y+=nh.y,n.applyMatrix4(zD)}const dg=new F,LP=new F;class VD extends zt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){dg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(dg);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){dg.setFromMatrixPosition(e.matrixWorld),LP.setFromMatrixPosition(this.matrixWorld);const i=dg.distanceTo(LP)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const IP=new F,kP=new Wt,DP=new Wt,OZ=new F,jP=new mt,Gc=new F;class HD extends Yn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new mt,this.bindMatrixInverse=new mt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Os),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Gc.fromBufferAttribute(t,i),this.applyBoneTransform(i,Gc),this.boundingBox.expandByPoint(Gc)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Gc.fromBufferAttribute(t,i),this.applyBoneTransform(i,Gc),this.boundingSphere.expandByPoint(Gc)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Wt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;kP.fromBufferAttribute(r.attributes.skinIndex,e),DP.fromBufferAttribute(r.attributes.skinWeight,e),IP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=DP.getComponent(s);if(o!==0){const a=kP.getComponent(s);jP.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(OZ.copy(IP).applyMatrix4(jP),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class NE extends zt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Iu extends _n{constructor(e=null,t=1,i=1,r,s,o,a,l,c=En,u=En,p,m){super(null,o,a,l,c,u,r,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const OP=new mt,FZ=new mt;class qv{constructor(e=[],t=[]){this.uuid=lr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new mt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new mt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:FZ;OP.multiplyMatrices(a,t[s]),OP.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new qv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=SD(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Iu(t,e,e,Gi,co);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new NE),this.bones.push(o),this.boneInverses.push(new mt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Yu extends Yt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Wc=new mt,FP=new mt,hg=[],UP=new Os,UZ=new mt,rh=new Yn,sh=new Fs;class GD extends Yn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Yu(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,UZ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Os),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wc),UP.copy(e.boundingBox).applyMatrix4(Wc),this.boundingBox.union(UP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wc),sh.copy(e.boundingSphere).applyMatrix4(Wc),this.boundingSphere.union(sh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(rh.geometry=this.geometry,rh.material=this.material,rh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sh.copy(this.boundingSphere),sh.applyMatrix4(i),e.ray.intersectsSphere(sh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Wc),FP.multiplyMatrices(i,Wc),rh.matrixWorld=FP,rh.raycast(e,hg);for(let o=0,a=hg.length;o<a;o++){const l=hg[o];l.instanceId=s,l.object=this,t.push(l)}hg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Yu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ii extends ai{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const zP=new F,BP=new F,VP=new mt,O1=new od,fg=new Fs;class Ra extends zt{constructor(e=new yt,t=new Ii){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)zP.fromBufferAttribute(t,r-1),BP.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=zP.distanceTo(BP);e.setAttribute("lineDistance",new $e(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),fg.copy(i.boundingSphere),fg.applyMatrix4(r),fg.radius+=s,e.ray.intersectsSphere(fg)===!1)return;VP.copy(r).invert(),O1.copy(e.ray).applyMatrix4(VP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new F,u=new F,p=new F,m=new F,g=this.isLineSegments?2:1,y=i.index,S=i.attributes.position;if(y!==null){const v=Math.max(0,o.start),b=Math.min(y.count,o.start+o.count);for(let w=v,M=b-1;w<M;w+=g){const A=y.getX(w),P=y.getX(w+1);if(c.fromBufferAttribute(S,A),u.fromBufferAttribute(S,P),O1.distanceSqToSegment(c,u,m,p)>l)continue;m.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(m);I<e.near||I>e.far||t.push({distance:I,point:p.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),b=Math.min(S.count,o.start+o.count);for(let w=v,M=b-1;w<M;w+=g){if(c.fromBufferAttribute(S,w),u.fromBufferAttribute(S,w+1),O1.distanceSqToSegment(c,u,m,p)>l)continue;m.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(m);P<e.near||P>e.far||t.push({distance:P,point:p.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const HP=new F,GP=new F;class Us extends Ra{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)HP.fromBufferAttribute(t,r),GP.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+HP.distanceTo(GP);e.setAttribute("lineDistance",new $e(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class WD extends Ra{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Yv extends ai{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const WP=new mt,hb=new od,pg=new Fs,mg=new F;class RE extends zt{constructor(e=new yt,t=new Yv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),pg.copy(i.boundingSphere),pg.applyMatrix4(r),pg.radius+=s,e.ray.intersectsSphere(pg)===!1)return;WP.copy(r).invert(),hb.copy(e.ray).applyMatrix4(WP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,p=i.attributes.position;if(c!==null){const m=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let y=m,_=g;y<_;y++){const S=c.getX(y);mg.fromBufferAttribute(p,S),$P(mg,S,l,r,e,t,this)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let y=m,_=g;y<_;y++)mg.fromBufferAttribute(p,y),$P(mg,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function $P(n,e,t,i,r,s,o){const a=hb.distanceSqToPoint(n);if(a<t){const l=new F;hb.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class zZ extends _n{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Tn,this.magFilter=s!==void 0?s:Tn,this.generateMipmaps=!1;const u=this;function p(){u.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class BZ extends _n{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=En,this.minFilter=En,this.generateMipmaps=!1,this.needsUpdate=!0}}class LE extends _n{constructor(e,t,i,r,s,o,a,l,c,u,p,m){super(null,o,a,l,c,u,r,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class VZ extends LE{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=xi}}class HZ extends _n{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ds{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],m=i[r+1]-u,g=(o-u)/m;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new xe:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new F,r=[],s=[],o=[],a=new F,l=new mt;for(let g=0;g<=e;g++){const y=g/e;r[g]=this.getTangentAt(y,new F)}s[0]=new F,o[0]=new F;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),p<=c&&(c=p,i.set(0,1,0)),m<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(vn(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,y))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(vn(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],g*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Kv extends ds{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new xe,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=l-this.aX,g=c-this.aY;l=m*u-g*p+this.aX,c=m*p+g*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class $D extends Kv{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function IE(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,p){let m=(o-s)/c-(a-s)/(c+u)+(a-o)/u,g=(a-o)/u-(l-o)/(u+p)+(l-a)/p;m*=u,g*=u,r(o,a,m,g)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const gg=new F,F1=new IE,U1=new IE,z1=new IE;class XD extends ds{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new F){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(gg.subVectors(r[0],r[1]).add(r[0]),c=gg);const p=r[a%s],m=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(gg.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=gg),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let y=Math.pow(c.distanceToSquared(p),g),_=Math.pow(p.distanceToSquared(m),g),S=Math.pow(m.distanceToSquared(u),g);_<1e-4&&(_=1),y<1e-4&&(y=_),S<1e-4&&(S=_),F1.initNonuniformCatmullRom(c.x,p.x,m.x,u.x,y,_,S),U1.initNonuniformCatmullRom(c.y,p.y,m.y,u.y,y,_,S),z1.initNonuniformCatmullRom(c.z,p.z,m.z,u.z,y,_,S)}else this.curveType==="catmullrom"&&(F1.initCatmullRom(c.x,p.x,m.x,u.x,this.tension),U1.initCatmullRom(c.y,p.y,m.y,u.y,this.tension),z1.initCatmullRom(c.z,p.z,m.z,u.z,this.tension));return i.set(F1.calc(l),U1.calc(l),z1.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new F().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function XP(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function GZ(n,e){const t=1-n;return t*t*e}function WZ(n,e){return 2*(1-n)*n*e}function $Z(n,e){return n*n*e}function Vh(n,e,t,i){return GZ(n,e)+WZ(n,t)+$Z(n,i)}function XZ(n,e){const t=1-n;return t*t*t*e}function qZ(n,e){const t=1-n;return 3*t*t*n*e}function YZ(n,e){return 3*(1-n)*n*n*e}function KZ(n,e){return n*n*n*e}function Hh(n,e,t,i,r){return XZ(n,e)+qZ(n,t)+YZ(n,i)+KZ(n,r)}class kE extends ds{constructor(e=new xe,t=new xe,i=new xe,r=new xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new xe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Hh(e,r.x,s.x,o.x,a.x),Hh(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class qD extends ds{constructor(e=new F,t=new F,i=new F,r=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Hh(e,r.x,s.x,o.x,a.x),Hh(e,r.y,s.y,o.y,a.y),Hh(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Zv extends ds{constructor(e=new xe,t=new xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new xe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new xe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YD extends ds{constructor(e=new F,t=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new F){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new F){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DE extends ds{constructor(e=new xe,t=new xe,i=new xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new xe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Vh(e,r.x,s.x,o.x),Vh(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jE extends ds{constructor(e=new F,t=new F,i=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Vh(e,r.x,s.x,o.x),Vh(e,r.y,s.y,o.y),Vh(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OE extends ds{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new xe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],p=r[o>r.length-3?r.length-1:o+2];return i.set(XP(a,l.x,c.x,u.x,p.x),XP(a,l.y,c.y,u.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new xe().fromArray(r))}return this}}var FE=Object.freeze({__proto__:null,ArcCurve:$D,CatmullRomCurve3:XD,CubicBezierCurve:kE,CubicBezierCurve3:qD,EllipseCurve:Kv,LineCurve:Zv,LineCurve3:YD,QuadraticBezierCurve:DE,QuadraticBezierCurve3:jE,SplineCurve:OE});class KD extends ds{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Zv(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new FE[r.type]().fromJSON(r))}return this}}class Af extends KD{constructor(e){super(),this.type="Path",this.currentPoint=new xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Zv(this.currentPoint.clone(),new xe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new DE(this.currentPoint.clone(),new xe(e,t),new xe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new kE(this.currentPoint.clone(),new xe(e,t),new xe(i,r),new xe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new OE(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new Kv(e,t,i,r,s,o,a,l);if(this.curves.length>0){const p=c.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class cd extends yt{constructor(e=[new xe(0,-.5),new xe(.5,0),new xe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=vn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,p=new F,m=new xe,g=new F,y=new F,_=new F;let S=0,v=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:S=e[b+1].x-e[b].x,v=e[b+1].y-e[b].y,g.x=v*1,g.y=-S,g.z=v*0,_.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:S=e[b+1].x-e[b].x,v=e[b+1].y-e[b].y,g.x=v*1,g.y=-S,g.z=v*0,y.copy(g),g.x+=_.x,g.y+=_.y,g.z+=_.z,g.normalize(),l.push(g.x,g.y,g.z),_.copy(y)}for(let b=0;b<=t;b++){const w=i+b*u*r,M=Math.sin(w),A=Math.cos(w);for(let P=0;P<=e.length-1;P++){p.x=e[P].x*M,p.y=e[P].y,p.z=e[P].x*A,o.push(p.x,p.y,p.z),m.x=b/t,m.y=P/(e.length-1),a.push(m.x,m.y);const L=l[3*P+0]*M,I=l[3*P+1],C=l[3*P+0]*A;c.push(L,I,C)}}for(let b=0;b<t;b++)for(let w=0;w<e.length-1;w++){const M=w+b*e.length,A=M,P=M+e.length,L=M+e.length+1,I=M+1;s.push(A,P,I),s.push(L,I,P)}this.setIndex(s),this.setAttribute("position",new $e(o,3)),this.setAttribute("uv",new $e(a,2)),this.setAttribute("normal",new $e(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cd(e.points,e.segments,e.phiStart,e.phiLength)}}class ip extends cd{constructor(e=1,t=1,i=4,r=8){const s=new Af;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new ip(e.radius,e.length,e.capSegments,e.radialSegments)}}class rp extends yt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new F,u=new xe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const g=i+p/t*r;c.x=e*Math.cos(g),c.y=e*Math.sin(g),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[m]/e+1)/2,u.y=(o[m+1]/e+1)/2,l.push(u.x,u.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new $e(o,3)),this.setAttribute("normal",new $e(a,3)),this.setAttribute("uv",new $e(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ec extends yt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],p=[],m=[],g=[];let y=0;const _=[],S=i/2;let v=0;b(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new $e(p,3)),this.setAttribute("normal",new $e(m,3)),this.setAttribute("uv",new $e(g,2));function b(){const M=new F,A=new F;let P=0;const L=(t-e)/i;for(let I=0;I<=s;I++){const C=[],k=I/s,V=k*(t-e)+e;for(let q=0;q<=r;q++){const B=q/r,U=B*l+a,$=Math.sin(U),X=Math.cos(U);A.x=V*$,A.y=-k*i+S,A.z=V*X,p.push(A.x,A.y,A.z),M.set($,L,X).normalize(),m.push(M.x,M.y,M.z),g.push(B,1-k),C.push(y++)}_.push(C)}for(let I=0;I<r;I++)for(let C=0;C<s;C++){const k=_[C][I],V=_[C+1][I],q=_[C+1][I+1],B=_[C][I+1];u.push(k,V,B),u.push(V,q,B),P+=6}c.addGroup(v,P,0),v+=P}function w(M){const A=y,P=new xe,L=new F;let I=0;const C=M===!0?e:t,k=M===!0?1:-1;for(let q=1;q<=r;q++)p.push(0,S*k,0),m.push(0,k,0),g.push(.5,.5),y++;const V=y;for(let q=0;q<=r;q++){const U=q/r*l+a,$=Math.cos(U),X=Math.sin(U);L.x=C*X,L.y=S*k,L.z=C*$,p.push(L.x,L.y,L.z),m.push(0,k,0),P.x=$*.5+.5,P.y=X*.5*k+.5,g.push(P.x,P.y),y++}for(let q=0;q<r;q++){const B=A+q,U=V+q;M===!0?u.push(U,U+1,B):u.push(U+1,U,B),I+=3}c.addGroup(v,I,M===!0?1:2),v+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ec(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sp extends ec{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new sp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ao extends yt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new $e(s,3)),this.setAttribute("normal",new $e(s.slice(),3)),this.setAttribute("uv",new $e(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const w=new F,M=new F,A=new F;for(let P=0;P<t.length;P+=3)g(t[P+0],w),g(t[P+1],M),g(t[P+2],A),l(w,M,A,b)}function l(b,w,M,A){const P=A+1,L=[];for(let I=0;I<=P;I++){L[I]=[];const C=b.clone().lerp(M,I/P),k=w.clone().lerp(M,I/P),V=P-I;for(let q=0;q<=V;q++)q===0&&I===P?L[I][q]=C:L[I][q]=C.clone().lerp(k,q/V)}for(let I=0;I<P;I++)for(let C=0;C<2*(P-I)-1;C++){const k=Math.floor(C/2);C%2===0?(m(L[I][k+1]),m(L[I+1][k]),m(L[I][k])):(m(L[I][k+1]),m(L[I+1][k+1]),m(L[I+1][k]))}}function c(b){const w=new F;for(let M=0;M<s.length;M+=3)w.x=s[M+0],w.y=s[M+1],w.z=s[M+2],w.normalize().multiplyScalar(b),s[M+0]=w.x,s[M+1]=w.y,s[M+2]=w.z}function u(){const b=new F;for(let w=0;w<s.length;w+=3){b.x=s[w+0],b.y=s[w+1],b.z=s[w+2];const M=S(b)/2/Math.PI+.5,A=v(b)/Math.PI+.5;o.push(M,1-A)}y(),p()}function p(){for(let b=0;b<o.length;b+=6){const w=o[b+0],M=o[b+2],A=o[b+4],P=Math.max(w,M,A),L=Math.min(w,M,A);P>.9&&L<.1&&(w<.2&&(o[b+0]+=1),M<.2&&(o[b+2]+=1),A<.2&&(o[b+4]+=1))}}function m(b){s.push(b.x,b.y,b.z)}function g(b,w){const M=b*3;w.x=e[M+0],w.y=e[M+1],w.z=e[M+2]}function y(){const b=new F,w=new F,M=new F,A=new F,P=new xe,L=new xe,I=new xe;for(let C=0,k=0;C<s.length;C+=9,k+=6){b.set(s[C+0],s[C+1],s[C+2]),w.set(s[C+3],s[C+4],s[C+5]),M.set(s[C+6],s[C+7],s[C+8]),P.set(o[k+0],o[k+1]),L.set(o[k+2],o[k+3]),I.set(o[k+4],o[k+5]),A.copy(b).add(w).add(M).divideScalar(3);const V=S(A);_(P,k+0,b,V),_(L,k+2,w,V),_(I,k+4,M,V)}}function _(b,w,M,A){A<0&&b.x===1&&(o[w]=b.x-1),M.x===0&&M.z===0&&(o[w]=A/2/Math.PI+.5)}function S(b){return Math.atan2(b.z,-b.x)}function v(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ao(e.vertices,e.indices,e.radius,e.details)}}class op extends Ao{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new op(e.radius,e.detail)}}const vg=new F,yg=new F,B1=new F,xg=new Vi;class ZD extends yt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Il*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],p=new Array(3),m={},g=[];for(let y=0;y<l;y+=3){o?(c[0]=o.getX(y),c[1]=o.getX(y+1),c[2]=o.getX(y+2)):(c[0]=y,c[1]=y+1,c[2]=y+2);const{a:_,b:S,c:v}=xg;if(_.fromBufferAttribute(a,c[0]),S.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),xg.getNormal(B1),p[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,p[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,p[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let b=0;b<3;b++){const w=(b+1)%3,M=p[b],A=p[w],P=xg[u[b]],L=xg[u[w]],I=`${M}_${A}`,C=`${A}_${M}`;C in m&&m[C]?(B1.dot(m[C].normal)<=s&&(g.push(P.x,P.y,P.z),g.push(L.x,L.y,L.z)),m[C]=null):I in m||(m[I]={index0:c[b],index1:c[w],normal:B1.clone()})}}for(const y in m)if(m[y]){const{index0:_,index1:S}=m[y];vg.fromBufferAttribute(a,_),yg.fromBufferAttribute(a,S),g.push(vg.x,vg.y,vg.z),g.push(yg.x,yg.y,yg.z)}this.setAttribute("position",new $e(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Dl extends Af{constructor(e){super(e),this.uuid=lr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Af().fromJSON(r))}return this}}const ZZ={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=JD(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,p,m,g;if(i&&(s=nJ(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let y=t;y<r;y+=t)p=n[y],m=n[y+1],p<a&&(a=p),m<l&&(l=m),p>c&&(c=p),m>u&&(u=m);g=Math.max(c-a,u-l),g=g!==0?32767/g:0}return Cf(s,o,t,a,l,g,0),o}};function JD(n,e,t,i,r){let s,o;if(r===fJ(n,e,t,i)>0)for(s=e;s<t;s+=i)o=qP(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=qP(s,n[s],n[s+1],o);return o&&Jv(o,o.next)&&(Nf(o),o=o.next),o}function Wl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Jv(t,t.next)||dn(t.prev,t,t.next)===0)){if(Nf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Cf(n,e,t,i,r,s,o){if(!n)return;!o&&s&&aJ(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?QZ(n,i,r,s):JZ(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Nf(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=eJ(Wl(n),e,t),Cf(n,e,t,i,r,s,2)):o===2&&tJ(n,e,t,i,r,s):Cf(Wl(n),e,t,i,r,s,1);break}}}function JZ(n){const e=n.prev,t=n,i=n.next;if(dn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,p=a<l?a<c?a:c:l<c?l:c,m=r>s?r>o?r:o:s>o?s:o,g=a>l?a>c?a:c:l>c?l:c;let y=i.next;for(;y!==e;){if(y.x>=u&&y.x<=m&&y.y>=p&&y.y<=g&&_u(r,a,s,l,o,c,y.x,y.y)&&dn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function QZ(n,e,t,i){const r=n.prev,s=n,o=n.next;if(dn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,p=s.y,m=o.y,g=a<l?a<c?a:c:l<c?l:c,y=u<p?u<m?u:m:p<m?p:m,_=a>l?a>c?a:c:l>c?l:c,S=u>p?u>m?u:m:p>m?p:m,v=fb(g,y,e,t,i),b=fb(_,S,e,t,i);let w=n.prevZ,M=n.nextZ;for(;w&&w.z>=v&&M&&M.z<=b;){if(w.x>=g&&w.x<=_&&w.y>=y&&w.y<=S&&w!==r&&w!==o&&_u(a,u,l,p,c,m,w.x,w.y)&&dn(w.prev,w,w.next)>=0||(w=w.prevZ,M.x>=g&&M.x<=_&&M.y>=y&&M.y<=S&&M!==r&&M!==o&&_u(a,u,l,p,c,m,M.x,M.y)&&dn(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;w&&w.z>=v;){if(w.x>=g&&w.x<=_&&w.y>=y&&w.y<=S&&w!==r&&w!==o&&_u(a,u,l,p,c,m,w.x,w.y)&&dn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=b;){if(M.x>=g&&M.x<=_&&M.y>=y&&M.y<=S&&M!==r&&M!==o&&_u(a,u,l,p,c,m,M.x,M.y)&&dn(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function eJ(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Jv(r,s)&&QD(r,i,i.next,s)&&Pf(r,s)&&Pf(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Nf(i),Nf(i.next),i=n=s),i=i.next}while(i!==n);return Wl(i)}function tJ(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&uJ(o,a)){let l=ej(o,a);o=Wl(o,o.next),l=Wl(l,l.next),Cf(o,e,t,i,r,s,0),Cf(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function nJ(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=JD(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(cJ(c));for(r.sort(iJ),s=0;s<r.length;s++)t=rJ(r[s],t);return t}function iJ(n,e){return n.x-e.x}function rJ(n,e){const t=sJ(n,e);if(!t)return e;const i=ej(t,n);return Wl(i,i.next),Wl(t,t.next)}function sJ(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const m=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,p;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&_u(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(p=Math.abs(o-t.y)/(s-t.x),Pf(t,n)&&(p<u||p===u&&(t.x>r.x||t.x===r.x&&oJ(r,t)))&&(r=t,u=p)),t=t.next;while(t!==a);return r}function oJ(n,e){return dn(n.prev,n,e.prev)<0&&dn(e.next,n,n.next)<0}function aJ(n,e,t,i){let r=n;do r.z===0&&(r.z=fb(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,lJ(r)}function lJ(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function fb(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function cJ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function _u(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function uJ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!dJ(n,e)&&(Pf(n,e)&&Pf(e,n)&&hJ(n,e)&&(dn(n.prev,n,e.prev)||dn(n,e.prev,e))||Jv(n,e)&&dn(n.prev,n,n.next)>0&&dn(e.prev,e,e.next)>0)}function dn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Jv(n,e){return n.x===e.x&&n.y===e.y}function QD(n,e,t,i){const r=wg(dn(n,e,t)),s=wg(dn(n,e,i)),o=wg(dn(t,i,n)),a=wg(dn(t,i,e));return!!(r!==s&&o!==a||r===0&&_g(n,t,e)||s===0&&_g(n,i,e)||o===0&&_g(t,n,i)||a===0&&_g(t,e,i))}function _g(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function wg(n){return n>0?1:n<0?-1:0}function dJ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&QD(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Pf(n,e){return dn(n.prev,n,n.next)<0?dn(n,e,n.next)>=0&&dn(n,n.prev,e)>=0:dn(n,e,n.prev)<0||dn(n,n.next,e)<0}function hJ(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function ej(n,e){const t=new pb(n.i,n.x,n.y),i=new pb(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function qP(n,e,t,i){const r=new pb(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Nf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function pb(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fJ(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Is{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Is.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];YP(e),KP(i,e);let o=e.length;t.forEach(YP);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,KP(i,t[l]);const a=ZZ.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function YP(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function KP(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class ap extends yt{constructor(e=new Dl([new xe(.5,.5),new xe(-.5,.5),new xe(-.5,-.5),new xe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new $e(r,3)),this.setAttribute("uv",new $e(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:g-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:pJ;let w,M=!1,A,P,L,I;v&&(w=v.getSpacedPoints(u),M=!0,m=!1,A=v.computeFrenetFrames(u,!1),P=new F,L=new F,I=new F),m||(S=0,g=0,y=0,_=0);const C=a.extractPoints(c);let k=C.shape;const V=C.holes;if(!Is.isClockWise(k)){k=k.reverse();for(let _e=0,de=V.length;_e<de;_e++){const Se=V[_e];Is.isClockWise(Se)&&(V[_e]=Se.reverse())}}const B=Is.triangulateShape(k,V),U=k;for(let _e=0,de=V.length;_e<de;_e++){const Se=V[_e];k=k.concat(Se)}function $(_e,de,Se){return de||console.error("THREE.ExtrudeGeometry: vec does not exist"),_e.clone().addScaledVector(de,Se)}const X=k.length,ee=B.length;function D(_e,de,Se){let Be,Ne,Qe;const et=_e.x-de.x,Ke=_e.y-de.y,ct=Se.x-_e.x,Nt=Se.y-_e.y,W=et*et+Ke*Ke,j=et*Nt-Ke*ct;if(Math.abs(j)>Number.EPSILON){const ce=Math.sqrt(W),Me=Math.sqrt(ct*ct+Nt*Nt),Te=de.x-Ke/ce,Re=de.y+et/ce,tt=Se.x-Nt/Me,Fe=Se.y+ct/Me,me=((tt-Te)*Nt-(Fe-Re)*ct)/(et*Nt-Ke*ct);Be=Te+et*me-_e.x,Ne=Re+Ke*me-_e.y;const Ge=Be*Be+Ne*Ne;if(Ge<=2)return new xe(Be,Ne);Qe=Math.sqrt(Ge/2)}else{let ce=!1;et>Number.EPSILON?ct>Number.EPSILON&&(ce=!0):et<-Number.EPSILON?ct<-Number.EPSILON&&(ce=!0):Math.sign(Ke)===Math.sign(Nt)&&(ce=!0),ce?(Be=-Ke,Ne=et,Qe=Math.sqrt(W)):(Be=et,Ne=Ke,Qe=Math.sqrt(W/2))}return new xe(Be/Qe,Ne/Qe)}const O=[];for(let _e=0,de=U.length,Se=de-1,Be=_e+1;_e<de;_e++,Se++,Be++)Se===de&&(Se=0),Be===de&&(Be=0),O[_e]=D(U[_e],U[Se],U[Be]);const H=[];let Z,te=O.concat();for(let _e=0,de=V.length;_e<de;_e++){const Se=V[_e];Z=[];for(let Be=0,Ne=Se.length,Qe=Ne-1,et=Be+1;Be<Ne;Be++,Qe++,et++)Qe===Ne&&(Qe=0),et===Ne&&(et=0),Z[Be]=D(Se[Be],Se[Qe],Se[et]);H.push(Z),te=te.concat(Z)}for(let _e=0;_e<S;_e++){const de=_e/S,Se=g*Math.cos(de*Math.PI/2),Be=y*Math.sin(de*Math.PI/2)+_;for(let Ne=0,Qe=U.length;Ne<Qe;Ne++){const et=$(U[Ne],O[Ne],Be);K(et.x,et.y,-Se)}for(let Ne=0,Qe=V.length;Ne<Qe;Ne++){const et=V[Ne];Z=H[Ne];for(let Ke=0,ct=et.length;Ke<ct;Ke++){const Nt=$(et[Ke],Z[Ke],Be);K(Nt.x,Nt.y,-Se)}}}const Q=y+_;for(let _e=0;_e<X;_e++){const de=m?$(k[_e],te[_e],Q):k[_e];M?(L.copy(A.normals[0]).multiplyScalar(de.x),P.copy(A.binormals[0]).multiplyScalar(de.y),I.copy(w[0]).add(L).add(P),K(I.x,I.y,I.z)):K(de.x,de.y,0)}for(let _e=1;_e<=u;_e++)for(let de=0;de<X;de++){const Se=m?$(k[de],te[de],Q):k[de];M?(L.copy(A.normals[_e]).multiplyScalar(Se.x),P.copy(A.binormals[_e]).multiplyScalar(Se.y),I.copy(w[_e]).add(L).add(P),K(I.x,I.y,I.z)):K(Se.x,Se.y,p/u*_e)}for(let _e=S-1;_e>=0;_e--){const de=_e/S,Se=g*Math.cos(de*Math.PI/2),Be=y*Math.sin(de*Math.PI/2)+_;for(let Ne=0,Qe=U.length;Ne<Qe;Ne++){const et=$(U[Ne],O[Ne],Be);K(et.x,et.y,p+Se)}for(let Ne=0,Qe=V.length;Ne<Qe;Ne++){const et=V[Ne];Z=H[Ne];for(let Ke=0,ct=et.length;Ke<ct;Ke++){const Nt=$(et[Ke],Z[Ke],Be);M?K(Nt.x,Nt.y+w[u-1].y,w[u-1].x+Se):K(Nt.x,Nt.y,p+Se)}}}se(),ve();function se(){const _e=r.length/3;if(m){let de=0,Se=X*de;for(let Be=0;Be<ee;Be++){const Ne=B[Be];je(Ne[2]+Se,Ne[1]+Se,Ne[0]+Se)}de=u+S*2,Se=X*de;for(let Be=0;Be<ee;Be++){const Ne=B[Be];je(Ne[0]+Se,Ne[1]+Se,Ne[2]+Se)}}else{for(let de=0;de<ee;de++){const Se=B[de];je(Se[2],Se[1],Se[0])}for(let de=0;de<ee;de++){const Se=B[de];je(Se[0]+X*u,Se[1]+X*u,Se[2]+X*u)}}i.addGroup(_e,r.length/3-_e,0)}function ve(){const _e=r.length/3;let de=0;ge(U,de),de+=U.length;for(let Se=0,Be=V.length;Se<Be;Se++){const Ne=V[Se];ge(Ne,de),de+=Ne.length}i.addGroup(_e,r.length/3-_e,1)}function ge(_e,de){let Se=_e.length;for(;--Se>=0;){const Be=Se;let Ne=Se-1;Ne<0&&(Ne=_e.length-1);for(let Qe=0,et=u+S*2;Qe<et;Qe++){const Ke=X*Qe,ct=X*(Qe+1),Nt=de+Be+Ke,W=de+Ne+Ke,j=de+Ne+ct,ce=de+Be+ct;Xe(Nt,W,j,ce)}}}function K(_e,de,Se){l.push(_e),l.push(de),l.push(Se)}function je(_e,de,Se){Ee(_e),Ee(de),Ee(Se);const Be=r.length/3,Ne=b.generateTopUV(i,r,Be-3,Be-2,Be-1);Pe(Ne[0]),Pe(Ne[1]),Pe(Ne[2])}function Xe(_e,de,Se,Be){Ee(_e),Ee(de),Ee(Be),Ee(de),Ee(Se),Ee(Be);const Ne=r.length/3,Qe=b.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);Pe(Qe[0]),Pe(Qe[1]),Pe(Qe[3]),Pe(Qe[1]),Pe(Qe[2]),Pe(Qe[3])}function Ee(_e){r.push(l[_e*3+0]),r.push(l[_e*3+1]),r.push(l[_e*3+2])}function Pe(_e){s.push(_e.x),s.push(_e.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return mJ(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new FE[r.type]().fromJSON(r)),new ap(i,e.options)}}const pJ={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new xe(s,o),new xe(a,l),new xe(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],p=e[i*3+2],m=e[r*3],g=e[r*3+1],y=e[r*3+2],_=e[s*3],S=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new xe(o,1-l),new xe(c,1-p),new xe(m,1-y),new xe(_,1-v)]:[new xe(a,1-l),new xe(u,1-p),new xe(g,1-y),new xe(S,1-v)]}};function mJ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class ud extends Ao{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ud(e.radius,e.detail)}}class tc extends Ao{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tc(e.radius,e.detail)}}class lp extends yt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let p=e;const m=(t-e)/r,g=new F,y=new xe;for(let _=0;_<=r;_++){for(let S=0;S<=i;S++){const v=s+S/i*o;g.x=p*Math.cos(v),g.y=p*Math.sin(v),l.push(g.x,g.y,g.z),c.push(0,0,1),y.x=(g.x/t+1)/2,y.y=(g.y/t+1)/2,u.push(y.x,y.y)}p+=m}for(let _=0;_<r;_++){const S=_*(i+1);for(let v=0;v<i;v++){const b=v+S,w=b,M=b+i+1,A=b+i+2,P=b+1;a.push(w,M,P),a.push(M,A,P)}}this.setIndex(a),this.setAttribute("position",new $e(l,3)),this.setAttribute("normal",new $e(c,3)),this.setAttribute("uv",new $e(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lp(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cp extends yt{constructor(e=new Dl([new xe(0,.5),new xe(-.5,-.5),new xe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new $e(r,3)),this.setAttribute("normal",new $e(s,3)),this.setAttribute("uv",new $e(o,2));function c(u){const p=r.length/3,m=u.extractPoints(t);let g=m.shape;const y=m.holes;Is.isClockWise(g)===!1&&(g=g.reverse());for(let S=0,v=y.length;S<v;S++){const b=y[S];Is.isClockWise(b)===!0&&(y[S]=b.reverse())}const _=Is.triangulateShape(g,y);for(let S=0,v=y.length;S<v;S++){const b=y[S];g=g.concat(b)}for(let S=0,v=g.length;S<v;S++){const b=g[S];r.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let S=0,v=_.length;S<v;S++){const b=_[S],w=b[0]+p,M=b[1]+p,A=b[2]+p;i.push(w,M,A),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return gJ(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new cp(i,e.curveSegments)}}function gJ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class dd extends yt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],p=new F,m=new F,g=[],y=[],_=[],S=[];for(let v=0;v<=i;v++){const b=[],w=v/i;let M=0;v===0&&o===0?M=.5/t:v===i&&l===Math.PI&&(M=-.5/t);for(let A=0;A<=t;A++){const P=A/t;p.x=-e*Math.cos(r+P*s)*Math.sin(o+w*a),p.y=e*Math.cos(o+w*a),p.z=e*Math.sin(r+P*s)*Math.sin(o+w*a),y.push(p.x,p.y,p.z),m.copy(p).normalize(),_.push(m.x,m.y,m.z),S.push(P+M,1-w),b.push(c++)}u.push(b)}for(let v=0;v<i;v++)for(let b=0;b<t;b++){const w=u[v][b+1],M=u[v][b],A=u[v+1][b],P=u[v+1][b+1];(v!==0||o>0)&&g.push(w,M,P),(v!==i-1||l<Math.PI)&&g.push(M,A,P)}this.setIndex(g),this.setAttribute("position",new $e(y,3)),this.setAttribute("normal",new $e(_,3)),this.setAttribute("uv",new $e(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hd extends Ao{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hd(e.radius,e.detail)}}class up extends yt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new F,p=new F,m=new F;for(let g=0;g<=i;g++)for(let y=0;y<=r;y++){const _=y/r*s,S=g/i*Math.PI*2;p.x=(e+t*Math.cos(S))*Math.cos(_),p.y=(e+t*Math.cos(S))*Math.sin(_),p.z=t*Math.sin(S),a.push(p.x,p.y,p.z),u.x=e*Math.cos(_),u.y=e*Math.sin(_),m.subVectors(p,u).normalize(),l.push(m.x,m.y,m.z),c.push(y/r),c.push(g/i)}for(let g=1;g<=i;g++)for(let y=1;y<=r;y++){const _=(r+1)*g+y-1,S=(r+1)*(g-1)+y-1,v=(r+1)*(g-1)+y,b=(r+1)*g+y;o.push(_,S,b),o.push(S,v,b)}this.setIndex(o),this.setAttribute("position",new $e(a,3)),this.setAttribute("normal",new $e(l,3)),this.setAttribute("uv",new $e(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new up(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class dp extends yt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],p=new F,m=new F,g=new F,y=new F,_=new F,S=new F,v=new F;for(let w=0;w<=i;++w){const M=w/i*s*Math.PI*2;b(M,s,o,e,g),b(M+.01,s,o,e,y),S.subVectors(y,g),v.addVectors(y,g),_.crossVectors(S,v),v.crossVectors(_,S),_.normalize(),v.normalize();for(let A=0;A<=r;++A){const P=A/r*Math.PI*2,L=-t*Math.cos(P),I=t*Math.sin(P);p.x=g.x+(L*v.x+I*_.x),p.y=g.y+(L*v.y+I*_.y),p.z=g.z+(L*v.z+I*_.z),l.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),c.push(m.x,m.y,m.z),u.push(w/i),u.push(A/r)}}for(let w=1;w<=i;w++)for(let M=1;M<=r;M++){const A=(r+1)*(w-1)+(M-1),P=(r+1)*w+(M-1),L=(r+1)*w+M,I=(r+1)*(w-1)+M;a.push(A,P,I),a.push(P,L,I)}this.setIndex(a),this.setAttribute("position",new $e(l,3)),this.setAttribute("normal",new $e(c,3)),this.setAttribute("uv",new $e(u,2));function b(w,M,A,P,L){const I=Math.cos(w),C=Math.sin(w),k=A/M*w,V=Math.cos(k);L.x=P*(2+V)*.5*I,L.y=P*(2+V)*C*.5,L.z=P*Math.sin(k)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dp(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class hp extends yt{constructor(e=new jE(new F(-1,-1,0),new F(-1,1,0),new F(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new F,l=new F,c=new xe;let u=new F;const p=[],m=[],g=[],y=[];_(),this.setIndex(y),this.setAttribute("position",new $e(p,3)),this.setAttribute("normal",new $e(m,3)),this.setAttribute("uv",new $e(g,2));function _(){for(let w=0;w<t;w++)S(w);S(s===!1?t:0),b(),v()}function S(w){u=e.getPointAt(w/t,u);const M=o.normals[w],A=o.binormals[w];for(let P=0;P<=r;P++){const L=P/r*Math.PI*2,I=Math.sin(L),C=-Math.cos(L);l.x=C*M.x+I*A.x,l.y=C*M.y+I*A.y,l.z=C*M.z+I*A.z,l.normalize(),m.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,p.push(a.x,a.y,a.z)}}function v(){for(let w=1;w<=t;w++)for(let M=1;M<=r;M++){const A=(r+1)*(w-1)+(M-1),P=(r+1)*w+(M-1),L=(r+1)*w+M,I=(r+1)*(w-1)+M;y.push(A,P,I),y.push(P,L,I)}}function b(){for(let w=0;w<=t;w++)for(let M=0;M<=r;M++)c.x=w/t,c.y=M/r,g.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new hp(new FE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class tj extends yt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new F,s=new F;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const p=l[c],m=p.start,g=p.count;for(let y=m,_=m+g;y<_;y+=3)for(let S=0;S<3;S++){const v=a.getX(y+S),b=a.getX(y+(S+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,b),ZP(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,p=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,p),ZP(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new $e(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ZP(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var JP=Object.freeze({__proto__:null,BoxGeometry:Ba,CapsuleGeometry:ip,CircleGeometry:rp,ConeGeometry:sp,CylinderGeometry:ec,DodecahedronGeometry:op,EdgesGeometry:ZD,ExtrudeGeometry:ap,IcosahedronGeometry:ud,LatheGeometry:cd,OctahedronGeometry:tc,PlaneGeometry:ad,PolyhedronGeometry:Ao,RingGeometry:lp,ShapeGeometry:cp,SphereGeometry:dd,TetrahedronGeometry:hd,TorusGeometry:up,TorusKnotGeometry:dp,TubeGeometry:hp,WireframeGeometry:tj});class nj extends ai{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ze(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class ij extends Ds{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class UE extends ai{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ua,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rj extends UE{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return vn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ze(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class zE extends ai{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ze(16777215),this.specular=new ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ua,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Qf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sj extends ai{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ua,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class oj extends ai{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ua,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class aj extends ai{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ua,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Qf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lj extends ai{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ua,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cj extends Ii{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Cr(n,e,t){return BE(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Cl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function BE(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function uj(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function mb(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function VE(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function vJ(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),p=[],m=[];for(let g=0;g<c.times.length;++g){const y=c.times[g]*r;if(!(y<t||y>=i)){p.push(c.times[g]);for(let _=0;_<u;++_)m.push(c.values[g*u+_])}}p.length!==0&&(c.times=Cl(p,c.times.constructor),c.values=Cl(m,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function yJ(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=p/3);let m=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const y=a.times.length-1;let _;if(s<=a.times[0]){const v=u,b=p-u;_=Cr(a.values,v,b)}else if(s>=a.times[y]){const v=y*p+u,b=v+p-u;_=Cr(a.values,v,b)}else{const v=a.createInterpolant(),b=u,w=p-u;v.evaluate(s),_=Cr(v.resultBuffer,b,w)}l==="quaternion"&&new _i().fromArray(_).normalize().conjugate().toArray(_);const S=c.times.length;for(let v=0;v<S;++v){const b=v*g+m;if(l==="quaternion")_i.multiplyQuaternionsFlat(c.values,b,_,0,c.values,b);else{const w=g-m*2;for(let M=0;M<w;++M)c.values[b+M]-=_[M]}}}return n.blendMode=yE,n}const xJ={arraySlice:Cr,convertArray:Cl,isTypedArray:BE,getKeyframeOrder:uj,sortedArray:mb,flattenJSON:VE,subclip:vJ,makeClipAdditive:yJ};class fp{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class dj extends fp{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ml,endingEnd:Ml}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Tl:s=e,a=2*t-i;break;case Sf:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Tl:o=e,l=2*i-t;break;case Sf:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,y=(i-t)/(r-t),_=y*y,S=_*y,v=-m*S+2*m*_-m*y,b=(1+m)*S+(-1.5-2*m)*_+(-.5+m)*y+1,w=(-1-g)*S+(1.5+g)*_+.5*y,M=g*S-g*_;for(let A=0;A!==a;++A)s[A]=v*o[u+A]+b*o[c+A]+w*o[l+A]+M*o[p+A];return s}}class HE extends fp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),p=1-u;for(let m=0;m!==a;++m)s[m]=o[c+m]*p+o[l+m]*u;return s}}class hj extends fp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class hs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Cl(t,this.TimeBufferType),this.values=Cl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Cl(e.times,Array),values:Cl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new hj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new HE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new dj(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case wf:t=this.InterpolantFactoryMethodDiscrete;break;case bf:t=this.InterpolantFactoryMethodLinear;break;case a0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wf;case this.InterpolantFactoryMethodLinear:return bf;case this.InterpolantFactoryMethodSmooth:return a0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Cr(i,s,o),this.values=Cr(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&BE(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Cr(this.times),t=Cr(this.values),i=this.getValueSize(),r=this.getInterpolation()===a0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const p=a*i,m=p-i,g=p+i;for(let y=0;y!==i;++y){const _=t[p+y];if(_!==t[m+y]||_!==t[g+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const p=a*i,m=o*i;for(let g=0;g!==i;++g)t[m+g]=t[p+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Cr(e,0,o),this.values=Cr(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Cr(this.times,0),t=Cr(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}hs.prototype.TimeBufferType=Float32Array;hs.prototype.ValueBufferType=Float32Array;hs.prototype.DefaultInterpolation=bf;class nc extends hs{}nc.prototype.ValueTypeName="bool";nc.prototype.ValueBufferType=Array;nc.prototype.DefaultInterpolation=wf;nc.prototype.InterpolantFactoryMethodLinear=void 0;nc.prototype.InterpolantFactoryMethodSmooth=void 0;class GE extends hs{}GE.prototype.ValueTypeName="color";class Rf extends hs{}Rf.prototype.ValueTypeName="number";class fj extends fp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)_i.slerpFlat(s,0,o,c-a,o,c,l);return s}}class fd extends hs{InterpolantFactoryMethodLinear(e){return new fj(this.times,this.values,this.getValueSize(),e)}}fd.prototype.ValueTypeName="quaternion";fd.prototype.DefaultInterpolation=bf;fd.prototype.InterpolantFactoryMethodSmooth=void 0;class ic extends hs{}ic.prototype.ValueTypeName="string";ic.prototype.ValueBufferType=Array;ic.prototype.DefaultInterpolation=wf;ic.prototype.InterpolantFactoryMethodLinear=void 0;ic.prototype.InterpolantFactoryMethodSmooth=void 0;class Lf extends hs{}Lf.prototype.ValueTypeName="vector";class If{constructor(e,t=-1,i,r=zv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=lr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(wJ(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(hs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=uj(l);l=mb(l,1,u),c=mb(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Rf(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const p=u[1];let m=r[p];m||(r[p]=m=[]),m.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,m,g,y,_){if(g.length!==0){const S=[],v=[];VE(g,S,v,y),S.length!==0&&_.push(new p(m,S,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let p=0;p<c.length;p++){const m=c[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let y;for(y=0;y<m.length;y++)if(m[y].morphTargets)for(let _=0;_<m[y].morphTargets.length;_++)g[m[y].morphTargets[_]]=-1;for(const _ in g){const S=[],v=[];for(let b=0;b!==m[y].morphTargets.length;++b){const w=m[y];S.push(w.time),v.push(w.morphTarget===_?1:0)}r.push(new Rf(".morphTargetInfluence["+_+"]",S,v))}l=g.length*o}else{const g=".bones["+t[p].name+"]";i(Lf,g+".position",m,"pos",r),i(fd,g+".quaternion",m,"rot",r),i(Lf,g+".scale",m,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function _J(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Rf;case"vector":case"vector2":case"vector3":case"vector4":return Lf;case"color":return GE;case"quaternion":return fd;case"bool":case"boolean":return nc;case"string":return ic}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function wJ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=_J(n.type);if(n.times===void 0){const t=[],i=[];VE(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const $l={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class WE{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,p){return c.push(u,p),this},this.removeHandler=function(u){const p=c.indexOf(u);return p!==-1&&c.splice(p,2),this},this.getHandler=function(u){for(let p=0,m=c.length;p<m;p+=2){const g=c[p],y=c[p+1];if(g.global&&(g.lastIndex=0),g.test(u))return y}return null}}}const pj=new WE;class pr{constructor(e){this.manager=e!==void 0?e:pj,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const eo={};class bJ extends Error{constructor(e,t){super(e),this.response=t}}class bo extends pr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=$l.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(eo[e]!==void 0){eo[e].push({onLoad:t,onProgress:i,onError:r});return}eo[e]=[],eo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=eo[e],p=c.body.getReader(),m=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),g=m?parseInt(m):0,y=g!==0;let _=0;const S=new ReadableStream({start(v){b();function b(){p.read().then(({done:w,value:M})=>{if(w)v.close();else{_+=M.byteLength;const A=new ProgressEvent("progress",{lengthComputable:y,loaded:_,total:g});for(let P=0,L=u.length;P<L;P++){const I=u[P];I.onProgress&&I.onProgress(A)}v.enqueue(M),b()}})}}});return new Response(S)}else throw new bJ(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),m=p&&p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return c.arrayBuffer().then(y=>g.decode(y))}}}).then(c=>{$l.add(e,c);const u=eo[e];delete eo[e];for(let p=0,m=u.length;p<m;p++){const g=u[p];g.onLoad&&g.onLoad(c)}}).catch(c=>{const u=eo[e];if(u===void 0)throw this.manager.itemError(e),c;delete eo[e];for(let p=0,m=u.length;p<m;p++){const g=u[p];g.onError&&g.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class SJ extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new bo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=If.parse(e[i]);t.push(r)}return t}}class EJ extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new LE,l=new bo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(p){l.load(e[p],function(m){const g=s.parse(m,!0);o[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},c+=1,c===6&&(g.mipmapCount===1&&(a.minFilter=Tn),a.image=o,a.format=g.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)u(p);else l.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let y=0;y<g;y++){o[y]={mipmaps:[]};for(let _=0;_<m.mipmapCount;_++)o[y].mipmaps.push(m.mipmaps[y*m.mipmapCount+_]),o[y].format=m.format,o[y].width=m.width,o[y].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=Tn),a.format=m.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class kf extends pr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=$l.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Mf("img");function l(){u(),$l.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(p){u(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class MJ extends pr{constructor(e){super(e)}load(e,t,i,r){const s=new np,o=new kf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class TJ extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Iu,a=new bo(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:xi,o.wrapT=c.wrapT!==void 0?c.wrapT:xi,o.magFilter=c.magFilter!==void 0?c.magFilter:Tn,o.minFilter=c.minFilter!==void 0?c.minFilter:Tn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Na),c.mipmapCount===1&&(o.minFilter=Tn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},i,r),o}}class AJ extends pr{constructor(e){super(e)}load(e,t,i,r){const s=new _n,o=new kf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Va extends zt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ze(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class mj extends Va{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ze(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const V1=new mt,QP=new F,e3=new F;class $E{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new xe(512,512),this.map=null,this.mapPass=null,this.matrix=new mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vv,this._frameExtents=new xe(1,1),this._viewportCount=1,this._viewports=[new Wt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;QP.setFromMatrixPosition(e.matrixWorld),t.position.copy(QP),e3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(e3),t.updateMatrixWorld(),V1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(V1),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(V1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class CJ extends $E{constructor(){super(new yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Xu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gj extends Va{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new CJ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const t3=new mt,oh=new F,H1=new F;class PJ extends $E{constructor(){super(new yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new xe(4,2),this._viewportCount=6,this._viewports=[new Wt(2,1,1,1),new Wt(0,1,1,1),new Wt(3,1,1,1),new Wt(1,1,1,1),new Wt(3,0,1,1),new Wt(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),oh.setFromMatrixPosition(e.matrixWorld),i.position.copy(oh),H1.copy(i.position),H1.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(H1),i.updateMatrixWorld(),r.makeTranslation(-oh.x,-oh.y,-oh.z),t3.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(t3)}}class XE extends Va{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new PJ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class NJ extends $E{constructor(){super(new wa(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class vj extends Va{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.shadow=new NJ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qE extends Va{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class yj extends Va{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class xj{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new F)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class Qv extends Va{constructor(e=new xj,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class ey extends pr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new bo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=ey.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ze().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ze().setHex(o.value);break;case"v2":r.uniforms[s].value=new xe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new F().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Wt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Ct().fromArray(o.value);break;case"m4":r.uniforms[s].value=new mt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new xe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new xe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:nj,SpriteMaterial:PE,RawShaderMaterial:ij,ShaderMaterial:Ds,PointsMaterial:Yv,MeshPhysicalMaterial:rj,MeshStandardMaterial:UE,MeshPhongMaterial:zE,MeshToonMaterial:sj,MeshNormalMaterial:oj,MeshLambertMaterial:aj,MeshDepthMaterial:AE,MeshDistanceMaterial:CE,MeshBasicMaterial:za,MeshMatcapMaterial:lj,LineDashedMaterial:cj,LineBasicMaterial:Ii,Material:ai};return new t[e]}}class gb{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class _j extends yt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class wj extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new bo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,y){if(t[y]!==void 0)return t[y];const S=g.interleavedBuffers[y],v=s(g,S.buffer),b=vu(S.type,v),w=new Xv(b,S.stride);return w.uuid=S.uuid,t[y]=w,w}function s(g,y){if(i[y]!==void 0)return i[y];const S=g.arrayBuffers[y],v=new Uint32Array(S).buffer;return i[y]=v,v}const o=e.isInstancedBufferGeometry?new _j:new yt,a=e.data.index;if(a!==void 0){const g=vu(a.type,a.array);o.setIndex(new Yt(g,1))}const l=e.data.attributes;for(const g in l){const y=l[g];let _;if(y.isInterleavedBufferAttribute){const S=r(e.data,y.data);_=new Gl(S,y.itemSize,y.offset,y.normalized)}else{const S=vu(y.type,y.array),v=y.isInstancedBufferAttribute?Yu:Yt;_=new v(S,y.itemSize,y.normalized)}y.name!==void 0&&(_.name=y.name),y.usage!==void 0&&_.setUsage(y.usage),y.updateRange!==void 0&&(_.updateRange.offset=y.updateRange.offset,_.updateRange.count=y.updateRange.count),o.setAttribute(g,_)}const c=e.data.morphAttributes;if(c)for(const g in c){const y=c[g],_=[];for(let S=0,v=y.length;S<v;S++){const b=y[S];let w;if(b.isInterleavedBufferAttribute){const M=r(e.data,b.data);w=new Gl(M,b.itemSize,b.offset,b.normalized)}else{const M=vu(b.type,b.array);w=new Yt(M,b.itemSize,b.normalized)}b.name!==void 0&&(w.name=b.name),_.push(w)}o.morphAttributes[g]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let g=0,y=p.length;g!==y;++g){const _=p[g];o.addGroup(_.start,_.count,_.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new F;m.center!==void 0&&g.fromArray(m.center),o.boundingSphere=new Fs(g,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class RJ extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?gb.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new bo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?gb.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new bo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let p=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Dl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new qv().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new wj;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in JP?a=JP[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new ey;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=If.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:vu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new WE(t);s=new kf(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const p=e[c],m=p.url;if(Array.isArray(m)){const g=[];for(let y=0,_=m.length;y<_;y++){const S=m[y],v=a(S);v!==null&&(v instanceof HTMLImageElement?g.push(v):g.push(new Iu(v.data,v.width,v.height)))}r[p.uuid]=new Al(g)}else{const g=a(p.url);r[p.uuid]=new Al(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:vu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new kf(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let p=0,m=c.length;p<m;p++){const g=c[p],y=await s(g);y!==null&&(y instanceof HTMLImageElement?u.push(y):u.push(new Iu(y.data,y.width,y.height)))}i[l.uuid]=new Al(u)}else{const u=await s(l.url);i[l.uuid]=new Al(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new np,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Iu:u=new _n,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,LJ)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],n3),u.wrapT=i(a.wrap[1],n3)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,i3)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,i3)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let y=0,_=m.length;y<_;y++){const S=m[y];i[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),g.push(i[S])}return g}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function c(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let u,p;switch(e.type){case"Scene":o=new Tf,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ze(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new $v(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Wv(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new wa(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new qE(e.color,e.intensity);break;case"DirectionalLight":o=new vj(e.color,e.intensity);break;case"PointLight":o=new XE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new yj(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new gj(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new mj(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Qv().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),p=l(e.material),o=new HD(u,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),p=l(e.material),o=new Yn(u,p);break;case"InstancedMesh":u=a(e.geometry),p=l(e.material);const m=e.count,g=e.instanceMatrix,y=e.instanceColor;o=new GD(u,p,m),o.instanceMatrix=new Yu(new Float32Array(g.array),16),y!==void 0&&(o.instanceColor=new Yu(new Float32Array(y.array),y.itemSize));break;case"LOD":o=new VD;break;case"Line":o=new Ra(a(e.geometry),l(e.material));break;case"LineLoop":o=new WD(a(e.geometry),l(e.material));break;case"LineSegments":o=new Us(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new RE(a(e.geometry),l(e.material));break;case"Sprite":o=new BD(l(e.material));break;case"Group":o=new xu;break;case"Bone":o=new NE;break;default:o=new zt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)o.add(this.parseObject(m[g],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const y=m[g];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const y=m[g],_=o.getObjectByProperty("uuid",y.object);_!==void 0&&o.addLevel(_,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const LJ={UVMapping:Uv,CubeReflectionMapping:Ca,CubeRefractionMapping:Pa,EquirectangularReflectionMapping:vf,EquirectangularRefractionMapping:yf,CubeUVReflectionMapping:sd},n3={RepeatWrapping:xf,ClampToEdgeWrapping:xi,MirroredRepeatWrapping:_f},i3={NearestFilter:En,NearestMipmapNearestFilter:q0,NearestMipmapLinearFilter:Uh,LinearFilter:Tn,LinearMipmapNearestFilter:gE,LinearMipmapLinearFilter:Na};class IJ extends pr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=$l.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){$l.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let bg;class YE{static getContext(){return bg===void 0&&(bg=new(window.AudioContext||window.webkitAudioContext)),bg}static setContext(e){bg=e}}class kJ extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new bo(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);YE.getContext().decodeAudioData(c,function(p){t(p)},a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class DJ extends Qv{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new ze().set(e),s=new ze().set(t),o=new F(r.r,r.g,r.b),a=new F(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class jJ extends Qv{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new ze().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const r3=new mt,s3=new mt,rl=new mt;class OJ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,rl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Il*t.fov*.5)/t.zoom;let a,l;s3.elements[12]=-r,r3.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,rl.elements[0]=2*t.near/(l-a),rl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(rl),a=-o*t.aspect-s,l=o*t.aspect-s,rl.elements[0]=2*t.near/(l-a),rl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(rl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(s3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(r3)}}class KE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=o3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=o3();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function o3(){return(typeof performance>"u"?Date:performance).now()}const sl=new F,a3=new _i,FJ=new F,ol=new F;class UJ extends zt{constructor(){super(),this.type="AudioListener",this.context=YE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new KE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(sl,a3,FJ),ol.set(0,0,-1).applyQuaternion(a3),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(sl.x,r),t.positionY.linearRampToValueAtTime(sl.y,r),t.positionZ.linearRampToValueAtTime(sl.z,r),t.forwardX.linearRampToValueAtTime(ol.x,r),t.forwardY.linearRampToValueAtTime(ol.y,r),t.forwardZ.linearRampToValueAtTime(ol.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(sl.x,sl.y,sl.z),t.setOrientation(ol.x,ol.y,ol.z,i.x,i.y,i.z)}}class bj extends zt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const al=new F,l3=new _i,zJ=new F,ll=new F;class BJ extends bj{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(al,l3,zJ),ll.set(0,0,1).applyQuaternion(l3);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(al.x,i),t.positionY.linearRampToValueAtTime(al.y,i),t.positionZ.linearRampToValueAtTime(al.z,i),t.orientationX.linearRampToValueAtTime(ll.x,i),t.orientationY.linearRampToValueAtTime(ll.y,i),t.orientationZ.linearRampToValueAtTime(ll.z,i)}else t.setPosition(al.x,al.y,al.z),t.setOrientation(ll.x,ll.y,ll.z)}}class VJ{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class Sj{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){_i.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;_i.multiplyQuaternionsFlat(e,o,e,t,e,i),_i.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const ZE="\\[\\]\\.:\\/",HJ=new RegExp("["+ZE+"]","g"),JE="[^"+ZE+"]",GJ="[^"+ZE.replace("\\.","")+"]",WJ=/((?:WC+[\/:])*)/.source.replace("WC",JE),$J=/(WCOD+)?/.source.replace("WCOD",GJ),XJ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",JE),qJ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",JE),YJ=new RegExp("^"+WJ+$J+XJ+qJ+"$"),KJ=["material","materials","bones","map"];class ZJ{constructor(e,t,i){const r=i||kt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class kt{constructor(e,t,i){this.path=t,this.parsedPath=i||kt.parseTrackName(t),this.node=kt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new kt.Composite(e,t,i):new kt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(HJ,"")}static parseTrackName(e){const t=YJ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);KJ.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=kt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}kt.Composite=ZJ;kt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};kt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};kt.prototype.GetterByBindingType=[kt.prototype._getValue_direct,kt.prototype._getValue_array,kt.prototype._getValue_arrayElement,kt.prototype._getValue_toArray];kt.prototype.SetterByBindingTypeAndVersioning=[[kt.prototype._setValue_direct,kt.prototype._setValue_direct_setNeedsUpdate,kt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_array,kt.prototype._setValue_array_setNeedsUpdate,kt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_arrayElement,kt.prototype._setValue_arrayElement_setNeedsUpdate,kt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_fromArray,kt.prototype._setValue_fromArray_setNeedsUpdate,kt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class JJ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=lr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,p=arguments.length;u!==p;++u){const m=arguments[u],g=m.uuid;let y=t[g];if(y===void 0){y=l++,t[g]=y,e.push(m);for(let _=0,S=o;_!==S;++_)s[_].push(new kt(m,i[_],r[_]))}else if(y<c){a=e[y];const _=--c,S=e[_];t[S.uuid]=y,e[y]=S,t[g]=_,e[_]=m;for(let v=0,b=o;v!==b;++v){const w=s[v],M=w[_];let A=w[y];w[y]=M,A===void 0&&(A=new kt(m,i[v],r[v])),w[_]=A}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const p=s++,m=e[p];t[m.uuid]=u,e[u]=m,t[c]=p,e[p]=l;for(let g=0,y=r;g!==y;++g){const _=i[g],S=_[p],v=_[u];_[u]=S,_[p]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,p=t[u];if(p!==void 0)if(delete t[u],p<s){const m=--s,g=e[m],y=--o,_=e[y];t[g.uuid]=p,e[p]=g,t[_.uuid]=m,e[m]=_,e.pop();for(let S=0,v=r;S!==v;++S){const b=i[S],w=b[m],M=b[y];b[p]=w,b[m]=M,b.pop()}}else{const m=--o,g=e[m];m>0&&(t[g.uuid]=p),e[p]=g,e.pop();for(let y=0,_=r;y!==_;++y){const S=i[y];S[p]=S[m],S.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,p=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(p);for(let m=u,g=l.length;m!==g;++m){const y=l[m];p[m]=new kt(y,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class Ej{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Ml,endingEnd:Ml};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case yE:for(let u=0,p=l.length;u!==p;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case zv:default:for(let u=0,p=l.length;u!==p;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===yD;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===gD){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Tl,r.endingEnd=Tl):(e?r.endingStart=this.zeroSlopeAtStart?Tl:Ml:r.endingStart=Sf,t?r.endingEnd=this.zeroSlopeAtEnd?Tl:Ml:r.endingEnd=Sf)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const QJ=new Float32Array(1);class eQ extends To{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let p=0;p!==s;++p){const m=r[p],g=m.name;let y=u[g];if(y!==void 0)++y.referenceCount,o[p]=y;else{if(y=o[p],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,g));continue}const _=t&&t._propertyBindings[p].binding.parsedPath;y=new Sj(kt.create(i,g,_),m.ValueTypeName,m.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,g),o[p]=y}a[p].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new HE(new Float32Array(2),new Float32Array(2),1,QJ),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?If.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=zv),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new Ej(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?If.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,p=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,p._cacheIndex=u,t[u]=p,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class QE{constructor(e){this.value=e}clone(){return new QE(this.value.clone===void 0?this.value:this.value.clone())}}let tQ=0;class nQ extends To{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:tQ++}),this.name="",this.usage=Ef,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class iQ extends Xv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class rQ{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Mj{constructor(e,t,i=0,r=1/0){this.ray=new od(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new kl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return vb(e,this,i,t),i.sort(c3),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)vb(e[r],this,i,t);return i.sort(c3),i}}function c3(n,e){return n.distance-e.distance}function vb(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)vb(r[s],e,t,!0)}}class yb{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(vn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class sQ{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const u3=new xe;class oQ{constructor(e=new xe(1/0,1/0),t=new xe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=u3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,u3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const d3=new F,Sg=new F;class aQ{constructor(e=new F,t=new F){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){d3.subVectors(e,this.start),Sg.subVectors(this.end,this.start);const i=Sg.dot(Sg);let s=Sg.dot(d3)/i;return t&&(s=vn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const h3=new F;class lQ extends zt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new yt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new $e(r,3));const s=new Ii({fog:!1,toneMapped:!1});this.cone=new Us(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),h3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(h3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ho=new F,Eg=new mt,G1=new mt;class cQ extends Us{constructor(e){const t=Tj(e),i=new yt,r=[],s=[],o=new ze(0,0,1),a=new ze(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new $e(r,3)),i.setAttribute("color",new $e(s,3));const l=new Ii({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");G1.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Eg.multiplyMatrices(G1,a.matrixWorld),Ho.setFromMatrixPosition(Eg),r.setXYZ(o,Ho.x,Ho.y,Ho.z),Eg.multiplyMatrices(G1,a.parent.matrixWorld),Ho.setFromMatrixPosition(Eg),r.setXYZ(o+1,Ho.x,Ho.y,Ho.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Tj(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Tj(n.children[t]));return e}class uQ extends Yn{constructor(e,t,i){const r=new dd(t,4,2),s=new za({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const dQ=new F,f3=new ze,p3=new ze;class hQ extends zt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new tc(t);r.rotateY(Math.PI*.5),this.material=new za({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Yt(o,3)),this.add(new Yn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");f3.copy(this.light.color),p3.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?f3:p3;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(dQ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class fQ extends Us{constructor(e=10,t=10,i=4473924,r=8947848){i=new ze(i),r=new ze(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let m=0,g=0,y=-a;m<=t;m++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const _=m===s?i:r;_.toArray(c,g),g+=3,_.toArray(c,g),g+=3,_.toArray(c,g),g+=3,_.toArray(c,g),g+=3}const u=new yt;u.setAttribute("position",new $e(l,3)),u.setAttribute("color",new $e(c,3));const p=new Ii({vertexColors:!0,toneMapped:!1});super(u,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class pQ extends Us{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new ze(s),o=new ze(o);const a=[],l=[];if(t>1)for(let p=0;p<t;p++){const m=p/t*(Math.PI*2),g=Math.sin(m)*e,y=Math.cos(m)*e;a.push(0,0,0),a.push(g,0,y);const _=p&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let p=0;p<i;p++){const m=p&1?s:o,g=e-e/i*p;for(let y=0;y<r;y++){let _=y/r*(Math.PI*2),S=Math.sin(_)*g,v=Math.cos(_)*g;a.push(S,0,v),l.push(m.r,m.g,m.b),_=(y+1)/r*(Math.PI*2),S=Math.sin(_)*g,v=Math.cos(_)*g,a.push(S,0,v),l.push(m.r,m.g,m.b)}}const c=new yt;c.setAttribute("position",new $e(a,3)),c.setAttribute("color",new $e(l,3));const u=new Ii({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const m3=new F,Mg=new F,g3=new F;class mQ extends zt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new yt;r.setAttribute("position",new $e([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ii({fog:!1,toneMapped:!1});this.lightPlane=new Ra(r,s),this.add(this.lightPlane),r=new yt,r.setAttribute("position",new $e([0,0,0,0,0,1],3)),this.targetLine=new Ra(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),m3.setFromMatrixPosition(this.light.matrixWorld),Mg.setFromMatrixPosition(this.light.target.matrixWorld),g3.subVectors(Mg,m3),this.lightPlane.lookAt(Mg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Mg),this.targetLine.scale.z=g3.length()}}const Tg=new F,mn=new tp;class gQ extends Us{constructor(e){const t=new yt,i=new Ii({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,_){l(y),l(_)}function l(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}t.setAttribute("position",new $e(r,3)),t.setAttribute("color",new $e(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ze(16755200),u=new ze(16711680),p=new ze(43775),m=new ze(16777215),g=new ze(3355443);this.setColors(c,u,p,m,g)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;mn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Sn("c",t,e,mn,0,0,-1),Sn("t",t,e,mn,0,0,1),Sn("n1",t,e,mn,-i,-r,-1),Sn("n2",t,e,mn,i,-r,-1),Sn("n3",t,e,mn,-i,r,-1),Sn("n4",t,e,mn,i,r,-1),Sn("f1",t,e,mn,-i,-r,1),Sn("f2",t,e,mn,i,-r,1),Sn("f3",t,e,mn,-i,r,1),Sn("f4",t,e,mn,i,r,1),Sn("u1",t,e,mn,i*.7,r*1.1,-1),Sn("u2",t,e,mn,-i*.7,r*1.1,-1),Sn("u3",t,e,mn,0,r*2,-1),Sn("cf1",t,e,mn,-i,0,1),Sn("cf2",t,e,mn,i,0,1),Sn("cf3",t,e,mn,0,-r,1),Sn("cf4",t,e,mn,0,r,1),Sn("cn1",t,e,mn,-i,0,-1),Sn("cn2",t,e,mn,i,0,-1),Sn("cn3",t,e,mn,0,-r,-1),Sn("cn4",t,e,mn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Sn(n,e,t,i,r,s,o){Tg.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Tg.x,Tg.y,Tg.z)}}const Ag=new Os;class vQ extends Us{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new yt;s.setIndex(new Yt(i,1)),s.setAttribute("position",new Yt(r,3)),super(s,new Ii({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Ag.setFromObject(this.object),Ag.isEmpty())return;const t=Ag.min,i=Ag.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class yQ extends Us{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new yt;s.setIndex(new Yt(i,1)),s.setAttribute("position",new $e(r,3)),super(s,new Ii({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class xQ extends Ra{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new yt;o.setAttribute("position",new $e(s,3)),o.computeBoundingSphere(),super(o,new Ii({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new yt;l.setAttribute("position",new $e(a,3)),l.computeBoundingSphere(),this.add(new Yn(l,new za({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const v3=new F;let Cg,W1;class _Q extends zt{constructor(e=new F(0,0,1),t=new F(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Cg===void 0&&(Cg=new yt,Cg.setAttribute("position",new $e([0,0,0,0,1,0],3)),W1=new ec(0,.5,1,5,1),W1.translate(0,-.5,0)),this.position.copy(t),this.line=new Ra(Cg,new Ii({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yn(W1,new za({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{v3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(v3,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class wQ extends Us{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new yt;r.setAttribute("position",new $e(t,3)),r.setAttribute("color",new $e(i,3));const s=new Ii({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ze,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bQ{constructor(){this.type="ShapePath",this.color=new ze,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Af,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const b=[];for(let w=0,M=v.length;w<M;w++){const A=v[w],P=new Dl;P.curves=A.curves,b.push(P)}return b}function i(v,b){const w=b.length;let M=!1;for(let A=w-1,P=0;P<w;A=P++){let L=b[A],I=b[P],C=I.x-L.x,k=I.y-L.y;if(Math.abs(k)>Number.EPSILON){if(k<0&&(L=b[P],C=-C,I=b[A],k=-k),v.y<L.y||v.y>I.y)continue;if(v.y===L.y){if(v.x===L.x)return!0}else{const V=k*(v.x-L.x)-C*(v.y-L.y);if(V===0)return!0;if(V<0)continue;M=!M}}else{if(v.y!==L.y)continue;if(I.x<=v.x&&v.x<=L.x||L.x<=v.x&&v.x<=I.x)return!0}}return M}const r=Is.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Dl,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const p=[],m=[];let g=[],y=0,_;m[y]=void 0,g[y]=[];for(let v=0,b=s.length;v<b;v++)a=s[v],_=a.getPoints(),o=r(_),o=e?!o:o,o?(!u&&m[y]&&y++,m[y]={s:new Dl,p:_},m[y].s.curves=a.curves,u&&y++,g[y]=[]):g[y].push({h:a,p:_[0]});if(!m[0])return t(s);if(m.length>1){let v=!1,b=0;for(let w=0,M=m.length;w<M;w++)p[w]=[];for(let w=0,M=m.length;w<M;w++){const A=g[w];for(let P=0;P<A.length;P++){const L=A[P];let I=!0;for(let C=0;C<m.length;C++)i(L.p,m[C].p)&&(w!==C&&b++,I?(I=!1,p[C].push(L)):v=!0);I&&p[w].push(L)}}b>0&&v===!1&&(g=p)}let S;for(let v=0,b=m.length;v<b;v++){l=m[v].s,c.push(l),S=g[v];for(let w=0,M=S.length;w<M;w++)l.holes.push(S[w].h)}return c}}class SQ extends Ba{constructor(e,t,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,o)}}class EQ extends ip{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class MQ extends rp{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class TQ extends sp{constructor(e,t,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,o,a)}}class AQ extends ec{constructor(e,t,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,o,a,l)}}class CQ extends op{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class PQ extends ap{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class NQ extends ud{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class RQ extends cd{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class LQ extends tc{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class IQ extends ad{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class kQ extends Ao{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class DQ extends lp{constructor(e,t,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,o)}}class jQ extends cp{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class OQ extends dd{constructor(e,t,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,o,a)}}class FQ extends hd{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class UQ extends up{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class zQ extends dp{constructor(e,t,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,o)}}class BQ extends hp{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ov}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ov);const VQ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:mE,AddEquation:vl,AddOperation:Kk,AdditiveAnimationBlendMode:yE,AdditiveBlending:$0,AlphaFormat:oD,AlwaysDepth:Hk,AlwaysStencilFunc:bD,AmbientLight:qE,AmbientLightProbe:jJ,AnimationAction:Ej,AnimationClip:If,AnimationLoader:SJ,AnimationMixer:eQ,AnimationObjectGroup:JJ,AnimationUtils:xJ,ArcCurve:$D,ArrayCamera:OD,ArrowHelper:_Q,Audio:bj,AudioAnalyser:VJ,AudioContext:YE,AudioListener:UJ,AudioLoader:kJ,AxesHelper:wQ,BackSide:Ni,BasicDepthPacking:xD,BasicShadowMap:Pk,Bone:NE,BooleanKeyframeTrack:nc,Box2:oQ,Box3:Os,Box3Helper:yQ,BoxBufferGeometry:SQ,BoxGeometry:Ba,BoxHelper:vQ,BufferAttribute:Yt,BufferGeometry:yt,BufferGeometryLoader:wj,ByteType:tD,Cache:$l,Camera:tp,CameraHelper:gQ,CanvasTexture:HZ,CapsuleBufferGeometry:EQ,CapsuleGeometry:ip,CatmullRomCurve3:XD,CineonToneMapping:Qk,CircleBufferGeometry:MQ,CircleGeometry:rp,ClampToEdgeWrapping:xi,Clock:KE,Color:ze,ColorKeyframeTrack:GE,ColorManagement:Tr,CompressedArrayTexture:VZ,CompressedTexture:LE,CompressedTextureLoader:EJ,ConeBufferGeometry:TQ,ConeGeometry:sp,CubeCamera:PD,CubeReflectionMapping:Ca,CubeRefractionMapping:Pa,CubeTexture:np,CubeTextureLoader:MJ,CubeUVReflectionMapping:sd,CubicBezierCurve:kE,CubicBezierCurve3:qD,CubicInterpolant:dj,CullFaceBack:kw,CullFaceFront:Ck,CullFaceFrontBack:zW,CullFaceNone:Ak,Curve:ds,CurvePath:KD,CustomBlending:Nk,CustomToneMapping:eD,CylinderBufferGeometry:AQ,CylinderGeometry:ec,Cylindrical:sQ,Data3DTexture:SE,DataArrayTexture:Bv,DataTexture:Iu,DataTextureLoader:TJ,DataUtils:J$,DecrementStencilOp:JW,DecrementWrapStencilOp:e$,DefaultLoadingManager:pj,DepthFormat:ya,DepthStencilFormat:Hl,DepthTexture:FD,DirectionalLight:vj,DirectionalLightHelper:mQ,DiscreteInterpolant:hj,DisplayP3ColorSpace:_E,DodecahedronBufferGeometry:CQ,DodecahedronGeometry:op,DoubleSide:Cs,DstAlphaFactor:Ok,DstColorFactor:Uk,DynamicCopyUsage:m$,DynamicDrawUsage:c$,DynamicReadUsage:h$,EdgesGeometry:ZD,EllipseCurve:Kv,EqualDepth:Wk,EqualStencilFunc:r$,EquirectangularReflectionMapping:vf,EquirectangularRefractionMapping:yf,Euler:ep,EventDispatcher:To,ExtrudeBufferGeometry:PQ,ExtrudeGeometry:ap,FileLoader:bo,Float16BufferAttribute:rX,Float32BufferAttribute:$e,Float64BufferAttribute:sX,FloatType:co,Fog:$v,FogExp2:Wv,FramebufferTexture:BZ,FrontSide:_o,Frustum:Vv,GLBufferAttribute:rQ,GLSL1:v$,GLSL3:lb,GreaterDepth:Xk,GreaterEqualDepth:$k,GreaterEqualStencilFunc:l$,GreaterStencilFunc:o$,GridHelper:fQ,Group:xu,HalfFloatType:$u,HemisphereLight:mj,HemisphereLightHelper:hQ,HemisphereLightProbe:DJ,IcosahedronBufferGeometry:NQ,IcosahedronGeometry:ud,ImageBitmapLoader:IJ,ImageLoader:kf,ImageUtils:bE,IncrementStencilOp:ZW,IncrementWrapStencilOp:QW,InstancedBufferAttribute:Yu,InstancedBufferGeometry:_j,InstancedInterleavedBuffer:iQ,InstancedMesh:GD,Int16BufferAttribute:nX,Int32BufferAttribute:iX,Int8BufferAttribute:Q$,IntType:iD,InterleavedBuffer:Xv,InterleavedBufferAttribute:Gl,Interpolant:fp,InterpolateDiscrete:wf,InterpolateLinear:bf,InterpolateSmooth:a0,InvertStencilOp:t$,KeepStencilOp:l0,KeyframeTrack:hs,LOD:VD,LatheBufferGeometry:RQ,LatheGeometry:cd,Layers:kl,LessDepth:Gk,LessEqualDepth:X0,LessEqualStencilFunc:s$,LessStencilFunc:i$,Light:Va,LightProbe:Qv,Line:Ra,Line3:aQ,LineBasicMaterial:Ii,LineCurve:Zv,LineCurve3:YD,LineDashedMaterial:cj,LineLoop:WD,LineSegments:Us,LinearEncoding:xE,LinearFilter:Tn,LinearInterpolant:HE,LinearMipMapLinearFilter:WW,LinearMipMapNearestFilter:GW,LinearMipmapLinearFilter:Na,LinearMipmapNearestFilter:gE,LinearSRGBColorSpace:ls,LinearToneMapping:Zk,Loader:pr,LoaderUtils:gb,LoadingManager:WE,LoopOnce:gD,LoopPingPong:yD,LoopRepeat:vD,LuminanceAlphaFormat:lD,LuminanceFormat:aD,MOUSE:Ms,Material:ai,MaterialLoader:ey,MathUtils:R$,Matrix3:Ct,Matrix4:mt,MaxEquation:Fw,Mesh:Yn,MeshBasicMaterial:za,MeshDepthMaterial:AE,MeshDistanceMaterial:CE,MeshLambertMaterial:aj,MeshMatcapMaterial:lj,MeshNormalMaterial:oj,MeshPhongMaterial:zE,MeshPhysicalMaterial:rj,MeshStandardMaterial:UE,MeshToonMaterial:sj,MinEquation:Ow,MirroredRepeatWrapping:_f,MixOperation:Yk,MultiplyBlending:jw,MultiplyOperation:Qf,NearestFilter:En,NearestMipMapLinearFilter:HW,NearestMipMapNearestFilter:VW,NearestMipmapLinearFilter:Uh,NearestMipmapNearestFilter:q0,NeverDepth:Vk,NeverStencilFunc:n$,NoBlending:po,NoColorSpace:_a,NoToneMapping:ss,NormalAnimationBlendMode:zv,NormalBlending:Rl,NotEqualDepth:qk,NotEqualStencilFunc:a$,NumberKeyframeTrack:Rf,Object3D:zt,ObjectLoader:RJ,ObjectSpaceNormalMap:wD,OctahedronBufferGeometry:LQ,OctahedronGeometry:tc,OneFactor:kk,OneMinusDstAlphaFactor:Fk,OneMinusDstColorFactor:zk,OneMinusSrcAlphaFactor:pE,OneMinusSrcColorFactor:jk,OrthographicCamera:wa,PCFShadowMap:Fv,PCFSoftShadowMap:Fh,PMREMGenerator:ub,Path:Af,PerspectiveCamera:yn,Plane:ro,PlaneBufferGeometry:IQ,PlaneGeometry:ad,PlaneHelper:xQ,PointLight:XE,PointLightHelper:uQ,Points:RE,PointsMaterial:Yv,PolarGridHelper:pQ,PolyhedronBufferGeometry:kQ,PolyhedronGeometry:Ao,PositionalAudio:BJ,PropertyBinding:kt,PropertyMixer:Sj,QuadraticBezierCurve:DE,QuadraticBezierCurve3:jE,Quaternion:_i,QuaternionKeyframeTrack:fd,QuaternionLinearInterpolant:fj,RED_GREEN_RGTC2_Format:ob,RED_RGTC1_Format:mD,REVISION:Ov,RGBADepthPacking:_D,RGBAFormat:Gi,RGBAIntegerFormat:fD,RGBA_ASTC_10x10_Format:nb,RGBA_ASTC_10x5_Format:Qw,RGBA_ASTC_10x6_Format:eb,RGBA_ASTC_10x8_Format:tb,RGBA_ASTC_12x10_Format:ib,RGBA_ASTC_12x12_Format:rb,RGBA_ASTC_4x4_Format:Ww,RGBA_ASTC_5x4_Format:$w,RGBA_ASTC_5x5_Format:Xw,RGBA_ASTC_6x5_Format:qw,RGBA_ASTC_6x6_Format:Yw,RGBA_ASTC_8x5_Format:Kw,RGBA_ASTC_8x6_Format:Zw,RGBA_ASTC_8x8_Format:Jw,RGBA_BPTC_Format:o0,RGBA_ETC2_EAC_Format:Gw,RGBA_PVRTC_2BPPV1_Format:Vw,RGBA_PVRTC_4BPPV1_Format:Bw,RGBA_S3TC_DXT1_Format:i0,RGBA_S3TC_DXT3_Format:r0,RGBA_S3TC_DXT5_Format:s0,RGB_ETC1_Format:pD,RGB_ETC2_Format:Hw,RGB_PVRTC_2BPPV1_Format:zw,RGB_PVRTC_4BPPV1_Format:Uw,RGB_S3TC_DXT1_Format:n0,RGFormat:dD,RGIntegerFormat:hD,RawShaderMaterial:ij,Ray:od,Raycaster:Mj,RectAreaLight:yj,RedFormat:cD,RedIntegerFormat:uD,ReinhardToneMapping:Jk,RepeatWrapping:xf,ReplaceStencilOp:KW,ReverseSubtractEquation:Lk,RingBufferGeometry:DQ,RingGeometry:lp,SIGNED_RED_GREEN_RGTC2_Format:ab,SIGNED_RED_RGTC1_Format:sb,SRGBColorSpace:vt,Scene:Tf,ShaderChunk:wt,ShaderLib:es,ShaderMaterial:Ds,ShadowMaterial:nj,Shape:Dl,ShapeBufferGeometry:jQ,ShapeGeometry:cp,ShapePath:bQ,ShapeUtils:Is,ShortType:nD,Skeleton:qv,SkeletonHelper:cQ,SkinnedMesh:HD,Source:Al,Sphere:Fs,SphereBufferGeometry:OQ,SphereGeometry:dd,Spherical:yb,SphericalHarmonics3:xj,SplineCurve:OE,SpotLight:gj,SpotLightHelper:lQ,Sprite:BD,SpriteMaterial:PE,SrcAlphaFactor:fE,SrcAlphaSaturateFactor:Bk,SrcColorFactor:Dk,StaticCopyUsage:p$,StaticDrawUsage:Ef,StaticReadUsage:d$,StereoCamera:OJ,StreamCopyUsage:g$,StreamDrawUsage:u$,StreamReadUsage:f$,StringKeyframeTrack:ic,SubtractEquation:Rk,SubtractiveBlending:Dw,TOUCH:pl,TangentSpaceNormalMap:Ua,TetrahedronBufferGeometry:FQ,TetrahedronGeometry:hd,Texture:_n,TextureLoader:AJ,TorusBufferGeometry:UQ,TorusGeometry:up,TorusKnotBufferGeometry:zQ,TorusKnotGeometry:dp,Triangle:Vi,TriangleFanDrawMode:qW,TriangleStripDrawMode:XW,TrianglesDrawMode:$W,TubeBufferGeometry:BQ,TubeGeometry:hp,TwoPassDoubleSide:BW,UVMapping:Uv,Uint16BufferAttribute:EE,Uint32BufferAttribute:ME,Uint8BufferAttribute:eX,Uint8ClampedBufferAttribute:tX,Uniform:QE,UniformsGroup:nQ,UniformsLib:Ie,UniformsUtils:CD,UnsignedByteType:wo,UnsignedInt248Type:Ll,UnsignedIntType:oa,UnsignedShort4444Type:rD,UnsignedShort5551Type:sD,UnsignedShortType:vE,VSMShadowMap:Yr,Vector2:xe,Vector3:F,Vector4:Wt,VectorKeyframeTrack:Lf,VideoTexture:zZ,WebGL1Renderer:UD,WebGL3DRenderTarget:B$,WebGLArrayRenderTarget:z$,WebGLCubeRenderTarget:ND,WebGLMultipleRenderTargets:V$,WebGLRenderTarget:cs,WebGLRenderer:Gv,WebGLUtils:jD,WireframeGeometry:tj,WrapAroundEnding:Sf,ZeroCurvatureEnding:Ml,ZeroFactor:Ik,ZeroSlopeEnding:Tl,ZeroStencilOp:YW,_SRGBAFormat:Y0,sRGBEncoding:xa},Symbol.toStringTag,{value:"Module"}));function HQ({onContactClick:n}){const[e,t]=N.useState(!1),i=N.useRef(null),r=N.useRef({x:0,y:0});return N.useEffect(()=>{if(!i.current)return;const s=new Tf,o=new yn(75,window.innerWidth/window.innerHeight,.1,1e3),a=new Gv({canvas:i.current,alpha:!0,antialias:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(window.devicePixelRatio),o.position.z=5;const l=new yt,c=3e3,u=new Float32Array(c*3);for(let M=0;M<c*3;M++)u[M]=(Math.random()-.5)*10;l.setAttribute("position",new Yt(u,3));const p=new Yv({size:.005,color:13938487,transparent:!0,opacity:.8,blending:$0}),m=new RE(l,p);s.add(m);const g=[],y=[new hd(.5,0),new tc(.5,0),new ud(.5,0)];for(let M=0;M<10;M++){const A=y[Math.floor(Math.random()*y.length)],P=new zE({color:13938487,emissive:13938487,emissiveIntensity:.2,wireframe:!0,transparent:!0,opacity:.3}),L=new Yn(A,P);L.position.set((Math.random()-.5)*8,(Math.random()-.5)*8,(Math.random()-.5)*8),L.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,0),g.push(L),s.add(L)}const _=new qE(16777215,.5);s.add(_);const S=new XE(13938487,1);S.position.set(5,5,5),s.add(S);const v=M=>{r.current.x=M.clientX/window.innerWidth*2-1,r.current.y=-(M.clientY/window.innerHeight)*2+1};window.addEventListener("mousemove",v);const b=()=>{requestAnimationFrame(b),m.rotation.y+=5e-4,m.rotation.x+=2e-4,g.forEach((M,A)=>{M.rotation.x+=.005+A*.001,M.rotation.y+=.005+A*.001,M.position.y+=Math.sin(Date.now()*.001+A)*.002}),o.position.x=r.current.x*.5,o.position.y=r.current.y*.5,o.lookAt(s.position),a.render(s,o)};b();const w=()=>{o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",w),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("resize",w),a.dispose()}},[]),f.jsxs("section",{className:"relative min-h-screen overflow-hidden bg-black",children:[f.jsx("canvas",{ref:i,className:"absolute inset-0 w-full h-full",style:{pointerEvents:"none"}}),f.jsx("div",{className:"absolute inset-0",children:e?f.jsx("img",{src:"https://images.unsplash.com/photo-1600585154340-be6161a56a0c",alt:"Paisaje urbano de Madrid",className:"h-full w-full object-cover opacity-30"}):f.jsx("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"auto",onError:()=>t(!0),className:"h-full w-full object-cover opacity-90",children:f.jsx("source",{src:"https://pptkdbygswenchxurwkz.supabase.co/storage/v1/object/public/public-videos/heros/hero-home.mp4",type:"video/mp4"})})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-black/50 to-black"}),f.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-4",children:[f.jsxs(le.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:1},className:"text-center",children:[f.jsxs(le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.5},className:"inline-flex items-center gap-2 px-4 py-2 mb-8 bg-white/10 backdrop-blur-md rounded-full border border-white/20",children:[f.jsx(Ea,{className:"w-4 h-4 text-[#D4AF37]"}),f.jsx("span",{className:"text-sm text-white/90",children:"Tecnología IA para mejores comisiones"})]}),f.jsxs(le.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.7},className:"mb-6 font-serif text-5xl sm:text-6xl lg:text-7xl xl:text-8xl font-bold leading-tight",children:[f.jsx("span",{className:"block text-white",children:"Vende tu propiedad"}),f.jsx("span",{className:"block mt-2 bg-gradient-to-r from-[#D4AF37] to-[#FFD700] bg-clip-text text-transparent",children:"en Madrid"})]}),f.jsxs(le.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.9},className:"mb-8 max-w-2xl mx-auto text-lg sm:text-xl text-white/80",children:["Valoración gratuita en 24 horas.",f.jsx("span",{className:"block mt-2 text-[#D4AF37]",children:"Las mejores comisiones del mercado gracias a nuestra IA"})]}),f.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:1.1},className:"flex flex-col sm:flex-row gap-4 justify-center",children:f.jsxs(Zt,{size:"lg",className:"group relative overflow-hidden bg-gradient-to-r from-[#D4AF37] to-[#FFD700] hover:from-[#FFD700] hover:to-[#D4AF37] text-black font-semibold px-8 py-6 text-lg rounded-full transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-[#D4AF37]/30",onClick:n,children:[f.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[f.jsx(OS,{className:"h-5 w-5"}),"Solicitar valoración VIP"]}),f.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300"})]})}),f.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.3},className:"mt-12 grid grid-cols-3 gap-8 max-w-2xl mx-auto",children:[{value:"24h",label:"Respuesta"},{value:"-30%",label:"Comisiones"},{value:"100%",label:"Digital"}].map((s,o)=>f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-[#D4AF37]",children:s.value}),f.jsx("div",{className:"text-sm text-white/60",children:s.label})]},o))})]}),f.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:f.jsx(le.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},className:"w-6 h-10 border-2 border-white/30 rounded-full flex justify-center",children:f.jsx("div",{className:"w-1 h-3 bg-[#D4AF37] rounded-full mt-2"})})})]})]})}const GQ="modulepreload",WQ=function(n){return"/"+n},y3={},La=function(e,t,i){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=WQ(s),s in y3)return;y3[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const p=r[u];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":GQ,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,p)=>{c.addEventListener("load",u),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},$Q=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>La(()=>Promise.resolve().then(()=>pd),void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class eM extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class XQ extends eM{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qQ extends eM{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class YQ extends eM{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xb;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(xb||(xb={}));var KQ=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(p){o(p)}}function l(u){try{c(i.throw(u))}catch(p){o(p)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class ZQ{constructor(e,{headers:t={},customFetch:i,region:r=xb.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=$Q(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return KQ(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:c}).catch(y=>{throw new XQ(y)}),p=u.headers.get("x-relay-error");if(p&&p==="true")throw new qQ(u);if(!u.ok)throw new YQ(u);let m=((i=u.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield u.json():m==="application/octet-stream"?g=yield u.blob():m==="text/event-stream"?g=u:m==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(r){return{data:null,error:r}}})}}var Hi={},tM={},ty={},pp={},ny={},iy={},JQ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ku=JQ();const QQ=Ku.fetch,Aj=Ku.fetch.bind(Ku),Cj=Ku.Headers,eee=Ku.Request,tee=Ku.Response,pd=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cj,Request:eee,Response:tee,default:Aj,fetch:QQ},Symbol.toStringTag,{value:"Module"})),nee=EF(pd);var ry={};Object.defineProperty(ry,"__esModule",{value:!0});let iee=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ry.default=iee;var Pj=cr&&cr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(iy,"__esModule",{value:!0});const ree=Pj(nee),see=Pj(ry);let oee=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ree.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,p=null,m=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){const v=await s.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const _=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),S=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");_&&S&&S.length>1&&(p=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,p=null,m=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const _=await s.text();try{c=JSON.parse(_),Array.isArray(c)&&s.status===404&&(u=[],c=null,m=200,g="OK")}catch{s.status===404&&_===""?(m=204,g="No Content"):c={message:_}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,m=200,g="OK"),c&&this.shouldThrowOnError)throw new see.default(c)}return{error:c,data:u,count:p,status:m,statusText:g}});return this.shouldThrowOnError||(r=r.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};iy.default=oee;var aee=cr&&cr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ny,"__esModule",{value:!0});const lee=aee(iy);let cee=class extends lee.default{select(e){let t=!1;const i=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:i=t}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:i,referencedTable:r=i}={}){const s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,i?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ny.default=cee;var uee=cr&&cr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(pp,"__esModule",{value:!0});const dee=uee(ny);let hee=class extends dee.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const i=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t,referencedTable:i=t}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}};pp.default=hee;var fee=cr&&cr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ty,"__esModule",{value:!0});const ah=fee(pp);let pee=class{constructor(e,{headers:t={},schema:i,fetch:r}){this.url=e,this.headers=t,this.schema=i,this.fetch=r}select(e,{head:t=!1,count:i}={}){const r=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new ah.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:i=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ah.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:r,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ah.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new ah.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new ah.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ty.default=pee;var sy={},oy={};Object.defineProperty(oy,"__esModule",{value:!0});oy.version=void 0;oy.version="0.0.0-automated";Object.defineProperty(sy,"__esModule",{value:!0});sy.DEFAULT_HEADERS=void 0;const mee=oy;sy.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${mee.version}`};var Nj=cr&&cr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(tM,"__esModule",{value:!0});const gee=Nj(ty),vee=Nj(pp),yee=sy;let xee=class Rj{constructor(e,{headers:t={},schema:i,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},yee.DEFAULT_HEADERS),t),this.schemaName=i,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new gee.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Rj(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:r=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;i||r?(o=i?"HEAD":"GET",Object.entries(t).filter(([u,p])=>p!==void 0).map(([u,p])=>[u,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([u,p])=>{a.searchParams.append(u,p)})):(o="POST",l=t);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new vee.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};tM.default=xee;var md=cr&&cr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.PostgrestError=Hi.PostgrestBuilder=Hi.PostgrestTransformBuilder=Hi.PostgrestFilterBuilder=Hi.PostgrestQueryBuilder=Hi.PostgrestClient=void 0;const Lj=md(tM);Hi.PostgrestClient=Lj.default;const Ij=md(ty);Hi.PostgrestQueryBuilder=Ij.default;const kj=md(pp);Hi.PostgrestFilterBuilder=kj.default;const Dj=md(ny);Hi.PostgrestTransformBuilder=Dj.default;const jj=md(iy);Hi.PostgrestBuilder=jj.default;const Oj=md(ry);Hi.PostgrestError=Oj.default;var _ee=Hi.default={PostgrestClient:Lj.default,PostgrestQueryBuilder:Ij.default,PostgrestFilterBuilder:kj.default,PostgrestTransformBuilder:Dj.default,PostgrestBuilder:jj.default,PostgrestError:Oj.default};const{PostgrestClient:wee,PostgrestQueryBuilder:Yre,PostgrestFilterBuilder:Kre,PostgrestTransformBuilder:Zre,PostgrestBuilder:Jre,PostgrestError:Qre}=_ee,bee="2.11.2",See={"X-Client-Info":`realtime-js/${bee}`},Eee="1.0.0",Fj=1e4,Mee=1e3;var ku;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ku||(ku={}));var ir;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ir||(ir={}));var Jr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Jr||(Jr={}));var _b;(function(n){n.websocket="websocket"})(_b||(_b={}));var xl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(xl||(xl={}));class Tee{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const r=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=i.decode(e.slice(o,o+r));o=o+r;const l=i.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(i.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Uj{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Qt||(Qt={}));const x3=(n,e,t={})=>{var i;const r=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((s,o)=>(s[o]=Aee(o,n,e,r),s),{})},Aee=(n,e,t,i)=>{const r=e.find(a=>a.name===n),s=r==null?void 0:r.type,o=t[n];return s&&!i.includes(s)?zj(s,o):wb(o)},zj=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Ree(e,t)}switch(n){case Qt.bool:return Cee(e);case Qt.float4:case Qt.float8:case Qt.int2:case Qt.int4:case Qt.int8:case Qt.numeric:case Qt.oid:return Pee(e);case Qt.json:case Qt.jsonb:return Nee(e);case Qt.timestamp:return Lee(e);case Qt.abstime:case Qt.date:case Qt.daterange:case Qt.int4range:case Qt.int8range:case Qt.money:case Qt.reltime:case Qt.text:case Qt.time:case Qt.timestamptz:case Qt.timetz:case Qt.tsrange:case Qt.tstzrange:return wb(e);default:return wb(e)}},wb=n=>n,Cee=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Pee=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Nee=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Ree=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>zj(e,a))}return n},Lee=n=>typeof n=="string"?n.replace(" ","T"):n,Bj=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class $1{constructor(e,t,i={},r=Fj){this.channel=e,this.event=t,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _3;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(_3||(_3={}));class Gh{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gh.syncState(this.state,r,s,o),this.pendingDiffs.forEach(l=>{this.state=Gh.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Gh.syncDiff(this.state,r,s,o),a())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,r){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const p=s[c];if(p){const m=u.map(S=>S.presence_ref),g=p.map(S=>S.presence_ref),y=u.filter(S=>g.indexOf(S.presence_ref)<0),_=p.filter(S=>m.indexOf(S.presence_ref)<0);y.length>0&&(a[c]=y),_.length>0&&(l[c]=_)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},i,r)}static syncDiff(e,t,i,r){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const p=e[a].map(g=>g.presence_ref),m=u.filter(g=>p.indexOf(g.presence_ref)<0);e[a].unshift(...m)}i(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(p=>p.presence_ref);c=c.filter(p=>u.indexOf(p.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const r=e[i];return"metas"in r?t[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[i]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var w3;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(w3||(w3={}));var b3;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(b3||(b3={}));var no;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(no||(no={}));class nM{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=ir.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new $1(this,Jr.join,this.params,this.timeout),this.rejoinTimer=new Uj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ir.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ir.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=ir.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ir.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jr.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new Gh(this),this.broadcastEndpointURL=Bj(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(no.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(no.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(u=>u.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var p;if(this.socket.setAuth(),u===void 0){e==null||e(no.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,y=[];for(let _=0;_<g;_++){const S=m[_],{filter:{event:v,schema:b,table:w,filter:M}}=S,A=u&&u[_];if(A&&A.event===v&&A.schema===b&&A.table===w&&A.filter===M)y.push(Object.assign(Object.assign({},S),{id:A.id}));else{this.unsubscribe(),e==null||e(no.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(no.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(no.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(no.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this._on(e,t,i)}async send(e,t={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ir.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const r=new $1(this,Jr.leave,{},e);r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),o}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new $1(this,e,t,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var r,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Jr;if(i&&[a,l,c,u].indexOf(o)>=0&&i!==this._joinRef())return;let m=this._onMessage(o,t,i);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(g=>{var y,_,S;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((S=(_=g.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===o}).map(g=>g.callback(m,i)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var y,_,S,v,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const M=g.id,A=(y=g.filter)===null||y===void 0?void 0:y.event;return M&&((_=t.ids)===null||_===void 0?void 0:_.includes(M))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((S=t.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const M=(b=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return M==="*"||M===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:_,table:S,commit_timestamp:v,type:b,errors:w}=y;m=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:v,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(y))}g.callback(m,i)})}_isClosed(){return this.state===ir.closed}_isJoined(){return this.state===ir.joined}_isJoining(){return this.state===ir.joining}_isLeaving(){return this.state===ir.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&nM.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jr.close,{},e)}_onError(e){this._on(Jr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ir.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=x3(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=x3(e.columns,e.old_record)),t}}const Iee=()=>{},kee=typeof WebSocket<"u",Dee=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jee{constructor(e,t){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=See,this.params={},this.timeout=Fj,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Iee,this.conn=null,this.sendBuffer=[],this.serializer=new Tee,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>La(()=>Promise.resolve().then(()=>pd),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${_b.websocket}`,this.httpEndpoint=Bj(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(i=t==null?void 0:t.params)===null||i===void 0?void 0:i.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Uj(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(kee){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Oee(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),La(()=>import("./browser-d0d57407.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Eee}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ku.connecting:return xl.Connecting;case ku.open:return xl.Open;case ku.closing:return xl.Closing;default:return xl.Closed}}isConnected(){return this.connectionState()===xl.Open}channel(e,t={config:{}}){const i=new nM(`realtime:${e}`,t,this);return this.channels.push(i),i}push(e){const{topic:t,event:i,payload:r,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${i} (${s})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let i=null;try{i=JSON.parse(atob(t.split(".")[1]))}catch{}if(i&&i.exp&&!(Math.floor(Date.now()/1e3)-i.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`);this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(Jr.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Mee,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:r,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${r} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(r,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${i}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([Dee],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}}class Oee{constructor(e,t,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ku.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}}class iM extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Wn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Fee extends iM{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class bb extends iM{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Uee=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(p){o(p)}}function l(u){try{c(i.throw(u))}catch(p){o(p)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Vj=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>La(()=>Promise.resolve().then(()=>pd),void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},zee=()=>Uee(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield La(()=>Promise.resolve().then(()=>pd),void 0)).Response:Response}),Sb=n=>{if(Array.isArray(n))return n.map(t=>Sb(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const r=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=Sb(i)}),e};var rc=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(p){o(p)}}function l(u){try{c(i.throw(u))}catch(p){o(p)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const X1=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Bee=(n,e,t)=>rc(void 0,void 0,void 0,function*(){const i=yield zee();n instanceof i&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{e(new Fee(X1(r),n.status||500))}).catch(r=>{e(new bb(X1(r),r))}):e(new bb(X1(n),n))}),Vee=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i&&(r.body=JSON.stringify(i)),Object.assign(Object.assign({},r),t))};function mp(n,e,t,i,r,s){return rc(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Vee(e,i,r,s)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Bee(l,a,i))})})}function K0(n,e,t,i){return rc(this,void 0,void 0,function*(){return mp(n,"GET",e,t,i)})}function Qo(n,e,t,i,r){return rc(this,void 0,void 0,function*(){return mp(n,"POST",e,i,r,t)})}function Hee(n,e,t,i,r){return rc(this,void 0,void 0,function*(){return mp(n,"PUT",e,i,r,t)})}function Gee(n,e,t,i){return rc(this,void 0,void 0,function*(){return mp(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function Hj(n,e,t,i,r){return rc(this,void 0,void 0,function*(){return mp(n,"DELETE",e,i,r,t)})}var Fi=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(p){o(p)}}function l(u){try{c(i.throw(u))}catch(p){o(p)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Wee={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},S3={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $ee{constructor(e,t={},i,r){this.url=e,this.headers=t,this.bucketId=i,this.fetch=Vj(r)}uploadOrUpdate(e,t,i,r){return Fi(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},S3),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),p=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield p.json();return p.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(s){if(Wn(s))return{data:null,error:s};throw s}})}upload(e,t,i){return Fi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,r){return Fi(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:S3.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const p=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),m=yield p.json();return p.ok?{data:{path:s,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(Wn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Fi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const s=yield Qo(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new iM("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(i){if(Wn(i))return{data:null,error:i};throw i}})}update(e,t,i){return Fi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return Fi(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Wn(r))return{data:null,error:r};throw r}})}copy(e,t,i){return Fi(this,void 0,void 0,function*(){try{return{data:{path:(yield Qo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Wn(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,i){return Fi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield Qo(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(r){if(Wn(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,i){return Fi(this,void 0,void 0,function*(){try{const r=yield Qo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(r){if(Wn(r))return{data:null,error:r};throw r}})}download(e,t){return Fi(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield K0(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Wn(a))return{data:null,error:a};throw a}})}info(e){return Fi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield K0(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Sb(i),error:null}}catch(i){if(Wn(i))return{data:null,error:i};throw i}})}exists(e){return Fi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Gee(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Wn(i)&&i instanceof bb){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${c}`)}}}remove(e){return Fi(this,void 0,void 0,function*(){try{return{data:yield Hj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Wn(t))return{data:null,error:t};throw t}})}list(e,t,i){return Fi(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Wee),t),{prefix:e||""});return{data:yield Qo(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(Wn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Xee="2.7.1",qee={"X-Client-Info":`storage-js/${Xee}`};var $c=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(p){o(p)}}function l(u){try{c(i.throw(u))}catch(p){o(p)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Yee{constructor(e,t={},i){this.url=e,this.headers=Object.assign(Object.assign({},qee),t),this.fetch=Vj(i)}listBuckets(){return $c(this,void 0,void 0,function*(){try{return{data:yield K0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Wn(e))return{data:null,error:e};throw e}})}getBucket(e){return $c(this,void 0,void 0,function*(){try{return{data:yield K0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Wn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return $c(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Wn(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return $c(this,void 0,void 0,function*(){try{return{data:yield Hee(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Wn(i))return{data:null,error:i};throw i}})}emptyBucket(e){return $c(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Wn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return $c(this,void 0,void 0,function*(){try{return{data:yield Hj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Wn(t))return{data:null,error:t};throw t}})}}class Kee extends Yee{constructor(e,t={},i){super(e,t,i)}from(e){return new $ee(this.url,this.headers,e,this.fetch)}}const Zee="2.49.4";let wh="";typeof Deno<"u"?wh="deno":typeof document<"u"?wh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wh="react-native":wh="node";const Jee={"X-Client-Info":`supabase-js-${wh}/${Zee}`},Qee={headers:Jee},ete={schema:"public"},tte={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nte={};var ite=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(p){o(p)}}function l(u){try{c(i.throw(u))}catch(p){o(p)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const rte=n=>{let e;return n?e=n:typeof fetch>"u"?e=Aj:e=fetch,(...t)=>e(...t)},ste=()=>typeof Headers>"u"?Cj:Headers,ote=(n,e,t)=>{const i=rte(t),r=ste();return(s,o)=>ite(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,Object.assign(Object.assign({},o),{headers:c}))})};var ate=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(p){o(p)}}function l(u){try{c(i.throw(u))}catch(p){o(p)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function lte(n){return n.replace(/\/$/,"")}function cte(n,e){const{db:t,auth:i,realtime:r,global:s}=n,{db:o,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),i),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),s),accessToken:()=>ate(this,void 0,void 0,function*(){return""})};return n.accessToken?u.accessToken=n.accessToken:delete u.accessToken,u}const Gj="2.69.1",Jc=30*1e3,Eb=3,q1=Eb*Jc,ute="http://localhost:9999",dte="supabase.auth.token",hte={"X-Client-Info":`gotrue-js/${Gj}`},Mb="X-Supabase-Api-Version",Wj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fte=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pte=6e5;class rM extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function gt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class mte extends rM{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function gte(n){return gt(n)&&n.name==="AuthApiError"}class $j extends rM{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ha extends rM{constructor(e,t,i,r){super(e,i,r),this.name=t,this.status=i}}class qo extends Ha{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vte(n){return gt(n)&&n.name==="AuthSessionMissingError"}class Y1 extends Ha{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pg extends Ha{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ng extends Ha{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yte(n){return gt(n)&&n.name==="AuthImplicitGrantRedirectError"}class E3 extends Ha{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tb extends Ha{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function K1(n){return gt(n)&&n.name==="AuthRetryableFetchError"}class M3 extends Ha{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class Wh extends Ha{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const T3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),A3=` 	
\r=`.split(""),xte=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<A3.length;e+=1)n[A3[e].charCodeAt(0)]=-2;for(let e=0;e<T3.length;e+=1)n[T3[e].charCodeAt(0)]=e;return n})();function Xj(n,e,t){const i=xte[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function C3(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=o=>{bte(o,i,t)};for(let o=0;o<n.length;o+=1)Xj(n.charCodeAt(o),r,s);return e.join("")}function _te(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function wte(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}_te(i,e)}}function bte(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if(!(n>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ste(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)Xj(n.charCodeAt(r),t,i);return new Uint8Array(e)}function Ete(n){const e=[];return wte(n,t=>e.push(t)),new Uint8Array(e)}function Mte(n){return Math.round(Date.now()/1e3)+n}function Tte(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const bs=()=>typeof window<"u"&&typeof document<"u",cl={tested:!1,writable:!1},$h=()=>{if(!bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cl.tested)return cl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),cl.tested=!0,cl.writable=!0}catch{cl.tested=!0,cl.writable=!1}return cl.writable};function Ate(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return t.searchParams.forEach((i,r)=>{e[r]=i}),e}const qj=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>La(()=>Promise.resolve().then(()=>pd),void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},Cte=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Yj=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Rg=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Lg=async(n,e)=>{await n.removeItem(e)};class ay{constructor(){this.promise=new ay.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ay.promiseConstructor=Promise;function Z1(n){const e=n.split(".");if(e.length!==3)throw new Wh("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!fte.test(e[i]))throw new Wh("JWT not in base64url format");return{header:JSON.parse(C3(e[0])),payload:JSON.parse(C3(e[1])),signature:Ste(e[2]),raw:{header:e[0],payload:e[1]}}}async function Pte(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Nte(n,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){r(o);return}}})()})}function Rte(n){return("0"+n.toString(16)).substr(-2)}function Lte(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let r="";for(let s=0;s<56;s++)r+=t.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,Rte).join("")}async function Ite(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function kte(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Ite(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xc(n,e,t=!1){const i=Lte();let r=i;t&&(r+="/PASSWORD_RECOVERY"),await Yj(n,`${e}-code-verifier`,r);const s=await kte(i);return[s,i===s?"plain":"s256"]}const Dte=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jte(n){const e=n.headers.get(Mb);if(!e||!e.match(Dte))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ote(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Fte(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Ute=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const gl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),zte=[502,503,504];async function P3(n){var e;if(!Cte(n))throw new Tb(gl(n),0);if(zte.includes(n.status))throw new Tb(gl(n),n.status);let t;try{t=await n.json()}catch(s){throw new $j(gl(s),s)}let i;const r=jte(n);if(r&&r.getTime()>=Wj["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new M3(gl(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new qo}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new M3(gl(t),n.status,t.weak_password.reasons);throw new mte(gl(t),n.status||500,i)}const Bte=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),t))};async function Lt(n,e,t,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[Mb]||(s[Mb]=Wj["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const o=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Vte(n,e,t+a,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function Vte(n,e,t,i,r,s){const o=Bte(e,i,r,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new Tb(gl(l),0)}if(a.ok||await P3(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await P3(l)}}function Yo(n){var e;let t=null;$te(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Mte(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function N3(n){const e=Yo(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function na(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Hte(n){return{data:n,error:null}}function Gte(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s}=n,o=Ute(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Wte(n){return n}function $te(n){return n.access_token&&n.refresh_token&&n.expires_in}var Xte=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class qte{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=qj(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Lt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(gt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await Lt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:na})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=Xte(e,["options"]),r=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await Lt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Gte,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(gt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Lt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:na})}catch(t){if(gt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,r,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Lt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:Wte});if(u.error)throw u.error;const p=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(y.split(";")[1].split("=")[1]);c[`${S}Page`]=_}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(gt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await Lt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:na})}catch(t){if(gt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Lt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:na})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){try{return await Lt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:na})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){try{const{data:t,error:i}=await Lt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:i}}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Lt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(gt(t))return{data:null,error:t};throw t}}}const Yte={getItem:n=>$h()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{$h()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{$h()&&globalThis.localStorage.removeItem(n)}};function R3(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Kte(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qc={debug:!!(globalThis&&$h()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Kj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Zte extends Kj{}async function Jte(n,e,t){qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),qc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Zte(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(qc.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Kte();const Qte={url:ute,storageKey:dte,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hte,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function L3(n,e,t){return await t()}class Df{constructor(e){var t,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Df.nextInstanceID,Df.nextInstanceID+=1,this.instanceID>0&&bs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Qte),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new qte({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=qj(r.fetch),this.lock=r.lock||L3,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:bs()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Jte:this.lock=L3,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:$h()?this.storage=Yte:(this.memoryStorage={},this.storage=R3(this.memoryStorage)):(this.memoryStorage={},this.storage=R3(this.memoryStorage)),bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gj}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Ate(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),bs()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(t,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),yte(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return gt(t)?{error:t}:{error:new $j("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,r;try{const s=await Lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Yo}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(gt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,i,r;try{let s;if("email"in e){const{email:u,password:p,options:m}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Xc(this.storage,this.storageKey)),s=await Lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:p,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:y},xform:Yo})}else if("phone"in e){const{phone:u,password:p,options:m}=e;s=await Lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:p,data:(i=m==null?void 0:m.data)!==null&&i!==void 0?i:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Yo})}else throw new Pg("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(gt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:N3})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:N3})}else throw new Pg("You must provide either an email or phone number and a password");const{data:i,error:r}=t;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Y1}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Rg(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(t??"").split("/");try{const{data:s,error:o}=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Yo});if(await Lg(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Y1}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:o})}catch(s){if(gt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:i,token:r,access_token:s,nonce:o}=e,a=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Yo}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Y1}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,r,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Xc(this.storage,this.storageKey));const{error:p}=await Lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Pg("You must provide either an email or phone number.")}catch(a){if(gt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,i;try{let r,s;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:a}=await Lt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Yo});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(gt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,i,r;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Xc(this.storage,this.storageKey)),await Lt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Hte})}catch(s){if(gt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new qo;const{error:r}=await Lt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(gt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:s}=e,{error:o}=await Lt(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:o,error:a}=await Lt(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Pg("You must provide either an email or phone number and a type")}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Rg(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<q1:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:na}):await this._useSession(async t=>{var i,r,s;const{data:o,error:a}=t;if(a)throw a;return!(!((i=o.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qo}:await Lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:na})})}catch(t){if(gt(t))return vte(t)&&(await this._removeSession(),await Lg(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new qo;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Xc(this.storage,this.storageKey));const{data:c,error:u}=await Lt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:na});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qo;const t=Date.now()/1e3;let i=t,r=!0,s=null;const{payload:o}=Z1(e.access_token);if(o.exp&&(i=o.exp,r=i<=t),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(gt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(i=o.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new qo;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!bs())throw new Ng("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ng(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new E3("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ng("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new E3("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Ng("No session defined in URL");const u=Math.round(Date.now()/1e3),p=parseInt(a);let m=u+p;l&&(m=parseInt(l));const g=m-u;g*1e3<=Jc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const y=m-p;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,u);const{data:_,error:S}=await this._getUser(s);if(S)throw S;const v={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:p,expires_at:m,refresh_token:o,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(i){if(gt(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Rg(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return{error:s};const o=(i=r.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(gte(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Lg(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Tte(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,r;try{const{data:{session:s},error:o}=t;if(o)throw o;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await Xc(this.storage,this.storageKey,!0));try{return await Lt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(gt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(gt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:i,error:r}=await this._useSession(async s=>{var o,a,l,c,u;const{data:p,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Lt(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return bs()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(gt(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:o}=t;if(o)throw o;return await Lt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await Nte(async r=>(r>0&&await Pte(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Lt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Yo})),(r,s)=>{const o=200*Math.pow(2,r);return s&&K1(s)&&Date.now()+o-i<Jc})}catch(i){if(this._debug(t,"error",i),gt(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),bs()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const i=await Rg(this.storage,this.storageKey);if(this._debug(t,"session from storage",i),!this._isValidSession(i)){this._debug(t,"session is not valid"),i!==null&&await this._removeSession();return}const r=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<q1;if(this._debug(t,`session has${r?"":" not"} expired with margin of ${q1}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),K1(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(t,"error",i),console.error(i);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new qo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ay;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new qo;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(r,"error",s),gt(s)){const o={session:null,error:s};return K1(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Yj(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Lg(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&bs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/Jc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Jc}ms, refresh threshold is ${Eb} ticks`),r<=Eb&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Kj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const r=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,o]=await Xc(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;return s?{data:null,error:s}:await Lt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await Lt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await Lt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(gt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;return s?{data:null,error:s}:await Lt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(gt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const i=(e==null?void 0:e.factors)||[],r=i.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=i.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:i,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Z1(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((i=(t=r.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(o=>o.kid===e);if(i||(i=this.jwks.keys.find(o=>o.kid===e),i&&this.jwks_cached_at+pte>Date.now()))return i;const{data:r,error:s}=await Lt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!r.keys||r.keys.length===0)throw new Wh("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),i=r.keys.find(o=>o.kid===e),!i)throw new Wh("No matching signing key found in JWKS");return i}async getClaims(e,t={keys:[]}){try{let i=e;if(!i){const{data:g,error:y}=await this.getSession();if(y||!g.session)return{data:null,error:y};i=g.session.access_token}const{header:r,payload:s,signature:o,raw:{header:a,payload:l}}=Z1(i);if(Ote(s.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(i);if(g)throw g;return{data:{claims:s,header:r,signature:o},error:null}}const c=Fte(r.alg),u=await this.fetchJwk(r.kid,t),p=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,p,o,Ete(`${a}.${l}`)))throw new Wh("Invalid JWT signature");return{data:{claims:s,header:r,signature:o},error:null}}catch(i){if(gt(i))return{data:null,error:i};throw i}}}Df.nextInstanceID=0;const ene=Df;class tne extends ene{constructor(e){super(e)}}var nne=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(p){o(p)}}function l(u){try{c(i.throw(u))}catch(p){o(p)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class ine{constructor(e,t,i){var r,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=lte(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:ete,realtime:nte,auth:Object.assign(Object.assign({},tte),{storageKey:l}),global:Qee},u=cte(i??{},c);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=ote(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new wee(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new ZQ(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Kee(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return nne(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,storageKey:s,flowType:o,lock:a,debug:l},c,u){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tne({url:this.authUrl,headers:Object.assign(Object.assign({},p),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new jee(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rne=(n,e,t)=>new ine(n,e,t),sne="https://pptkdbygswenchxurwkz.supabase.co",one="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBwdGtkYnlnc3dlbmNoeHVyd2t6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUxNjA0MzIsImV4cCI6MjA2MDczNjQzMn0.0-YDd4GPK8XzqMeeCIQbTJI6p7BIW4ccjGVMz3mW1dw",jr=rne(sne,one);function ane(){const[n,e]=N.useState([]),[t,i]=N.useState(!0),[r,s]=N.useState(null);return N.useEffect(()=>{async function o(){try{i(!0);const{data:a,error:l}=await jr.from("municipios").select("id, nombre").order("nombre");if(l)throw l;const{data:c,error:u}=await jr.from("distritos").select(`
            id,
            nombre,
            municipio_id,
            municipios (
              nombre
            )
          `).order("nombre");if(u)throw u;const p=[...a.map(m=>({id:m.id,nombre:m.nombre,tipo:"municipio"})),...c.map(m=>{var g;return{id:m.id,nombre:m.nombre,tipo:"distrito",municipio_id:m.municipio_id,municipio:(g=m.municipios)==null?void 0:g.nombre}})];e(p)}catch(a){console.error("Error fetching locations:",a),s(a.message)}finally{i(!1)}}o()},[]),{locations:n,loading:t,error:r}}function lne(){const n=js(),{locations:e,loading:t}=ane(),[i,r]=N.useState(""),s=i.trim()?e.filter(a=>a.nombre.toLowerCase().includes(i.toLowerCase())||a.tipo==="distrito"&&a.municipio.toLowerCase().includes(i.toLowerCase())).slice(0,5):[],o=a=>{n(`/propiedades?zonaId=${a.id}&zonaNombre=${encodeURIComponent(a.nombre)}&zonaTipo=${a.tipo}`),window.scrollTo({top:0,behavior:"smooth"}),r("")};return f.jsx("div",{className:"mx-auto max-w-3xl px-4 py-6",children:f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",value:i,onChange:a=>r(a.target.value),placeholder:"¿Dónde quieres vivir?",className:"w-full rounded-full bg-white/80 backdrop-blur-sm px-6 py-4 text-lg placeholder-gray-600 shadow-lg focus:outline-none focus:ring-4 focus:ring-gold",autoComplete:"off"}),f.jsx("button",{onClick:()=>s[0]&&o(s[0]),className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-gold p-3 shadow-lg hover:opacity-90 focus:outline-none focus:ring-4 focus:ring-gold",children:f.jsx(FS,{className:"h-5 w-5 text-white"})}),s.length>0&&f.jsx("ul",{className:"absolute z-20 mt-2 w-full rounded-xl bg-white shadow-lg border border-gold/30",children:s.map((a,l)=>f.jsx("li",{onClick:()=>o(a),className:"cursor-pointer px-6 py-3 hover:bg-gold/10 transition",children:a.tipo==="distrito"?`${a.nombre}, ${a.municipio}`:a.nombre},l))}),t&&f.jsx("div",{className:"absolute right-10 top-1/2 -translate-y-1/2",children:f.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-4 border-gold border-t-transparent"})})]})})}var sM={},Ab={exports:{}};(function(n,e){(function(t,i){i(e)})(cr,function(t){var i=function(){return i=Object.assign||function(s){for(var o,a=1,l=arguments.length;a<l;a++)for(var c in o=arguments[a])Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c]);return s},i.apply(this,arguments)},r=function(){function s(o,a,l){var c=this;this.endVal=a,this.options=l,this.version="2.8.1",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(u){c.startTime||(c.startTime=u);var p=u-c.startTime;c.remaining=c.duration-p,c.useEasing?c.countDown?c.frameVal=c.startVal-c.easingFn(p,0,c.startVal-c.endVal,c.duration):c.frameVal=c.easingFn(p,c.startVal,c.endVal-c.startVal,c.duration):c.frameVal=c.startVal+(c.endVal-c.startVal)*(p/c.duration);var m=c.countDown?c.frameVal<c.endVal:c.frameVal>c.endVal;c.frameVal=m?c.endVal:c.frameVal,c.frameVal=Number(c.frameVal.toFixed(c.options.decimalPlaces)),c.printValue(c.frameVal),p<c.duration?c.rAF=requestAnimationFrame(c.count):c.finalEndVal!==null?c.update(c.finalEndVal):c.options.onCompleteCallback&&c.options.onCompleteCallback()},this.formatNumber=function(u){var p,m,g,y,_=u<0?"-":"";p=Math.abs(u).toFixed(c.options.decimalPlaces);var S=(p+="").split(".");if(m=S[0],g=S.length>1?c.options.decimal+S[1]:"",c.options.useGrouping){y="";for(var v=3,b=0,w=0,M=m.length;w<M;++w)c.options.useIndianSeparators&&w===4&&(v=2,b=1),w!==0&&b%v==0&&(y=c.options.separator+y),b++,y=m[M-w-1]+y;m=y}return c.options.numerals&&c.options.numerals.length&&(m=m.replace(/[0-9]/g,function(A){return c.options.numerals[+A]}),g=g.replace(/[0-9]/g,function(A){return c.options.numerals[+A]})),_+c.options.prefix+m+g+c.options.suffix},this.easeOutExpo=function(u,p,m,g){return m*(1-Math.pow(2,-10*u/g))*1024/1023+p},this.options=i(i({},this.defaults),l),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(a),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof o=="string"?document.getElementById(o):o,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,o):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return c.handleScroll(c)}),window.onscroll=function(){window.onScrollFns.forEach(function(u){return u()})},this.handleScroll(this)))}return s.prototype.handleScroll=function(o){if(o&&window&&!o.once){var a=window.innerHeight+window.scrollY,l=o.el.getBoundingClientRect(),c=l.top+window.pageYOffset,u=l.top+l.height+window.pageYOffset;u<a&&u>window.scrollY&&o.paused?(o.paused=!1,setTimeout(function(){return o.start()},o.options.scrollSpyDelay),o.options.scrollSpyOnce&&(o.once=!0)):(window.scrollY>u||c>a)&&!o.paused&&o.reset()}},s.prototype.determineDirectionAndSmartEasing=function(){var o=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>o;var a=o-this.startVal;if(Math.abs(a)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=o;var l=this.countDown?1:-1;this.endVal=o+l*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=o,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},s.prototype.start=function(o){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),o&&(this.options.onCompleteCallback=o),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},s.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},s.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},s.prototype.update=function(o){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(o),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},s.prototype.printValue=function(o){var a;if(this.el){var l=this.formattingFn(o);!((a=this.options.plugin)===null||a===void 0)&&a.render?this.options.plugin.render(this.el,l):this.el.tagName==="INPUT"?this.el.value=l:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=l:this.el.innerHTML=l}},s.prototype.ensureNumber=function(o){return typeof o=="number"&&!isNaN(o)},s.prototype.validateValue=function(o){var a=Number(o);return this.ensureNumber(a)?a:(this.error="[CountUp] invalid start or end value: ".concat(o),null)},s.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},s}();t.CountUp=r})})(Ab,Ab.exports);var cne=Ab.exports;Object.defineProperty(sM,"__esModule",{value:!0});var Xn=N,une=cne;function dne(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function I3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Z0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I3(Object(t),!0).forEach(function(i){pne(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I3(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function hne(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fne(n){var e=hne(n,"string");return typeof e=="symbol"?e:String(e)}function pne(n,e,t){return e=fne(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cb(){return Cb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Cb.apply(this,arguments)}function mne(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Zj(n,e){if(n==null)return{};var t=mne(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function gne(n,e){return vne(n)||dne(n,e)||yne(n,e)||xne()}function vne(n){if(Array.isArray(n))return n}function yne(n,e){if(n){if(typeof n=="string")return k3(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k3(n,e)}}function k3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function xne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _ne=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Xn.useLayoutEffect:Xn.useEffect;function Kr(n){var e=Xn.useRef(n);return _ne(function(){e.current=n}),Xn.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current.apply(void 0,i)},[])}var wne=function(e,t){var i=t.decimal,r=t.decimals,s=t.duration,o=t.easingFn,a=t.end,l=t.formattingFn,c=t.numerals,u=t.prefix,p=t.separator,m=t.start,g=t.suffix,y=t.useEasing,_=t.useGrouping,S=t.useIndianSeparators,v=t.enableScrollSpy,b=t.scrollSpyDelay,w=t.scrollSpyOnce,M=t.plugin;return new une.CountUp(e,a,{startVal:m,duration:s,decimal:i,decimalPlaces:r,easingFn:o,formattingFn:l,numerals:c,separator:p,prefix:u,suffix:g,plugin:M,useEasing:y,useIndianSeparators:S,useGrouping:_,enableScrollSpy:v,scrollSpyDelay:b,scrollSpyOnce:w})},bne=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],Sne={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},Jj=function(e){var t=Object.fromEntries(Object.entries(e).filter(function(C){var k=gne(C,2),V=k[1];return V!==void 0})),i=Xn.useMemo(function(){return Z0(Z0({},Sne),t)},[e]),r=i.ref,s=i.startOnMount,o=i.enableReinitialize,a=i.delay,l=i.onEnd,c=i.onStart,u=i.onPauseResume,p=i.onReset,m=i.onUpdate,g=Zj(i,bne),y=Xn.useRef(),_=Xn.useRef(),S=Xn.useRef(!1),v=Kr(function(){return wne(typeof r=="string"?r:r.current,g)}),b=Kr(function(C){var k=y.current;if(k&&!C)return k;var V=v();return y.current=V,V}),w=Kr(function(){var C=function(){return b(!0).start(function(){l==null||l({pauseResume:M,reset:A,start:L,update:P})})};a&&a>0?_.current=setTimeout(C,a*1e3):C(),c==null||c({pauseResume:M,reset:A,update:P})}),M=Kr(function(){b().pauseResume(),u==null||u({reset:A,start:L,update:P})}),A=Kr(function(){b().el&&(_.current&&clearTimeout(_.current),b().reset(),p==null||p({pauseResume:M,start:L,update:P}))}),P=Kr(function(C){b().update(C),m==null||m({pauseResume:M,reset:A,start:L})}),L=Kr(function(){A(),w()}),I=Kr(function(C){s&&(C&&A(),w())});return Xn.useEffect(function(){S.current?o&&I(!0):(S.current=!0,I())},[o,S,I,a,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),Xn.useEffect(function(){return function(){A()}},[A]),{start:L,pauseResume:M,reset:A,update:P,getCountUp:b}},Ene=["className","redraw","containerProps","children","style"],Mne=function(e){var t=e.className,i=e.redraw,r=e.containerProps,s=e.children,o=e.style,a=Zj(e,Ene),l=Xn.useRef(null),c=Xn.useRef(!1),u=Jj(Z0(Z0({},a),{},{ref:l,startOnMount:typeof s!="function"||e.delay===0,enableReinitialize:!1})),p=u.start,m=u.reset,g=u.update,y=u.pauseResume,_=u.getCountUp,S=Kr(function(){p()}),v=Kr(function(M){e.preserveValue||m(),g(M)}),b=Kr(function(){if(typeof e.children=="function"&&!(l.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}_()});Xn.useEffect(function(){b()},[b]),Xn.useEffect(function(){c.current&&v(e.end)},[e.end,v]);var w=i&&e;return Xn.useEffect(function(){i&&c.current&&S()},[S,i,w]),Xn.useEffect(function(){!i&&c.current&&S()},[S,i,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),Xn.useEffect(function(){c.current=!0},[]),typeof s=="function"?s({countUpRef:l,start:p,reset:m,update:g,pauseResume:y,getCountUp:_}):Xn.createElement("span",Cb({className:t,ref:l,style:o},r),typeof e.start<"u"?_().formattingFn(e.start):"")},Tne=sM.default=Mne;sM.useCountUp=Jj;const Ane=[{id:1,title:"+1.200",value:1200,suffix:"",description:"Clientes satisfechos",icon:Oa,color:"from-[#D4AF37] to-[#FFD700]",delay:0},{id:2,title:"+250M €",value:250,suffix:"M €",description:"Transaccionados",icon:Xf,color:"from-[#FFD700] to-[#D4AF37]",delay:.2},{id:3,title:"95%",value:95,suffix:"%",description:"Ventas cerradas",icon:wv,color:"from-[#D4AF37] to-[#FFD700]",delay:.4}];function Cne(){const n=N.useRef(null),e=lE(n,{once:!0,threshold:.1});return f.jsxs("div",{ref:n,className:"relative",children:[f.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[f.jsx("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-[#D4AF37]/10 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute -bottom-20 -right-20 w-40 h-40 bg-[#FFD700]/10 rounded-full blur-3xl"})]}),f.jsx("div",{className:"relative grid gap-8 md:grid-cols-3",children:Ane.map(t=>f.jsxs(le.div,{initial:{opacity:0,y:50,rotateX:-15},animate:e?{opacity:1,y:0,rotateX:0}:{},transition:{duration:.8,delay:t.delay,type:"spring",stiffness:100},whileHover:{scale:1.05,rotateY:5,z:50},className:"group relative",style:{transformStyle:"preserve-3d",perspective:1e3},children:[f.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-white/5 backdrop-blur-xl border border-white/10 p-8 transition-all duration-300 group-hover:bg-white/10 group-hover:border-[#D4AF37]/30 group-hover:shadow-2xl group-hover:shadow-[#D4AF37]/20",children:[f.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-br ${t.color}`,style:{filter:"blur(40px)"}}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(le.div,{whileHover:{rotate:360},transition:{duration:.8},className:`mb-6 inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br ${t.color} shadow-lg`,children:f.jsx(t.icon,{className:"h-8 w-8 text-black"})}),f.jsx("h3",{className:"mb-2 text-4xl md:text-5xl font-bold",children:e?f.jsxs(f.Fragment,{children:["+",f.jsx(Tne,{start:0,end:t.value,duration:2.5,separator:",",decimals:(t.suffix==="%",0)}),f.jsx("span",{className:"text-[#D4AF37]",children:t.suffix})]}):f.jsxs("span",{className:"text-white/20",children:["0",t.suffix]})}),f.jsx("p",{className:"text-white/70 group-hover:text-white/90 transition-colors",children:t.description}),f.jsx(le.div,{className:"absolute -top-10 -right-10 w-20 h-20 bg-white/20 rounded-full blur-xl opacity-0 group-hover:opacity-100",animate:e?{scale:[1,1.5,1],opacity:[0,.5,0]}:{},transition:{duration:2,repeat:1/0,delay:t.delay}})]}),f.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 opacity-5",children:f.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[f.jsx("pattern",{id:`pattern-${t.id}`,x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:f.jsx("circle",{cx:"10",cy:"10",r:"2",fill:"currentColor"})}),f.jsx("rect",{width:"100",height:"100",fill:`url(#pattern-${t.id})`})]})})]}),f.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-[#D4AF37]/20 to-[#FFD700]/20 transform translate-y-4 -translate-x-4 -z-10 opacity-0 group-hover:opacity-50 transition-all duration-300 blur-xl"})]},t.id))}),f.jsx(le.div,{initial:{opacity:0},animate:e?{opacity:1}:{},transition:{delay:.8},className:"mt-12 text-center",children:f.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-[#D4AF37]/10 backdrop-blur-md rounded-full border border-[#D4AF37]/20",children:[f.jsx(Ea,{className:"w-5 h-5 text-[#D4AF37]"}),f.jsx("span",{className:"text-white/80",children:"Optimizamos costes con IA para ofrecerte las mejores comisiones"})]})})]})}var Qj={};Object.defineProperty(Qj,"__esModule",{value:!0});var lh=N;function D3(n){return Array.prototype.slice.call(n)}function j3(n,e){var t=Math.floor(n);return t===e||t+1===e?n:e}function O3(){return Date.now()}function J1(n,e,t){if(e="data-keen-slider-"+e,t===null)return n.removeAttribute(e);n.setAttribute(e,t||"")}function J0(n,e){return e=e||document,typeof n=="function"&&(n=n(e)),Array.isArray(n)?n:typeof n=="string"?D3(e.querySelectorAll(n)):n instanceof HTMLElement?[n]:n instanceof NodeList?D3(n):[]}function ch(n){n.raw&&(n=n.raw),n.cancelable&&!n.defaultPrevented&&n.preventDefault()}function uh(n){n.raw&&(n=n.raw),n.stopPropagation&&n.stopPropagation()}function eO(){var n=[];return{add:function(e,t,i,r){e.addListener?e.addListener(i):e.addEventListener(t,i,r),n.push([e,t,i,r])},input:function(e,t,i,r){this.add(e,t,function(s){return function(o){o.nativeEvent&&(o=o.nativeEvent);var a=o.changedTouches||[],l=o.targetTouches||[],c=o.detail&&o.detail.x?o.detail:null;return s({id:c?c.identifier?c.identifier:"i":l[0]?l[0]?l[0].identifier:"e":"d",idChanged:c?c.identifier?c.identifier:"i":a[0]?a[0]?a[0].identifier:"e":"d",raw:o,x:c&&c.x?c.x:l[0]?l[0].screenX:c?c.x:o.pageX,y:c&&c.y?c.y:l[0]?l[0].screenY:c?c.y:o.pageY})}}(i),r)},purge:function(){n.forEach(function(e){e[0].removeListener?e[0].removeListener(e[2]):e[0].removeEventListener(e[1],e[2],e[3])}),n=[]}}}function oM(n,e,t){return Math.min(Math.max(n,e),t)}function ts(n){return(n>0?1:0)-(n<0?1:0)||+n}function F3(n){var e=n.getBoundingClientRect();return{height:j3(e.height,n.offsetHeight),width:j3(e.width,n.offsetWidth)}}function Ci(n,e,t,i){var r=n&&n[e];return r==null?t:i&&typeof r=="function"?r():r}function Mr(n){return Math.round(1e6*n)/1e6}function tO(n,e){if(n===e)return!0;var t=typeof n;if(t!==typeof e)return!1;if(t!=="object"||n===null||e===null)return t==="function"&&n.toString()===e.toString();if(n.length!==e.length||Object.getOwnPropertyNames(n).length!==Object.getOwnPropertyNames(e).length)return!1;for(var i in n)if(!tO(n[i],e[i]))return!1;return!0}var wu=function(){return wu=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},wu.apply(this,arguments)};function nO(n,e,t){if(t||arguments.length===2)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function Pne(n){var e,t,i,r,s,o;function a(m){o||(o=m),l(!0);var g=m-o;g>i&&(g=i);var y=r[t];if(y[3]<g)return t++,a(m);var _=y[2],S=y[4],v=y[0],b=y[1]*(0,y[5])(S===0?1:(g-_)/S);if(b&&n.track.to(v+b),g<i)return u();o=null,l(!1),c(null),n.emit("animationEnded")}function l(m){e.active=m}function c(m){e.targetIdx=m}function u(){var m;m=a,s=window.requestAnimationFrame(m)}function p(){var m;m=s,window.cancelAnimationFrame(m),l(!1),c(null),o&&n.emit("animationStopped"),o=null}return e={active:!1,start:function(m){if(p(),n.track.details){var g=0,y=n.track.details.position;t=0,i=0,r=m.map(function(_){var S,v=Number(y),b=(S=_.earlyExit)!==null&&S!==void 0?S:_.duration,w=_.easing,M=_.distance*w(b/_.duration)||0;y+=M;var A=i;return i+=b,g+=M,[v,_.distance,A,i,_.duration,w]}),c(n.track.distToIdx(g)),u(),n.emit("animationStarted")}},stop:p,targetIdx:null}}function Nne(n){var e,t,i,r,s,o,a,l,c,u,p,m,g,y,_=1/0,S=[],v=null,b=0;function w(U){q(b+U)}function M(U){var $=A(b+U).abs;return I($)?$:null}function A(U){var $=Math.floor(Math.abs(Mr(U/t))),X=Mr((U%t+t)%t);X===t&&(X=0);var ee=ts(U),D=a.indexOf(nO([],a,!0).reduce(function(H,Z){return Math.abs(Z-X)<Math.abs(H-X)?Z:H})),O=D;return ee<0&&$++,D===o&&(O=0,$+=ee>0?1:-1),{abs:O+$*o*ee,origin:D,rel:O}}function P(U,$,X){var ee;if($||!k())return L(U,X);if(!I(U))return null;var D=A(X??b),O=D.abs,H=U-D.rel,Z=O+H;ee=L(Z);var te=L(Z-o*ts(H));return(te!==null&&Math.abs(te)<Math.abs(ee)||ee===null)&&(ee=te),Mr(ee)}function L(U,$){if($==null&&($=Mr(b)),!I(U)||U===null)return null;U=Math.round(U);var X=A($),ee=X.abs,D=X.rel,O=X.origin,H=V(U),Z=($%t+t)%t,te=a[O],Q=Math.floor((U-(ee-D))/o)*t;return Mr(te-Z-te+a[H]+Q+(O===o?t:0))}function I(U){return C(U)===U}function C(U){return oM(U,c,u)}function k(){return r.loop}function V(U){return(U%o+o)%o}function q(U){var $;$=U-b,S.push({distance:$,timestamp:O3()}),S.length>6&&(S=S.slice(-6)),b=Mr(U);var X=B().abs;if(X!==v){var ee=v!==null;v=X,ee&&n.emit("slideChanged")}}function B(U){var $=U?null:function(){if(o){var X=k(),ee=X?(b%t+t)%t:b,D=(X?b%t:b)-s[0][2],O=0-(D<0&&X?t-Math.abs(D):D),H=0,Z=A(b),te=Z.abs,Q=Z.rel,se=s[Q][2],ve=s.map(function(ge,K){var je=O+H;(je<0-ge[0]||je>1)&&(je+=(Math.abs(je)>t-1&&X?t:0)*ts(-je));var Xe=K-Q,Ee=ts(Xe),Pe=Xe+te;X&&(Ee===-1&&je>se&&(Pe+=o),Ee===1&&je<se&&(Pe-=o),p!==null&&Pe<p&&(je+=t),m!==null&&Pe>m&&(je-=t));var _e=je+ge[0]+ge[1],de=Math.max(je>=0&&_e<=1?1:_e<0||je>1?0:je<0?Math.min(1,(ge[0]+je)/ge[0]):(1-je)/ge[0],0);return H+=ge[0]+ge[1],{abs:Pe,distance:r.rtl?-1*je+1-ge[0]:je,portion:de,size:ge[0]}});return te=C(te),Q=V(te),{abs:C(te),length:i,max:y,maxIdx:u,min:g,minIdx:c,position:b,progress:X?ee/t:b/i,rel:Q,slides:ve,slidesLength:t}}}();return e.details=$,n.emit("detailsChanged"),$}return e={absToRel:V,add:w,details:null,distToIdx:M,idxToDist:P,init:function(U){if(function(){if(r=n.options,s=(r.trackConfig||[]).map(function(D){return[Ci(D,"size",1),Ci(D,"spacing",0),Ci(D,"origin",0)]}),o=s.length){t=Mr(s.reduce(function(D,O){return D+O[0]+O[1]},0));var X,ee=o-1;i=Mr(t+s[0][2]-s[ee][0]-s[ee][2]-s[ee][1]),a=s.reduce(function(D,O){if(!D)return[0];var H=s[D.length-1],Z=D[D.length-1]+(H[0]+H[2])+H[1];return Z-=O[2],D[D.length-1]>Z&&(Z=D[D.length-1]),Z=Mr(Z),D.push(Z),(!X||X<Z)&&(l=D.length-1),X=Z,D},null),i===0&&(l=0),a.push(Mr(t))}}(),!o)return B(!0);var $;(function(){var X=n.options.range,ee=n.options.loop;p=c=ee?Ci(ee,"min",-1/0):0,m=u=ee?Ci(ee,"max",_):l;var D=Ci(X,"min",null),O=Ci(X,"max",null);D!==null&&(c=D),O!==null&&(u=O),g=c===-1/0?c:n.track.idxToDist(c||0,!0,0),y=u===_?u:P(u,!0,0),O===null&&(m=u),Ci(X,"align",!1)&&u!==_&&s[V(u)][2]===0&&(y-=1-s[V(u)][0],u=M(y-b)),g=Mr(g),y=Mr(y)})(),$=U,Number($)===$?w(L(C(U))):B()},to:q,velocity:function(){var U=O3(),$=S.reduce(function(X,ee){var D=ee.distance,O=ee.timestamp;return U-O>200||(ts(D)!==ts(X.distance)&&X.distance&&(X={distance:0,lastTimestamp:0,time:0}),X.time&&(X.distance+=D),X.lastTimestamp&&(X.time+=O-X.lastTimestamp),X.lastTimestamp=O),X},{distance:0,lastTimestamp:0,time:0});return $.distance/$.time||0}}}function Rne(n){var e,t,i,r,s,o,a,l;function c(v){return 2*v}function u(v){return oM(v,a,l)}function p(v){return 1-Math.pow(1-v,3)}function m(){return i?n.track.velocity():0}function g(){S();var v=n.options.mode==="free-snap",b=n.track,w=m();r=ts(w);var M=n.track.details,A=[];if(w||!v){var P=y(w),L=P.dist,I=P.dur;if(I=c(I),L*=r,v){var C=b.idxToDist(b.distToIdx(L),!0);C&&(L=C)}A.push({distance:L,duration:I,easing:p});var k=M.position,V=k+L;if(V<s||V>o){var q=V<s?s-k:o-k,B=0,U=w;if(ts(q)===r){var $=Math.min(Math.abs(q)/Math.abs(L),1),X=function(O){return 1-Math.pow(1-O,1/3)}($)*I;A[0].earlyExit=X,U=w*(1-$)}else A[0].earlyExit=0,B+=q;var ee=y(U,100),D=ee.dist*r;n.options.rubberband&&(A.push({distance:D,duration:c(ee.dur),easing:p}),A.push({distance:-D+B,duration:500,easing:p}))}n.animator.start(A)}else n.moveToIdx(u(M.abs),!0,{duration:500,easing:function(O){return 1+--O*O*O*O*O}})}function y(v,b){b===void 0&&(b=1e3);var w=147e-9+(v=Math.abs(v))/b;return{dist:Math.pow(v,2)/w,dur:v/w}}function _(){var v=n.track.details;v&&(s=v.min,o=v.max,a=v.minIdx,l=v.maxIdx)}function S(){n.animator.stop()}n.on("updated",_),n.on("optionsChanged",_),n.on("created",_),n.on("dragStarted",function(){i=!1,S(),e=t=n.track.details.abs}),n.on("dragChecked",function(){i=!0}),n.on("dragEnded",function(){var v=n.options.mode;v==="snap"&&function(){var b=n.track,w=n.track.details,M=w.position,A=ts(m());(M>o||M<s)&&(A=0);var P=e+A;w.slides[b.absToRel(P)].portion===0&&(P-=A),e!==t&&(P=t),ts(b.idxToDist(P,!0))!==A&&(P+=A),P=u(P);var L=b.idxToDist(P,!0);n.animator.start([{distance:L,duration:500,easing:function(I){return 1+--I*I*I*I*I}}])}(),v!=="free"&&v!=="free-snap"||g()}),n.on("dragged",function(){t=n.track.details.abs})}function Lne(n){var e,t,i,r,s,o,a,l,c,u,p,m,g,y,_,S,v,b,w=eO();function M(B){if(o&&l===B.id){var U=I(B);if(c){if(!L(B))return P(B);u=U,c=!1,n.emit("dragChecked")}if(S)return u=U;ch(B);var $=function(ee){if(v===-1/0&&b===1/0)return ee;var D=n.track.details,O=D.length,H=D.position,Z=oM(ee,v-H,b-H);if(O===0)return 0;if(!n.options.rubberband)return Z;if(H<=b&&H>=v||H<v&&t>0||H>b&&t<0)return ee;var te=(H<v?H-v:H-b)/O,Q=r*O,se=Math.abs(te*Q),ve=Math.max(0,1-se/s*2);return ve*ve*ee}(a(u-U)/r*i);t=ts($);var X=n.track.details.position;(X>v&&X<b||X===v&&t>0||X===b&&t<0)&&uh(B),p+=$,!m&&Math.abs(p*r)>5&&(m=!0),n.track.add($),u=U,n.emit("dragged")}}function A(B){!o&&n.track.details&&n.track.details.length&&(p=0,o=!0,m=!1,c=!0,l=B.id,L(B),u=I(B),n.emit("dragStarted"))}function P(B){o&&l===B.idChanged&&(o=!1,n.emit("dragEnded"))}function L(B){var U=C(),$=U?B.y:B.x,X=U?B.x:B.y,ee=g!==void 0&&y!==void 0&&Math.abs(y-X)<=Math.abs(g-$);return g=$,y=X,ee}function I(B){return C()?B.y:B.x}function C(){return n.options.vertical}function k(){r=n.size,s=C()?window.innerHeight:window.innerWidth;var B=n.track.details;B&&(v=B.min,b=B.max)}function V(B){m&&(uh(B),ch(B))}function q(){if(w.purge(),n.options.drag&&!n.options.disabled){var B;B=n.options.dragSpeed||1,a=typeof B=="function"?B:function($){return $*B},i=n.options.rtl?-1:1,k(),e=n.container,function(){var $="data-keen-slider-clickable";J0("[".concat($,"]:not([").concat($,"=false])"),e).map(function(X){w.add(X,"dragstart",uh),w.add(X,"mousedown",uh),w.add(X,"touchstart",uh)})}(),w.add(e,"dragstart",function($){ch($)}),w.add(e,"click",V,{capture:!0}),w.input(e,"ksDragStart",A),w.input(e,"ksDrag",M),w.input(e,"ksDragEnd",P),w.input(e,"mousedown",A),w.input(e,"mousemove",M),w.input(e,"mouseleave",P),w.input(e,"mouseup",P),w.input(e,"touchstart",A,{passive:!0}),w.input(e,"touchmove",M,{passive:!1}),w.input(e,"touchend",P),w.input(e,"touchcancel",P),w.add(window,"wheel",function($){o&&ch($)});var U="data-keen-slider-scrollable";J0("[".concat(U,"]:not([").concat(U,"=false])"),n.container).map(function($){return function(X){var ee;w.input(X,"touchstart",function(D){ee=I(D),S=!0,_=!0},{passive:!0}),w.input(X,"touchmove",function(D){var O=C(),H=O?X.scrollHeight-X.clientHeight:X.scrollWidth-X.clientWidth,Z=ee-I(D),te=O?X.scrollTop:X.scrollLeft,Q=O&&X.style.overflowY==="scroll"||!O&&X.style.overflowX==="scroll";if(ee=I(D),(Z<0&&te>0||Z>0&&te<H)&&_&&Q)return S=!0;_=!1,ch(D),S=!1}),w.input(X,"touchend",function(){S=!1})}($)})}}n.on("updated",k),n.on("optionsChanged",q),n.on("created",q),n.on("destroyed",w.purge)}function Ine(n){var e,t,i=null;function r(g,y,_){n.animator.active?o(g,y,_):requestAnimationFrame(function(){return o(g,y,_)})}function s(){r(!1,!1,t)}function o(g,y,_){var S=0,v=n.size,b=n.track.details;if(b&&e){var w=b.slides;e.forEach(function(M,A){if(g)!i&&y&&l(M,null,_),c(M,null,_);else{if(!w[A])return;var P=w[A].size*v;!i&&y&&l(M,P,_),c(M,w[A].distance*v-S,_),S+=P}})}}function a(g){return n.options.renderMode==="performance"?Math.round(g):g}function l(g,y,_){var S=_?"height":"width";y!==null&&(y=a(y)+"px"),g.style["min-"+S]=y,g.style["max-"+S]=y}function c(g,y,_){if(y!==null){y=a(y);var S=_?y:0;y="translate3d(".concat(_?0:y,"px, ").concat(S,"px, 0)")}g.style.transform=y,g.style["-webkit-transform"]=y}function u(){e&&(o(!0,!0,t),e=null),n.on("detailsChanged",s,!0)}function p(){r(!1,!0,t)}function m(){u(),t=n.options.vertical,n.options.disabled||n.options.renderMode==="custom"||(i=Ci(n.options.slides,"perView",null)==="auto",n.on("detailsChanged",s),(e=n.slides).length&&p())}n.on("created",m),n.on("optionsChanged",m),n.on("beforeOptionsChanged",function(){u()}),n.on("updated",p),n.on("destroyed",u)}function kne(n,e){return function(t){var i,r,s,o,a,l=eO();function c(L){var I;J1(t.container,"reverse",(I=t.container,window.getComputedStyle(I,null).getPropertyValue("direction")!=="rtl"||L?null:"")),J1(t.container,"v",t.options.vertical&&!L?"":null),J1(t.container,"disabled",t.options.disabled&&!L?"":null)}function u(){p()&&S()}function p(){var L=null;if(o.forEach(function(C){C.matches&&(L=C.__media)}),L===i)return!1;i||t.emit("beforeOptionsChanged"),i=L;var I=L?s.breakpoints[L]:s;return t.options=wu(wu({},s),I),c(),A(),P(),b(),!0}function m(L){var I=F3(L);return(t.options.vertical?I.height:I.width)/t.size||1}function g(){return t.options.trackConfig.length}function y(L){for(var I in i=!1,s=wu(wu({},e),L),l.purge(),r=t.size,o=[],s.breakpoints||[]){var C=window.matchMedia(I);C.__media=I,o.push(C),l.add(C,"change",u)}l.add(window,"orientationchange",M),l.add(window,"resize",w),p()}function _(L){t.animator.stop();var I=t.track.details;t.track.init(L??(I?I.abs:0))}function S(L){_(L),t.emit("optionsChanged")}function v(L,I){if(L)return y(L),void S(I);A(),P();var C=g();b(),g()!==C?S(I):_(I),t.emit("updated")}function b(){var L=t.options.slides;if(typeof L=="function")return t.options.trackConfig=L(t.size,t.slides);for(var I=t.slides,C=I.length,k=typeof L=="number"?L:Ci(L,"number",C,!0),V=[],q=Ci(L,"perView",1,!0),B=Ci(L,"spacing",0,!0)/t.size||0,U=q==="auto"?B:B/q,$=Ci(L,"origin","auto"),X=0,ee=0;ee<k;ee++){var D=q==="auto"?m(I[ee]):1/q-B+U,O=$==="center"?.5-D/2:$==="auto"?0:$;V.push({origin:O,size:D,spacing:B}),X+=D}if(X+=B*(k-1),$==="auto"&&!t.options.loop&&q!==1){var H=0;V.map(function(Z){var te=X-H;return H+=Z.size+B,te>=1||(Z.origin=1-te-(X>1?0:1-X)),Z})}t.options.trackConfig=V}function w(){A();var L=t.size;t.options.disabled||L===r||(r=L,v())}function M(){w(),setTimeout(w,500),setTimeout(w,2e3)}function A(){var L=F3(t.container);t.size=(t.options.vertical?L.height:L.width)||1}function P(){t.slides=J0(t.options.selector,t.container)}t.container=(a=J0(n,document)).length?a[0]:null,t.destroy=function(){l.purge(),t.emit("destroyed"),c(!0)},t.prev=function(){t.moveToIdx(t.track.details.abs-1,!0)},t.next=function(){t.moveToIdx(t.track.details.abs+1,!0)},t.update=v,y(t.options)}}var Dne=function(n,e,t){try{return function(i,r){var s,o={};return s={emit:function(a){o[a]&&o[a].forEach(function(c){c(s)});var l=s.options&&s.options[a];l&&l(s)},moveToIdx:function(a,l,c){var u=s.track.idxToDist(a,l);if(u){var p=s.options.defaultAnimation;s.animator.start([{distance:u,duration:Ci(c||p,"duration",500),easing:Ci(c||p,"easing",function(m){return 1+--m*m*m*m*m})}])}},on:function(a,l,c){c===void 0&&(c=!1),o[a]||(o[a]=[]);var u=o[a].indexOf(l);u>-1?c&&delete o[a][u]:c||o[a].push(l)},options:i},function(){if(s.track=Nne(s),s.animator=Pne(s),r)for(var a=0,l=r;a<l.length;a++)(0,l[a])(s);s.track.init(s.options.initial||0),s.emit("created")}(),s}(e,nO([kne(n,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),Ine,Lne,Rne],t||[],!0))}catch(i){console.error(i)}},Xl=Qj.useKeenSlider=function(n,e){var t=lh.useRef(null),i=lh.useRef(!1),r=lh.useRef(n),s=lh.useCallback(function(o){o?(r.current=n,t.current=new Dne(o,n,e),i.current=!1):(t.current&&t.current.destroy&&t.current.destroy(),t.current=null)},[]);return lh.useEffect(function(){tO(r.current,n)||(r.current=n,t.current&&t.current.update(r.current))},[n]),[s,t]};const U3=[{id:1,icon:Oa,title:"Pareja casada",description:"Vende para mudarse a una casa más grande o más pequeña acorde a los cambios de la familia.",color:"from-[#D4AF37] to-[#FFD700]",delay:0},{id:2,icon:AB,title:"Soltero/a que cambia de ciudad",description:"Por motivos laborales o personales, necesita trasladarse y prefiere vender antes que alquilar.",color:"from-[#FFD700] to-[#D4AF37]",delay:.15},{id:3,icon:jS,title:"Divorciado/a o separado/a",description:"La disolución del matrimonio exige repartir el patrimonio y ambas partes ponen la vivienda en venta.",color:"from-[#D4AF37] to-[#FFD700]",delay:.3}];function jne(){const[n,e]=N.useState(0),[t,i]=Xl({loop:!1,slides:{perView:1,spacing:24},breakpoints:{"(min-width: 768px)":{slides:{perView:3,spacing:32}}},slideChanged(o){e(o.track.details.rel)}}),r=N.useRef(null),s=lE(r,{once:!0,threshold:.1});return f.jsxs("section",{ref:r,className:"relative",children:[f.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[f.jsx("div",{className:"absolute -top-28 -left-20 h-48 w-48 rounded-full bg-[#D4AF37]/10 blur-3xl"}),f.jsx("div",{className:"absolute -bottom-28 -right-20 h-48 w-48 rounded-full bg-[#FFD700]/10 blur-3xl"})]}),f.jsx("div",{ref:t,className:"keen-slider relative z-10 py-4 md:grid md:grid-cols-3 md:gap-8",children:U3.map(o=>f.jsxs(le.article,{className:"keen-slider__slide md:keen-slider__slide--reset group relative",initial:{opacity:0,y:50,rotateX:-15},animate:s?{opacity:1,y:0,rotateX:0}:{},transition:{duration:.8,delay:o.delay,type:"spring",stiffness:90},whileHover:{scale:1.05,rotateY:5,z:40},style:{transformStyle:"preserve-3d",perspective:1e3},children:[f.jsxs("div",{className:"relative h-full overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-8 backdrop-blur-xl transition-all duration-300 group-hover:border-[#D4AF37]/30 group-hover:bg-white/10 group-hover:shadow-2xl group-hover:shadow-[#D4AF37]/20",children:[f.jsx("div",{className:`absolute inset-0 opacity-0 transition-opacity duration-500 group-hover:opacity-100 bg-gradient-to-br ${o.color}`,style:{filter:"blur(45px)"}}),f.jsxs("div",{className:"relative z-10 flex h-full flex-col gap-4",children:[f.jsx(le.div,{whileHover:{rotate:360},transition:{duration:.8},className:`inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br ${o.color} shadow-lg`,children:f.jsx(o.icon,{className:"h-8 w-8 text-black"})}),f.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:o.title}),f.jsx("p",{className:"text-sm text-slate-600 transition-colors duration-300 group-hover:text-slate-800",children:o.description})]}),f.jsx("div",{className:"pointer-events-none absolute bottom-0 right-0 h-32 w-32 opacity-5",children:f.jsxs("svg",{viewBox:"0 0 100 100",className:"h-full w-full",children:[f.jsx("pattern",{id:`pattern-profile-${o.id}`,x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:f.jsx("circle",{cx:"10",cy:"10",r:"2",fill:"currentColor"})}),f.jsx("rect",{width:"100",height:"100",fill:`url(#pattern-profile-${o.id})`})]})})]}),f.jsx("div",{className:"absolute inset-0 -z-10 translate-y-4 rounded-3xl bg-gradient-to-br from-[#D4AF37]/20 to-[#FFD700]/20 opacity-0 blur-xl transition-all duration-300 group-hover:opacity-50"})]},o.id))}),i.current&&f.jsx("div",{className:"mt-6 flex justify-center gap-3 md:hidden",children:U3.map((o,a)=>f.jsx("button",{onClick:()=>{var l;return(l=i.current)==null?void 0:l.moveToIdx(a)},className:`h-2 w-2 rounded-full transition-colors ${n===a?"bg-gradient-to-r from-[#D4AF37] to-[#B8941F]":"bg-gray-300/60"}`},a))})]})}const z3=[{id:1,icon:f4,title:"Primer comprador joven",description:"Soltero o pareja joven que busca su primera vivienda, con estilo moderno y presupuesto ajustado.",color:"from-[#D4AF37] to-[#FFD700]",delay:0},{id:2,icon:Oa,title:"Familia en crecimiento",description:"Necesitan una casa espaciosa con 3–4 dormitorios y zonas de juego para los niños.",color:"from-[#FFD700] to-[#D4AF37]",delay:.15},{id:3,icon:Bl,title:"Pareja jubilada en 'downsizing'",description:"Prefieren una vivienda sin escaleras y con bajo mantenimiento en urbanización premium.",color:"from-[#D4AF37] to-[#FFD700]",delay:.3}];function One(){const[n,e]=N.useState(0),[t,i]=Xl({loop:!1,slides:{perView:1,spacing:24},breakpoints:{"(min-width: 768px)":{slides:{perView:3,spacing:32}}},slideChanged(o){e(o.track.details.rel)}}),r=N.useRef(null),s=lE(r,{once:!0,threshold:.15});return f.jsxs("section",{ref:r,className:"relative py-1",children:[f.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[f.jsx("div",{className:"absolute -top-32 -left-16 h-64 w-64 rounded-full bg-[#D4AF37]/10 blur-3xl"}),f.jsx("div",{className:"absolute -bottom-32 -right-16 h-64 w-64 rounded-full bg-[#FFD700]/10 blur-3xl"})]}),f.jsx("div",{ref:t,className:"keen-slider relative z-10 px-6 md:grid md:grid-cols-3 md:gap-8",children:z3.map(o=>f.jsxs(le.article,{className:"keen-slider__slide md:keen-slider__slide--reset group relative",initial:{opacity:0,y:50,rotateX:-15},animate:s?{opacity:1,y:0,rotateX:0}:{},transition:{duration:.8,delay:o.delay,type:"spring",stiffness:90},whileHover:{scale:1.05,rotateY:5,z:40},style:{transformStyle:"preserve-3d",perspective:1e3},children:[f.jsxs("div",{className:"relative h-full overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-8 backdrop-blur-xl transition-all duration-300 group-hover:border-[#D4AF37]/30 group-hover:bg-white/10 group-hover:shadow-2xl group-hover:shadow-[#D4AF37]/20",children:[f.jsx("div",{className:`absolute inset-0 opacity-0 transition-opacity duration-500 group-hover:opacity-100 bg-gradient-to-br ${o.color}`,style:{filter:"blur(45px)"}}),f.jsxs("div",{className:"relative z-10 flex h-full flex-col gap-4",children:[f.jsx(le.div,{whileHover:{rotate:360},transition:{duration:.8},className:`inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br ${o.color} shadow-lg`,children:f.jsx(o.icon,{className:"h-8 w-8 text-black"})}),f.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:o.title}),f.jsx("p",{className:"text-sm text-slate-600 transition-colors duration-300 group-hover:text-slate-800",children:o.description})]}),f.jsx("div",{className:"pointer-events-none absolute bottom-0 right-0 h-32 w-32 opacity-5",children:f.jsxs("svg",{viewBox:"0 0 100 100",className:"h-full w-full",children:[f.jsx("pattern",{id:`pattern-buyer-${o.id}`,x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:f.jsx("circle",{cx:"10",cy:"10",r:"2",fill:"currentColor"})}),f.jsx("rect",{width:"100",height:"100",fill:`url(#pattern-buyer-${o.id})`})]})})]}),f.jsx("div",{className:"absolute inset-0 -z-10 translate-y-4 rounded-3xl bg-gradient-to-br from-[#D4AF37]/20 to-[#FFD700]/20 opacity-0 blur-xl transition-all duration-300 group-hover:opacity-50"})]},o.id))}),i.current&&f.jsx("div",{className:"mt-6 flex justify-center gap-3 md:hidden",children:z3.map((o,a)=>f.jsx("button",{onClick:()=>{var l;return(l=i.current)==null?void 0:l.moveToIdx(a)},className:`h-2 w-2 rounded-full transition-colors ${n===a?"bg-gradient-to-r from-[#D4AF37] to-[#B8941F]":"bg-gray-300/60"}`},a))})]})}function Fne(n,{delay:e=15e3}={}){let t;const i=()=>t&&clearTimeout(t),r=()=>{n.next(),s()},s=()=>{i(),t=setTimeout(r,e)};n.on("created",s),n.on("dragStarted",i),n.on("animationEnded",s),n.on("updated",s)}function Une(){const[n,e]=N.useState([]),[t,i]=N.useState(!0),[r,s]=N.useState(0),[o,a]=Xl({loop:!0,renderMode:"precision",slides:{perView:3,spacing:40},breakpoints:{"(max-width: 1535px)":{slides:{perView:2,spacing:32}},"(max-width: 1023px)":{slides:{perView:1,spacing:24}},"(max-width: 639px)":{slides:{perView:1,spacing:12}}},slideChanged(l){s(l.track.details.rel)}},[Fne]);return N.useEffect(()=>{(async()=>{try{i(!0);const{data:l}=await jr.from("blogs").select("*").eq("categoria","perfil_comprador").order("created_at",{ascending:!1}).limit(2),{data:c}=await jr.from("blogs").select("*").eq("categoria","perfil_vendedor").order("created_at",{ascending:!1}).limit(2),u=[...l||[],...c||[]].sort((p,m)=>new Date(m.created_at)-new Date(p.created_at));e(u)}catch(l){console.error(l)}finally{i(!1)}})()},[]),t?f.jsx("div",{className:"flex min-h-[500px] items-center justify-center",children:f.jsx(bv,{className:"h-12 w-12 animate-spin text-[#D4AF37]"})}):n.length?f.jsxs("section",{className:"relative mx-auto max-w-7xl px-4 py-20",children:[f.jsxs("div",{className:"absolute inset-0 -z-10 pointer-events-none",children:[f.jsx("div",{className:"absolute left-1/4 top-0 h-72 w-72 rounded-full bg-[#D4AF37]/10 blur-3xl"}),f.jsx("div",{className:"absolute bottom-0 right-1/4 h-72 w-72 rounded-full bg-[#F4E4C1]/10 blur-3xl"})]}),f.jsx("div",{ref:o,className:"keen-slider rounded-[2.5rem]",children:n.map((l,c)=>f.jsx(le.div,{className:"keen-slider__slide",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.5,delay:c*.1},children:f.jsxs("article",{className:"group relative flex h-full flex-col overflow-hidden rounded-[2.5rem] border border-white/10 bg-white/95 shadow-2xl transition-transform duration-500 hover:scale-[1.02]",children:[f.jsx("div",{className:"absolute right-4 top-4 z-10",children:f.jsx(wB,{className:"h-8 w-8 rounded-full bg-gradient-to-br from-[#D4AF37] to-[#B8941F] p-1.5 text-white shadow-lg"})}),f.jsxs("figure",{className:"relative aspect-[16/10] w-full overflow-hidden",children:[f.jsx("img",{src:l.image||"https://images.unsplash.com/photo-1600585154340-be6161a56a0c",alt:l.title,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"lazy"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),f.jsx("div",{className:"absolute bottom-4 left-4",children:f.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/30 px-3 py-1 text-xs font-medium text-white backdrop-blur-sm",children:[f.jsx(Xf,{className:"h-3 w-3"}),l.categoria==="perfil_comprador"?"Historia Comprador":"Historia Vendedor"]})})]}),f.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-6",children:[f.jsxs("time",{className:"flex items-center gap-2 text-sm font-medium text-[#D4AF37]",children:[f.jsx(xv,{className:"h-4 w-4"}),new Date(l.date).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})]}),f.jsx("h3",{className:"font-serif text-2xl font-bold leading-tight text-slate-900",children:l.title}),f.jsx("p",{className:"line-clamp-3 text-sm text-slate-600",children:l.excerpt}),f.jsx(yi,{to:`/blog/${l.id}`,className:"mt-auto",children:f.jsxs(Zt,{variant:"ghost",className:"w-full rounded-xl border border-[#D4AF37] text-[#D4AF37] hover:bg-[#D4AF37]/10",children:["Leer historia completa",f.jsx(Dr,{className:"ml-2 h-4 w-4"})]})})]})]})},l.id))}),a.current&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>a.current.prev(),className:"absolute left-2 top-1/2 hidden -translate-y-1/2 rounded-full border border-[#D4AF37]/30 bg-white p-2 shadow md:block",children:f.jsx(_v,{className:"h-5 w-5 text-[#D4AF37]"})}),f.jsx("button",{onClick:()=>a.current.next(),className:"absolute right-2 top-1/2 hidden -translate-y-1/2 rounded-full border border-[#D4AF37]/30 bg-white p-2 shadow md:block",children:f.jsx($f,{className:"h-5 w-5 text-[#D4AF37]"})}),f.jsx("div",{className:"mt-12 flex justify-center gap-3",children:n.map((l,c)=>f.jsx("button",{onClick:()=>a.current.moveToIdx(c),className:`h-3 w-3 rounded-full transition-colors ${r===c?"bg-gradient-to-r from-[#D4AF37] to-[#F4E4C1]":"bg-gray-300/60"}`},c))})]})]}):f.jsxs("div",{className:"rounded-3xl bg-slate-800 p-12 text-center text-white/80",children:[f.jsx(Ea,{className:"mx-auto mb-4 h-12 w-12 text-[#D4AF37]"}),"Estamos preparando nuevas historias de éxito. ¡Vuelve pronto!"]})}function iO(){const[n,e]=N.useState({}),t=US(s=>s.addToast),i=s=>{var a,l,c;const o={};return(a=s.nombre)!=null&&a.trim()||(o.nombre="El nombre es requerido"),(l=s.telefono)!=null&&l.trim()?/^\d{9}$/.test(s.telefono.trim())||(o.telefono="Introduce un teléfono válido (9 dígitos)"):o.telefono="El teléfono es requerido",(c=s.email)!=null&&c.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email.trim())||(o.email="Introduce un email válido"):o.email="El email es requerido",e(o),Object.keys(o).length===0};async function r(s,o){var a;if(!i(s))return console.warn("❌ Validación fallida:",n),!1;try{console.log("📡 Enviando datos al webhook:",s);const l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),c=await l.json().catch(()=>({}));return console.log("✅ Respuesta del webhook:",c),l.ok&&Array.isArray(c)&&((a=c[0])==null?void 0:a.output)==="ok"?(t({title:"Envío exitoso",description:"Pronto nos pondremos en contacto."}),!0):(t({title:"Error al enviar",description:"No se pudo procesar tu solicitud.",variant:"destructive"}),!1)}catch(l){return console.error("❌ Error al contactar con el webhook:",l),t({title:"Error de red",description:"Verifica tu conexión e inténtalo de nuevo.",variant:"destructive"}),!1}}return{handleFormSubmit:r,errors:n}}function ly(){const{handleFormSubmit:n,errors:e}=iO(),[t,i]=N.useState(!1),[r,s]=N.useState({nombre:"",telefono:"",email:"",mensaje:""}),[o,a]=N.useState(""),l=p=>s({...r,[p.target.name]:p.target.value}),c=async p=>{if(p.preventDefault(),t)return;i(!0),await n(r,"https://zzwebhookzz.iakonnect.com/webhook/formularioweb")&&s({nombre:"",telefono:"",email:"",mensaje:""}),i(!1)},u=p=>`w-full rounded-2xl bg-white placeholder-gray-400 text-gray-800 px-5 py-4
     border-2 transition-all duration-300
     ${o===p?"border-[#D4AF37] shadow-lg shadow-[#D4AF37]/10 bg-white":"border-gray-200 hover:border-gray-300"}
     ${e&&e[p]?"border-red-500 shadow-red-500/10":""}
     focus:outline-none focus:ring-2 focus:ring-[#D4AF37]/20`;return f.jsxs("div",{className:"relative max-w-xl mx-auto",children:[f.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-[#D4AF37]/10 via-[#FFD700]/10 to-[#D4AF37]/10 rounded-3xl blur-2xl"}),f.jsxs("form",{onSubmit:c,className:"relative space-y-5 p-8 rounded-3xl bg-white shadow-xl",style:{boxShadow:"0 20px 50px -12px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(212, 175, 55, 0.05)"},children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 mb-4 rounded-full bg-gradient-to-br from-[#D4AF37] to-[#FFD700] shadow-lg",children:f.jsx("span",{className:"text-3xl text-white",children:"✨"})}),f.jsx("h3",{className:"text-3xl font-serif font-bold text-gray-800",children:"Solicitar información"}),f.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Completa el formulario y te contactaremos en menos de 24 horas"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{name:"nombre",value:r.nombre,onChange:l,onFocus:()=>a("nombre"),onBlur:()=>a(""),placeholder:"Nombre completo*",className:u("nombre"),style:{paddingLeft:"20px"}}),o==="nombre"&&f.jsx("div",{className:"absolute -top-2 left-4 bg-white px-2",children:f.jsx("span",{className:"text-xs text-[#D4AF37] font-medium",children:"Nombre completo"})})]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{name:"telefono",value:r.telefono,onChange:l,onFocus:()=>a("telefono"),onBlur:()=>a(""),placeholder:"Teléfono*",className:u("telefono"),style:{paddingLeft:"20px"}}),o==="telefono"&&f.jsx("div",{className:"absolute -top-2 left-4 bg-white px-2",children:f.jsx("span",{className:"text-xs text-[#D4AF37] font-medium",children:"Teléfono"})})]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{name:"email",type:"email",value:r.email,onChange:l,onFocus:()=>a("email"),onBlur:()=>a(""),placeholder:"Correo electrónico*",className:u("email"),style:{paddingLeft:"20px"}}),o==="email"&&f.jsx("div",{className:"absolute -top-2 left-4 bg-white px-2",children:f.jsx("span",{className:"text-xs text-[#D4AF37] font-medium",children:"Correo electrónico"})})]}),f.jsxs("div",{className:"relative",children:[f.jsx("textarea",{name:"mensaje",value:r.mensaje,onChange:l,onFocus:()=>a("mensaje"),onBlur:()=>a(""),placeholder:"Mensaje (opcional)",rows:"4",className:u("mensaje")+" resize-none",style:{paddingLeft:"20px"}}),o==="mensaje"&&f.jsx("div",{className:"absolute -top-2 left-4 bg-white px-2",children:f.jsx("span",{className:"text-xs text-[#D4AF37] font-medium",children:"Mensaje"})})]})]}),e&&Object.entries(e).map(([p,m])=>f.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-500 bg-red-50 px-4 py-2 rounded-xl border border-red-100",children:[f.jsx("span",{children:"⚠️"}),m]},p)),f.jsxs(Zt,{type:"submit",disabled:t,className:`
            w-full py-5 font-semibold text-white rounded-full relative overflow-hidden
            bg-gradient-to-r from-[#D4AF37] to-[#FFD700] 
            hover:from-[#FFD700] hover:to-[#D4AF37] 
            transform transition-all duration-300 hover:scale-[1.02]
            ${t?"opacity-70 cursor-not-allowed":"hover:shadow-xl hover:shadow-[#D4AF37]/25"}
          `,children:[f.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 text-lg",children:t?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),f.jsx("span",{children:"Enviando..."})]}):f.jsxs(f.Fragment,{children:[f.jsx("span",{children:"📤"}),f.jsx("span",{children:"Enviar"})]})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000"})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-8 pt-8 border-t border-gray-100",children:[f.jsxs("div",{className:"text-center group cursor-pointer",children:[f.jsx("div",{className:"text-[#D4AF37] font-bold text-2xl group-hover:scale-110 transition-transform",children:"24h"}),f.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Respuesta rápida"})]}),f.jsxs("div",{className:"text-center group cursor-pointer",children:[f.jsx("div",{className:"text-[#D4AF37] font-bold text-2xl group-hover:scale-110 transition-transform",children:"100%"}),f.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Confidencial"})]}),f.jsxs("div",{className:"text-center group cursor-pointer",children:[f.jsx("div",{className:"text-[#D4AF37] font-bold text-2xl group-hover:scale-110 transition-transform",children:"0€"}),f.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Sin compromiso"})]})]}),f.jsx("p",{className:"text-center text-xs text-gray-400 mt-4",children:"Tu información está protegida y será tratada con total confidencialidad"})]})]})}function aM(){const n=js(),e=[{title:"Pisos céntricos",image:"https://images.unsplash.com/photo-1545324418-cc1a3fa10c00",params:{tipo:"piso",zona:"centro"}},{title:"Casas familiares",image:"https://images.unsplash.com/photo-1583608205776-bfd35f0d9f83",params:{tipo:"casa",habitaciones:"3"}},{title:"Chalets tranquilos",image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6",params:{tipo:"casa",caracteristicas:"jardin"}},{title:"Oficinas modernas",image:"https://images.unsplash.com/photo-1497366216548-37526070297c",params:{tipo:"oficina"}}],t=i=>{const r=new URLSearchParams(i);n(`/propiedades?${r.toString()}`)};return f.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-2",children:e.map((i,r)=>f.jsx(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:r*.1},className:"group cursor-pointer overflow-hidden rounded-xl",onClick:()=>t(i.params),children:f.jsxs("div",{className:"relative h-64",children:[f.jsx("img",{src:i.image,alt:i.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent",children:f.jsx("div",{className:"absolute bottom-0 p-6",children:f.jsx("h3",{className:"text-xl font-bold text-white",children:i.title})})})]})},r))})}function zne(){jv();const[n,e]=N.useState(!1);return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsxs(Jf,{children:[f.jsx("title",{children:"Casaia | Inmobiliaria Inteligente en Madrid"}),f.jsx("meta",{name:"description",content:"Vende o compra tu propiedad con inteligencia artificial. Sin comisiones. Más rápido, más rentable. Solo en Casaia."}),f.jsx("link",{rel:"canonical",href:"https://casaiamadrid.com/"}),f.jsx("meta",{property:"og:title",content:"Casaia | Inmobiliaria Inteligente en Madrid"}),f.jsx("meta",{property:"og:description",content:"Vende o compra tu propiedad con inteligencia artificial. Sin comisiones. Más rápido, más rentable."}),f.jsx("meta",{property:"og:url",content:"https://casaiamadrid.com/"}),f.jsx("meta",{property:"og:image",content:"https://casaiamadrid.com/og-image.jpg"}),f.jsx("meta",{property:"og:type",content:"website"}),f.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),f.jsx("meta",{name:"twitter:title",content:"Casaia | Inmobiliaria Inteligente en Madrid"}),f.jsx("meta",{name:"twitter:description",content:"Vende o compra tu propiedad con inteligencia artificial. Sin comisiones. Más rápido, más rentable."}),f.jsx("meta",{name:"twitter:image",content:"https://casaiamadrid.com/og-image.jpg"})]}),f.jsx(HQ,{onContactClick:()=>e(!0)}),f.jsx("section",{className:"py-24 px-3",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"¿Por qué has decidido vender tu inmueble justo ahora?"}),f.jsx(jne,{})]})}),f.jsx("section",{className:"py-10 px-3",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"¿Cuándo te gustaría estrenar tu próximo hogar?"}),f.jsx(One,{})]})}),f.jsx("section",{className:"bg-white py-24",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"Historias reales con Casaia"}),f.jsx(Une,{})]})}),f.jsx("section",{className:"bg-[#1A1A1A] py-24 text-white",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"El dolor de vender en solitario"}),f.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:[{title:"Tiempo perdido",text:"Meses de espera, visitas sin filtrar y negociaciones interminables."},{title:"Precio inadecuado",text:"Sin conocimiento del mercado real, arriesgas vender por debajo del valor."},{title:"Inseguridad legal",text:"Contratos complejos y trámites legales sin asesoramiento profesional."}].map((t,i)=>f.jsxs(le.div,{whileHover:{scale:1.05},className:"rounded-xl bg-white/5 p-6",children:[f.jsx("h3",{className:"mb-4 text-xl font-bold text-[#D4AF37]",children:t.title}),f.jsx("p",{className:"text-gray-300",children:t.text})]},i))})]})}),f.jsx("section",{className:"py-24",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"Nuestra solución estratégica"}),f.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:[{title:"Home staging de lujo",text:"Transformamos tu propiedad para maximizar su atractivo y valor."},{title:"Marketing selectivo",text:"Estrategia personalizada para alcanzar al comprador ideal."},{title:"Asesor personal",text:"Un experto dedicado a tu operación de principio a fin."}].map((t,i)=>f.jsxs(le.div,{whileHover:{scale:1.05},className:"rounded-xl bg-white p-6 shadow-xl",children:[f.jsx("h3",{className:"mb-4 text-xl font-bold text-[#D4AF37]",children:t.title}),f.jsx("p",{className:"text-gray-600",children:t.text})]},i))})]})}),f.jsx("section",{className:"bg-white py-24",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"Proceso VIP en 5 pasos"}),f.jsx("div",{className:"grid gap-8 md:grid-cols-5",children:["Valoración inicial","Estrategia personalizada","Marketing premium","Gestión de visitas","Cierre seguro"].map((t,i)=>f.jsxs(le.div,{whileHover:{scale:1.05},className:"text-center",children:[f.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-[#D4AF37] text-white",children:i+1}),f.jsx("h3",{className:"text-lg font-bold",children:t})]},i))})]})}),f.jsx("section",{className:"py-24",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"Beneficios exclusivos"}),f.jsx("div",{className:"grid gap-8 md:grid-cols-4",children:[{icon:f.jsx(Xf,{className:"h-8 w-8"}),title:"Asesor de inversiones",description:"Maximiza el retorno de tu inversión inmobiliaria"},{icon:f.jsx(wv,{className:"h-8 w-8"}),title:"Informes mensuales",description:"Seguimiento detallado del proceso de venta"},{icon:f.jsx(rd,{className:"h-8 w-8"}),title:"Nos encargamos de todo",description:"Servicio de limpieza y mudanza gratuito"},{icon:f.jsx(u4,{className:"h-8 w-8"}),title:"Calculadora de plusvalía",description:"Conoce el potencial de revalorización"}].map((t,i)=>f.jsxs(le.div,{whileHover:{scale:1.05},className:"rounded-xl bg-white p-6 shadow-xl",children:[f.jsx("div",{className:"mb-4 text-[#D4AF37]",children:t.icon}),f.jsx("h3",{className:"mb-2 text-xl font-bold",children:t.title}),f.jsx("p",{className:"text-gray-600",children:t.description})]},i))})]})}),f.jsx("section",{className:"bg-[#1A1A1A] py-24 text-white",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("div",{className:"mb-12 text-center",children:f.jsx("h2",{className:"font-serif text-4xl font-bold",children:"+5% sobre el precio medio de mercado"})}),f.jsx(Cne,{})]})}),f.jsx("section",{className:"py-24",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"Experiencia de nuestros asesores"}),f.jsx("div",{className:"mx-auto max-w-3xl text-center",children:f.jsx("p",{className:"text-xl text-gray-600",children:"Contamos con agentes inmobiliarios expertos, formados para acompañarte y negociar en tu beneficio en cada etapa del proceso."})})]})}),f.jsx("section",{className:"bg-white py-24",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"Asesoramiento legal y protección contractual"}),f.jsx("div",{className:"mx-auto max-w-3xl text-center",children:f.jsx("p",{className:"text-xl text-gray-600",children:"Nuestros contratos están actualizados según la legislación vigente, protegiendo los intereses de propietarios e inquilinos de forma segura y transparente."})})]})}),f.jsx("section",{className:"bg-white py-24",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"Trato humano + Inteligencia Artificial"}),f.jsx("div",{className:"mx-auto max-w-3xl text-center",children:f.jsx("p",{className:"text-xl text-gray-600",children:"Aprovechamos todo el poder de la Inteligencia Artificial para optimizar precios y estrategias, pero es nuestro equipo comercial humano quien te acompañará en todo momento de forma cercana y personalizada."})})]})}),f.jsx("section",{className:"py-24 bg-gray-50",children:f.jsxs("div",{className:"container mx-auto max-w-2xl px-4",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-4xl font-bold",children:"Valoración VIP"}),f.jsx(ly,{})]})}),f.jsx("section",{className:"bg-[#1A1A1A] py-24 text-white",children:f.jsxs("div",{className:"container mx-auto px-4 text-center",children:[f.jsx("h2",{className:"mb-8 font-serif text-4xl font-bold",children:"¿Listo para dar el siguiente paso?"}),f.jsxs("div",{className:"flex flex-col items-center gap-4 sm:flex-row sm:justify-center",children:[f.jsxs(Zt,{size:"lg",onClick:()=>e(!0),className:"bg-[#D4AF37] px-8 py-6 text-lg hover:bg-[#D4AF37]/90",children:[f.jsx(id,{className:"mr-2 h-5 w-5"}),"Solicitar llamada"]}),f.jsx("a",{href:"tel:+34919932451",className:"text-lg text-[#D4AF37] hover:underline",children:"Llámanos: +34 919932451"})]})]})}),f.jsx(Mo,{open:n,onOpenChange:e})]})}function lM({property:n,onContactClick:e,onViewDetails:t}){var m,g;const i=Array.isArray(n.images)&&n.images.length>0?n.images:["https://via.placeholder.com/400x300?text=Sin+imagen"],[r,s]=N.useState(0),[o,a]=Xl({loop:!1,mode:"snap",slides:{perView:1,spacing:0},drag:!0,rubberband:!1,slideChanged(y){s(y.track.details.rel)}}),l=n.estado;let c="",u="";l==="disponible"?(c="bg-green-100",u="text-green-800"):l==="reservado"?(c="bg-yellow-100",u="text-yellow-800"):l==="vendido"?(c="bg-red-100",u="text-red-800"):(c="bg-gray-100",u="text-gray-800");const p=l?l.charAt(0).toUpperCase()+l.slice(1):"";return f.jsxs("div",{className:`group rounded-2xl bg-white overflow-hidden
                 shadow-lg hover:shadow-2xl transition-transform transition-shadow
                 transform hover:-translate-y-1`,children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{ref:o,className:"keen-slider h-56 sm:h-64 touch-pan-x",style:{touchAction:"pan-x"},children:i.map((y,_)=>f.jsx("div",{className:"keen-slider__slide w-full flex items-center justify-center cursor-pointer",onClick:t,children:f.jsx("img",{src:y,alt:n.titulo,className:"w-full h-full object-cover",loading:"lazy"})},_))}),i.length>1&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:y=>{var _;y.stopPropagation(),(_=a.current)==null||_.prev()},className:`absolute left-2 top-1/2 -translate-y-1/2
                         bg-white/80 p-2 rounded-full opacity-0
                         group-hover:opacity-100 transition`,children:f.jsx(_v,{className:"text-[#D4AF37]"})}),f.jsx("button",{onClick:y=>{var _;y.stopPropagation(),(_=a.current)==null||_.next()},className:`absolute right-2 top-1/2 -translate-y-1/2
                         bg-white/80 p-2 rounded-full opacity-0
                         group-hover:opacity-100 transition`,children:f.jsx($f,{className:"text-[#D4AF37]"})}),f.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2",children:i.map((y,_)=>f.jsx("button",{onClick:()=>{var S;return(S=a.current)==null?void 0:S.moveToIdx(_)},className:`w-2 h-2 rounded-full ${r===_?"bg-white":"bg-white/50"}`},_))}),f.jsxs("span",{className:`absolute bottom-2 right-2
                             bg-black/60 text-white text-xs px-2 py-1 rounded`,children:[r+1,"/",i.length]})]}),l&&f.jsx("span",{className:`absolute top-3 left-3 inline-block px-3 py-1 text-xs font-semibold rounded-full ${c} ${u}`,children:p})]}),f.jsxs("div",{className:"p-6 space-y-2",children:[f.jsx("h3",{className:"font-serif text-xl font-bold cursor-pointer hover:underline",onClick:t,children:n.titulo}),f.jsx("p",{className:"text-gray-700",children:((m=n.municipios)==null?void 0:m.nombre)||((g=n.distritos)==null?void 0:g.nombre)}),f.jsxs("div",{className:"flex gap-4 text-gray-600 text-sm",children:[f.jsxs("span",{children:[n.habitaciones," hab."]}),f.jsxs("span",{children:[n.banos," bañ."]}),f.jsxs("span",{children:[n.metros," m²"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:`flex-1 border border-[#D4AF37] text-[#D4AF37]
                       py-2 rounded-lg font-medium hover:bg-[#D4AF37]/10
                       transition`,onClick:t,children:"Ver detalles"}),f.jsx("button",{className:`flex-1 bg-[#D4AF37] text-white py-2 rounded-lg
                       font-medium hover:brightness-110 transition`,onClick:e,children:"Contactar"})]})]})]})}function Bne(){const[n,e]=N.useState(!1);return f.jsxs("section",{className:"relative min-h-[90vh] overflow-hidden pt-24",children:[n?f.jsx("img",{className:"absolute inset-0 h-full w-full object-cover filter brightness-40",alt:"Propiedades de lujo en Madrid",src:"https://images.unsplash.com/photo-1506851321937-51fff21bc9a0"}):f.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"auto",onError:()=>e(!0),className:"absolute inset-0 h-full w-full object-cover filter brightness-40",children:[f.jsx("source",{src:"https://pptkdbygswenchxurwkz.supabase.co/storage/v1/object/public/public-videos/heros/hero-propiedades.mp4",type:"video/mp4"}),"Tu navegador no soporta video."]}),f.jsx("div",{className:"absolute inset-0 bg-black/50"}),f.jsx("div",{className:"relative flex items-center justify-center min-h-[calc(90vh-6rem)] px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"max-w-3xl text-center text-white",children:[f.jsx("h1",{className:"mb-6 font-serif text-4xl font-bold leading-tight sm:text-5xl md:text-6xl",children:"Explora propiedades exclusivas"}),f.jsx("p",{className:"text-lg opacity-90 sm:text-xl mb-8",children:"Filtra por zona, tipo y presupuesto para descubrir tu próxima inversión."})]})})]})}function rO(){const n=[{icon:f.jsx(rd,{className:"h-8 w-8 text-[#D4AF37]"}),title:"Asesoría legal continua",description:"Respaldo jurídico en cada etapa del proceso"},{icon:f.jsx(kB,{className:"h-8 w-8 text-[#D4AF37]"}),title:"Transparencia total",description:"Información clara y documentación actualizada"},{icon:f.jsx(Wf,{className:"h-8 w-8 text-[#D4AF37]"}),title:"Análisis con IA",description:"Valoraciones precisas basadas en datos reales"},{icon:f.jsx(jS,{className:"h-8 w-8 text-[#D4AF37]"}),title:"Compromiso Casaia",description:"Tu tranquilidad es nuestra prioridad"}];return f.jsx("section",{className:"py-16 bg-gray-50",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12",children:[f.jsx("h2",{className:"text-3xl font-serif font-bold mb-4",children:"Nuestra Garantía Casaia"}),f.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Con Casaia, vendes o compras tu propiedad respaldado por contratos actualizados, asesoría continua y transparencia total."})]}),f.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:n.map((e,t)=>f.jsx(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.1},className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:f.jsxs("div",{className:"flex flex-col items-center text-center",children:[f.jsx("div",{className:"mb-4",children:e.icon}),f.jsx("h3",{className:"text-xl font-bold mb-2",children:e.title}),f.jsx("p",{className:"text-gray-600",children:e.description})]})},t))})]})})}function Vne({zona:n,tipo:e,precioMin:t,precioMax:i,habitaciones:r}){const[s,o]=N.useState([]),[a,l]=N.useState(!0),[c,u]=N.useState(null);return N.useEffect(()=>{async function p(){l(!0),u(null);try{let m=jr.from("inmuebles").select(`
            *,
            municipios (nombre),
            distritos  (nombre),
            imagenes_inmueble (url, orden)
          `);(n==null?void 0:n.tipo)==="municipio"?m=m.eq("municipio_id",n.id):(n==null?void 0:n.tipo)==="distrito"&&(m=m.eq("distrito_id",n.id)),e&&(m=m.eq("tipo",e)),t&&(m=m.gte("precio",t)),i&&i!=="max"&&(m=m.lte("precio",i)),r&&(m=m.gte("habitaciones",+r));const{data:g,error:y}=await m;if(y)throw y;const _=(g||[]).map(S=>({...S,images:Array.isArray(S.imagenes_inmueble)?S.imagenes_inmueble.sort((v,b)=>(v.orden||0)-(b.orden||0)).map(v=>v.url):[]}));o(_)}catch(m){u(m.message||"Error")}finally{l(!1)}}p()},[n,e,t,i,r]),{properties:s,loading:a,error:c}}function Hne(){const[n]=Jz(),e=js();Eo(),jv();const[t,i]=N.useState(!1),r=N.useRef(null),[s,o]=N.useState(15),[a,l]=N.useState({zona:n.get("zonaNombre")?{id:n.get("zonaId"),nombre:n.get("zonaNombre"),tipo:n.get("zonaTipo")}:null,tipo:n.get("tipo")||""});N.useEffect(()=>{l({zona:n.get("zonaNombre")?{id:n.get("zonaId"),nombre:n.get("zonaNombre"),tipo:n.get("zonaTipo")}:null,tipo:n.get("tipo")||""})},[n]);const{properties:c,loading:u,error:p}=Vne(a);N.useEffect(()=>{if((!!a.zona||a.tipo)&&!u&&r.current){const _=document.querySelector("header")||document.querySelector("nav"),S=_?_.offsetHeight:0,v=r.current.offsetTop;window.scrollTo({top:v-S,behavior:"smooth"})}},[a,u]);const m=c.length>s,g=c.slice(0,s);return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsxs(Jf,{children:[f.jsx("title",{children:"Propiedades en venta en Madrid | Casaia Inmobiliaria Inteligente"}),f.jsx("meta",{name:"description",content:"Explora propiedades seleccionadas por IA en Madrid. Filtra por zona, tipo de inmueble y encuentra tu hogar ideal con Casaia."}),f.jsx("link",{rel:"canonical",href:"https://casaiamadrid.com/propiedades"}),f.jsx("meta",{property:"og:title",content:"Propiedades en venta en Madrid | Casaia"}),f.jsx("meta",{property:"og:description",content:"Explora casas y pisos en venta filtrados con inteligencia artificial. Encuentra tu hogar ideal en Madrid."}),f.jsx("meta",{property:"og:url",content:"https://casaiamadrid.com/propiedades"}),f.jsx("meta",{property:"og:image",content:"https://casaiamadrid.com/og-image.jpg"}),f.jsx("meta",{property:"og:type",content:"website"}),f.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),f.jsx("meta",{name:"twitter:title",content:"Propiedades en venta en Madrid | Casaia"}),f.jsx("meta",{name:"twitter:description",content:"Explora casas y pisos en venta filtrados con inteligencia artificial. Encuentra tu hogar ideal en Madrid."}),f.jsx("meta",{name:"twitter:image",content:"https://casaiamadrid.com/og-image.jpg"})]}),f.jsx(Bne,{}),f.jsx("section",{className:"relative -mt-44 z-10 px-3",children:f.jsx(lne,{})}),f.jsx("div",{className:"container mx-auto px-4 py-32",children:f.jsxs("div",{ref:r,className:"space-y-12",children:[u?f.jsx("div",{className:"text-center",children:f.jsx("p",{className:"text-lg text-gray-600",children:"Cargando propiedades..."})}):p?f.jsx("div",{className:"text-center",children:f.jsx("p",{className:"text-lg text-red-600",children:"Error cargando propiedades. Por favor, intenta de nuevo."})}):c.length===0?f.jsx("div",{className:"text-center",children:f.jsx("p",{className:"text-lg text-gray-600",children:"No se encontraron propiedades con los filtros seleccionados."})}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid gap-8 sm:grid-cols-2 xl:grid-cols-3",children:g.map(y=>f.jsx(lM,{property:y,onContactClick:()=>i(!0),onViewDetails:()=>e(`/propiedad/${y.id}`)},y.id))}),m&&f.jsx("div",{className:"text-center mt-8",children:f.jsx(Zt,{onClick:()=>o(y=>y+15),className:"rounded-full bg-[#D4AF37] px-6 py-3 text-white hover:bg-[#D4AF37]/90",children:"Mostrar más"})})]}),f.jsxs("section",{className:"py-16",children:[f.jsx("h2",{className:"mb-8 text-center font-serif text-3xl font-bold",children:"Explora por categorías"}),f.jsx(aM,{})]}),f.jsxs("section",{className:"rounded-2xl bg-gray-900 p-12 text-white",children:[f.jsx("h2",{className:"mb-8 text-center font-serif text-3xl font-bold",children:"¿Por qué elegir Casaia?"}),f.jsxs("div",{className:"grid gap-8 md:grid-cols-3",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"mb-4 text-xl font-bold text-[#D4AF37]",children:"Tecnología Avanzada"}),f.jsx("p",{children:"Análisis de mercado en tiempo real para encontrar las mejores oportunidades"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"mb-4 text-xl font-bold text-[#D4AF37]",children:"Asesoramiento Experto"}),f.jsx("p",{children:"Equipo profesional dedicado a hacer realidad tus objetivos"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"mb-4 text-xl font-bold text-[#D4AF37]",children:"Servicio Premium"}),f.jsx("p",{children:"Atención personalizada y acompañamiento en cada paso"})]})]})]}),f.jsx(rO,{})]})}),f.jsx(Mo,{open:t,onOpenChange:i})]})}function Gne({images:n,startIndex:e=0,open:t,onClose:i}){const[r,s]=N.useState(e),[o,a]=Xl({initial:e,drag:!0,loop:!1,rubberband:!1,mode:"snap",slides:{perView:1,spacing:0},slideChanged(c){s(c.track.details.rel)}}),[l]=Xl({initial:e,slides:{perView:8,spacing:8},mode:"snap"});return N.useEffect(()=>{function c(u){var p,m;u.key==="Escape"&&i(),u.key==="ArrowLeft"&&((p=a.current)==null||p.prev()),u.key==="ArrowRight"&&((m=a.current)==null||m.next())}if(t)return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[t,i,a]),t?f.jsxs("div",{className:"fixed inset-0 z-[60] flex flex-col bg-black/90",children:[f.jsxs("div",{className:"flex items-center justify-between p-4",children:[f.jsxs("span",{className:"text-white font-serif",children:[r+1," / ",n.length]}),f.jsx("button",{onClick:i,className:"text-white hover:text-[#D4AF37] transition-colors",children:f.jsx(Ma,{className:"h-8 w-8"})})]}),f.jsxs("div",{className:"relative flex-1",children:[f.jsx("div",{ref:o,className:"keen-slider h-full",children:n.map((c,u)=>f.jsx("div",{className:"keen-slider__slide flex items-center justify-center",children:f.jsx("img",{src:c,alt:`Vista ${u+1}`,className:"max-h-[80vh] max-w-full object-contain",loading:"lazy"})},u))}),n.length>1&&f.jsxs(f.Fragment,{children:[f.jsx(Zt,{variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#D4AF37] hover:text-[#D4AF37]/80",onClick:()=>{var c;return(c=a.current)==null?void 0:c.prev()},children:f.jsx(_v,{className:"h-8 w-8"})}),f.jsx(Zt,{variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 text-[#D4AF37] hover:text-[#D4AF37]/80",onClick:()=>{var c;return(c=a.current)==null?void 0:c.next()},children:f.jsx($f,{className:"h-8 w-8"})})]})]}),f.jsx("div",{className:"bg-black/50 p-4",children:f.jsx("div",{ref:l,className:"keen-slider h-20",children:n.map((c,u)=>f.jsx("div",{className:`keen-slider__slide cursor-pointer ${r===u?"ring-2 ring-[#D4AF37]":""}`,onClick:()=>{var p;return(p=a.current)==null?void 0:p.moveToIdx(u)},children:f.jsx("img",{src:c,alt:`Miniatura ${u+1}`,className:"h-full w-full object-cover",loading:"lazy"})},u))})})]}):null}const Wne=N.lazy(()=>La(()=>import("./PropertyMap-656fc529.js"),["assets/PropertyMap-656fc529.js","assets/PropertyMap-4d8e306f.css"]));function $ne(){var A,P,L;const{id:n}=AL(),[e,t]=N.useState(null),[i,r]=N.useState([]),[s,o]=N.useState([]),[a,l]=N.useState(!1),[c,u]=N.useState({open:!1,start:0}),[p,m]=N.useState(0),[g,y]=Xl({initial:0,loop:!1,mode:"snap",slides:{perView:1,spacing:0},drag:!0,rubberband:!1,slideChanged(I){m(I.track.details.rel)}});if(N.useEffect(()=>{let I=!0;async function C(){const{data:k,error:V}=await jr.from("inmuebles").select("*, municipios(nombre), distritos(nombre), imagenes_inmueble:imagenes_inmueble(url, orden)").eq("id",n).maybeSingle();if(V||!k||!I)return;t(k);const q=(k.imagenes_inmueble||[]).sort((B,U)=>(B.orden||0)-(U.orden||0)).map(B=>B.url);if(r(q),k.distrito_id){const{data:B}=await jr.from("inmuebles").select("*, municipios(nombre), distritos(nombre), imagenes_inmueble:imagenes_inmueble(url, orden)").eq("distrito_id",k.distrito_id).neq("id",n).limit(4);I&&o(B||[])}}return C(),()=>{I=!1}},[n]),!e)return null;const _=e.titulo,S=`En venta por ${new Intl.NumberFormat("es-ES").format(e.precio)}€. ${(A=e.descripcion)==null?void 0:A.slice(0,160)}…`,v=`https://casaiamadrid.com/propiedad/${n}`,b=i[0]||"https://casaiamadrid.com/og-image.jpg",w=i.slice(1,4),M=i.length-4;return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsxs(Jf,{children:[f.jsxs("title",{children:[_," | Casaia Inmobiliaria en Madrid"]}),f.jsx("meta",{name:"description",content:S}),f.jsx("link",{rel:"canonical",href:v}),f.jsx("meta",{property:"og:title",content:`${_} | Casaia`}),f.jsx("meta",{property:"og:description",content:S}),f.jsx("meta",{property:"og:url",content:v}),f.jsx("meta",{property:"og:image",content:b}),f.jsx("meta",{property:"og:type",content:"article"}),f.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),f.jsx("meta",{name:"twitter:title",content:`${_} | Casaia`}),f.jsx("meta",{name:"twitter:description",content:S}),f.jsx("meta",{name:"twitter:image",content:b})]}),f.jsx("div",{className:"pt-24",children:f.jsxs("div",{className:"container mx-auto px-4 flex",children:[f.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[f.jsx("div",{ref:g,className:"keen-slider h-[272px] md:h-[600px] rounded-2xl",style:{touchAction:"pan-x"},children:i.map((I,C)=>f.jsx("div",{className:"keen-slider__slide cursor-pointer",onClick:()=>u({open:!0,start:C}),children:f.jsx("img",{src:I,alt:`Slide ${C+1}`,className:"w-full h-full object-cover rounded-2xl"})},C))}),i.length>1&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:I=>{var C;I.stopPropagation(),(C=y.current)==null||C.prev()},className:"hidden md:flex absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 p-3 rounded-full shadow z-10",children:f.jsx(_v,{className:"text-[#D4AF37]"})}),f.jsx("button",{onClick:I=>{var C;I.stopPropagation(),(C=y.current)==null||C.next()},className:"hidden md:flex absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 p-3 rounded-full shadow z-10",children:f.jsx($f,{className:"text-[#D4AF37]"})})]}),i.length>1&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"md:hidden absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-2",children:i.map((I,C)=>f.jsx("button",{onClick:()=>{var k;return(k=y.current)==null?void 0:k.moveToIdx(C)},className:`w-2 h-2 rounded-full ${p===C?"bg-white":"bg-white/50"}`},C))}),f.jsxs("div",{className:"md:hidden absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:[p+1,"/",i.length]})]})]}),f.jsxs("div",{className:"hidden md:grid grid-rows-4 gap-2 ml-4 flex-shrink-0",children:[w.map((I,C)=>f.jsx("img",{src:I,alt:`Thumb ${C+2}`,className:"h-36 w-36 object-cover rounded-lg shadow-lg cursor-pointer hover:ring-2 hover:ring-[#D4AF37]",onClick:()=>{var k;return(k=y.current)==null?void 0:k.moveToIdx(C+1)}},C)),M>0&&i[4]&&f.jsxs("div",{className:"relative h-36 w-36 rounded-lg overflow-hidden shadow-lg cursor-pointer hover:ring-2 hover:ring-[#D4AF37]",onClick:()=>u({open:!0,start:4}),children:[f.jsx("img",{src:i[4],alt:"Más",className:"h-full w-full object-cover"}),f.jsxs("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center text-white text-lg font-semibold",children:["+",M]})]})]})]})}),f.jsx(Gne,{images:i,startIndex:c.start,open:c.open,onClose:()=>u({open:!1,start:0})}),f.jsx("div",{className:"container mx-auto px-4 mt-8",children:f.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 sticky top-20 z-20",children:f.jsxs("div",{className:"flex flex-col items-center text-center",children:[f.jsxs("span",{className:"bg-green-100 text-green-800 font-bold px-4 py-2 rounded-full shadow mb-4",children:[new Intl.NumberFormat("es-ES").format(e.precio),"€"]}),f.jsx("h1",{className:"font-serif text-3xl font-bold text-gray-800",children:e.titulo}),f.jsxs("div",{className:"mt-2 flex items-center gap-2 text-gray-600 justify-center",children:[f.jsx(h4,{className:"h-5 w-5"}),f.jsxs("span",{children:[((P=e.municipios)==null?void 0:P.nombre)||((L=e.distritos)==null?void 0:L.nombre),", Madrid"]})]}),f.jsxs("div",{className:"mt-4 flex gap-6 text-gray-700 justify-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(EB,{className:"h-5 w-5"}),f.jsxs("span",{children:[e.habitaciones," hab."]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(SB,{className:"h-5 w-5"}),f.jsxs("span",{children:[e.banos," baños"]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(WB,{className:"h-5 w-5"}),f.jsxs("span",{children:[e.metros," m²"]})]})]})]})})}),f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[f.jsx("h2",{className:"font-serif text-xl font-semibold mb-4",children:"Descripción"}),f.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:e.descripcion})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[f.jsx("h2",{className:"font-serif text-xl font-semibold mb-4",children:"Características del inmueble"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Ref."}),f.jsx("span",{className:"text-grey-600",children:e.id})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Tipo"}),f.jsx("span",{className:"text-grey-600",children:e.tipo})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Año"}),f.jsx("span",{className:"text-grey-600",children:"Consultar"})]})]})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[f.jsx("h2",{className:"font-serif text-xl font-semibold mb-4",children:"Costes"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Precio"}),f.jsxs("span",{className:"font-bold",children:[new Intl.NumberFormat("es-ES").format(e.precio),"€"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Cuota hipoteca aprox."}),f.jsx("span",{className:"text-grey-600",children:"Consultar"})]})]})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[f.jsx("h2",{className:"font-serif text-xl font-semibold mb-4",children:"Clase energética"}),f.jsx("div",{className:"h-4 w-full rounded-full bg-gradient-to-r from-green-500 via-yellow-500 to-red-500"}),f.jsx("p",{className:"text-gray-600 text-center mt-2",children:"En trámite"})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[f.jsx("h2",{className:"font-serif text-xl font-semibold mb-4",children:"Servicios cercanos"}),f.jsx("div",{className:"grid grid-cols-2 gap-4",children:[["🚇","Transporte público"],["🏫","Colegios"],["🏥","Centros médicos"],["🛒","Supermercados"]].map(([I,C])=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{children:I}),f.jsx("span",{children:C})]},C))})]}),e.lat&&e.lng&&f.jsx(N.Suspense,{fallback:f.jsx("p",{children:"Cargando mapa..."}),children:f.jsx("div",{className:"h-[400px] w-full rounded-xl shadow-lg overflow-hidden",children:f.jsx(Wne,{center:[e.lat,e.lng],zoom:13})})}),f.jsx("section",{className:"mt-16",children:f.jsx(aM,{})})]}),f.jsx("div",{className:"lg:col-span-1",children:f.jsxs("div",{className:"sticky top-32 bg-white rounded-xl shadow-lg p-6",children:[f.jsx("h2",{className:"font-serif text-xl font-semibold mb-4 text-center",children:"Contacta con nosotros"}),f.jsx(ly,{propertyId:e.id})]})})]}),s.length>0&&f.jsxs("div",{className:"mt-16 space-y-4",children:[f.jsx("h2",{className:"font-serif text-2xl font-semibold",children:"Propiedades similares"}),f.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:s.map(I=>f.jsx(lM,{property:I,onContactClick:()=>l(!0),onViewDetails:()=>window.location.href=`/propiedad/${I.id}`},I.id))})]})]}),f.jsx(Mo,{open:a,onOpenChange:l,propertyId:e.id})]})}var Xne="Label",sO=N.forwardRef((n,e)=>f.jsx(oi.label,{...n,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=n.onMouseDown)==null||r.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));sO.displayName=Xne;var oO=sO;const aO=N.forwardRef(({className:n,...e},t)=>f.jsx(oO,{ref:t,className:si("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),...e}));aO.displayName=oO.displayName;const lO=N.forwardRef(({className:n,...e},t)=>f.jsx("form",{ref:t,className:si("space-y-6",n),...e}));lO.displayName="Form";const bh=N.forwardRef(({className:n,error:e,children:t,...i},r)=>f.jsxs("div",{ref:r,className:si("space-y-2",n),...i,children:[t,e&&f.jsx("p",{className:"text-sm font-medium text-destructive",children:e})]}));bh.displayName="FormField";const Sh=N.forwardRef(({className:n,...e},t)=>f.jsx(aO,{ref:t,className:si("text-sm font-medium",n),...e}));Sh.displayName="FormLabel";const qne=N.forwardRef(({className:n,children:e,...t},i)=>f.jsx("p",{ref:i,className:si("text-sm font-medium text-destructive",n),...t,children:e}));qne.displayName="FormMessage";function Yne(){const{handleFormSubmit:n,errors:e}=iO(),[t,i]=N.useState({nombre:"",email:"",telefono:"",mensaje:""}),[r,s]=N.useState(!1),o=async a=>{a.preventDefault(),s(!0);try{await n(t)&&i({nombre:"",email:"",telefono:"",mensaje:""})}finally{s(!1)}};return f.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:f.jsx("div",{className:"container py-16",children:f.jsxs("div",{className:"grid gap-16 lg:grid-cols-2",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[f.jsx("h1",{className:"mb-8 text-4xl font-bold",children:"Contacta con nosotros"}),f.jsx("p",{className:"mb-8 text-lg text-gray-600",children:"Estamos aquí para ayudarte a encontrar tu hogar ideal. No dudes en contactarnos para cualquier consulta."}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"rounded-full bg-primary/10 p-3 text-primary",children:f.jsx(h4,{className:"h-6 w-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:"Dirección"}),f.jsx("p",{className:"text-gray-600",children:"Calle Example 123, 28001 Madrid"})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"rounded-full bg-primary/10 p-3 text-primary",children:f.jsx(id,{className:"h-6 w-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:"Teléfono"}),f.jsx("p",{className:"text-gray-600",children:"+34 91 123 45 67"})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"rounded-full bg-primary/10 p-3 text-primary",children:f.jsx(jB,{className:"h-6 w-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:"Email"}),f.jsx("p",{className:"text-gray-600",children:"info@casaiamadrid.com"})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"rounded-full bg-primary/10 p-3 text-primary",children:f.jsx(wv,{className:"h-6 w-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:"Horario"}),f.jsxs("p",{className:"text-gray-600",children:["Lunes a Viernes: 9:00 - 20:00",f.jsx("br",{}),"Sábados: 10:00 - 14:00"]})]})]})]})]}),f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"rounded-lg bg-white p-8 shadow-lg",children:[f.jsx("h2",{className:"mb-6 text-2xl font-semibold",children:"Envíanos un mensaje"}),f.jsxs(lO,{onSubmit:o,className:"space-y-6",children:[f.jsxs(bh,{error:e.nombre,children:[f.jsx(Sh,{children:"Nombre completo"}),f.jsx("input",{type:"text",required:!0,className:"w-full rounded-lg border p-3",placeholder:"Tu nombre",value:t.nombre,onChange:a=>i({...t,nombre:a.target.value})})]}),f.jsxs(bh,{error:e.email,children:[f.jsx(Sh,{children:"Email"}),f.jsx("input",{type:"email",required:!0,className:"w-full rounded-lg border p-3",placeholder:"tu@email.com",value:t.email,onChange:a=>i({...t,email:a.target.value})})]}),f.jsxs(bh,{error:e.telefono,children:[f.jsx(Sh,{children:"Teléfono"}),f.jsx("input",{type:"tel",required:!0,pattern:"[6789]\\d{8}",className:"w-full rounded-lg border p-3",placeholder:"+34",value:t.telefono,onChange:a=>i({...t,telefono:a.target.value})})]}),f.jsxs(bh,{error:e.mensaje,children:[f.jsx(Sh,{children:"Mensaje"}),f.jsx("textarea",{className:"h-32 w-full rounded-lg border p-3",placeholder:"¿En qué podemos ayudarte?",value:t.mensaje,onChange:a=>i({...t,mensaje:a.target.value})})]}),f.jsx(Zt,{type:"submit",className:"w-full",disabled:r,children:r?"Enviando...":"Enviar mensaje"})]})]})]})})})}function Kne(){const n=[{icon:f.jsx(Bl,{className:"h-6 w-6"}),title:"Comprar casa",description:"Guías y consejos para compradores"},{icon:f.jsx(TB,{className:"h-6 w-6"}),title:"Vender propiedad",description:"Estrategias para vendedores"},{icon:f.jsx(Xf,{className:"h-6 w-6"}),title:"Mercado inmobiliario",description:"Análisis y tendencias"},{icon:f.jsx(VB,{className:"h-6 w-6"}),title:"Consejos legales",description:"Aspectos jurídicos"},{icon:f.jsx(BB,{className:"h-6 w-6"}),title:"Estilo de vida y decoración",description:"Ideas para tu hogar"}];return f.jsx("div",{className:"grid gap-6 md:grid-cols-3 lg:grid-cols-5",children:n.map((e,t)=>f.jsx(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},whileHover:{y:-5},className:"group cursor-pointer rounded-2xl bg-white p-6 text-center shadow-lg transition-all hover:shadow-xl",children:f.jsxs(yi,{to:`/blog?categoria=${encodeURIComponent(e.title)}`,children:[f.jsx("div",{className:"mb-4 inline-flex h-12 w-12 items-center justify-center rounded-full bg-[#D4AF37]/10 text-[#D4AF37]",children:e.icon}),f.jsx("h3",{className:"mb-2 font-serif text-lg font-bold",children:e.title}),f.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})},e.title))})}function Zne(){const[n,e]=N.useState([]),[t,i]=N.useState(!0),[r,s]=N.useState(null);return N.useEffect(()=>{async function o(){try{const{data:a,error:l}=await jr.from("blogs").select("id, title, excerpt, image").eq("categoria","articulos_destacados").order("date",{ascending:!1}).limit(3);if(l)throw l;e(a)}catch(a){console.error("Error fetching featured articles:",a),s(a.message)}finally{i(!1)}}o()},[]),t?f.jsx("div",{className:"flex min-h-[300px] items-center justify-center",children:f.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},children:f.jsx(bv,{className:"h-8 w-8 animate-spin text-[#D4AF37]"})})}):r?f.jsx("div",{className:"rounded-lg bg-red-50 p-4 text-center text-red-800",children:f.jsx("p",{children:"Lo sentimos, no pudimos cargar los artículos destacados."})}):n.length?f.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:n.map((o,a)=>f.jsx(le.article,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:a*.1},className:"group overflow-hidden rounded-2xl bg-white shadow-lg",children:f.jsxs(yi,{to:`/blog/${o.id}`,children:[f.jsx("div",{className:"relative h-48 overflow-hidden",children:f.jsx("img",{src:o.image,alt:o.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"})}),f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"mb-3 font-serif text-xl font-bold",children:o.title}),f.jsx("p",{className:"mb-4 text-gray-600",children:o.excerpt}),f.jsxs("div",{className:"flex items-center text-[#D4AF37]",children:[f.jsx("span",{className:"text-sm font-medium",children:"Leer más"}),f.jsx(Dr,{className:"ml-2 h-4 w-4"})]})]})]})},o.id))}):f.jsx("div",{className:"rounded-lg bg-gray-50 p-8 text-center",children:f.jsx("p",{className:"text-lg text-gray-600",children:"En breve publicaremos nuevos artículos destacados. ¡Vuelve pronto!"})})}function Jne(){const n=[{id:4,title:"Los 5 errores más comunes al comprar una casa",excerpt:"Aprende a evitar los errores típicos en el proceso de compra",image:"https://images.unsplash.com/photo-1560449016-e71c4185f59e"},{id:5,title:"Guía de financiación hipotecaria",excerpt:"Todo lo que necesitas saber sobre hipotecas",image:"https://images.unsplash.com/photo-1560520653-9e0e4c89eb11"},{id:6,title:"Reformas que aumentan el valor de tu propiedad",excerpt:"Inversiones inteligentes para revalorizar tu hogar",image:"https://images.unsplash.com/photo-1560448204-603b3fc33ddc"}];return f.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:n.map((e,t)=>f.jsx(le.article,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},className:"group overflow-hidden rounded-2xl bg-white shadow-lg",children:f.jsxs(yi,{to:`/blog/${e.id}`,children:[f.jsx("div",{className:"relative h-40 overflow-hidden",children:f.jsx("img",{src:e.image,alt:e.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"})}),f.jsxs("div",{className:"p-4",children:[f.jsx("h3",{className:"mb-2 font-serif text-lg font-bold",children:e.title}),f.jsx("p",{className:"mb-3 text-sm text-gray-600",children:e.excerpt}),f.jsxs("div",{className:"flex items-center text-[#D4AF37]",children:[f.jsx("span",{className:"text-sm font-medium",children:"Leer más"}),f.jsx(Dr,{className:"ml-2 h-4 w-4"})]})]})]})},e.id))})}const Qne=({title:n,subtitle:e})=>{const[t,i]=N.useState(!1),r="https://pptkdbygswenchxurwkz.supabase.co/storage/v1/object/public/public-videos/blogs/hero-blog.mp4";return f.jsxs("section",{className:"relative min-h-[90vh] overflow-hidden pt-24",children:[t?f.jsx("img",{src:"https://images.unsplash.com/photo-1600585154340-be6161a56a0c",alt:"Luxury home interior",className:"absolute inset-0 h-full w-full object-cover"}):f.jsx("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"auto",onError:()=>i(!0),className:"absolute inset-0 h-full w-full object-cover",children:f.jsx("source",{src:r,type:"video/mp4"})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-black/60"}),f.jsx("div",{className:"relative flex min-h-[calc(90vh-6rem)] items-center justify-center px-4 text-center text-white",children:f.jsxs("div",{className:"max-w-3xl",children:[f.jsx(le.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-6 font-serif text-5xl font-bold md:text-6xl",children:n}),f.jsx(le.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-xl opacity-90",children:e})]})})]})};function eie(){const[n,e]=N.useState(!1);return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx(Qne,{title:"Inspírate, aprende y descubre el mundo inmobiliario con Casaia",subtitle:"Guías, consejos y tendencias para acompañarte en cada decisión"}),f.jsx("section",{className:"bg-white py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsx(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:f.jsx("p",{className:"text-xl text-gray-600",children:"En Casaia creemos que el conocimiento transforma decisiones. Aquí encontrarás información relevante para comprar, vender o invertir con confianza."})})})}),f.jsx("section",{className:"py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx(le.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center font-serif text-3xl font-bold md:text-4xl",children:"Últimos Artículos Destacados"}),f.jsx(Zne,{})]})}),f.jsx("section",{className:"bg-gray-100 py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx(le.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center font-serif text-3xl font-bold md:text-4xl",children:"Explora por Categorías"}),f.jsx(Kne,{})]})}),f.jsx("section",{className:"bg-[#F2F2F2] py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-4 font-serif text-3xl font-bold md:text-4xl",children:"¿Quieres recibir novedades y consejos inmobiliarios?"}),f.jsx("p",{className:"mb-8 text-xl text-gray-600",children:"Suscríbete y mantente informado."}),f.jsxs(Zt,{size:"lg",className:"bg-[#D4AF37] px-8 py-6 text-lg hover:bg-[#D4AF37]/90",children:["Suscribirme",f.jsx(Dr,{className:"ml-2 h-5 w-5"})]})]})})}),f.jsx("section",{className:"py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx(le.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center font-serif text-3xl font-bold md:text-4xl",children:"Artículos más leídos"}),f.jsx(Jne,{})]})}),f.jsx("section",{className:"bg-[#1A1A1A] py-20 text-white",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Beneficios de estar informado"}),f.jsx("p",{className:"text-xl opacity-90",children:"Tomar decisiones con información clara y actualizada te permite aprovechar oportunidades, proteger tu inversión y planificar con éxito."})]})})}),f.jsx("section",{className:"bg-white py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"¿Quiénes escriben en Casaia?"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Nuestro equipo de expertos en inmobiliaria, legalidad y tendencias del mercado selecciona cada artículo para ayudarte a avanzar con seguridad."})]})})}),f.jsx("section",{className:"relative overflow-hidden bg-[#D4AF37] py-20",children:f.jsx("div",{className:"container relative mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"text-center text-white",children:[f.jsx("h2",{className:"mb-4 font-serif text-4xl font-bold md:text-5xl",children:"¿Listo para dar el primer paso informado hacia tu próximo hogar o inversión?"}),f.jsxs(Zt,{size:"lg",onClick:()=>e(!0),className:"bg-white px-8 py-6 text-lg font-medium text-[#D4AF37] hover:bg-white/90",children:["Explorar oportunidades",f.jsx(Dr,{className:"ml-2 h-5 w-5"})]})]})})}),f.jsx(Mo,{open:n,onOpenChange:e})]})}const tie=({post:n})=>{const e="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=2940&auto=format&fit=crop";return f.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},className:"relative min-h-[70vh] w-full overflow-hidden pt-24 lg:min-h-[80vh]",children:[f.jsxs(le.div,{initial:{scale:1.1},animate:{scale:1},transition:{duration:1.2},className:"absolute inset-0",children:[f.jsx("img",{src:(n==null?void 0:n.image)||e,alt:n==null?void 0:n.title,className:"h-full w-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/80 via-black/50 to-transparent opacity-90"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"}),f.jsx("div",{className:"absolute inset-0 bg-black/20"})," "]}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},className:"container max-w-4xl text-center",children:[f.jsx(le.span,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mb-8 inline-block rounded-full bg-[#D4AF37]/20 px-6 py-2 text-sm font-medium tracking-wide text-white backdrop-blur-sm",children:"Historia de éxito"}),f.jsx(le.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-8 font-serif text-4xl font-bold leading-tight text-white md:text-5xl lg:text-6xl",children:n==null?void 0:n.title}),f.jsx(le.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"mx-auto max-w-2xl font-serif text-lg italic leading-relaxed text-gray-200/90 md:text-xl",children:n==null?void 0:n.excerpt}),f.jsx(le.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"8rem"},transition:{delay:.8,duration:.8},className:"mx-auto mt-12 h-px bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent"}),f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"mt-8 flex items-center justify-center gap-2 text-sm text-gray-300",children:[f.jsx(xv,{className:"h-4 w-4"}),f.jsx("span",{children:n==null?void 0:n.date})]})]})})]})},nie=({content:n})=>{var l,c;const e={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},i=(()=>{if(!n)return{days:"30",percent:"8",visits:"12"};const u=n.match(/(\d+)\s*días\b/i),p=n.match(/([+-]?\d+)%/),m=n.match(/(\d+)\s*visitas\b/i);return{days:u?u[1]:"30",percent:p?p[1]:"8",visits:m?m[1]:"12"}})();if(!n)return f.jsx("div",{className:"rounded-xl bg-white p-8 shadow-lg md:p-12 text-center",children:f.jsx("h2",{className:"text-2xl font-medium text-gray-600",children:"Este artículo está siendo actualizado. ¡Vuelve pronto!"})});const r=n.split(/<h2>El desafío<\/h2>/),s=n.split(/<h2>La solución Casaia<\/h2>/),o=n.split(/<h2>Resultados logrados<\/h2>/),a={challenge:((l=r[1])==null?void 0:l.split(/<h2>/)[0])||null,solution:((c=s[1])==null?void 0:c.split(/<h2>/)[0])||null,results:o[1]||null};return f.jsxs("div",{className:"max-w-4xl mx-auto space-y-16 bg-white rounded-2xl p-8 shadow-lg",children:[f.jsxs(le.div,{variants:e,initial:"initial",animate:"animate",className:"grid gap-6 md:grid-cols-3 bg-white rounded-2xl p-8 shadow-lg mx-auto max-w-3xl",children:[f.jsx(Q1,{icon:f.jsx(wv,{}),value:i.days,label:"días hasta la venta"}),f.jsx(Q1,{icon:f.jsx(Xf,{}),value:`${i.percent}%`,label:"sobre precio estimado"}),f.jsx(Q1,{icon:f.jsx(Oa,{}),value:i.visits,label:"visitas cualificadas"})]}),a.challenge&&f.jsx(e_,{title:"El desafío",html:a.challenge}),a.solution&&f.jsx(e_,{title:"La solución Casaia",html:a.solution}),a.results&&f.jsx(e_,{title:"Resultados logrados",html:a.results}),!a.challenge&&!a.solution&&!a.results&&f.jsx("div",{className:"bg-white rounded-2xl p-10 shadow-xl transition-transform hover:-translate-y-1 duration-300 space-y-6 mx-auto max-w-3xl",children:f.jsx("div",{className:"prose prose-lg prose-gray max-w-none mx-auto",dangerouslySetInnerHTML:{__html:n}})})]})},Q1=({icon:n,value:e,label:t})=>f.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[f.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#D4AF37]/10 text-[#D4AF37]",children:n}),f.jsx("h3",{className:"mt-2 text-3xl font-bold text-gray-800",children:e}),f.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t})]}),e_=({title:n,html:e})=>f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-2xl p-8 shadow-lg",children:[f.jsx("h2",{className:"mb-6 text-2xl font-semibold text-gray-900 border-b-2 border-[#D4AF37]/30 pb-2",children:n}),f.jsx("div",{className:"prose prose-lg prose-gray max-w-none mx-auto",dangerouslySetInnerHTML:{__html:e}})]});function iie({content:n}){if(!n)return null;const e=n.split(/<h2>([\s\S]*?)<\/h2>/g).filter(r=>r.trim()!==""),t=[];for(let r=0;r<e.length;r+=2)t.push({title:e[r].trim(),html:e[r+1]||""});const i={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}};return f.jsx("div",{className:"space-y-12 my-12",children:t.map((r,s)=>f.jsx(le.section,{...i,className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-shadow duration-300",children:f.jsxs("div",{className:"p-8 md:p-12",children:[f.jsx("h2",{className:"mb-4 font-serif text-3xl font-bold text-gray-900 border-none border-b border-[#D4AF37] pb-2",children:r.title}),f.jsx("div",{className:"prose prose-lg lg:prose-xl prose-headings:font-serif prose-headings:text-gray-900 prose-p:text-gray-700 prose-ul:list-disc prose-ul:pl-6 prose-a:text-[#D4AF37] hover:prose-a:text-[#B89135]",dangerouslySetInnerHTML:{__html:r.html}})]})},s))})}function rie(){var u,p;const{id:n}=AL(),e=js(),[t,i]=N.useState(null),[r,s]=N.useState(!0);if(N.useEffect(()=>{(async()=>{try{const{data:g,error:y}=await jr.from("blogs").select("*").eq("id",n).maybeSingle();y?(console.error("Error fetching post:",y),i(null)):i(g)}catch(g){console.error("Error:",g),i(null)}finally{s(!1)}})(),window.scrollTo(0,0)},[n]),r)return f.jsx("div",{className:"container min-h-screen py-20 text-center",children:f.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[f.jsx("div",{className:"mx-auto h-8 w-48 animate-pulse rounded-full bg-gray-200"}),f.jsx("div",{className:"mx-auto h-4 w-64 animate-pulse rounded-full bg-gray-200"})]})});if(!t)return f.jsxs("div",{className:"container min-h-screen py-20 text-center",children:[f.jsx("h1",{className:"mb-6 text-2xl font-bold",children:"Artículo no encontrado"}),f.jsxs(Zt,{onClick:()=>e("/blog"),children:[f.jsx(yA,{className:"mr-2 h-4 w-4"}),"Volver al blog"]})]});const o=`${t.title} – Casaia Inmobiliaria`,a=((u=t.description)==null?void 0:u.slice(0,160))||((p=t.content)==null?void 0:p.slice(0,160))||"",l=`https://casaiamadrid.com/blog/${t.slug||n}`,c=t.image||"https://casaiamadrid.com/og-image.jpg";return f.jsxs("div",{className:"min-h-screen bg-[#F2F2F2]",children:[f.jsxs(Jf,{children:[f.jsx("title",{children:o}),f.jsx("meta",{name:"description",content:a}),f.jsx("link",{rel:"canonical",href:l}),f.jsx("meta",{property:"og:title",content:t.title}),f.jsx("meta",{property:"og:description",content:a}),f.jsx("meta",{property:"og:type",content:"article"}),f.jsx("meta",{property:"og:url",content:l}),f.jsx("meta",{property:"og:image",content:c}),f.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),f.jsx("meta",{name:"twitter:title",content:t.title}),f.jsx("meta",{name:"twitter:description",content:a}),f.jsx("meta",{name:"twitter:image",content:c})]}),f.jsx(tie,{post:t}),f.jsxs("article",{className:"container max-w-4xl py-16",children:[f.jsxs(Zt,{variant:"ghost",className:"mb-12",onClick:()=>e("/blog"),children:[f.jsx(yA,{className:"mr-2 h-4 w-4"}),"Volver al blog"]}),f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-16",children:[t.categoria==="articulos_destacados"?f.jsx(iie,{content:t.content}):f.jsx(nie,{content:t.content}),f.jsxs("section",{className:"mt-20 overflow-hidden rounded-2xl bg-white p-12 shadow-xl",children:[f.jsx("h2",{className:"mb-8 font-serif text-3xl font-bold",children:"Solicitar valoración premium"}),f.jsx(ly,{})]})]})]})]})}function sie(){const n=[{icon:f.jsx(rd,{className:"h-8 w-8"}),title:"Confianza",description:"Construimos relaciones sólidas basadas en la transparencia y honestidad"},{icon:f.jsx(jS,{className:"h-8 w-8"}),title:"Transparencia",description:"Información clara y precisa en cada etapa del proceso"},{icon:f.jsx(DB,{className:"h-8 w-8"}),title:"Innovación",description:"Tecnología avanzada al servicio de tus necesidades"},{icon:f.jsx(Sv,{className:"h-8 w-8"}),title:"Compromiso",description:"Dedicación total hasta alcanzar tus objetivos"}];return f.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-4",children:n.map((e,t)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},className:"group rounded-2xl bg-white p-6 shadow-lg transition-all hover:shadow-xl",children:[f.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-[#D4AF37]/10 text-[#D4AF37]",children:e.icon}),f.jsx("h3",{className:"mb-2 font-serif text-xl font-bold",children:e.title}),f.jsx("p",{className:"text-gray-600",children:e.description})]},e.title))})}function cO(){const n=[{icon:f.jsx(LB,{className:"h-8 w-8"}),title:"Escuchar",description:"Entendemos tus necesidades y objetivos"},{icon:f.jsx(FS,{className:"h-8 w-8"}),title:"Analizar",description:"Evaluamos las mejores opciones para ti"},{icon:f.jsx(NB,{className:"h-8 w-8"}),title:"Planificar",description:"Diseñamos una estrategia personalizada"},{icon:f.jsx(Sv,{className:"h-8 w-8"}),title:"Ejecutar con excelencia",description:"Implementamos la solución perfecta"}];return f.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-4",children:n.map((e,t)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},className:"relative text-center",children:[f.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-[#D4AF37]/10 text-[#D4AF37] mx-auto",children:e.icon}),f.jsx("h3",{className:"mb-2 font-serif text-xl font-bold",children:e.title}),f.jsx("p",{className:"text-gray-600",children:e.description}),t<n.length-1&&f.jsx("div",{className:"absolute right-0 top-8 hidden h-0.5 w-full translate-x-1/2 bg-[#D4AF37]/20 lg:block"})]},e.title))})}function oie(){const[n,e]=N.useState(!1);return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsxs("section",{className:"relative min-h-[90vh] overflow-hidden pt-24",children:[f.jsxs("div",{className:"absolute inset-0",children:[f.jsx("img",{className:"h-full w-full object-cover",alt:"Professional team in a modern office",src:"https://images.unsplash.com/photo-1577962917302-cd874c4e31d2"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-black/60"})]}),f.jsx("div",{className:"relative flex min-h-[calc(90vh-6rem)] items-center",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-3xl text-white",children:[f.jsx("h1",{className:"mb-6 font-serif text-5xl font-bold leading-tight md:text-6xl",children:"Conectamos sueños con hogares reales."}),f.jsx("p",{className:"mb-8 text-xl opacity-90",children:"En Casaia, combinamos innovación, pasión y experiencia para guiar cada historia inmobiliaria hacia el éxito."}),f.jsxs(Zt,{size:"lg",className:"bg-[#D4AF37] px-8 py-6 text-lg hover:bg-[#D4AF37]/90",onClick:()=>e(!0),children:["Conoce más sobre nosotros",f.jsx(Dr,{className:"ml-2 h-5 w-5"})]})]})})})]}),f.jsx("section",{className:"bg-white py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Nuestra Historia"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Nacimos con un objetivo claro: transformar el mercado inmobiliario combinando tecnología avanzada y atención personalizada. En cada propiedad, vemos una oportunidad de cambiar vidas."})]})})}),f.jsx("section",{className:"bg-[#1A1A1A] py-20 text-white",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Nuestra Filosofía"}),f.jsx("p",{className:"text-xl opacity-90",children:"Cada cliente es único. Cada hogar es una historia. Creemos en la transparencia, el acompañamiento cercano y el trabajo bien hecho."})]})})}),f.jsx("section",{className:"py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx(le.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center font-serif text-3xl font-bold md:text-4xl",children:"Nuestros Valores"}),f.jsx(sie,{})]})}),f.jsx("section",{className:"bg-gray-100 py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Qué nos hace diferentes"}),f.jsx("p",{className:"text-xl text-gray-600",children:"En Casaia combinamos la inteligencia artificial para análisis precisos con el acompañamiento humano de asesores expertos que entienden tus necesidades."})]})})}),f.jsx("section",{className:"bg-white py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-12 font-serif text-3xl font-bold md:text-4xl",children:"Nuestro equipo humano"}),f.jsx("div",{className:"relative mb-8 overflow-hidden rounded-2xl",children:f.jsx("img",{className:"w-full",alt:"Casaia team working together",src:"https://images.unsplash.com/photo-1569083676317-dafd0fc965f7"})}),f.jsx("p",{className:"text-xl text-gray-600",children:"Somos asesores, negociadores y acompañantes comprometidos en cada etapa de tu camino inmobiliario."})]})})}),f.jsx("section",{className:"py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx(le.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center font-serif text-3xl font-bold md:text-4xl",children:"Cómo trabajamos"}),f.jsx(cO,{})]})}),f.jsx("section",{className:"bg-[#1A1A1A] py-20 text-white",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs("div",{className:"grid gap-12 md:grid-cols-2",children:[f.jsxs(le.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},className:"flex flex-col justify-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Tecnología al servicio de las personas"}),f.jsx("p",{className:"text-xl text-gray-300",children:"Utilizamos herramientas de análisis predictivo, posicionamiento estratégico y tour virtual, siempre poniendo a las personas en el centro de cada decisión."})]}),f.jsxs(le.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},className:"grid gap-6 md:grid-cols-2",children:[f.jsxs("div",{className:"rounded-2xl bg-white/5 p-6 backdrop-blur-sm",children:[f.jsx(Wf,{className:"mb-4 h-8 w-8 text-[#D4AF37]"}),f.jsx("h3",{className:"mb-2 font-serif text-xl font-bold",children:"IA Avanzada"}),f.jsx("p",{className:"text-gray-300",children:"Análisis predictivo para decisiones precisas"})]}),f.jsxs("div",{className:"rounded-2xl bg-white/5 p-6 backdrop-blur-sm",children:[f.jsx(Oa,{className:"mb-4 h-8 w-8 text-[#D4AF37]"}),f.jsx("h3",{className:"mb-2 font-serif text-xl font-bold",children:"Equipo Experto"}),f.jsx("p",{className:"text-gray-300",children:"Asesores dedicados a tu éxito"})]})]})]})})}),f.jsx("section",{className:"bg-white py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Compromiso social"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Nos involucramos en iniciativas locales y proyectos sociales para construir comunidades más fuertes y responsables."})]})})}),f.jsx("section",{className:"bg-gray-100 py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Alianzas estratégicas"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Trabajamos de la mano con expertos legales, hipotecarios y tecnológicos para ofrecerte un servicio integral, seguro y eficiente."})]})})}),f.jsx("section",{className:"py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsx(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-4xl",children:f.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[f.jsxs("div",{className:"rounded-2xl bg-white p-8 shadow-lg",children:[f.jsx("p",{className:"mb-4 text-lg italic text-gray-600",children:'"Una atención y una gestión muy cercana y agradable desde el primer día. Compramos una casa con ellos y desde el primer momento hasta el día de hoy, después de acabar todos los trámites, se siguen preocupando y preguntándonos que tal todo. Gracias a Carlos por todo su trabajo y cercanía."'}),f.jsx("p",{className:"font-medium",children:"Diego O."})]}),f.jsxs("div",{className:"rounded-2xl bg-white p-8 shadow-lg",children:[f.jsx("p",{className:"mb-4 text-lg italic text-gray-600",children:'"Muy buenos profesionales. En concreto Micaela. Se encargó de la venta de mi piso en circunstancias delicadas, y gracias a ella todos salimos contentos, gracias os recomendaré sin dudarlo."'}),f.jsx("p",{className:"font-medium",children:"Ramona."})]})]})})})}),f.jsx("section",{className:"relative overflow-hidden bg-[#D4AF37] py-20",children:f.jsx("div",{className:"container relative mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"text-center text-white",children:[f.jsx("h2",{className:"mb-4 font-serif text-4xl font-bold md:text-5xl",children:"¿Quieres saber cómo podemos ayudarte a construir tu próxima historia inmobiliaria?"}),f.jsx("p",{className:"mb-8 text-xl opacity-90",children:"Conectemos hoy mismo."}),f.jsxs(Zt,{size:"lg",onClick:()=>e(!0),className:"bg-white px-8 py-6 text-lg font-medium text-[#D4AF37] hover:bg-white/90",children:["Contactar con Casaia",f.jsx(Dr,{className:"ml-2 h-5 w-5"})]})]})})}),f.jsx(Mo,{open:n,onOpenChange:e})]})}function aie({onContactClick:n}){const[e,t]=N.useState(!1);return f.jsxs("section",{className:"relative min-h-[80vh] overflow-hidden pt-32",children:[e?f.jsx("img",{src:"https://images.unsplash.com/photo-1654796413975-cef9a826b6f9",alt:"Tu hogar ideal",className:"absolute inset-0 h-full w-full object-cover filter brightness-60"}):f.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"auto",onError:()=>t(!0),className:"absolute inset-0 h-full w-full object-cover filter brightness-60",children:[f.jsx("source",{src:"https://pptkdbygswenchxurwkz.supabase.co/storage/v1/object/public/public-videos/heros/hero-comprar.mp4",type:"video/mp4"}),"Tu navegador no soporta video."]}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-black/40"}),f.jsxs("div",{className:"relative flex flex-col items-center justify-start text-center text-white h-full px-4 pt-24",children:[f.jsx(le.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-4 max-w-2xl font-serif text-4xl font-bold leading-snug sm:text-5xl lg:text-6xl",children:"Tu nuevo hogar te espera"}),f.jsx(le.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mb-8 max-w-lg text-base sm:text-lg opacity-90",children:"Explora propiedades únicas con tecnología avanzada y asesoramiento personalizado."}),f.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:f.jsxs(Zt,{variant:"outline",size:"lg",className:"inline-flex items-center space-x-2 border-white text-white px-6 py-3 sm:px-8 sm:py-4 text-base sm:text-lg font-semibold rounded-full",onClick:n,children:[f.jsx(OS,{className:"h-5 w-5 sm:h-6 sm:w-6"}),f.jsx("span",{children:"Contáctanos"})]})})]})]})}function lie(){const[n,e]=Dt.useState([]),[t,i]=Dt.useState(!0),[r,s]=Dt.useState(null),o=js();jv();const[a,l]=Dt.useState(!1);return Dt.useEffect(()=>{async function c(){try{i(!0);const{data:u,error:p}=await jr.from("inmuebles").select(`
            *,
            municipios (
              id,
              nombre,
              provincia
            ),
            distritos (
              id,
              nombre,
              municipios (
                nombre
              )
            )
          `).eq("destacado",!0).limit(6);if(p)throw p;e(u||[])}catch(u){console.error("Error fetching featured properties:",u),s(u.message)}finally{i(!1)}}c()},[]),t?f.jsx("div",{className:"text-center",children:f.jsx("p",{className:"text-lg text-gray-600",children:"Cargando propiedades destacadas..."})}):r?f.jsx("div",{className:"text-center",children:f.jsx("p",{className:"text-lg text-red-600",children:"Error cargando propiedades destacadas. Por favor, intenta de nuevo."})}):f.jsx("div",{className:"grid gap-8 sm:grid-cols-2 lg:grid-cols-3",children:n.map(c=>f.jsx(lM,{property:c,onContactClick:()=>l(!0),onViewDetails:()=>o(`/propiedad/${c.id}`)},c.id))})}function cie(){const n=[{icon:f.jsx(Wf,{className:"h-8 w-8"}),title:"Búsqueda Inteligente",description:"Nuestro sistema de IA aprende de tus preferencias para encontrar las propiedades perfectas"},{icon:f.jsx(Sv,{className:"h-8 w-8"}),title:"Predicción de Precios",description:"Análisis avanzado del mercado para garantizar el mejor precio"},{icon:f.jsx(bB,{className:"h-8 w-8"}),title:"Oportunidades Predictivas",description:"Identificamos propiedades con potencial antes que nadie"}];return f.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:n.map((e,t)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},className:"rounded-xl bg-white p-6 shadow-lg",children:[f.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-[#D4AF37]/10 text-[#D4AF37]",children:e.icon}),f.jsx("h3",{className:"mb-2 text-xl font-bold",children:e.title}),f.jsx("p",{className:"text-gray-600",children:e.description})]},t))})}const uie=[{name:"Búsqueda personalizada",traditional:!1,casaia:!0},{name:"Análisis de mercado con IA",traditional:!1,casaia:!0},{name:"Asesoría legal continua",traditional:!1,casaia:!0},{name:"Negociación profesional",traditional:!1,casaia:!0},{name:"Gestión de documentación",traditional:!0,casaia:!0}];function die(){return f.jsxs("section",{className:"relative mx-auto max-w-5xl overflow-hidden rounded-3xl border border-white/10 bg-white/80 shadow-2xl backdrop-blur-xl",children:[f.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[f.jsx("div",{className:"absolute -top-32 -left-32 h-80 w-80 rounded-full bg-[#D4AF37]/10 blur-3xl"}),f.jsx("div",{className:"absolute bottom-0 right-0 h-64 w-64 rounded-full bg-[#F4E4C1]/10 blur-3xl"})]}),f.jsxs("header",{className:"relative grid grid-cols-3 min-w-0",children:[f.jsx("h2",{className:"col-span-1 min-w-0 break-words whitespace-normal p-4 leading-snug font-serif text-base sm:text-2xl font-bold text-slate-900",children:"Características"}),f.jsx("h3",{className:"min-w-0 break-words whitespace-normal p-4 leading-snug flex items-center justify-center bg-slate-100/60 font-serif text-xs sm:text-lg font-semibold text-slate-700",children:"Búsqueda Tradicional"}),f.jsx("h3",{className:"min-w-0 break-words whitespace-normal p-4 leading-snug flex items-center justify-center bg-gradient-to-r from-[#D4AF37]/20 to-[#B8941F]/10 font-serif text-xs sm:text-lg font-semibold text-[#D4AF37]",children:"Casaia"})]}),f.jsx("div",{className:"relative overflow-x-auto",children:f.jsxs("table",{className:"w-full table-fixed divide-y divide-gray-200/60 text-sm lg:text-base",children:[f.jsxs("colgroup",{children:[f.jsx("col",{style:{width:"50%"}}),f.jsx("col",{style:{width:"25%"}}),f.jsx("col",{style:{width:"25%"}})]}),f.jsx("tbody",{children:uie.map((n,e)=>f.jsxs(le.tr,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:e*.05},className:"group hover:bg-gray-50/60",children:[f.jsx("td",{className:"whitespace-pre-wrap px-6 py-5 font-medium text-slate-700",children:n.name}),f.jsx("td",{className:"px-6 py-5 text-center",children:n.traditional?f.jsx("div",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-green-400 to-emerald-500 shadow-inner",children:f.jsx(pf,{className:"h-5 w-5 text-white"})}):f.jsx("div",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-red-100/60",children:f.jsx(Ma,{className:"h-5 w-5 text-red-600"})})}),f.jsx("td",{className:"px-6 py-5 text-center",children:n.casaia?f.jsx("div",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-[#D4AF37] to-[#B8941F] shadow",children:f.jsx(pf,{className:"h-5 w-5 text-white"})}):f.jsx("div",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-red-100/60",children:f.jsx(Ma,{className:"h-5 w-5 text-red-600"})})})]},n.name))})]})}),f.jsx("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#D4AF37]/60 to-transparent"})]})}function hie(){const[n,e]=N.useState([]),[t,i]=N.useState(!0),[r,s]=N.useState(null);return N.useEffect(()=>{async function o(){try{const{data:a,error:l}=await jr.from("blogs").select("*").eq("categoria","perfil_comprador").order("created_at",{ascending:!1}).limit(3);if(l)throw l;e(a)}catch(a){console.error("Error fetching buyer stories:",a),s(a.message)}finally{i(!1)}}o()},[]),t?f.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:f.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center gap-4",children:[f.jsx(bv,{className:"h-8 w-8 animate-spin text-[#D4AF37]"}),f.jsx("p",{className:"text-gray-500",children:"Cargando historias de éxito..."})]})}):r?f.jsx("div",{className:"rounded-lg bg-red-50 p-4 text-center text-red-800",children:f.jsx("p",{children:"Lo sentimos, no pudimos cargar las historias en este momento."})}):n.length?f.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:n.map((o,a)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:a*.1},className:"group overflow-hidden rounded-2xl bg-white shadow-lg transition-all duration-300 hover:translate-y-[-4px] hover:shadow-xl",children:[f.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[f.jsx("img",{src:o.image||"https://images.unsplash.com/photo-1600585154340-be6161a56a0c",alt:o.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"})]}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"mb-3 flex items-center gap-2 text-sm text-gray-500",children:[f.jsx(xv,{className:"h-4 w-4"}),f.jsx("span",{children:new Date(o.date).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})})]}),f.jsx("h3",{className:"mb-3 font-serif text-xl font-bold leading-tight text-gray-900 transition-colors duration-300 group-hover:text-[#D4AF37]",children:o.title}),f.jsx("p",{className:"mb-4 text-sm text-gray-600 line-clamp-2",children:o.excerpt}),f.jsx(yi,{to:`/blog/${o.id}`,children:f.jsxs(Zt,{variant:"ghost",className:"w-full justify-between border border-[#D4AF37]/20 text-[#D4AF37] hover:bg-[#D4AF37]/5 transition-all duration-300",children:["Leer experiencia completa",f.jsx(Dr,{className:"ml-2 h-4 w-4 transition-transform duration-300 group-hover:translate-x-1"})]})})]})]},o.id))}):f.jsx("div",{className:"rounded-lg bg-gray-50 p-8 text-center",children:f.jsx("p",{className:"text-lg text-gray-600",children:"Estamos preparando nuevas historias de éxito. ¡Vuelve pronto!"})})}function fie(){const n=[{icon:f.jsx(FS,{className:"h-8 w-8"}),title:"Búsqueda",description:"Encontramos las mejores opciones según tus criterios"},{icon:f.jsx(Bl,{className:"h-8 w-8"}),title:"Visitas",description:"Organizamos visitas a las propiedades seleccionadas"},{icon:f.jsx(IB,{className:"h-8 w-8"}),title:"Oferta",description:"Negociamos el mejor precio para ti"},{icon:f.jsx(d4,{className:"h-8 w-8"}),title:"Compra",description:"Gestionamos toda la documentación legal"},{icon:f.jsx($B,{className:"h-8 w-8"}),title:"Mudanza",description:"¡Bienvenido a tu nuevo hogar!"}];return f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute left-1/2 top-1/2 h-0.5 w-full -translate-x-1/2 -translate-y-1/2 bg-[#D4AF37]/20 lg:block hidden"}),f.jsx("div",{className:"grid gap-8 md:grid-cols-3 lg:grid-cols-5",children:n.map((e,t)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:t*.1},className:"relative text-center",children:[f.jsx("div",{className:"relative",children:f.jsx("div",{className:"mb-4 mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-[#D4AF37] text-white",children:e.icon})}),f.jsx("h3",{className:"mb-2 text-xl font-bold",children:e.title}),f.jsx("p",{className:"text-gray-600",children:e.description})]},t))})]})}function pie(){return f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"rounded-xl bg-white p-8 shadow-lg",children:[f.jsx("div",{className:"mb-8 flex items-center justify-center",children:f.jsx(CB,{className:"h-12 w-12 text-[#D4AF37]"})}),f.jsx("h3",{className:"mb-4 text-center text-2xl font-bold",children:"Calculadora Hipotecaria"}),f.jsx("p",{className:"mb-6 text-center text-gray-600",children:"Próximamente podrás calcular tu cuota mensual y simular diferentes escenarios hipotecarios."}),f.jsx("div",{className:"rounded-lg bg-[#D4AF37]/10 p-4 text-center",children:f.jsx("p",{className:"text-sm text-[#D4AF37]",children:"¡Estamos trabajando para traerte esta funcionalidad pronto!"})})]})}function mie(){const[n,e]=N.useState(!1),t=[{question:"¿Cuánto tiempo lleva encontrar una propiedad?",answer:"El proceso suele durar entre 2-3 meses, dependiendo de tus requisitos específicos y la disponibilidad en el mercado."},{question:"¿Qué documentación necesito para comprar?",answer:"Necesitarás DNI/NIE, justificantes de ingresos, declaración de la renta y documentación bancaria para la hipoteca."},{question:"¿Cómo funciona el proceso de compra?",answer:"El proceso incluye búsqueda, visitas, negociación, arras, hipoteca y escritura. Te acompañamos en cada paso."},{question:"¿Qué gastos adicionales debo considerar?",answer:"Los principales gastos son ITP/IVA, notaría, registro y gestoría. Te asesoramos sobre todos los costes."}];return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx(aie,{onContactClick:()=>e(!0)}),f.jsx("section",{className:"bg-white py-32",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-12 font-serif text-3xl font-bold md:text-4xl",children:"¿Por qué buscar con Casaia?"}),f.jsxs("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-4",children:[f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:"mb-4 rounded-full bg-primary/10 p-4",children:f.jsx(Wf,{className:"h-8 w-8 text-primary"})}),f.jsx("h3",{className:"mb-2 font-semibold",children:"Tecnología IA"}),f.jsx("p",{className:"text-center text-gray-600",children:"Búsqueda inteligente y predicción de precios"})]}),f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:"mb-4 rounded-full bg-primary/10 p-4",children:f.jsx(rd,{className:"h-8 w-8 text-primary"})}),f.jsx("h3",{className:"mb-2 font-semibold",children:"Seguridad Legal"}),f.jsx("p",{className:"text-center text-gray-600",children:"Asesoría jurídica completa"})]}),f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:"mb-4 rounded-full bg-primary/10 p-4",children:f.jsx(Bl,{className:"h-8 w-8 text-primary"})}),f.jsx("h3",{className:"mb-2 font-semibold",children:"Experiencia Humana"}),f.jsx("p",{className:"text-center text-gray-600",children:"20 años en el mercado inmobiliario"})]}),f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("div",{className:"mb-4 rounded-full bg-primary/10 p-4",children:f.jsx(RB,{className:"h-8 w-8 text-primary"})}),f.jsx("h3",{className:"mb-2 font-semibold",children:"Financiación"}),f.jsx("p",{className:"text-center text-gray-600",children:"Mejores condiciones hipotecarias"})]})]})]})})}),f.jsx("section",{className:"bg-gray-50 py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center",children:[f.jsx("h2",{className:"mb-4 font-serif text-3xl font-bold md:text-4xl",children:"Propiedades Destacadas"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Descubre nuestras mejores oportunidades"})]}),f.jsx(lie,{})]})}),f.jsx("section",{className:"bg-white py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center",children:[f.jsx("h2",{className:"mb-4 font-serif text-3xl font-bold md:text-4xl",children:"Explora por Categorías"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Encuentra el tipo de propiedad que buscas"})]}),f.jsx(aM,{})]})}),f.jsx("section",{className:"bg-gray-50 py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center",children:[f.jsx("h2",{className:"mb-4 font-serif text-3xl font-bold md:text-4xl",children:"Beneficios de usar nuestra IA"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Tecnología avanzada para encontrar tu hogar ideal"})]}),f.jsx(cie,{})]})}),f.jsx(rO,{}),f.jsx("section",{className:"bg-white py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-12 font-serif text-3xl font-bold md:text-4xl",children:"Asesoría Humana Personalizada"}),f.jsxs("div",{className:"grid gap-8 md:grid-cols-3",children:[f.jsxs("div",{className:"rounded-xl bg-gray-50 p-6",children:[f.jsx("h3",{className:"mb-4 text-xl font-bold",children:"Dedicación Exclusiva"}),f.jsx("p",{className:"text-gray-600",children:"Un asesor personal te acompaña durante todo el proceso"})]}),f.jsxs("div",{className:"rounded-xl bg-gray-50 p-6",children:[f.jsx("h3",{className:"mb-4 text-xl font-bold",children:"Disponibilidad Total"}),f.jsx("p",{className:"text-gray-600",children:"Atención inmediata cuando la necesites"})]}),f.jsxs("div",{className:"rounded-xl bg-gray-50 p-6",children:[f.jsx("h3",{className:"mb-4 text-xl font-bold",children:"Experiencia Real"}),f.jsx("p",{className:"text-gray-600",children:"Más de 20 años en el mercado inmobiliario"})]})]})]})})}),f.jsx("section",{className:"bg-gray-50 py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center",children:[f.jsx("h2",{className:"mb-4 font-serif text-3xl font-bold md:text-4xl",children:"¿Por qué elegir Casaia?"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Compara nuestra propuesta de valor"})]}),f.jsx(die,{})]})}),f.jsx("section",{className:"bg-white py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center",children:[f.jsx("h2",{className:"mb-4 font-serif text-3xl font-bold md:text-4xl",children:"Historias reales de compradores con Casaia"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Conoce cómo ayudamos a personas como tú a encontrar su hogar ideal"})]}),f.jsx(hie,{})]})}),f.jsx("section",{className:"bg-gray-50 py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center",children:[f.jsx("h2",{className:"mb-4 font-serif text-3xl font-bold md:text-4xl",children:"Proceso de Compra con Casaia"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Te acompañamos en cada paso"})]}),f.jsx(fie,{})]})}),f.jsx("section",{className:"bg-white py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mb-12 text-center",children:[f.jsx("h2",{className:"mb-4 font-serif text-3xl font-bold md:text-4xl",children:"Planifica tu Inversión"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Herramientas para tu decisión"})]}),f.jsx("div",{className:"mx-auto max-w-2xl",children:f.jsx(pie,{})})]})}),f.jsx("section",{className:"bg-gray-50 py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl",children:[f.jsx("h2",{className:"mb-12 text-center font-serif text-3xl font-bold md:text-4xl",children:"Preguntas Frecuentes"}),f.jsx("div",{className:"space-y-6",children:t.map((i,r)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:r*.1},className:"rounded-lg border bg-white p-6 shadow-sm",children:[f.jsx("h3",{className:"mb-2 font-semibold",children:i.question}),f.jsx("p",{className:"text-gray-600",children:i.answer})]},r))})]})})}),f.jsx("section",{className:"bg-white py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsx(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-2xl",children:f.jsxs("div",{className:"rounded-2xl bg-gray-50 p-8 shadow-lg",children:[f.jsx("h2",{className:"mb-8 text-center font-serif text-3xl font-bold",children:"¿Tienes dudas? Te ayudamos"}),f.jsx(ly,{})]})})})}),f.jsxs("section",{className:"relative overflow-hidden bg-primary py-20 text-white",children:[f.jsx("div",{className:"absolute inset-0",children:f.jsx("img",{className:"h-full w-full object-cover opacity-20",alt:"Modern luxury apartment interior",src:"https://images.unsplash.com/photo-1566574909151-44e8ce5d1099"})}),f.jsx("div",{className:"container relative mx-auto px-4 text-center",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl",children:[f.jsx("h2",{className:"mb-4 text-3xl font-bold md:text-4xl",children:"Descubre hoy tu nuevo hogar"}),f.jsx("p",{className:"mb-8 text-xl opacity-90",children:"Nuestros asesores están disponibles para ayudarte"}),f.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-center",children:[f.jsxs(Zt,{className:"bg-[#D4AF37] px-8 py-6 text-lg hover:bg-[#D4AF37]/90",onClick:()=>window.location.href="/propiedades",children:["Buscar Propiedades",f.jsx(Dr,{className:"ml-2 h-5 w-5"})]}),f.jsxs(Zt,{className:"bg-white px-8 py-6 text-lg text-primary hover:bg-white/90",onClick:()=>e(!0),children:["Hablar con un asesor",f.jsx(id,{className:"ml-2 h-5 w-5"})]})]})]})})]}),f.jsx(Mo,{open:n,onOpenChange:e})]})}function gie({onContactClick:n}){const[e,t]=N.useState(!1);return f.jsxs("section",{className:"relative min-h-[90vh] overflow-hidden pt-24",children:[e?f.jsx("img",{className:"absolute inset-0 h-full w-full object-cover",alt:"Elegant luxury rental properties in Madrid",src:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2"}):f.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"auto",onError:()=>t(!0),className:"absolute inset-0 h-full w-full object-cover",children:[f.jsx("source",{src:"https://pptkdbygswenchxurwkz.supabase.co/storage/v1/object/public/public-videos/heros/hero-alquiler.mp4",type:"video/mp4"}),"Tu navegador no soporta video."]}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-black/60"}),f.jsx("div",{className:"relative flex min-h-[calc(90vh-6rem)] items-center",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[f.jsx("h1",{className:"mb-6 font-serif text-5xl font-bold leading-tight md:text-6xl text-white",children:"Encuentra tu alquiler ideal en Madrid"}),f.jsx("p",{className:"mb-8 text-xl text-white opacity-90",children:"Más de 500 propiedades disponibles con gestión integral"}),f.jsxs(Zt,{size:"lg",className:"bg-[#D4AF37] px-8 py-6 text-lg hover:bg-[#D4AF37]/90",onClick:n,children:["Contactar ahora",f.jsx(Dr,{className:"ml-2 h-5 w-5"})]})]})})})]})}function vie(){jv();const[n,e]=N.useState(!1);N.useState({ciudad:"",tipo:"",presupuesto:"",nombre:"",email:"",telefono:""}),N.useEffect(()=>{document.title="Encuentra tu alquiler ideal en Madrid | Casaia";const s=document.querySelector('meta[name="description"]');s&&s.setAttribute("content","Alquila tu hogar ideal en Madrid. Más de 500 propiedades disponibles con contratos flexibles y gestión integral.")},[]);const t=[{title:"Contratos Flexibles",description:"Adaptamos los términos a tus necesidades",icon:f.jsx(rd,{className:"h-12 w-12 text-primary"})},{title:"Visitas Virtuales",description:"Recorre cada propiedad desde tu dispositivo",icon:f.jsx(Bl,{className:"h-12 w-12 text-primary"})},{title:"Gestión Integral",description:"Nos encargamos de todo el proceso",icon:f.jsx(u4,{className:"h-12 w-12 text-primary"})}],i=[{number:"01",title:"Buscar",description:"Encuentra tu piso ideal"},{number:"02",title:"Reservar Visita",description:"Agenda una visita presencial"},{number:"03",title:"Firmar Contrato",description:"Proceso sencillo y transparente"}],r=[{question:"¿Qué documentación necesito para alquilar?",answer:"Necesitarás DNI/NIE, nóminas o contratos, declaración de la renta y referencias."},{question:"¿Cuál es la duración mínima del contrato?",answer:"Los contratos tienen una duración mínima de 12 meses, pero podemos adaptarnos a tus necesidades."},{question:"¿Qué incluye la fianza?",answer:"La fianza equivale a 1-2 meses de alquiler y se devuelve al finalizar el contrato."},{question:"¿Cómo se gestionan las incidencias?",answer:"Contamos con un servicio de atención 24/7 para cualquier emergencia."}];return f.jsxs(f.Fragment,{children:[f.jsx(gie,{onContactClick:()=>e(!0)}),f.jsx("section",{className:"py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center text-3xl font-bold",children:"¿Por qué alquilar con Casaia?"}),f.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:t.map((s,o)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:o*.2},className:"rounded-xl bg-white p-6 text-center shadow-lg",children:[f.jsx("div",{className:"mb-4 flex justify-center",children:s.icon}),f.jsx("h3",{className:"mb-2 text-xl font-semibold",children:s.title}),f.jsx("p",{className:"text-gray-600",children:s.description})]},o))})]})}),f.jsx("section",{className:"bg-gray-50 py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center text-3xl font-bold",children:"Cómo funciona"}),f.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:i.map((s,o)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:o*.2},className:"relative rounded-xl bg-white p-6 shadow-lg",children:[f.jsx("span",{className:"absolute -top-4 left-6 text-4xl font-bold text-primary/20",children:s.number}),f.jsx("h3",{className:"mb-2 text-xl font-semibold",children:s.title}),f.jsx("p",{className:"text-gray-600",children:s.description})]},o))})]})}),f.jsx("section",{className:"py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"mb-12 text-center text-3xl font-bold",children:"Preguntas frecuentes"}),f.jsx("div",{className:"mx-auto max-w-3xl grid gap-6",children:r.map((s,o)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:o*.1},className:"rounded-lg bg-white p-6 shadow-md",children:[f.jsx("h3",{className:"mb-2 text-lg font-semibold",children:s.question}),f.jsx("p",{className:"text-gray-600",children:s.answer})]},o))})]})}),f.jsx("section",{className:"bg-gray-50 py-20",children:f.jsxs("div",{className:"container mx-auto px-4 text-center max-w-3xl",children:[f.jsx("h2",{className:"mb-6 text-3xl font-bold",children:"Sobre Casaia"}),f.jsx("p",{className:"mb-8 text-gray-600",children:"Con más de 20 años de experiencia en el mercado inmobiliario madrileño, en Casaia nos dedicamos a hacer realidad los sueños de nuestros clientes."}),f.jsx(yi,{to:"/nosotros",children:f.jsx(Zt,{variant:"outline",children:"Conoce más sobre nosotros"})})]})}),f.jsx(Mo,{open:n,onOpenChange:e})]})}function yie({onContactClick:n}){const[e,t]=N.useState(!1);return f.jsxs("section",{className:"relative min-h-[80vh] overflow-hidden pt-32",children:[e?f.jsx("img",{src:"https://images.unsplash.com/photo-1682662046106-ba72f3391913",alt:"Vende tu propiedad",className:"absolute inset-0 h-full w-full object-cover filter brightness-50"}):f.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"auto",onError:()=>t(!0),className:"absolute inset-0 h-full w-full object-cover filter brightness-50",children:[f.jsx("source",{src:"https://pptkdbygswenchxurwkz.supabase.co/storage/v1/object/public/public-videos/blogs/hero-vender.mp4",type:"video/mp4"}),"Tu navegador no soporta video."]}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-black/40"}),f.jsxs("div",{className:"relative flex flex-col items-center justify-start text-center text-white h-full px-4 pt-20",children:[f.jsx(le.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-4 max-w-2xl font-serif text-4xl font-bold leading-tight sm:text-5xl lg:text-6xl",children:"Vende con valor añadido"}),f.jsx(le.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mb-6 max-w-lg text-base sm:text-lg opacity-90",children:"Asesoramiento experto para maximizar tu inversión."}),f.jsx(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:f.jsxs(Zt,{size:"lg",className:"inline-flex items-center space-x-2 bg-[#D4AF37] hover:bg-[#D4AF37]/90 px-6 py-3 text-base sm:px-8 sm:py-4 sm:text-lg font-semibold rounded-full",onClick:n,children:[f.jsx(OS,{className:"h-5 w-5 sm:h-6 sm:w-6"}),f.jsx("span",{children:"Llámanos ahora"})]})})]})]})}function xie(){return f.jsx("section",{className:"bg-white py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"El valor que tu hogar merece"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Tu propiedad no es solo metros cuadrados: es historia, sueños y vivencias. Nuestra misión es darle el valor que realmente merece."})]})})})}function _ie(){return f.jsx("section",{className:"bg-gray-100 py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-4xl text-center",children:[f.jsx("h2",{className:"mb-12 font-serif text-3xl font-bold md:text-4xl",children:"Tu hogar frente a miles de compradores potenciales"}),f.jsx("p",{className:"mb-12 text-xl text-gray-600",children:"Con campañas digitales, presencia en portales líderes y acceso a nuestra base de clientes activos, tu propiedad será vista por quienes realmente buscan un hogar como el tuyo."}),f.jsxs("div",{className:"grid gap-8 md:grid-cols-3",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.1},className:"rounded-2xl bg-white p-6 shadow-lg",children:[f.jsx("div",{className:"mb-4 flex justify-center",children:f.jsx(Oa,{className:"h-8 w-8 text-[#D4AF37]"})}),f.jsx("h3",{className:"mb-2 font-serif text-lg font-bold",children:"Alcance Premium"}),f.jsx("p",{className:"text-gray-600",children:"Exposición en los principales portales inmobiliarios"})]}),f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.2},className:"rounded-2xl bg-white p-6 shadow-lg",children:[f.jsx("div",{className:"mb-4 flex justify-center",children:f.jsx(Sv,{className:"h-8 w-8 text-[#D4AF37]"})}),f.jsx("h3",{className:"mb-2 font-serif text-lg font-bold",children:"Marketing Dirigido"}),f.jsx("p",{className:"text-gray-600",children:"Campañas personalizadas para tu tipo de propiedad"})]}),f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.3},className:"rounded-2xl bg-white p-6 shadow-lg",children:[f.jsx("div",{className:"mb-4 flex justify-center",children:f.jsx(rd,{className:"h-8 w-8 text-[#D4AF37]"})}),f.jsx("h3",{className:"mb-2 font-serif text-lg font-bold",children:"Visibilidad Garantizada"}),f.jsx("p",{className:"text-gray-600",children:"Seguimiento y optimización continua de resultados"})]})]})]})})})}function wie(){return f.jsx("section",{className:"bg-gray-900 py-20 text-white",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs("div",{className:"grid gap-12 md:grid-cols-2",children:[f.jsxs(le.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},className:"flex flex-col justify-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Tecnología + Experiencia Humana: la combinación perfecta"}),f.jsx("p",{className:"text-xl text-gray-300",children:"Utilizamos análisis avanzado mediante Inteligencia Artificial para posicionar tu propiedad estratégicamente, mientras tu asesor personal te acompaña en cada decisión."})]}),f.jsxs(le.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},className:"grid gap-6 md:grid-cols-2",children:[f.jsxs("div",{className:"rounded-2xl bg-white/5 p-6 backdrop-blur-sm",children:[f.jsx(Wf,{className:"mb-4 h-8 w-8 text-[#D4AF37]"}),f.jsx("h3",{className:"mb-2 font-serif text-xl font-bold",children:"IA Avanzada"}),f.jsx("p",{className:"text-gray-300",children:"Análisis predictivo para optimizar el valor de tu propiedad"})]}),f.jsxs("div",{className:"rounded-2xl bg-white/5 p-6 backdrop-blur-sm",children:[f.jsx(Oa,{className:"mb-4 h-8 w-8 text-[#D4AF37]"}),f.jsx("h3",{className:"mb-2 font-serif text-xl font-bold",children:"Equipo Experto"}),f.jsx("p",{className:"text-gray-300",children:"Asesores dedicados con amplia experiencia en el mercado"})]})]})]})})})}function bie(){const[n,e]=N.useState([]),[t,i]=N.useState(!0),[r,s]=N.useState(null);return N.useEffect(()=>{async function o(){try{const{data:a,error:l}=await jr.from("blogs").select("*").eq("categoria","perfil_vendedor").order("created_at",{ascending:!1}).limit(3);if(l)throw l;e(a)}catch(a){console.error("Error fetching seller stories:",a),s(a.message)}finally{i(!1)}}o()},[]),t?f.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:f.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center gap-4",children:[f.jsx(bv,{className:"h-8 w-8 animate-spin text-[#D4AF37]"}),f.jsx("p",{className:"text-gray-500",children:"Cargando historias de éxito..."})]})}):r?f.jsx("div",{className:"rounded-lg bg-red-50 p-4 text-center text-red-800",children:f.jsx("p",{children:"Lo sentimos, no pudimos cargar las historias en este momento."})}):n.length?f.jsx("div",{className:"grid gap-8 md:grid-cols-3",children:n.map((o,a)=>f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:a*.1},className:"group overflow-hidden rounded-2xl bg-white shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-[1.03]",children:[f.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[f.jsx("img",{src:o.image||"https://images.unsplash.com/photo-1600585154340-be6161a56a0c",alt:o.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"})]}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-3",children:[f.jsx(xv,{className:"h-4 w-4"}),f.jsx("span",{children:new Date(o.date).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})})]}),f.jsx("h3",{className:"mb-3 font-serif text-xl font-bold leading-tight text-gray-900 group-hover:text-[#D4AF37] transition-colors duration-300",children:o.title}),f.jsx("p",{className:"mb-4 text-sm text-gray-600 line-clamp-2",children:o.excerpt}),f.jsx(yi,{to:`/blog/${o.id}`,children:f.jsxs(Zt,{variant:"ghost",className:"w-full justify-between border border-[#D4AF37]/20 text-[#D4AF37] hover:bg-[#D4AF37]/5 transition-all duration-300",children:["Leer experiencia completa",f.jsx(Dr,{className:"ml-2 h-4 w-4 transition-transform duration-300 group-hover:translate-x-1"})]})})]})]},o.id))}):f.jsx("div",{className:"rounded-lg bg-gray-50 p-8 text-center",children:f.jsx("p",{className:"text-lg text-gray-600",children:"Estamos preparando nuevas historias de éxito. ¡Vuelve pronto!"})})}const Sie=["Valoración precisa con IA","Asesoramiento Legal, Tributario y Financiero","Marketing digital premium","Filtrado de compradores cualificado","Gestión de Visitas con potenciales compradores","Gestionamos tu mudanza gratuita","Preparación de la vivienda para la venta","Certificado energético gratuito","Gestión de liquidación de impuestos"];function Eie(){return f.jsxs("section",{className:"relative mx-auto max-w-6xl overflow-hidden rounded-3xl border border-white/10 bg-white/80 shadow-2xl backdrop-blur-xl",children:[f.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[f.jsx("div",{className:"absolute -top-36 -left-36 h-96 w-96 rounded-full bg-[#D4AF37]/10 blur-3xl"}),f.jsx("div",{className:"absolute bottom-0 right-0 h-80 w-80 rounded-full bg-[#F4E4C1]/10 blur-3xl"})]}),f.jsxs("header",{className:"relative grid grid-cols-3 min-w-0",children:[f.jsx("h2",{className:"col-span-1 min-w-0 break-words whitespace-normal p-4 leading-snug font-serif text-base sm:text-2xl font-bold text-slate-900",children:"Características"}),f.jsx("h3",{className:"min-w-0 break-words whitespace-normal p-4 leading-snug flex items-center justify-center bg-slate-100/60 font-serif text-xs sm:text-lg font-semibold text-slate-700",children:"Venta Tradicional"}),f.jsx("h3",{className:"min-w-0 break-words whitespace-normal p-4 leading-snug flex items-center justify-center bg-gradient-to-r from-[#D4AF37]/20 to-[#B8941F]/10 font-serif text-xs sm:text-lg font-semibold text-[#D4AF37]",children:"Casaia"})]}),f.jsx("div",{className:"relative overflow-x-auto",children:f.jsxs("table",{className:"w-full table-fixed divide-y divide-gray-200/60 text-sm lg:text-base",children:[f.jsxs("colgroup",{children:[f.jsx("col",{style:{width:"50%"}}),f.jsx("col",{style:{width:"25%"}}),f.jsx("col",{style:{width:"25%"}})]}),f.jsx("tbody",{children:Sie.map((n,e)=>f.jsxs(le.tr,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:e*.05},className:"group hover:bg-gray-50/60",children:[f.jsx("td",{className:"whitespace-pre-wrap px-6 py-5 font-medium text-slate-700",children:n}),f.jsx("td",{className:"px-6 py-5 text-center",children:f.jsx("div",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-red-100/60",children:f.jsx(Ma,{className:"h-5 w-5 text-red-600"})})}),f.jsx("td",{className:"px-6 py-5 text-center",children:f.jsx("div",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-[#D4AF37] to-[#B8941F] shadow",children:f.jsx(pf,{className:"h-5 w-5 text-white"})})})]},n))})]})}),f.jsx("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#D4AF37]/60 to-transparent"})]})}function Mie(){const[n,e]=N.useState(!1);return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsxs(Jf,{children:[f.jsx("title",{children:"Vende tu casa con Casaia | Valoración gratuita y sin comisiones"}),f.jsx("meta",{name:"description",content:"Obtén una valoración profesional gratuita y vende tu casa en Madrid sin comisiones. Ahorra tiempo y consigue mejores compradores con nuestra tecnología de IA."}),f.jsx("link",{rel:"canonical",href:"https://casaiamadrid.com/vender"}),f.jsx("meta",{property:"og:title",content:"Vende tu casa con Casaia | Valoración gratuita y sin comisiones"}),f.jsx("meta",{property:"og:description",content:"Ahorra tiempo, elimina comisiones y encuentra compradores mejor cualificados gracias a nuestra IA inmobiliaria."}),f.jsx("meta",{property:"og:url",content:"https://casaiamadrid.com/vender"}),f.jsx("meta",{property:"og:image",content:"https://casaiamadrid.com/og-image.jpg"}),f.jsx("meta",{property:"og:type",content:"website"}),f.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),f.jsx("meta",{name:"twitter:title",content:"Vende tu casa con Casaia | Valoración gratuita y sin comisiones"}),f.jsx("meta",{name:"twitter:description",content:"Ahorra tiempo, elimina comisiones y encuentra compradores mejor cualificados gracias a nuestra IA inmobiliaria."}),f.jsx("meta",{name:"twitter:image",content:"https://casaiamadrid.com/og-image.jpg"})]}),f.jsx(yie,{onContactClick:()=>e(!0)}),f.jsx(xie,{}),f.jsx("section",{className:"bg-white py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center mb-12",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"¿Por qué vender con Casaia?"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Compara nuestra propuesta de valor"})]}),f.jsx(Eie,{})]})}),f.jsx(_ie,{}),f.jsx(wie,{}),f.jsx("section",{className:"bg-gray-50 py-20",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center mb-12",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Historias reales de vendedores con Casaia"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Descubre cómo ayudamos a propietarios como tú a lograr el éxito"})]}),f.jsx(bie,{})]})}),f.jsx(cO,{}),f.jsx("section",{className:"bg-white py-20",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"mx-auto max-w-3xl text-center",children:[f.jsx("h2",{className:"mb-6 font-serif text-3xl font-bold md:text-4xl",children:"Tu tranquilidad es nuestro compromiso"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Desde la primera valoración hasta el cierre de la operación, trabajamos para que tu única preocupación sea planificar tu siguiente etapa."})]})})}),f.jsx("section",{className:"relative overflow-hidden bg-[#D4AF37] py-20",children:f.jsx("div",{className:"container relative mx-auto px-4",children:f.jsxs(le.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},className:"text-center text-white",children:[f.jsx("h2",{className:"mb-4 font-serif text-4xl font-bold md:text-5xl",children:"¿Listo para dar el siguiente paso hacia tu éxito?"}),f.jsx("p",{className:"mb-8 text-xl opacity-90",children:"Solicita hoy tu valoración gratuita y descubre cómo podemos ayudarte a alcanzar el mejor resultado en la venta de tu propiedad."}),f.jsxs(Zt,{size:"lg",onClick:()=>e(!0),className:"bg-white px-8 py-6 text-lg font-medium text-[#D4AF37] hover:bg-white/90",children:["Solicitar asesoramiento personalizado",f.jsx(Dr,{className:"ml-2 h-5 w-5"})]})]})})}),f.jsx(Mo,{open:n,onOpenChange:e})]})}var uO={exports:{}},sc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */sc.ConcurrentRoot=1;sc.ContinuousEventPriority=4;sc.DefaultEventPriority=16;sc.DiscreteEventPriority=1;sc.IdleEventPriority=536870912;sc.LegacyRoot=0;uO.exports=sc;var bu=uO.exports;function Tie(n){let e;const t=new Set,i=(c,u)=>{const p=typeof c=="function"?c(e):c;if(p!==e){const m=e;e=u?p:Object.assign({},e,p),t.forEach(g=>g(e,m))}},r=()=>e,s=(c,u=r,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=u(e);function g(){const y=u(e);if(!p(m,y)){const _=m;c(m=y,_)}}return t.add(g),()=>t.delete(g)},l={setState:i,getState:r,subscribe:(c,u,p)=>u||p?s(c,u,p):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const Aie=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),B3=Aie?N.useEffect:N.useLayoutEffect;function Cie(n){const e=typeof n=="function"?Tie(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=N.useReducer(S=>S+1,0),o=e.getState(),a=N.useRef(o),l=N.useRef(i),c=N.useRef(r),u=N.useRef(!1),p=N.useRef();p.current===void 0&&(p.current=i(o));let m,g=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(m=i(o),g=!r(p.current,m)),B3(()=>{g&&(p.current=m),a.current=o,l.current=i,c.current=r,u.current=!1});const y=N.useRef(o);B3(()=>{const S=()=>{try{const b=e.getState(),w=l.current(b);c.current(p.current,w)||(a.current=b,p.current=w,s())}catch{u.current=!0,s()}},v=e.subscribe(S);return e.getState()!==y.current&&S(),v},[]);const _=g?m:p.current;return N.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var dO={exports:{}},t_={exports:{}},n_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V3;function Pie(){return V3||(V3=1,function(n){function e(D,O){var H=D.length;D.push(O);e:for(;0<H;){var Z=H-1>>>1,te=D[Z];if(0<r(te,O))D[Z]=O,D[H]=te,H=Z;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var O=D[0],H=D.pop();if(H!==O){D[0]=H;e:for(var Z=0,te=D.length,Q=te>>>1;Z<Q;){var se=2*(Z+1)-1,ve=D[se],ge=se+1,K=D[ge];if(0>r(ve,H))ge<te&&0>r(K,ve)?(D[Z]=K,D[ge]=H,Z=ge):(D[Z]=ve,D[se]=H,Z=se);else if(ge<te&&0>r(K,H))D[Z]=K,D[ge]=H,Z=ge;else break e}}return O}function r(D,O){var H=D.sortIndex-O.sortIndex;return H!==0?H:D.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,p=null,m=3,g=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var O=t(c);O!==null;){if(O.callback===null)i(c);else if(O.startTime<=D)i(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(c)}}function M(D){if(_=!1,w(D),!y)if(t(l)!==null)y=!0,X(A);else{var O=t(c);O!==null&&ee(M,O.startTime-D)}}function A(D,O){y=!1,_&&(_=!1,v(I),I=-1),g=!0;var H=m;try{for(w(O),p=t(l);p!==null&&(!(p.expirationTime>O)||D&&!V());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,m=p.priorityLevel;var te=Z(p.expirationTime<=O);O=n.unstable_now(),typeof te=="function"?p.callback=te:p===t(l)&&i(l),w(O)}else i(l);p=t(l)}if(p!==null)var Q=!0;else{var se=t(c);se!==null&&ee(M,se.startTime-O),Q=!1}return Q}finally{p=null,m=H,g=!1}}var P=!1,L=null,I=-1,C=5,k=-1;function V(){return!(n.unstable_now()-k<C)}function q(){if(L!==null){var D=n.unstable_now();k=D;var O=!0;try{O=L(!0,D)}finally{O?B():(P=!1,L=null)}}else P=!1}var B;if(typeof b=="function")B=function(){b(q)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,$=U.port2;U.port1.onmessage=q,B=function(){$.postMessage(null)}}else B=function(){S(q,0)};function X(D){L=D,P||(P=!0,B())}function ee(D,O){I=S(function(){D(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,X(A))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(m){case 1:case 2:case 3:var O=3;break;default:O=m}var H=m;m=O;try{return D()}finally{m=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var H=m;m=D;try{return O()}finally{m=H}},n.unstable_scheduleCallback=function(D,O,H){var Z=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,D){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=H+te,D={id:u++,callback:O,priorityLevel:D,startTime:H,expirationTime:te,sortIndex:-1},H>Z?(D.sortIndex=H,e(c,D),t(l)===null&&D===t(c)&&(_?(v(I),I=-1):_=!0,ee(M,H-Z))):(D.sortIndex=te,e(l,D),y||g||(y=!0,X(A))),D},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(D){var O=m;return function(){var H=m;m=O;try{return D.apply(this,arguments)}finally{m=H}}}}(n_)),n_}var H3;function Nie(){return H3||(H3=1,t_.exports=Pie()),t_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rie=function(e){var t={},i=N,r=Nie(),s=Object.assign;function o(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),A=Symbol.iterator;function P(d){return d===null||typeof d!="object"?null:(d=A&&d[A]||d["@@iterator"],typeof d=="function"?d:null)}function L(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case u:return"Fragment";case c:return"Portal";case m:return"Profiler";case p:return"StrictMode";case S:return"Suspense";case v:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case y:return(d.displayName||"Context")+".Consumer";case g:return(d._context.displayName||"Context")+".Provider";case _:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case b:return h=d.displayName||null,h!==null?h:L(d.type)||"Memo";case w:h=d._payload,d=d._init;try{return L(d(h))}catch{}}return null}function I(d){var h=d.type;switch(d.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=h.render,d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(h);case 8:return h===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function C(d){var h=d,x=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,h.flags&4098&&(x=h.return),d=h.return;while(d)}return h.tag===3?x:null}function k(d){if(C(d)!==d)throw Error(o(188))}function V(d){var h=d.alternate;if(!h){if(h=C(d),h===null)throw Error(o(188));return h!==d?null:d}for(var x=d,E=h;;){var T=x.return;if(T===null)break;var R=T.alternate;if(R===null){if(E=T.return,E!==null){x=E;continue}break}if(T.child===R.child){for(R=T.child;R;){if(R===x)return k(T),d;if(R===E)return k(T),h;R=R.sibling}throw Error(o(188))}if(x.return!==E.return)x=T,E=R;else{for(var G=!1,ne=T.child;ne;){if(ne===x){G=!0,x=T,E=R;break}if(ne===E){G=!0,E=T,x=R;break}ne=ne.sibling}if(!G){for(ne=R.child;ne;){if(ne===x){G=!0,x=R,E=T;break}if(ne===E){G=!0,E=R,x=T;break}ne=ne.sibling}if(!G)throw Error(o(189))}}if(x.alternate!==E)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?d:h}function q(d){return d=V(d),d!==null?B(d):null}function B(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var h=B(d);if(h!==null)return h;d=d.sibling}return null}function U(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var h=U(d);if(h!==null)return h}d=d.sibling}return null}var $=Array.isArray,X=e.getPublicInstance,ee=e.getRootHostContext,D=e.getChildHostContext,O=e.prepareForCommit,H=e.resetAfterCommit,Z=e.createInstance,te=e.appendInitialChild,Q=e.finalizeInitialChildren,se=e.prepareUpdate,ve=e.shouldSetTextContent,ge=e.createTextInstance,K=e.scheduleTimeout,je=e.cancelTimeout,Xe=e.noTimeout,Ee=e.isPrimaryRenderer,Pe=e.supportsMutation,_e=e.supportsPersistence,de=e.supportsHydration,Se=e.getInstanceFromNode,Be=e.preparePortalMount,Ne=e.getCurrentEventPriority,Qe=e.detachDeletedInstance,et=e.supportsMicrotasks,Ke=e.scheduleMicrotask,ct=e.supportsTestSelectors,Nt=e.findFiberRoot,W=e.getBoundingRect,j=e.getTextContent,ce=e.isHiddenSubtree,Me=e.matchAccessibilityRole,Te=e.setFocusIfFocusable,Re=e.setupIntersectionObserver,tt=e.appendChild,Fe=e.appendChildToContainer,me=e.commitTextUpdate,Ge=e.commitMount,Je=e.commitUpdate,it=e.insertBefore,Ue=e.insertInContainerBefore,We=e.removeChild,J=e.removeChildFromContainer,we=e.resetTextContent,Oe=e.hideInstance,Y=e.hideTextInstance,ue=e.unhideInstance,be=e.unhideTextInstance,Le=e.clearContainer,qe=e.cloneInstance,It=e.createContainerChildSet,xt=e.appendChildToContainerChildSet,Xt=e.finalizeContainerChildren,Zn=e.replaceContainerChildren,Bt=e.cloneHiddenInstance,wn=e.cloneHiddenTextInstance,Jn=e.canHydrateInstance,oc=e.canHydrateTextInstance,vp=e.canHydrateSuspenseInstance,yp=e.isSuspenseInstancePending,gd=e.isSuspenseInstanceFallback,cy=e.registerSuspenseInstanceRetry,z=e.getNextHydratableSibling,ae=e.getFirstHydratableChild,pe=e.getFirstHydratableChildWithinContainer,re=e.getFirstHydratableChildWithinSuspenseInstance,ye=e.hydrateInstance,nt=e.hydrateTextInstance,ot=e.hydrateSuspenseInstance,ut=e.getNextHydratableInstanceAfterSuspenseInstance,ft=e.commitHydratedContainer,St=e.commitHydratedSuspenseInstance,Et=e.clearSuspenseBoundary,Tt=e.clearSuspenseBoundaryFromContainer,Vt=e.shouldDeleteUnhydratedTailInstances,Qn=e.didNotMatchHydratedContainerTextInstance,Ki=e.didNotMatchHydratedTextInstance,Or;function Jt(d){if(Or===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);Or=h&&h[1]||""}return`
`+Or+d}var At=!1;function Ga(d,h){if(!d||At)return"";At=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ce){var E=Ce}Reflect.construct(d,[],h)}else{try{h.call()}catch(Ce){E=Ce}d.call(h.prototype)}else{try{throw Error()}catch(Ce){E=Ce}d()}}catch(Ce){if(Ce&&E&&typeof Ce.stack=="string"){for(var T=Ce.stack.split(`
`),R=E.stack.split(`
`),G=T.length-1,ne=R.length-1;1<=G&&0<=ne&&T[G]!==R[ne];)ne--;for(;1<=G&&0<=ne;G--,ne--)if(T[G]!==R[ne]){if(G!==1||ne!==1)do if(G--,ne--,0>ne||T[G]!==R[ne]){var fe=`
`+T[G].replace(" at new "," at ");return d.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",d.displayName)),fe}while(1<=G&&0<=ne);break}}}finally{At=!1,Error.prepareStackTrace=x}return(d=d?d.displayName||d.name:"")?Jt(d):""}var An=Object.prototype.hasOwnProperty,Fr=[],zs=-1;function ki(d){return{current:d}}function Gt(d){0>zs||(d.current=Fr[zs],Fr[zs]=null,zs--)}function pt(d,h){zs++,Fr[zs]=d.current,d.current=h}var li={},Cn=ki(li),qt=ki(!1),Ur=li;function Co(d,h){var x=d.type.contextTypes;if(!x)return li;var E=d.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===h)return E.__reactInternalMemoizedMaskedChildContext;var T={},R;for(R in x)T[R]=h[R];return E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=T),T}function ei(d){return d=d.childContextTypes,d!=null}function xp(){Gt(qt),Gt(Cn)}function dM(d,h,x){if(Cn.current!==li)throw Error(o(168));pt(Cn,h),pt(qt,x)}function hM(d,h,x){var E=d.stateNode;if(h=h.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var T in E)if(!(T in h))throw Error(o(108,I(d)||"Unknown",T));return s({},x,E)}function _p(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||li,Ur=Cn.current,pt(Cn,d),pt(qt,qt.current),!0}function fM(d,h,x){var E=d.stateNode;if(!E)throw Error(o(169));x?(d=hM(d,h,Ur),E.__reactInternalMemoizedMergedChildContext=d,Gt(qt),Gt(Cn),pt(Cn,d)):Gt(qt),pt(qt,x)}var zr=Math.clz32?Math.clz32:LO,NO=Math.log,RO=Math.LN2;function LO(d){return d>>>=0,d===0?32:31-(NO(d)/RO|0)|0}var wp=64,bp=4194304;function vd(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Sp(d,h){var x=d.pendingLanes;if(x===0)return 0;var E=0,T=d.suspendedLanes,R=d.pingedLanes,G=x&268435455;if(G!==0){var ne=G&~T;ne!==0?E=vd(ne):(R&=G,R!==0&&(E=vd(R)))}else G=x&~T,G!==0?E=vd(G):R!==0&&(E=vd(R));if(E===0)return 0;if(h!==0&&h!==E&&!(h&T)&&(T=E&-E,R=h&-h,T>=R||T===16&&(R&4194240)!==0))return h;if(E&4&&(E|=x&16),h=d.entangledLanes,h!==0)for(d=d.entanglements,h&=E;0<h;)x=31-zr(h),T=1<<x,E|=d[x],h&=~T;return E}function IO(d,h){switch(d){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kO(d,h){for(var x=d.suspendedLanes,E=d.pingedLanes,T=d.expirationTimes,R=d.pendingLanes;0<R;){var G=31-zr(R),ne=1<<G,fe=T[G];fe===-1?(!(ne&x)||ne&E)&&(T[G]=IO(ne,h)):fe<=h&&(d.expiredLanes|=ne),R&=~ne}}function uy(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function dy(d){for(var h=[],x=0;31>x;x++)h.push(d);return h}function yd(d,h,x){d.pendingLanes|=h,h!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,h=31-zr(h),d[h]=x}function DO(d,h){var x=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h,h=d.entanglements;var E=d.eventTimes;for(d=d.expirationTimes;0<x;){var T=31-zr(x),R=1<<T;h[T]=0,E[T]=-1,d[T]=-1,x&=~R}}function hy(d,h){var x=d.entangledLanes|=h;for(d=d.entanglements;x;){var E=31-zr(x),T=1<<E;T&h|d[E]&h&&(d[E]|=h),x&=~T}}var Ot=0;function pM(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var fy=r.unstable_scheduleCallback,mM=r.unstable_cancelCallback,jO=r.unstable_shouldYield,OO=r.unstable_requestPaint,Bn=r.unstable_now,py=r.unstable_ImmediatePriority,FO=r.unstable_UserBlockingPriority,my=r.unstable_NormalPriority,UO=r.unstable_IdlePriority,Ep=null,fs=null;function zO(d){if(fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(Ep,d,void 0,(d.current.flags&128)===128)}catch{}}function BO(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var ps=typeof Object.is=="function"?Object.is:BO,Bs=null,Mp=!1,gy=!1;function gM(d){Bs===null?Bs=[d]:Bs.push(d)}function VO(d){Mp=!0,gM(d)}function ms(){if(!gy&&Bs!==null){gy=!0;var d=0,h=Ot;try{var x=Bs;for(Ot=1;d<x.length;d++){var E=x[d];do E=E(!0);while(E!==null)}Bs=null,Mp=!1}catch(T){throw Bs!==null&&(Bs=Bs.slice(d+1)),fy(py,ms),T}finally{Ot=h,gy=!1}}return null}var HO=a.ReactCurrentBatchConfig;function Tp(d,h){if(ps(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var x=Object.keys(d),E=Object.keys(h);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var T=x[E];if(!An.call(h,T)||!ps(d[T],h[T]))return!1}return!0}function GO(d){switch(d.tag){case 5:return Jt(d.type);case 16:return Jt("Lazy");case 13:return Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 2:case 15:return d=Ga(d.type,!1),d;case 11:return d=Ga(d.type.render,!1),d;case 1:return d=Ga(d.type,!0),d;default:return""}}function Br(d,h){if(d&&d.defaultProps){h=s({},h),d=d.defaultProps;for(var x in d)h[x]===void 0&&(h[x]=d[x]);return h}return h}var Ap=ki(null),Cp=null,ac=null,vy=null;function yy(){vy=ac=Cp=null}function vM(d,h,x){Ee?(pt(Ap,h._currentValue),h._currentValue=x):(pt(Ap,h._currentValue2),h._currentValue2=x)}function xy(d){var h=Ap.current;Gt(Ap),Ee?d._currentValue=h:d._currentValue2=h}function _y(d,h,x){for(;d!==null;){var E=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),d===x)break;d=d.return}}function lc(d,h){Cp=d,vy=ac=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&h&&(Qi=!0),d.firstContext=null)}function mr(d){var h=Ee?d._currentValue:d._currentValue2;if(vy!==d)if(d={context:d,memoizedValue:h,next:null},ac===null){if(Cp===null)throw Error(o(308));ac=d,Cp.dependencies={lanes:0,firstContext:d}}else ac=ac.next=d;return h}var gs=null,Po=!1;function wy(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yM(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Vs(d,h){return{eventTime:d,lane:h,tag:0,payload:null,callback:null,next:null}}function No(d,h){var x=d.updateQueue;x!==null&&(x=x.shared,Pn!==null&&d.mode&1&&!(Mt&2)?(d=x.interleaved,d===null?(h.next=h,gs===null?gs=[x]:gs.push(x)):(h.next=d.next,d.next=h),x.interleaved=h):(d=x.pending,d===null?h.next=h:(h.next=d.next,d.next=h),x.pending=h))}function Pp(d,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var E=h.lanes;E&=d.pendingLanes,x|=E,h.lanes=x,hy(d,x)}}function xM(d,h){var x=d.updateQueue,E=d.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var T=null,R=null;if(x=x.firstBaseUpdate,x!==null){do{var G={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};R===null?T=R=G:R=R.next=G,x=x.next}while(x!==null);R===null?T=R=h:R=R.next=h}else T=R=h;x={baseState:E.baseState,firstBaseUpdate:T,lastBaseUpdate:R,shared:E.shared,effects:E.effects},d.updateQueue=x;return}d=x.lastBaseUpdate,d===null?x.firstBaseUpdate=h:d.next=h,x.lastBaseUpdate=h}function Np(d,h,x,E){var T=d.updateQueue;Po=!1;var R=T.firstBaseUpdate,G=T.lastBaseUpdate,ne=T.shared.pending;if(ne!==null){T.shared.pending=null;var fe=ne,Ce=fe.next;fe.next=null,G===null?R=Ce:G.next=Ce,G=fe;var He=d.alternate;He!==null&&(He=He.updateQueue,ne=He.lastBaseUpdate,ne!==G&&(ne===null?He.firstBaseUpdate=Ce:ne.next=Ce,He.lastBaseUpdate=fe))}if(R!==null){var dt=T.baseState;G=0,He=Ce=fe=null,ne=R;do{var rt=ne.lane,Kt=ne.eventTime;if((E&rt)===rt){He!==null&&(He=He.next={eventTime:Kt,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var Ze=d,hi=ne;switch(rt=h,Kt=x,hi.tag){case 1:if(Ze=hi.payload,typeof Ze=="function"){dt=Ze.call(Kt,dt,rt);break e}dt=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=hi.payload,rt=typeof Ze=="function"?Ze.call(Kt,dt,rt):Ze,rt==null)break e;dt=s({},dt,rt);break e;case 2:Po=!0}}ne.callback!==null&&ne.lane!==0&&(d.flags|=64,rt=T.effects,rt===null?T.effects=[ne]:rt.push(ne))}else Kt={eventTime:Kt,lane:rt,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},He===null?(Ce=He=Kt,fe=dt):He=He.next=Kt,G|=rt;if(ne=ne.next,ne===null){if(ne=T.shared.pending,ne===null)break;rt=ne,ne=rt.next,rt.next=null,T.lastBaseUpdate=rt,T.shared.pending=null}}while(1);if(He===null&&(fe=dt),T.baseState=fe,T.firstBaseUpdate=Ce,T.lastBaseUpdate=He,h=T.shared.interleaved,h!==null){T=h;do G|=T.lane,T=T.next;while(T!==h)}else R===null&&(T.shared.lanes=0);vc|=G,d.lanes=G,d.memoizedState=dt}}function _M(d,h,x){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var E=d[h],T=E.callback;if(T!==null){if(E.callback=null,E=x,typeof T!="function")throw Error(o(191,T));T.call(E)}}}var wM=new i.Component().refs;function by(d,h,x,E){h=d.memoizedState,x=x(E,h),x=x==null?h:s({},h,x),d.memoizedState=x,d.lanes===0&&(d.updateQueue.baseState=x)}var Rp={isMounted:function(d){return(d=d._reactInternals)?C(d)===d:!1},enqueueSetState:function(d,h,x){d=d._reactInternals;var E=Si(),T=Io(d),R=Vs(E,T);R.payload=h,x!=null&&(R.callback=x),No(d,R),h=_r(d,T,E),h!==null&&Pp(h,d,T)},enqueueReplaceState:function(d,h,x){d=d._reactInternals;var E=Si(),T=Io(d),R=Vs(E,T);R.tag=1,R.payload=h,x!=null&&(R.callback=x),No(d,R),h=_r(d,T,E),h!==null&&Pp(h,d,T)},enqueueForceUpdate:function(d,h){d=d._reactInternals;var x=Si(),E=Io(d),T=Vs(x,E);T.tag=2,h!=null&&(T.callback=h),No(d,T),h=_r(d,E,x),h!==null&&Pp(h,d,E)}};function bM(d,h,x,E,T,R,G){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(E,R,G):h.prototype&&h.prototype.isPureReactComponent?!Tp(x,E)||!Tp(T,R):!0}function SM(d,h,x){var E=!1,T=li,R=h.contextType;return typeof R=="object"&&R!==null?R=mr(R):(T=ei(h)?Ur:Cn.current,E=h.contextTypes,R=(E=E!=null)?Co(d,T):li),h=new h(x,R),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Rp,d.stateNode=h,h._reactInternals=d,E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=T,d.__reactInternalMemoizedMaskedChildContext=R),h}function EM(d,h,x,E){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,E),h.state!==d&&Rp.enqueueReplaceState(h,h.state,null)}function Sy(d,h,x,E){var T=d.stateNode;T.props=x,T.state=d.memoizedState,T.refs=wM,wy(d);var R=h.contextType;typeof R=="object"&&R!==null?T.context=mr(R):(R=ei(h)?Ur:Cn.current,T.context=Co(d,R)),T.state=d.memoizedState,R=h.getDerivedStateFromProps,typeof R=="function"&&(by(d,h,R,x),T.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(h=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),h!==T.state&&Rp.enqueueReplaceState(T,T.state,null),Np(d,x,T,E),T.state=d.memoizedState),typeof T.componentDidMount=="function"&&(d.flags|=4194308)}var cc=[],uc=0,Lp=null,Ip=0,gr=[],vr=0,Wa=null,Hs=1,Gs="";function $a(d,h){cc[uc++]=Ip,cc[uc++]=Lp,Lp=d,Ip=h}function MM(d,h,x){gr[vr++]=Hs,gr[vr++]=Gs,gr[vr++]=Wa,Wa=d;var E=Hs;d=Gs;var T=32-zr(E)-1;E&=~(1<<T),x+=1;var R=32-zr(h)+T;if(30<R){var G=T-T%5;R=(E&(1<<G)-1).toString(32),E>>=G,T-=G,Hs=1<<32-zr(h)+T|x<<T|E,Gs=R+d}else Hs=1<<R|x<<T|E,Gs=d}function Ey(d){d.return!==null&&($a(d,1),MM(d,1,0))}function My(d){for(;d===Lp;)Lp=cc[--uc],cc[uc]=null,Ip=cc[--uc],cc[uc]=null;for(;d===Wa;)Wa=gr[--vr],gr[vr]=null,Gs=gr[--vr],gr[vr]=null,Hs=gr[--vr],gr[vr]=null}var Zi=null,Ji=null,sn=!1,xd=!1,Vr=null;function TM(d,h){var x=wr(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=d,h=d.deletions,h===null?(d.deletions=[x],d.flags|=16):h.push(x)}function AM(d,h){switch(d.tag){case 5:return h=Jn(h,d.type,d.pendingProps),h!==null?(d.stateNode=h,Zi=d,Ji=ae(h),!0):!1;case 6:return h=oc(h,d.pendingProps),h!==null?(d.stateNode=h,Zi=d,Ji=null,!0):!1;case 13:if(h=vp(h),h!==null){var x=Wa!==null?{id:Hs,overflow:Gs}:null;return d.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=wr(18,null,null,0),x.stateNode=h,x.return=d,d.child=x,Zi=d,Ji=null,!0}return!1;default:return!1}}function Ty(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Ay(d){if(sn){var h=Ji;if(h){var x=h;if(!AM(d,h)){if(Ty(d))throw Error(o(418));h=z(x);var E=Zi;h&&AM(d,h)?TM(E,x):(d.flags=d.flags&-4097|2,sn=!1,Zi=d)}}else{if(Ty(d))throw Error(o(418));d.flags=d.flags&-4097|2,sn=!1,Zi=d}}}function CM(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Zi=d}function _d(d){if(!de||d!==Zi)return!1;if(!sn)return CM(d),sn=!0,!1;if(d.tag!==3&&(d.tag!==5||Vt(d.type)&&!ve(d.type,d.memoizedProps))){var h=Ji;if(h){if(Ty(d)){for(d=Ji;d;)d=z(d);throw Error(o(418))}for(;h;)TM(d,h),h=z(h)}}if(CM(d),d.tag===13){if(!de)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Ji=ut(d)}else Ji=Zi?z(d.stateNode):null;return!0}function dc(){de&&(Ji=Zi=null,xd=sn=!1)}function Cy(d){Vr===null?Vr=[d]:Vr.push(d)}function wd(d,h,x){if(d=x.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var E=x.stateNode}if(!E)throw Error(o(147,d));var T=E,R=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===R?h.ref:(h=function(G){var ne=T.refs;ne===wM&&(ne=T.refs={}),G===null?delete ne[R]:ne[R]=G},h._stringRef=R,h)}if(typeof d!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,d))}return d}function kp(d,h){throw d=Object.prototype.toString.call(h),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d))}function PM(d){var h=d._init;return h(d._payload)}function NM(d){function h(oe,ie){if(d){var he=oe.deletions;he===null?(oe.deletions=[ie],oe.flags|=16):he.push(ie)}}function x(oe,ie){if(!d)return null;for(;ie!==null;)h(oe,ie),ie=ie.sibling;return null}function E(oe,ie){for(oe=new Map;ie!==null;)ie.key!==null?oe.set(ie.key,ie):oe.set(ie.index,ie),ie=ie.sibling;return oe}function T(oe,ie){return oe=Do(oe,ie),oe.index=0,oe.sibling=null,oe}function R(oe,ie,he){return oe.index=he,d?(he=oe.alternate,he!==null?(he=he.index,he<ie?(oe.flags|=2,ie):he):(oe.flags|=2,ie)):(oe.flags|=1048576,ie)}function G(oe){return d&&oe.alternate===null&&(oe.flags|=2),oe}function ne(oe,ie,he,De){return ie===null||ie.tag!==6?(ie=dx(he,oe.mode,De),ie.return=oe,ie):(ie=T(ie,he),ie.return=oe,ie)}function fe(oe,ie,he,De){var Ye=he.type;return Ye===u?He(oe,ie,he.props.children,De,he.key):ie!==null&&(ie.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===w&&PM(Ye)===ie.type)?(De=T(ie,he.props),De.ref=wd(oe,ie,he),De.return=oe,De):(De=dm(he.type,he.key,he.props,null,oe.mode,De),De.ref=wd(oe,ie,he),De.return=oe,De)}function Ce(oe,ie,he,De){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==he.containerInfo||ie.stateNode.implementation!==he.implementation?(ie=hx(he,oe.mode,De),ie.return=oe,ie):(ie=T(ie,he.children||[]),ie.return=oe,ie)}function He(oe,ie,he,De,Ye){return ie===null||ie.tag!==7?(ie=Qa(he,oe.mode,De,Ye),ie.return=oe,ie):(ie=T(ie,he),ie.return=oe,ie)}function dt(oe,ie,he){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=dx(""+ie,oe.mode,he),ie.return=oe,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case l:return he=dm(ie.type,ie.key,ie.props,null,oe.mode,he),he.ref=wd(oe,null,ie),he.return=oe,he;case c:return ie=hx(ie,oe.mode,he),ie.return=oe,ie;case w:var De=ie._init;return dt(oe,De(ie._payload),he)}if($(ie)||P(ie))return ie=Qa(ie,oe.mode,he,null),ie.return=oe,ie;kp(oe,ie)}return null}function rt(oe,ie,he,De){var Ye=ie!==null?ie.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return Ye!==null?null:ne(oe,ie,""+he,De);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case l:return he.key===Ye?fe(oe,ie,he,De):null;case c:return he.key===Ye?Ce(oe,ie,he,De):null;case w:return Ye=he._init,rt(oe,ie,Ye(he._payload),De)}if($(he)||P(he))return Ye!==null?null:He(oe,ie,he,De,null);kp(oe,he)}return null}function Kt(oe,ie,he,De,Ye){if(typeof De=="string"&&De!==""||typeof De=="number")return oe=oe.get(he)||null,ne(ie,oe,""+De,Ye);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case l:return oe=oe.get(De.key===null?he:De.key)||null,fe(ie,oe,De,Ye);case c:return oe=oe.get(De.key===null?he:De.key)||null,Ce(ie,oe,De,Ye);case w:var _t=De._init;return Kt(oe,ie,he,_t(De._payload),Ye)}if($(De)||P(De))return oe=oe.get(he)||null,He(ie,oe,De,Ye,null);kp(ie,De)}return null}function Ze(oe,ie,he,De){for(var Ye=null,_t=null,ht=ie,Ft=ie=0,Hn=null;ht!==null&&Ft<he.length;Ft++){ht.index>Ft?(Hn=ht,ht=null):Hn=ht.sibling;var Ut=rt(oe,ht,he[Ft],De);if(Ut===null){ht===null&&(ht=Hn);break}d&&ht&&Ut.alternate===null&&h(oe,ht),ie=R(Ut,ie,Ft),_t===null?Ye=Ut:_t.sibling=Ut,_t=Ut,ht=Hn}if(Ft===he.length)return x(oe,ht),sn&&$a(oe,Ft),Ye;if(ht===null){for(;Ft<he.length;Ft++)ht=dt(oe,he[Ft],De),ht!==null&&(ie=R(ht,ie,Ft),_t===null?Ye=ht:_t.sibling=ht,_t=ht);return sn&&$a(oe,Ft),Ye}for(ht=E(oe,ht);Ft<he.length;Ft++)Hn=Kt(ht,oe,Ft,he[Ft],De),Hn!==null&&(d&&Hn.alternate!==null&&ht.delete(Hn.key===null?Ft:Hn.key),ie=R(Hn,ie,Ft),_t===null?Ye=Hn:_t.sibling=Hn,_t=Hn);return d&&ht.forEach(function(jo){return h(oe,jo)}),sn&&$a(oe,Ft),Ye}function hi(oe,ie,he,De){var Ye=P(he);if(typeof Ye!="function")throw Error(o(150));if(he=Ye.call(he),he==null)throw Error(o(151));for(var _t=Ye=null,ht=ie,Ft=ie=0,Hn=null,Ut=he.next();ht!==null&&!Ut.done;Ft++,Ut=he.next()){ht.index>Ft?(Hn=ht,ht=null):Hn=ht.sibling;var jo=rt(oe,ht,Ut.value,De);if(jo===null){ht===null&&(ht=Hn);break}d&&ht&&jo.alternate===null&&h(oe,ht),ie=R(jo,ie,Ft),_t===null?Ye=jo:_t.sibling=jo,_t=jo,ht=Hn}if(Ut.done)return x(oe,ht),sn&&$a(oe,Ft),Ye;if(ht===null){for(;!Ut.done;Ft++,Ut=he.next())Ut=dt(oe,Ut.value,De),Ut!==null&&(ie=R(Ut,ie,Ft),_t===null?Ye=Ut:_t.sibling=Ut,_t=Ut);return sn&&$a(oe,Ft),Ye}for(ht=E(oe,ht);!Ut.done;Ft++,Ut=he.next())Ut=Kt(ht,oe,Ft,Ut.value,De),Ut!==null&&(d&&Ut.alternate!==null&&ht.delete(Ut.key===null?Ft:Ut.key),ie=R(Ut,ie,Ft),_t===null?Ye=Ut:_t.sibling=Ut,_t=Ut);return d&&ht.forEach(function(_F){return h(oe,_F)}),sn&&$a(oe,Ft),Ye}function br(oe,ie,he,De){if(typeof he=="object"&&he!==null&&he.type===u&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case l:e:{for(var Ye=he.key,_t=ie;_t!==null;){if(_t.key===Ye){if(Ye=he.type,Ye===u){if(_t.tag===7){x(oe,_t.sibling),ie=T(_t,he.props.children),ie.return=oe,oe=ie;break e}}else if(_t.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===w&&PM(Ye)===_t.type){x(oe,_t.sibling),ie=T(_t,he.props),ie.ref=wd(oe,_t,he),ie.return=oe,oe=ie;break e}x(oe,_t);break}else h(oe,_t);_t=_t.sibling}he.type===u?(ie=Qa(he.props.children,oe.mode,De,he.key),ie.return=oe,oe=ie):(De=dm(he.type,he.key,he.props,null,oe.mode,De),De.ref=wd(oe,ie,he),De.return=oe,oe=De)}return G(oe);case c:e:{for(_t=he.key;ie!==null;){if(ie.key===_t)if(ie.tag===4&&ie.stateNode.containerInfo===he.containerInfo&&ie.stateNode.implementation===he.implementation){x(oe,ie.sibling),ie=T(ie,he.children||[]),ie.return=oe,oe=ie;break e}else{x(oe,ie);break}else h(oe,ie);ie=ie.sibling}ie=hx(he,oe.mode,De),ie.return=oe,oe=ie}return G(oe);case w:return _t=he._init,br(oe,ie,_t(he._payload),De)}if($(he))return Ze(oe,ie,he,De);if(P(he))return hi(oe,ie,he,De);kp(oe,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ie!==null&&ie.tag===6?(x(oe,ie.sibling),ie=T(ie,he),ie.return=oe,oe=ie):(x(oe,ie),ie=dx(he,oe.mode,De),ie.return=oe,oe=ie),G(oe)):x(oe,ie)}return br}var hc=NM(!0),RM=NM(!1),bd={},yr=ki(bd),Sd=ki(bd),fc=ki(bd);function vs(d){if(d===bd)throw Error(o(174));return d}function Py(d,h){pt(fc,h),pt(Sd,d),pt(yr,bd),d=ee(h),Gt(yr),pt(yr,d)}function pc(){Gt(yr),Gt(Sd),Gt(fc)}function LM(d){var h=vs(fc.current),x=vs(yr.current);h=D(x,d.type,h),x!==h&&(pt(Sd,d),pt(yr,h))}function Ny(d){Sd.current===d&&(Gt(yr),Gt(Sd))}var ln=ki(0);function Dp(d){for(var h=d;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||yp(x)||gd(x)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Ry=[];function Ly(){for(var d=0;d<Ry.length;d++){var h=Ry[d];Ee?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Ry.length=0}var jp=a.ReactCurrentDispatcher,xr=a.ReactCurrentBatchConfig,mc=0,pn=null,ci=null,Vn=null,Op=!1,Ed=!1,Md=0,WO=0;function ui(){throw Error(o(321))}function Iy(d,h){if(h===null)return!1;for(var x=0;x<h.length&&x<d.length;x++)if(!ps(d[x],h[x]))return!1;return!0}function ky(d,h,x,E,T,R){if(mc=R,pn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,jp.current=d===null||d.memoizedState===null?YO:KO,d=x(E,T),Ed){R=0;do{if(Ed=!1,Md=0,25<=R)throw Error(o(301));R+=1,Vn=ci=null,h.updateQueue=null,jp.current=ZO,d=x(E,T)}while(Ed)}if(jp.current=Vp,h=ci!==null&&ci.next!==null,mc=0,Vn=ci=pn=null,Op=!1,h)throw Error(o(300));return d}function Dy(){var d=Md!==0;return Md=0,d}function Ws(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?pn.memoizedState=Vn=d:Vn=Vn.next=d,Vn}function ys(){if(ci===null){var d=pn.alternate;d=d!==null?d.memoizedState:null}else d=ci.next;var h=Vn===null?pn.memoizedState:Vn.next;if(h!==null)Vn=h,ci=d;else{if(d===null)throw Error(o(310));ci=d,d={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},Vn===null?pn.memoizedState=Vn=d:Vn=Vn.next=d}return Vn}function Xa(d,h){return typeof h=="function"?h(d):h}function Fp(d){var h=ys(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=d;var E=ci,T=E.baseQueue,R=x.pending;if(R!==null){if(T!==null){var G=T.next;T.next=R.next,R.next=G}E.baseQueue=T=R,x.pending=null}if(T!==null){R=T.next,E=E.baseState;var ne=G=null,fe=null,Ce=R;do{var He=Ce.lane;if((mc&He)===He)fe!==null&&(fe=fe.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),E=Ce.hasEagerState?Ce.eagerState:d(E,Ce.action);else{var dt={lane:He,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};fe===null?(ne=fe=dt,G=E):fe=fe.next=dt,pn.lanes|=He,vc|=He}Ce=Ce.next}while(Ce!==null&&Ce!==R);fe===null?G=E:fe.next=ne,ps(E,h.memoizedState)||(Qi=!0),h.memoizedState=E,h.baseState=G,h.baseQueue=fe,x.lastRenderedState=E}if(d=x.interleaved,d!==null){T=d;do R=T.lane,pn.lanes|=R,vc|=R,T=T.next;while(T!==d)}else T===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function Up(d){var h=ys(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=d;var E=x.dispatch,T=x.pending,R=h.memoizedState;if(T!==null){x.pending=null;var G=T=T.next;do R=d(R,G.action),G=G.next;while(G!==T);ps(R,h.memoizedState)||(Qi=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),x.lastRenderedState=R}return[R,E]}function IM(){}function kM(d,h){var x=pn,E=ys(),T=h(),R=!ps(E.memoizedState,T);if(R&&(E.memoizedState=T,Qi=!0),E=E.queue,Ad(OM.bind(null,x,E,d),[d]),E.getSnapshot!==h||R||Vn!==null&&Vn.memoizedState.tag&1){if(x.flags|=2048,Td(9,jM.bind(null,x,E,T,h),void 0,null),Pn===null)throw Error(o(349));mc&30||DM(x,h,T)}return T}function DM(d,h,x){d.flags|=16384,d={getSnapshot:h,value:x},h=pn.updateQueue,h===null?(h={lastEffect:null,stores:null},pn.updateQueue=h,h.stores=[d]):(x=h.stores,x===null?h.stores=[d]:x.push(d))}function jM(d,h,x,E){h.value=x,h.getSnapshot=E,FM(h)&&_r(d,1,-1)}function OM(d,h,x){return x(function(){FM(h)&&_r(d,1,-1)})}function FM(d){var h=d.getSnapshot;d=d.value;try{var x=h();return!ps(d,x)}catch{return!0}}function jy(d){var h=Ws();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:d},h.queue=d,d=d.dispatch=qO.bind(null,pn,d),[h.memoizedState,d]}function Td(d,h,x,E){return d={tag:d,create:h,destroy:x,deps:E,next:null},h=pn.updateQueue,h===null?(h={lastEffect:null,stores:null},pn.updateQueue=h,h.lastEffect=d.next=d):(x=h.lastEffect,x===null?h.lastEffect=d.next=d:(E=x.next,x.next=d,d.next=E,h.lastEffect=d)),d}function UM(){return ys().memoizedState}function zp(d,h,x,E){var T=Ws();pn.flags|=d,T.memoizedState=Td(1|h,x,void 0,E===void 0?null:E)}function Bp(d,h,x,E){var T=ys();E=E===void 0?null:E;var R=void 0;if(ci!==null){var G=ci.memoizedState;if(R=G.destroy,E!==null&&Iy(E,G.deps)){T.memoizedState=Td(h,x,R,E);return}}pn.flags|=d,T.memoizedState=Td(1|h,x,R,E)}function Oy(d,h){return zp(8390656,8,d,h)}function Ad(d,h){return Bp(2048,8,d,h)}function zM(d,h){return Bp(4,2,d,h)}function BM(d,h){return Bp(4,4,d,h)}function VM(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function HM(d,h,x){return x=x!=null?x.concat([d]):null,Bp(4,4,VM.bind(null,h,d),x)}function Fy(){}function GM(d,h){var x=ys();h=h===void 0?null:h;var E=x.memoizedState;return E!==null&&h!==null&&Iy(h,E[1])?E[0]:(x.memoizedState=[d,h],d)}function WM(d,h){var x=ys();h=h===void 0?null:h;var E=x.memoizedState;return E!==null&&h!==null&&Iy(h,E[1])?E[0]:(d=d(),x.memoizedState=[d,h],d)}function $O(d,h){var x=Ot;Ot=x!==0&&4>x?x:4,d(!0);var E=xr.transition;xr.transition={};try{d(!1),h()}finally{Ot=x,xr.transition=E}}function $M(){return ys().memoizedState}function XO(d,h,x){var E=Io(d);x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},XM(d)?qM(h,x):(YM(d,h,x),x=Si(),d=_r(d,E,x),d!==null&&KM(d,h,E))}function qO(d,h,x){var E=Io(d),T={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(XM(d))qM(h,T);else{YM(d,h,T);var R=d.alternate;if(d.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var G=h.lastRenderedState,ne=R(G,x);if(T.hasEagerState=!0,T.eagerState=ne,ps(ne,G))return}catch{}finally{}x=Si(),d=_r(d,E,x),d!==null&&KM(d,h,E)}}function XM(d){var h=d.alternate;return d===pn||h!==null&&h===pn}function qM(d,h){Ed=Op=!0;var x=d.pending;x===null?h.next=h:(h.next=x.next,x.next=h),d.pending=h}function YM(d,h,x){Pn!==null&&d.mode&1&&!(Mt&2)?(d=h.interleaved,d===null?(x.next=x,gs===null?gs=[h]:gs.push(h)):(x.next=d.next,d.next=x),h.interleaved=x):(d=h.pending,d===null?x.next=x:(x.next=d.next,d.next=x),h.pending=x)}function KM(d,h,x){if(x&4194240){var E=h.lanes;E&=d.pendingLanes,x|=E,h.lanes=x,hy(d,x)}}var Vp={readContext:mr,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useInsertionEffect:ui,useLayoutEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useMutableSource:ui,useSyncExternalStore:ui,useId:ui,unstable_isNewReconciler:!1},YO={readContext:mr,useCallback:function(d,h){return Ws().memoizedState=[d,h===void 0?null:h],d},useContext:mr,useEffect:Oy,useImperativeHandle:function(d,h,x){return x=x!=null?x.concat([d]):null,zp(4194308,4,VM.bind(null,h,d),x)},useLayoutEffect:function(d,h){return zp(4194308,4,d,h)},useInsertionEffect:function(d,h){return zp(4,2,d,h)},useMemo:function(d,h){var x=Ws();return h=h===void 0?null:h,d=d(),x.memoizedState=[d,h],d},useReducer:function(d,h,x){var E=Ws();return h=x!==void 0?x(h):h,E.memoizedState=E.baseState=h,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:h},E.queue=d,d=d.dispatch=XO.bind(null,pn,d),[E.memoizedState,d]},useRef:function(d){var h=Ws();return d={current:d},h.memoizedState=d},useState:jy,useDebugValue:Fy,useDeferredValue:function(d){var h=jy(d),x=h[0],E=h[1];return Oy(function(){var T=xr.transition;xr.transition={};try{E(d)}finally{xr.transition=T}},[d]),x},useTransition:function(){var d=jy(!1),h=d[0];return d=$O.bind(null,d[1]),Ws().memoizedState=d,[h,d]},useMutableSource:function(){},useSyncExternalStore:function(d,h,x){var E=pn,T=Ws();if(sn){if(x===void 0)throw Error(o(407));x=x()}else{if(x=h(),Pn===null)throw Error(o(349));mc&30||DM(E,h,x)}T.memoizedState=x;var R={value:x,getSnapshot:h};return T.queue=R,Oy(OM.bind(null,E,R,d),[d]),E.flags|=2048,Td(9,jM.bind(null,E,R,x,h),void 0,null),x},useId:function(){var d=Ws(),h=Pn.identifierPrefix;if(sn){var x=Gs,E=Hs;x=(E&~(1<<32-zr(E)-1)).toString(32)+x,h=":"+h+"R"+x,x=Md++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=WO++,h=":"+h+"r"+x.toString(32)+":";return d.memoizedState=h},unstable_isNewReconciler:!1},KO={readContext:mr,useCallback:GM,useContext:mr,useEffect:Ad,useImperativeHandle:HM,useInsertionEffect:zM,useLayoutEffect:BM,useMemo:WM,useReducer:Fp,useRef:UM,useState:function(){return Fp(Xa)},useDebugValue:Fy,useDeferredValue:function(d){var h=Fp(Xa),x=h[0],E=h[1];return Ad(function(){var T=xr.transition;xr.transition={};try{E(d)}finally{xr.transition=T}},[d]),x},useTransition:function(){var d=Fp(Xa)[0],h=ys().memoizedState;return[d,h]},useMutableSource:IM,useSyncExternalStore:kM,useId:$M,unstable_isNewReconciler:!1},ZO={readContext:mr,useCallback:GM,useContext:mr,useEffect:Ad,useImperativeHandle:HM,useInsertionEffect:zM,useLayoutEffect:BM,useMemo:WM,useReducer:Up,useRef:UM,useState:function(){return Up(Xa)},useDebugValue:Fy,useDeferredValue:function(d){var h=Up(Xa),x=h[0],E=h[1];return Ad(function(){var T=xr.transition;xr.transition={};try{E(d)}finally{xr.transition=T}},[d]),x},useTransition:function(){var d=Up(Xa)[0],h=ys().memoizedState;return[d,h]},useMutableSource:IM,useSyncExternalStore:kM,useId:$M,unstable_isNewReconciler:!1};function Uy(d,h){try{var x="",E=h;do x+=GO(E),E=E.return;while(E);var T=x}catch(R){T=`
Error generating stack: `+R.message+`
`+R.stack}return{value:d,source:h,stack:T}}function zy(d,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var JO=typeof WeakMap=="function"?WeakMap:Map;function ZM(d,h,x){x=Vs(-1,x),x.tag=3,x.payload={element:null};var E=h.value;return x.callback=function(){rm||(rm=!0,rx=E),zy(d,h)},x}function JM(d,h,x){x=Vs(-1,x),x.tag=3;var E=d.type.getDerivedStateFromError;if(typeof E=="function"){var T=h.value;x.payload=function(){return E(T)},x.callback=function(){zy(d,h)}}var R=d.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(x.callback=function(){zy(d,h),typeof E!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this));var G=h.stack;this.componentDidCatch(h.value,{componentStack:G!==null?G:""})}),x}function QM(d,h,x){var E=d.pingCache;if(E===null){E=d.pingCache=new JO;var T=new Set;E.set(h,T)}else T=E.get(h),T===void 0&&(T=new Set,E.set(h,T));T.has(x)||(T.add(x),d=hF.bind(null,d,h,x),h.then(d,d))}function eT(d){do{var h;if((h=d.tag===13)&&(h=d.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return d;d=d.return}while(d!==null);return null}function tT(d,h,x,E,T){return d.mode&1?(d.flags|=65536,d.lanes=T,d):(d===h?d.flags|=65536:(d.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=Vs(-1,1),h.tag=2,No(x,h))),x.lanes|=1),d)}function xs(d){d.flags|=4}function nT(d,h){if(d!==null&&d.child===h.child)return!0;if(h.flags&16)return!1;for(d=h.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var Cd,Pd,Hp,Gp;if(Pe)Cd=function(d,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)te(d,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Pd=function(){},Hp=function(d,h,x,E,T){if(d=d.memoizedProps,d!==E){var R=h.stateNode,G=vs(yr.current);x=se(R,x,d,E,T,G),(h.updateQueue=x)&&xs(h)}},Gp=function(d,h,x,E){x!==E&&xs(h)};else if(_e){Cd=function(d,h,x,E){for(var T=h.child;T!==null;){if(T.tag===5){var R=T.stateNode;x&&E&&(R=Bt(R,T.type,T.memoizedProps,T)),te(d,R)}else if(T.tag===6)R=T.stateNode,x&&E&&(R=wn(R,T.memoizedProps,T)),te(d,R);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)R=T.child,R!==null&&(R.return=T),Cd(d,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var iT=function(d,h,x,E){for(var T=h.child;T!==null;){if(T.tag===5){var R=T.stateNode;x&&E&&(R=Bt(R,T.type,T.memoizedProps,T)),xt(d,R)}else if(T.tag===6)R=T.stateNode,x&&E&&(R=wn(R,T.memoizedProps,T)),xt(d,R);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)R=T.child,R!==null&&(R.return=T),iT(d,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Pd=function(d,h){var x=h.stateNode;if(!nT(d,h)){d=x.containerInfo;var E=It(d);iT(E,h,!1,!1),x.pendingChildren=E,xs(h),Xt(d,E)}},Hp=function(d,h,x,E,T){var R=d.stateNode,G=d.memoizedProps;if((d=nT(d,h))&&G===E)h.stateNode=R;else{var ne=h.stateNode,fe=vs(yr.current),Ce=null;G!==E&&(Ce=se(ne,x,G,E,T,fe)),d&&Ce===null?h.stateNode=R:(R=qe(R,Ce,x,G,E,h,d,ne),Q(R,x,E,T,fe)&&xs(h),h.stateNode=R,d?xs(h):Cd(R,h,!1,!1))}},Gp=function(d,h,x,E){x!==E?(d=vs(fc.current),x=vs(yr.current),h.stateNode=ge(E,d,x,h),xs(h)):h.stateNode=d.stateNode}}else Pd=function(){},Hp=function(){},Gp=function(){};function Nd(d,h){if(!sn)switch(d.tailMode){case"hidden":h=d.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?d.tail=null:x.sibling=null;break;case"collapsed":x=d.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:E.sibling=null}}function di(d){var h=d.alternate!==null&&d.alternate.child===d.child,x=0,E=0;if(h)for(var T=d.child;T!==null;)x|=T.lanes|T.childLanes,E|=T.subtreeFlags&14680064,E|=T.flags&14680064,T.return=d,T=T.sibling;else for(T=d.child;T!==null;)x|=T.lanes|T.childLanes,E|=T.subtreeFlags,E|=T.flags,T.return=d,T=T.sibling;return d.subtreeFlags|=E,d.childLanes=x,h}function QO(d,h,x){var E=h.pendingProps;switch(My(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(h),null;case 1:return ei(h.type)&&xp(),di(h),null;case 3:return E=h.stateNode,pc(),Gt(qt),Gt(Cn),Ly(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(_d(h)?xs(h):d===null||d.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Vr!==null&&(ax(Vr),Vr=null))),Pd(d,h),di(h),null;case 5:Ny(h),x=vs(fc.current);var T=h.type;if(d!==null&&h.stateNode!=null)Hp(d,h,T,E,x),d.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!E){if(h.stateNode===null)throw Error(o(166));return di(h),null}if(d=vs(yr.current),_d(h)){if(!de)throw Error(o(175));d=ye(h.stateNode,h.type,h.memoizedProps,x,d,h,!xd),h.updateQueue=d,d!==null&&xs(h)}else{var R=Z(T,E,x,d,h);Cd(R,h,!1,!1),h.stateNode=R,Q(R,T,E,x,d)&&xs(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return di(h),null;case 6:if(d&&h.stateNode!=null)Gp(d,h,d.memoizedProps,E);else{if(typeof E!="string"&&h.stateNode===null)throw Error(o(166));if(d=vs(fc.current),x=vs(yr.current),_d(h)){if(!de)throw Error(o(176));if(d=h.stateNode,E=h.memoizedProps,(x=nt(d,E,h,!xd))&&(T=Zi,T!==null))switch(R=(T.mode&1)!==0,T.tag){case 3:Qn(T.stateNode.containerInfo,d,E,R);break;case 5:Ki(T.type,T.memoizedProps,T.stateNode,d,E,R)}x&&xs(h)}else h.stateNode=ge(E,d,x,h)}return di(h),null;case 13:if(Gt(ln),E=h.memoizedState,sn&&Ji!==null&&h.mode&1&&!(h.flags&128)){for(d=Ji;d;)d=z(d);return dc(),h.flags|=98560,h}if(E!==null&&E.dehydrated!==null){if(E=_d(h),d===null){if(!E)throw Error(o(318));if(!de)throw Error(o(344));if(d=h.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));ot(d,h)}else dc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return di(h),null}return Vr!==null&&(ax(Vr),Vr=null),h.flags&128?(h.lanes=x,h):(E=E!==null,x=!1,d===null?_d(h):x=d.memoizedState!==null,E&&!x&&(h.child.flags|=8192,h.mode&1&&(d===null||ln.current&1?Dn===0&&(Dn=3):cx())),h.updateQueue!==null&&(h.flags|=4),di(h),null);case 4:return pc(),Pd(d,h),d===null&&Be(h.stateNode.containerInfo),di(h),null;case 10:return xy(h.type._context),di(h),null;case 17:return ei(h.type)&&xp(),di(h),null;case 19:if(Gt(ln),T=h.memoizedState,T===null)return di(h),null;if(E=(h.flags&128)!==0,R=T.rendering,R===null)if(E)Nd(T,!1);else{if(Dn!==0||d!==null&&d.flags&128)for(d=h.child;d!==null;){if(R=Dp(d),R!==null){for(h.flags|=128,Nd(T,!1),d=R.updateQueue,d!==null&&(h.updateQueue=d,h.flags|=4),h.subtreeFlags=0,d=x,E=h.child;E!==null;)x=E,T=d,x.flags&=14680066,R=x.alternate,R===null?(x.childLanes=0,x.lanes=T,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=R.childLanes,x.lanes=R.lanes,x.child=R.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=R.memoizedProps,x.memoizedState=R.memoizedState,x.updateQueue=R.updateQueue,x.type=R.type,T=R.dependencies,x.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),E=E.sibling;return pt(ln,ln.current&1|2),h.child}d=d.sibling}T.tail!==null&&Bn()>ix&&(h.flags|=128,E=!0,Nd(T,!1),h.lanes=4194304)}else{if(!E)if(d=Dp(R),d!==null){if(h.flags|=128,E=!0,d=d.updateQueue,d!==null&&(h.updateQueue=d,h.flags|=4),Nd(T,!0),T.tail===null&&T.tailMode==="hidden"&&!R.alternate&&!sn)return di(h),null}else 2*Bn()-T.renderingStartTime>ix&&x!==1073741824&&(h.flags|=128,E=!0,Nd(T,!1),h.lanes=4194304);T.isBackwards?(R.sibling=h.child,h.child=R):(d=T.last,d!==null?d.sibling=R:h.child=R,T.last=R)}return T.tail!==null?(h=T.tail,T.rendering=h,T.tail=h.sibling,T.renderingStartTime=Bn(),h.sibling=null,d=ln.current,pt(ln,E?d&1|2:d&1),h):(di(h),null);case 22:case 23:return lx(),E=h.memoizedState!==null,d!==null&&d.memoizedState!==null!==E&&(h.flags|=8192),E&&h.mode&1?er&1073741824&&(di(h),Pe&&h.subtreeFlags&6&&(h.flags|=8192)):di(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var eF=a.ReactCurrentOwner,Qi=!1;function bi(d,h,x,E){h.child=d===null?RM(h,null,x,E):hc(h,d.child,x,E)}function rT(d,h,x,E,T){x=x.render;var R=h.ref;return lc(h,T),E=ky(d,h,x,E,R,T),x=Dy(),d!==null&&!Qi?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~T,$s(d,h,T)):(sn&&x&&Ey(h),h.flags|=1,bi(d,h,E,T),h.child)}function sT(d,h,x,E,T){if(d===null){var R=x.type;return typeof R=="function"&&!ux(R)&&R.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=R,oT(d,h,R,E,T)):(d=dm(x.type,null,E,h,h.mode,T),d.ref=h.ref,d.return=h,h.child=d)}if(R=d.child,!(d.lanes&T)){var G=R.memoizedProps;if(x=x.compare,x=x!==null?x:Tp,x(G,E)&&d.ref===h.ref)return $s(d,h,T)}return h.flags|=1,d=Do(R,E),d.ref=h.ref,d.return=h,h.child=d}function oT(d,h,x,E,T){if(d!==null&&Tp(d.memoizedProps,E)&&d.ref===h.ref)if(Qi=!1,(d.lanes&T)!==0)d.flags&131072&&(Qi=!0);else return h.lanes=d.lanes,$s(d,h,T);return By(d,h,x,E,T)}function aT(d,h,x){var E=h.pendingProps,T=E.children,R=d!==null?d.memoizedState:null;if(E.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},pt(gc,er),er|=x;else if(x&1073741824)h.memoizedState={baseLanes:0,cachePool:null},E=R!==null?R.baseLanes:x,pt(gc,er),er|=E;else return d=R!==null?R.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:d,cachePool:null},h.updateQueue=null,pt(gc,er),er|=d,null;else R!==null?(E=R.baseLanes|x,h.memoizedState=null):E=x,pt(gc,er),er|=E;return bi(d,h,T,x),h.child}function lT(d,h){var x=h.ref;(d===null&&x!==null||d!==null&&d.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function By(d,h,x,E,T){var R=ei(x)?Ur:Cn.current;return R=Co(h,R),lc(h,T),x=ky(d,h,x,E,R,T),E=Dy(),d!==null&&!Qi?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~T,$s(d,h,T)):(sn&&E&&Ey(h),h.flags|=1,bi(d,h,x,T),h.child)}function cT(d,h,x,E,T){if(ei(x)){var R=!0;_p(h)}else R=!1;if(lc(h,T),h.stateNode===null)d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),SM(h,x,E),Sy(h,x,E,T),E=!0;else if(d===null){var G=h.stateNode,ne=h.memoizedProps;G.props=ne;var fe=G.context,Ce=x.contextType;typeof Ce=="object"&&Ce!==null?Ce=mr(Ce):(Ce=ei(x)?Ur:Cn.current,Ce=Co(h,Ce));var He=x.getDerivedStateFromProps,dt=typeof He=="function"||typeof G.getSnapshotBeforeUpdate=="function";dt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ne!==E||fe!==Ce)&&EM(h,G,E,Ce),Po=!1;var rt=h.memoizedState;G.state=rt,Np(h,E,G,T),fe=h.memoizedState,ne!==E||rt!==fe||qt.current||Po?(typeof He=="function"&&(by(h,x,He,E),fe=h.memoizedState),(ne=Po||bM(h,x,ne,E,rt,fe,Ce))?(dt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(h.flags|=4194308)):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=fe),G.props=E,G.state=fe,G.context=Ce,E=ne):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{G=h.stateNode,yM(d,h),ne=h.memoizedProps,Ce=h.type===h.elementType?ne:Br(h.type,ne),G.props=Ce,dt=h.pendingProps,rt=G.context,fe=x.contextType,typeof fe=="object"&&fe!==null?fe=mr(fe):(fe=ei(x)?Ur:Cn.current,fe=Co(h,fe));var Kt=x.getDerivedStateFromProps;(He=typeof Kt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ne!==dt||rt!==fe)&&EM(h,G,E,fe),Po=!1,rt=h.memoizedState,G.state=rt,Np(h,E,G,T);var Ze=h.memoizedState;ne!==dt||rt!==Ze||qt.current||Po?(typeof Kt=="function"&&(by(h,x,Kt,E),Ze=h.memoizedState),(Ce=Po||bM(h,x,Ce,E,rt,Ze,fe)||!1)?(He||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(E,Ze,fe),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(E,Ze,fe)),typeof G.componentDidUpdate=="function"&&(h.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof G.componentDidUpdate!="function"||ne===d.memoizedProps&&rt===d.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ne===d.memoizedProps&&rt===d.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=Ze),G.props=E,G.state=Ze,G.context=fe,E=Ce):(typeof G.componentDidUpdate!="function"||ne===d.memoizedProps&&rt===d.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ne===d.memoizedProps&&rt===d.memoizedState||(h.flags|=1024),E=!1)}return Vy(d,h,x,E,R,T)}function Vy(d,h,x,E,T,R){lT(d,h);var G=(h.flags&128)!==0;if(!E&&!G)return T&&fM(h,x,!1),$s(d,h,R);E=h.stateNode,eF.current=h;var ne=G&&typeof x.getDerivedStateFromError!="function"?null:E.render();return h.flags|=1,d!==null&&G?(h.child=hc(h,d.child,null,R),h.child=hc(h,null,ne,R)):bi(d,h,ne,R),h.memoizedState=E.state,T&&fM(h,x,!0),h.child}function uT(d){var h=d.stateNode;h.pendingContext?dM(d,h.pendingContext,h.pendingContext!==h.context):h.context&&dM(d,h.context,!1),Py(d,h.containerInfo)}function dT(d,h,x,E,T){return dc(),Cy(T),h.flags|=256,bi(d,h,x,E),h.child}var Wp={dehydrated:null,treeContext:null,retryLane:0};function $p(d){return{baseLanes:d,cachePool:null}}function hT(d,h,x){var E=h.pendingProps,T=ln.current,R=!1,G=(h.flags&128)!==0,ne;if((ne=G)||(ne=d!==null&&d.memoizedState===null?!1:(T&2)!==0),ne?(R=!0,h.flags&=-129):(d===null||d.memoizedState!==null)&&(T|=1),pt(ln,T&1),d===null)return Ay(h),d=h.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(h.mode&1?gd(d)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(T=E.children,d=E.fallback,R?(E=h.mode,R=h.child,T={mode:"hidden",children:T},!(E&1)&&R!==null?(R.childLanes=0,R.pendingProps=T):R=hm(T,E,0,null),d=Qa(d,E,x,null),R.return=h,d.return=h,R.sibling=d,h.child=R,h.child.memoizedState=$p(x),h.memoizedState=Wp,d):Hy(h,T));if(T=d.memoizedState,T!==null){if(ne=T.dehydrated,ne!==null){if(G)return h.flags&256?(h.flags&=-257,Xp(d,h,x,Error(o(422)))):h.memoizedState!==null?(h.child=d.child,h.flags|=128,null):(R=E.fallback,T=h.mode,E=hm({mode:"visible",children:E.children},T,0,null),R=Qa(R,T,x,null),R.flags|=2,E.return=h,R.return=h,E.sibling=R,h.child=E,h.mode&1&&hc(h,d.child,null,x),h.child.memoizedState=$p(x),h.memoizedState=Wp,R);if(!(h.mode&1))h=Xp(d,h,x,null);else if(gd(ne))h=Xp(d,h,x,Error(o(419)));else if(E=(x&d.childLanes)!==0,Qi||E){if(E=Pn,E!==null){switch(x&-x){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}E=R&(E.suspendedLanes|x)?0:R,E!==0&&E!==T.retryLane&&(T.retryLane=E,_r(d,E,-1))}cx(),h=Xp(d,h,x,Error(o(421)))}else yp(ne)?(h.flags|=128,h.child=d.child,h=fF.bind(null,d),cy(ne,h),h=null):(x=T.treeContext,de&&(Ji=re(ne),Zi=h,sn=!0,Vr=null,xd=!1,x!==null&&(gr[vr++]=Hs,gr[vr++]=Gs,gr[vr++]=Wa,Hs=x.id,Gs=x.overflow,Wa=h)),h=Hy(h,h.pendingProps.children),h.flags|=4096);return h}return R?(E=pT(d,h,E.children,E.fallback,x),R=h.child,T=d.child.memoizedState,R.memoizedState=T===null?$p(x):{baseLanes:T.baseLanes|x,cachePool:null},R.childLanes=d.childLanes&~x,h.memoizedState=Wp,E):(x=fT(d,h,E.children,x),h.memoizedState=null,x)}return R?(E=pT(d,h,E.children,E.fallback,x),R=h.child,T=d.child.memoizedState,R.memoizedState=T===null?$p(x):{baseLanes:T.baseLanes|x,cachePool:null},R.childLanes=d.childLanes&~x,h.memoizedState=Wp,E):(x=fT(d,h,E.children,x),h.memoizedState=null,x)}function Hy(d,h){return h=hm({mode:"visible",children:h},d.mode,0,null),h.return=d,d.child=h}function fT(d,h,x,E){var T=d.child;return d=T.sibling,x=Do(T,{mode:"visible",children:x}),!(h.mode&1)&&(x.lanes=E),x.return=h,x.sibling=null,d!==null&&(E=h.deletions,E===null?(h.deletions=[d],h.flags|=16):E.push(d)),h.child=x}function pT(d,h,x,E,T){var R=h.mode;d=d.child;var G=d.sibling,ne={mode:"hidden",children:x};return!(R&1)&&h.child!==d?(x=h.child,x.childLanes=0,x.pendingProps=ne,h.deletions=null):(x=Do(d,ne),x.subtreeFlags=d.subtreeFlags&14680064),G!==null?E=Do(G,E):(E=Qa(E,R,T,null),E.flags|=2),E.return=h,x.return=h,x.sibling=E,h.child=x,E}function Xp(d,h,x,E){return E!==null&&Cy(E),hc(h,d.child,null,x),d=Hy(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function mT(d,h,x){d.lanes|=h;var E=d.alternate;E!==null&&(E.lanes|=h),_y(d.return,h,x)}function Gy(d,h,x,E,T){var R=d.memoizedState;R===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:T}:(R.isBackwards=h,R.rendering=null,R.renderingStartTime=0,R.last=E,R.tail=x,R.tailMode=T)}function gT(d,h,x){var E=h.pendingProps,T=E.revealOrder,R=E.tail;if(bi(d,h,E.children,x),E=ln.current,E&2)E=E&1|2,h.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&mT(d,x,h);else if(d.tag===19)mT(d,x,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}E&=1}if(pt(ln,E),!(h.mode&1))h.memoizedState=null;else switch(T){case"forwards":for(x=h.child,T=null;x!==null;)d=x.alternate,d!==null&&Dp(d)===null&&(T=x),x=x.sibling;x=T,x===null?(T=h.child,h.child=null):(T=x.sibling,x.sibling=null),Gy(h,!1,T,x,R);break;case"backwards":for(x=null,T=h.child,h.child=null;T!==null;){if(d=T.alternate,d!==null&&Dp(d)===null){h.child=T;break}d=T.sibling,T.sibling=x,x=T,T=d}Gy(h,!0,x,null,R);break;case"together":Gy(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function $s(d,h,x){if(d!==null&&(h.dependencies=d.dependencies),vc|=h.lanes,!(x&h.childLanes))return null;if(d!==null&&h.child!==d.child)throw Error(o(153));if(h.child!==null){for(d=h.child,x=Do(d,d.pendingProps),h.child=x,x.return=h;d.sibling!==null;)d=d.sibling,x=x.sibling=Do(d,d.pendingProps),x.return=h;x.sibling=null}return h.child}function tF(d,h,x){switch(h.tag){case 3:uT(h),dc();break;case 5:LM(h);break;case 1:ei(h.type)&&_p(h);break;case 4:Py(h,h.stateNode.containerInfo);break;case 10:vM(h,h.type._context,h.memoizedProps.value);break;case 13:var E=h.memoizedState;if(E!==null)return E.dehydrated!==null?(pt(ln,ln.current&1),h.flags|=128,null):x&h.child.childLanes?hT(d,h,x):(pt(ln,ln.current&1),d=$s(d,h,x),d!==null?d.sibling:null);pt(ln,ln.current&1);break;case 19:if(E=(x&h.childLanes)!==0,d.flags&128){if(E)return gT(d,h,x);h.flags|=128}var T=h.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),pt(ln,ln.current),E)break;return null;case 22:case 23:return h.lanes=0,aT(d,h,x)}return $s(d,h,x)}function nF(d,h){switch(My(h),h.tag){case 1:return ei(h.type)&&xp(),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return pc(),Gt(qt),Gt(Cn),Ly(),d=h.flags,d&65536&&!(d&128)?(h.flags=d&-65537|128,h):null;case 5:return Ny(h),null;case 13:if(Gt(ln),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(o(340));dc()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return Gt(ln),null;case 4:return pc(),null;case 10:return xy(h.type._context),null;case 22:case 23:return lx(),null;case 24:return null;default:return null}}var qp=!1,qa=!1,iF=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Yp(d,h){var x=d.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){Oi(d,h,E)}else x.current=null}function Wy(d,h,x){try{x()}catch(E){Oi(d,h,E)}}var vT=!1;function rF(d,h){for(O(d.containerInfo),ke=h;ke!==null;)if(d=ke,h=d.child,(d.subtreeFlags&1028)!==0&&h!==null)h.return=d,ke=h;else for(;ke!==null;){d=ke;try{var x=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,T=x.memoizedState,R=d.stateNode,G=R.getSnapshotBeforeUpdate(d.elementType===d.type?E:Br(d.type,E),T);R.__reactInternalSnapshotBeforeUpdate=G}break;case 3:Pe&&Le(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ne){Oi(d,d.return,ne)}if(h=d.sibling,h!==null){h.return=d.return,ke=h;break}ke=d.return}return x=vT,vT=!1,x}function Ya(d,h,x){var E=h.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var T=E=E.next;do{if((T.tag&d)===d){var R=T.destroy;T.destroy=void 0,R!==void 0&&Wy(h,x,R)}T=T.next}while(T!==E)}}function Rd(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&d)===d){var E=x.create;x.destroy=E()}x=x.next}while(x!==h)}}function $y(d){var h=d.ref;if(h!==null){var x=d.stateNode;switch(d.tag){case 5:d=X(x);break;default:d=x}typeof h=="function"?h(d):h.current=d}}function yT(d,h,x){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(Ep,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var E=d=d.next;do{var T=E,R=T.destroy;T=T.tag,R!==void 0&&(T&2||T&4)&&Wy(h,x,R),E=E.next}while(E!==d)}break;case 1:if(Yp(h,x),d=h.stateNode,typeof d.componentWillUnmount=="function")try{d.props=h.memoizedProps,d.state=h.memoizedState,d.componentWillUnmount()}catch(G){Oi(h,x,G)}break;case 5:Yp(h,x);break;case 4:Pe?ET(d,h,x):_e&&_e&&(h=h.stateNode.containerInfo,x=It(h),Zn(h,x))}}function xT(d,h,x){for(var E=h;;)if(yT(d,E,x),E.child===null||Pe&&E.tag===4){if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function _T(d){var h=d.alternate;h!==null&&(d.alternate=null,_T(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&Qe(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function wT(d){return d.tag===5||d.tag===3||d.tag===4}function bT(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||wT(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function ST(d){if(Pe){e:{for(var h=d.return;h!==null;){if(wT(h))break e;h=h.return}throw Error(o(160))}var x=h;switch(x.tag){case 5:h=x.stateNode,x.flags&32&&(we(h),x.flags&=-33),x=bT(d),qy(d,x,h);break;case 3:case 4:h=x.stateNode.containerInfo,x=bT(d),Xy(d,x,h);break;default:throw Error(o(161))}}}function Xy(d,h,x){var E=d.tag;if(E===5||E===6)d=d.stateNode,h?Ue(x,d,h):Fe(x,d);else if(E!==4&&(d=d.child,d!==null))for(Xy(d,h,x),d=d.sibling;d!==null;)Xy(d,h,x),d=d.sibling}function qy(d,h,x){var E=d.tag;if(E===5||E===6)d=d.stateNode,h?it(x,d,h):tt(x,d);else if(E!==4&&(d=d.child,d!==null))for(qy(d,h,x),d=d.sibling;d!==null;)qy(d,h,x),d=d.sibling}function ET(d,h,x){for(var E=h,T=!1,R,G;;){if(!T){T=E.return;e:for(;;){if(T===null)throw Error(o(160));switch(R=T.stateNode,T.tag){case 5:G=!1;break e;case 3:R=R.containerInfo,G=!0;break e;case 4:R=R.containerInfo,G=!0;break e}T=T.return}T=!0}if(E.tag===5||E.tag===6)xT(d,E,x),G?J(R,E.stateNode):We(R,E.stateNode);else if(E.tag===18)G?Tt(R,E.stateNode):Et(R,E.stateNode);else if(E.tag===4){if(E.child!==null){R=E.stateNode.containerInfo,G=!0,E.child.return=E,E=E.child;continue}}else if(yT(d,E,x),E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return,E.tag===4&&(T=!1)}E.sibling.return=E.return,E=E.sibling}}function Yy(d,h){if(Pe){switch(h.tag){case 0:case 11:case 14:case 15:Ya(3,h,h.return),Rd(3,h),Ya(5,h,h.return);return;case 1:return;case 5:var x=h.stateNode;if(x!=null){var E=h.memoizedProps;d=d!==null?d.memoizedProps:E;var T=h.type,R=h.updateQueue;h.updateQueue=null,R!==null&&Je(x,R,T,d,E,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));x=h.memoizedProps,me(h.stateNode,d!==null?d.memoizedProps:x,x);return;case 3:de&&d!==null&&d.memoizedState.isDehydrated&&ft(h.stateNode.containerInfo);return;case 12:return;case 13:Kp(h);return;case 19:Kp(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Ya(3,h,h.return),Rd(3,h),Ya(5,h,h.return);return;case 12:return;case 13:Kp(h);return;case 19:Kp(h);return;case 3:de&&d!==null&&d.memoizedState.isDehydrated&&ft(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(_e){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Zn(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Kp(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var x=d.stateNode;x===null&&(x=d.stateNode=new iF),h.forEach(function(E){var T=pF.bind(null,d,E);x.has(E)||(x.add(E),E.then(T,T))})}}function sF(d,h){for(ke=h;ke!==null;){h=ke;var x=h.deletions;if(x!==null)for(var E=0;E<x.length;E++){var T=x[E];try{var R=d;Pe?ET(R,T,h):xT(R,T,h);var G=T.alternate;G!==null&&(G.return=null),T.return=null}catch(Ye){Oi(T,h,Ye)}}if(x=h.child,h.subtreeFlags&12854&&x!==null)x.return=h,ke=x;else for(;ke!==null;){h=ke;try{var ne=h.flags;if(ne&32&&Pe&&we(h.stateNode),ne&512){var fe=h.alternate;if(fe!==null){var Ce=fe.ref;Ce!==null&&(typeof Ce=="function"?Ce(null):Ce.current=null)}}if(ne&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var He=h.alternate;(He===null||He.memoizedState===null)&&(nx=Bn())}break;case 22:var dt=h.memoizedState!==null,rt=h.alternate,Kt=rt!==null&&rt.memoizedState!==null;if(x=h,Pe){e:if(E=x,T=dt,R=null,Pe)for(var Ze=E;;){if(Ze.tag===5){if(R===null){R=Ze;var hi=Ze.stateNode;T?Oe(hi):ue(Ze.stateNode,Ze.memoizedProps)}}else if(Ze.tag===6){if(R===null){var br=Ze.stateNode;T?Y(br):be(br,Ze.memoizedProps)}}else if((Ze.tag!==22&&Ze.tag!==23||Ze.memoizedState===null||Ze===E)&&Ze.child!==null){Ze.child.return=Ze,Ze=Ze.child;continue}if(Ze===E)break;for(;Ze.sibling===null;){if(Ze.return===null||Ze.return===E)break e;R===Ze&&(R=null),Ze=Ze.return}R===Ze&&(R=null),Ze.sibling.return=Ze.return,Ze=Ze.sibling}}if(dt&&!Kt&&x.mode&1){ke=x;for(var oe=x.child;oe!==null;){for(x=ke=oe;ke!==null;){E=ke;var ie=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Ya(4,E,E.return);break;case 1:Yp(E,E.return);var he=E.stateNode;if(typeof he.componentWillUnmount=="function"){var De=E.return;try{he.props=E.memoizedProps,he.state=E.memoizedState,he.componentWillUnmount()}catch(Ye){Oi(E,De,Ye)}}break;case 5:Yp(E,E.return);break;case 22:if(E.memoizedState!==null){AT(x);continue}}ie!==null?(ie.return=E,ke=ie):AT(x)}oe=oe.sibling}}}switch(ne&4102){case 2:ST(h),h.flags&=-3;break;case 6:ST(h),h.flags&=-3,Yy(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Yy(h.alternate,h);break;case 4:Yy(h.alternate,h)}}catch(Ye){Oi(h,h.return,Ye)}if(x=h.sibling,x!==null){x.return=h.return,ke=x;break}ke=h.return}}}function oF(d,h,x){ke=d,MT(d)}function MT(d,h,x){for(var E=(d.mode&1)!==0;ke!==null;){var T=ke,R=T.child;if(T.tag===22&&E){var G=T.memoizedState!==null||qp;if(!G){var ne=T.alternate,fe=ne!==null&&ne.memoizedState!==null||qa;ne=qp;var Ce=qa;if(qp=G,(qa=fe)&&!Ce)for(ke=T;ke!==null;)G=ke,fe=G.child,G.tag===22&&G.memoizedState!==null?CT(T):fe!==null?(fe.return=G,ke=fe):CT(T);for(;R!==null;)ke=R,MT(R),R=R.sibling;ke=T,qp=ne,qa=Ce}TT(d)}else T.subtreeFlags&8772&&R!==null?(R.return=T,ke=R):TT(d)}}function TT(d){for(;ke!==null;){var h=ke;if(h.flags&8772){var x=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:qa||Rd(5,h);break;case 1:var E=h.stateNode;if(h.flags&4&&!qa)if(x===null)E.componentDidMount();else{var T=h.elementType===h.type?x.memoizedProps:Br(h.type,x.memoizedProps);E.componentDidUpdate(T,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var R=h.updateQueue;R!==null&&_M(h,R,E);break;case 3:var G=h.updateQueue;if(G!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=X(h.child.stateNode);break;case 1:x=h.child.stateNode}_M(h,G,x)}break;case 5:var ne=h.stateNode;x===null&&h.flags&4&&Ge(ne,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(de&&h.memoizedState===null){var fe=h.alternate;if(fe!==null){var Ce=fe.memoizedState;if(Ce!==null){var He=Ce.dehydrated;He!==null&&St(He)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}qa||h.flags&512&&$y(h)}catch(dt){Oi(h,h.return,dt)}}if(h===d){ke=null;break}if(x=h.sibling,x!==null){x.return=h.return,ke=x;break}ke=h.return}}function AT(d){for(;ke!==null;){var h=ke;if(h===d){ke=null;break}var x=h.sibling;if(x!==null){x.return=h.return,ke=x;break}ke=h.return}}function CT(d){for(;ke!==null;){var h=ke;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{Rd(4,h)}catch(fe){Oi(h,x,fe)}break;case 1:var E=h.stateNode;if(typeof E.componentDidMount=="function"){var T=h.return;try{E.componentDidMount()}catch(fe){Oi(h,T,fe)}}var R=h.return;try{$y(h)}catch(fe){Oi(h,R,fe)}break;case 5:var G=h.return;try{$y(h)}catch(fe){Oi(h,G,fe)}}}catch(fe){Oi(h,h.return,fe)}if(h===d){ke=null;break}var ne=h.sibling;if(ne!==null){ne.return=h.return,ke=ne;break}ke=h.return}}var Zp=0,Jp=1,Qp=2,em=3,tm=4;if(typeof Symbol=="function"&&Symbol.for){var Ld=Symbol.for;Zp=Ld("selector.component"),Jp=Ld("selector.has_pseudo_class"),Qp=Ld("selector.role"),em=Ld("selector.test_id"),tm=Ld("selector.text")}function Ky(d){var h=Se(d);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(d=Nt(d),d===null)throw Error(o(362));return d.stateNode.current}function Zy(d,h){switch(h.$$typeof){case Zp:if(d.type===h.value)return!0;break;case Jp:e:{h=h.value,d=[d,0];for(var x=0;x<d.length;){var E=d[x++],T=d[x++],R=h[T];if(E.tag!==5||!ce(E)){for(;R!=null&&Zy(E,R);)T++,R=h[T];if(T===h.length){h=!0;break e}else for(E=E.child;E!==null;)d.push(E,T),E=E.sibling}}h=!1}return h;case Qp:if(d.tag===5&&Me(d.stateNode,h.value))return!0;break;case tm:if((d.tag===5||d.tag===6)&&(d=j(d),d!==null&&0<=d.indexOf(h.value)))return!0;break;case em:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Jy(d){switch(d.$$typeof){case Zp:return"<"+(L(d.value)||"Unknown")+">";case Jp:return":has("+(Jy(d)||"")+")";case Qp:return'[role="'+d.value+'"]';case tm:return'"'+d.value+'"';case em:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function PT(d,h){var x=[];d=[d,0];for(var E=0;E<d.length;){var T=d[E++],R=d[E++],G=h[R];if(T.tag!==5||!ce(T)){for(;G!=null&&Zy(T,G);)R++,G=h[R];if(R===h.length)x.push(T);else for(T=T.child;T!==null;)d.push(T,R),T=T.sibling}}return x}function Qy(d,h){if(!ct)throw Error(o(363));d=Ky(d),d=PT(d,h),h=[],d=Array.from(d);for(var x=0;x<d.length;){var E=d[x++];if(E.tag===5)ce(E)||h.push(E.stateNode);else for(E=E.child;E!==null;)d.push(E),E=E.sibling}return h}var aF=Math.ceil,nm=a.ReactCurrentDispatcher,ex=a.ReactCurrentOwner,bn=a.ReactCurrentBatchConfig,Mt=0,Pn=null,Nn=null,ti=0,er=0,gc=ki(0),Dn=0,Id=null,vc=0,im=0,tx=0,kd=null,Di=null,nx=0,ix=1/0;function yc(){ix=Bn()+500}var rm=!1,rx=null,Ro=null,sm=!1,Lo=null,om=0,Dd=0,sx=null,am=-1,lm=0;function Si(){return Mt&6?Bn():am!==-1?am:am=Bn()}function Io(d){return d.mode&1?Mt&2&&ti!==0?ti&-ti:HO.transition!==null?(lm===0&&(d=wp,wp<<=1,!(wp&4194240)&&(wp=64),lm=d),lm):(d=Ot,d!==0?d:Ne()):1}function _r(d,h,x){if(50<Dd)throw Dd=0,sx=null,Error(o(185));var E=cm(d,h);return E===null?null:(yd(E,h,x),(!(Mt&2)||E!==Pn)&&(E===Pn&&(!(Mt&2)&&(im|=h),Dn===4&&ko(E,ti)),ji(E,x),h===1&&Mt===0&&!(d.mode&1)&&(yc(),Mp&&ms())),E)}function cm(d,h){d.lanes|=h;var x=d.alternate;for(x!==null&&(x.lanes|=h),x=d,d=d.return;d!==null;)d.childLanes|=h,x=d.alternate,x!==null&&(x.childLanes|=h),x=d,d=d.return;return x.tag===3?x.stateNode:null}function ji(d,h){var x=d.callbackNode;kO(d,h);var E=Sp(d,d===Pn?ti:0);if(E===0)x!==null&&mM(x),d.callbackNode=null,d.callbackPriority=0;else if(h=E&-E,d.callbackPriority!==h){if(x!=null&&mM(x),h===1)d.tag===0?VO(RT.bind(null,d)):gM(RT.bind(null,d)),et?Ke(function(){Mt===0&&ms()}):fy(py,ms),x=null;else{switch(pM(E)){case 1:x=py;break;case 4:x=FO;break;case 16:x=my;break;case 536870912:x=UO;break;default:x=my}x=zT(x,NT.bind(null,d))}d.callbackPriority=h,d.callbackNode=x}}function NT(d,h){if(am=-1,lm=0,Mt&6)throw Error(o(327));var x=d.callbackNode;if(Ja()&&d.callbackNode!==x)return null;var E=Sp(d,d===Pn?ti:0);if(E===0)return null;if(E&30||E&d.expiredLanes||h)h=um(d,E);else{h=E;var T=Mt;Mt|=2;var R=kT();(Pn!==d||ti!==h)&&(yc(),Ka(d,h));do try{uF();break}catch(ne){IT(d,ne)}while(1);yy(),nm.current=R,Mt=T,Nn!==null?h=0:(Pn=null,ti=0,h=Dn)}if(h!==0){if(h===2&&(T=uy(d),T!==0&&(E=T,h=ox(d,T))),h===1)throw x=Id,Ka(d,0),ko(d,E),ji(d,Bn()),x;if(h===6)ko(d,E);else{if(T=d.current.alternate,!(E&30)&&!lF(T)&&(h=um(d,E),h===2&&(R=uy(d),R!==0&&(E=R,h=ox(d,R))),h===1))throw x=Id,Ka(d,0),ko(d,E),ji(d,Bn()),x;switch(d.finishedWork=T,d.finishedLanes=E,h){case 0:case 1:throw Error(o(345));case 2:Za(d,Di);break;case 3:if(ko(d,E),(E&130023424)===E&&(h=nx+500-Bn(),10<h)){if(Sp(d,0)!==0)break;if(T=d.suspendedLanes,(T&E)!==E){Si(),d.pingedLanes|=d.suspendedLanes&T;break}d.timeoutHandle=K(Za.bind(null,d,Di),h);break}Za(d,Di);break;case 4:if(ko(d,E),(E&4194240)===E)break;for(h=d.eventTimes,T=-1;0<E;){var G=31-zr(E);R=1<<G,G=h[G],G>T&&(T=G),E&=~R}if(E=T,E=Bn()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*aF(E/1960))-E,10<E){d.timeoutHandle=K(Za.bind(null,d,Di),E);break}Za(d,Di);break;case 5:Za(d,Di);break;default:throw Error(o(329))}}}return ji(d,Bn()),d.callbackNode===x?NT.bind(null,d):null}function ox(d,h){var x=kd;return d.current.memoizedState.isDehydrated&&(Ka(d,h).flags|=256),d=um(d,h),d!==2&&(h=Di,Di=x,h!==null&&ax(h)),d}function ax(d){Di===null?Di=d:Di.push.apply(Di,d)}function lF(d){for(var h=d;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var E=0;E<x.length;E++){var T=x[E],R=T.getSnapshot;T=T.value;try{if(!ps(R(),T))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ko(d,h){for(h&=~tx,h&=~im,d.suspendedLanes|=h,d.pingedLanes&=~h,d=d.expirationTimes;0<h;){var x=31-zr(h),E=1<<x;d[x]=-1,h&=~E}}function RT(d){if(Mt&6)throw Error(o(327));Ja();var h=Sp(d,0);if(!(h&1))return ji(d,Bn()),null;var x=um(d,h);if(d.tag!==0&&x===2){var E=uy(d);E!==0&&(h=E,x=ox(d,E))}if(x===1)throw x=Id,Ka(d,0),ko(d,h),ji(d,Bn()),x;if(x===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=h,Za(d,Di),ji(d,Bn()),null}function LT(d){Lo!==null&&Lo.tag===0&&!(Mt&6)&&Ja();var h=Mt;Mt|=1;var x=bn.transition,E=Ot;try{if(bn.transition=null,Ot=1,d)return d()}finally{Ot=E,bn.transition=x,Mt=h,!(Mt&6)&&ms()}}function lx(){er=gc.current,Gt(gc)}function Ka(d,h){d.finishedWork=null,d.finishedLanes=0;var x=d.timeoutHandle;if(x!==Xe&&(d.timeoutHandle=Xe,je(x)),Nn!==null)for(x=Nn.return;x!==null;){var E=x;switch(My(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&xp();break;case 3:pc(),Gt(qt),Gt(Cn),Ly();break;case 5:Ny(E);break;case 4:pc();break;case 13:Gt(ln);break;case 19:Gt(ln);break;case 10:xy(E.type._context);break;case 22:case 23:lx()}x=x.return}if(Pn=d,Nn=d=Do(d.current,null),ti=er=h,Dn=0,Id=null,tx=im=vc=0,Di=kd=null,gs!==null){for(h=0;h<gs.length;h++)if(x=gs[h],E=x.interleaved,E!==null){x.interleaved=null;var T=E.next,R=x.pending;if(R!==null){var G=R.next;R.next=T,E.next=G}x.pending=E}gs=null}return d}function IT(d,h){do{var x=Nn;try{if(yy(),jp.current=Vp,Op){for(var E=pn.memoizedState;E!==null;){var T=E.queue;T!==null&&(T.pending=null),E=E.next}Op=!1}if(mc=0,Vn=ci=pn=null,Ed=!1,Md=0,ex.current=null,x===null||x.return===null){Dn=1,Id=h,Nn=null;break}e:{var R=d,G=x.return,ne=x,fe=h;if(h=ti,ne.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Ce=fe,He=ne,dt=He.tag;if(!(He.mode&1)&&(dt===0||dt===11||dt===15)){var rt=He.alternate;rt?(He.updateQueue=rt.updateQueue,He.memoizedState=rt.memoizedState,He.lanes=rt.lanes):(He.updateQueue=null,He.memoizedState=null)}var Kt=eT(G);if(Kt!==null){Kt.flags&=-257,tT(Kt,G,ne,R,h),Kt.mode&1&&QM(R,Ce,h),h=Kt,fe=Ce;var Ze=h.updateQueue;if(Ze===null){var hi=new Set;hi.add(fe),h.updateQueue=hi}else Ze.add(fe);break e}else{if(!(h&1)){QM(R,Ce,h),cx();break e}fe=Error(o(426))}}else if(sn&&ne.mode&1){var br=eT(G);if(br!==null){!(br.flags&65536)&&(br.flags|=256),tT(br,G,ne,R,h),Cy(fe);break e}}R=fe,Dn!==4&&(Dn=2),kd===null?kd=[R]:kd.push(R),fe=Uy(fe,ne),ne=G;do{switch(ne.tag){case 3:ne.flags|=65536,h&=-h,ne.lanes|=h;var oe=ZM(ne,fe,h);xM(ne,oe);break e;case 1:R=fe;var ie=ne.type,he=ne.stateNode;if(!(ne.flags&128)&&(typeof ie.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Ro===null||!Ro.has(he)))){ne.flags|=65536,h&=-h,ne.lanes|=h;var De=JM(ne,R,h);xM(ne,De);break e}}ne=ne.return}while(ne!==null)}jT(x)}catch(Ye){h=Ye,Nn===x&&x!==null&&(Nn=x=x.return);continue}break}while(1)}function kT(){var d=nm.current;return nm.current=Vp,d===null?Vp:d}function cx(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),Pn===null||!(vc&268435455)&&!(im&268435455)||ko(Pn,ti)}function um(d,h){var x=Mt;Mt|=2;var E=kT();Pn===d&&ti===h||Ka(d,h);do try{cF();break}catch(T){IT(d,T)}while(1);if(yy(),Mt=x,nm.current=E,Nn!==null)throw Error(o(261));return Pn=null,ti=0,Dn}function cF(){for(;Nn!==null;)DT(Nn)}function uF(){for(;Nn!==null&&!jO();)DT(Nn)}function DT(d){var h=UT(d.alternate,d,er);d.memoizedProps=d.pendingProps,h===null?jT(d):Nn=h,ex.current=null}function jT(d){var h=d;do{var x=h.alternate;if(d=h.return,h.flags&32768){if(x=nF(x,h),x!==null){x.flags&=32767,Nn=x;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Dn=6,Nn=null;return}}else if(x=QO(x,h,er),x!==null){Nn=x;return}if(h=h.sibling,h!==null){Nn=h;return}Nn=h=d}while(h!==null);Dn===0&&(Dn=5)}function Za(d,h){var x=Ot,E=bn.transition;try{bn.transition=null,Ot=1,dF(d,h,x)}finally{bn.transition=E,Ot=x}return null}function dF(d,h,x){do Ja();while(Lo!==null);if(Mt&6)throw Error(o(327));var E=d.finishedWork,T=d.finishedLanes;if(E===null)return null;if(d.finishedWork=null,d.finishedLanes=0,E===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var R=E.lanes|E.childLanes;if(DO(d,R),d===Pn&&(Nn=Pn=null,ti=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||sm||(sm=!0,zT(my,function(){return Ja(),null})),R=(E.flags&15990)!==0,E.subtreeFlags&15990||R){R=bn.transition,bn.transition=null;var G=Ot;Ot=1;var ne=Mt;Mt|=4,ex.current=null,rF(d,E),sF(d,E),H(d.containerInfo),d.current=E,oF(E),OO(),Mt=ne,Ot=G,bn.transition=R}else d.current=E;if(sm&&(sm=!1,Lo=d,om=T),R=d.pendingLanes,R===0&&(Ro=null),zO(E.stateNode),ji(d,Bn()),h!==null)for(x=d.onRecoverableError,E=0;E<h.length;E++)x(h[E]);if(rm)throw rm=!1,d=rx,rx=null,d;return om&1&&d.tag!==0&&Ja(),R=d.pendingLanes,R&1?d===sx?Dd++:(Dd=0,sx=d):Dd=0,ms(),null}function Ja(){if(Lo!==null){var d=pM(om),h=bn.transition,x=Ot;try{if(bn.transition=null,Ot=16>d?16:d,Lo===null)var E=!1;else{if(d=Lo,Lo=null,om=0,Mt&6)throw Error(o(331));var T=Mt;for(Mt|=4,ke=d.current;ke!==null;){var R=ke,G=R.child;if(ke.flags&16){var ne=R.deletions;if(ne!==null){for(var fe=0;fe<ne.length;fe++){var Ce=ne[fe];for(ke=Ce;ke!==null;){var He=ke;switch(He.tag){case 0:case 11:case 15:Ya(8,He,R)}var dt=He.child;if(dt!==null)dt.return=He,ke=dt;else for(;ke!==null;){He=ke;var rt=He.sibling,Kt=He.return;if(_T(He),He===Ce){ke=null;break}if(rt!==null){rt.return=Kt,ke=rt;break}ke=Kt}}}var Ze=R.alternate;if(Ze!==null){var hi=Ze.child;if(hi!==null){Ze.child=null;do{var br=hi.sibling;hi.sibling=null,hi=br}while(hi!==null)}}ke=R}}if(R.subtreeFlags&2064&&G!==null)G.return=R,ke=G;else e:for(;ke!==null;){if(R=ke,R.flags&2048)switch(R.tag){case 0:case 11:case 15:Ya(9,R,R.return)}var oe=R.sibling;if(oe!==null){oe.return=R.return,ke=oe;break e}ke=R.return}}var ie=d.current;for(ke=ie;ke!==null;){G=ke;var he=G.child;if(G.subtreeFlags&2064&&he!==null)he.return=G,ke=he;else e:for(G=ie;ke!==null;){if(ne=ke,ne.flags&2048)try{switch(ne.tag){case 0:case 11:case 15:Rd(9,ne)}}catch(Ye){Oi(ne,ne.return,Ye)}if(ne===G){ke=null;break e}var De=ne.sibling;if(De!==null){De.return=ne.return,ke=De;break e}ke=ne.return}}if(Mt=T,ms(),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(Ep,d)}catch{}E=!0}return E}finally{Ot=x,bn.transition=h}}return!1}function OT(d,h,x){h=Uy(x,h),h=ZM(d,h,1),No(d,h),h=Si(),d=cm(d,1),d!==null&&(yd(d,1,h),ji(d,h))}function Oi(d,h,x){if(d.tag===3)OT(d,d,x);else for(;h!==null;){if(h.tag===3){OT(h,d,x);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ro===null||!Ro.has(E))){d=Uy(x,d),d=JM(h,d,1),No(h,d),d=Si(),h=cm(h,1),h!==null&&(yd(h,1,d),ji(h,d));break}}h=h.return}}function hF(d,h,x){var E=d.pingCache;E!==null&&E.delete(h),h=Si(),d.pingedLanes|=d.suspendedLanes&x,Pn===d&&(ti&x)===x&&(Dn===4||Dn===3&&(ti&130023424)===ti&&500>Bn()-nx?Ka(d,0):tx|=x),ji(d,h)}function FT(d,h){h===0&&(d.mode&1?(h=bp,bp<<=1,!(bp&130023424)&&(bp=4194304)):h=1);var x=Si();d=cm(d,h),d!==null&&(yd(d,h,x),ji(d,x))}function fF(d){var h=d.memoizedState,x=0;h!==null&&(x=h.retryLane),FT(d,x)}function pF(d,h){var x=0;switch(d.tag){case 13:var E=d.stateNode,T=d.memoizedState;T!==null&&(x=T.retryLane);break;case 19:E=d.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(h),FT(d,x)}var UT;UT=function(d,h,x){if(d!==null)if(d.memoizedProps!==h.pendingProps||qt.current)Qi=!0;else{if(!(d.lanes&x)&&!(h.flags&128))return Qi=!1,tF(d,h,x);Qi=!!(d.flags&131072)}else Qi=!1,sn&&h.flags&1048576&&MM(h,Ip,h.index);switch(h.lanes=0,h.tag){case 2:var E=h.type;d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),d=h.pendingProps;var T=Co(h,Cn.current);lc(h,x),T=ky(null,h,E,d,T,x);var R=Dy();return h.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,ei(E)?(R=!0,_p(h)):R=!1,h.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,wy(h),T.updater=Rp,h.stateNode=T,T._reactInternals=h,Sy(h,E,d,x),h=Vy(null,h,E,!0,R,x)):(h.tag=0,sn&&R&&Ey(h),bi(null,h,T,x),h=h.child),h;case 16:E=h.elementType;e:{switch(d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),d=h.pendingProps,T=E._init,E=T(E._payload),h.type=E,T=h.tag=gF(E),d=Br(E,d),T){case 0:h=By(null,h,E,d,x);break e;case 1:h=cT(null,h,E,d,x);break e;case 11:h=rT(null,h,E,d,x);break e;case 14:h=sT(null,h,E,Br(E.type,d),x);break e}throw Error(o(306,E,""))}return h;case 0:return E=h.type,T=h.pendingProps,T=h.elementType===E?T:Br(E,T),By(d,h,E,T,x);case 1:return E=h.type,T=h.pendingProps,T=h.elementType===E?T:Br(E,T),cT(d,h,E,T,x);case 3:e:{if(uT(h),d===null)throw Error(o(387));E=h.pendingProps,R=h.memoizedState,T=R.element,yM(d,h),Np(h,E,null,x);var G=h.memoizedState;if(E=G.element,de&&R.isDehydrated)if(R={element:E,isDehydrated:!1,cache:G.cache,transitions:G.transitions},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){T=Error(o(423)),h=dT(d,h,E,x,T);break e}else if(E!==T){T=Error(o(424)),h=dT(d,h,E,x,T);break e}else for(de&&(Ji=pe(h.stateNode.containerInfo),Zi=h,sn=!0,Vr=null,xd=!1),x=RM(h,null,E,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(dc(),E===T){h=$s(d,h,x);break e}bi(d,h,E,x)}h=h.child}return h;case 5:return LM(h),d===null&&Ay(h),E=h.type,T=h.pendingProps,R=d!==null?d.memoizedProps:null,G=T.children,ve(E,T)?G=null:R!==null&&ve(E,R)&&(h.flags|=32),lT(d,h),bi(d,h,G,x),h.child;case 6:return d===null&&Ay(h),null;case 13:return hT(d,h,x);case 4:return Py(h,h.stateNode.containerInfo),E=h.pendingProps,d===null?h.child=hc(h,null,E,x):bi(d,h,E,x),h.child;case 11:return E=h.type,T=h.pendingProps,T=h.elementType===E?T:Br(E,T),rT(d,h,E,T,x);case 7:return bi(d,h,h.pendingProps,x),h.child;case 8:return bi(d,h,h.pendingProps.children,x),h.child;case 12:return bi(d,h,h.pendingProps.children,x),h.child;case 10:e:{if(E=h.type._context,T=h.pendingProps,R=h.memoizedProps,G=T.value,vM(h,E,G),R!==null)if(ps(R.value,G)){if(R.children===T.children&&!qt.current){h=$s(d,h,x);break e}}else for(R=h.child,R!==null&&(R.return=h);R!==null;){var ne=R.dependencies;if(ne!==null){G=R.child;for(var fe=ne.firstContext;fe!==null;){if(fe.context===E){if(R.tag===1){fe=Vs(-1,x&-x),fe.tag=2;var Ce=R.updateQueue;if(Ce!==null){Ce=Ce.shared;var He=Ce.pending;He===null?fe.next=fe:(fe.next=He.next,He.next=fe),Ce.pending=fe}}R.lanes|=x,fe=R.alternate,fe!==null&&(fe.lanes|=x),_y(R.return,x,h),ne.lanes|=x;break}fe=fe.next}}else if(R.tag===10)G=R.type===h.type?null:R.child;else if(R.tag===18){if(G=R.return,G===null)throw Error(o(341));G.lanes|=x,ne=G.alternate,ne!==null&&(ne.lanes|=x),_y(G,x,h),G=R.sibling}else G=R.child;if(G!==null)G.return=R;else for(G=R;G!==null;){if(G===h){G=null;break}if(R=G.sibling,R!==null){R.return=G.return,G=R;break}G=G.return}R=G}bi(d,h,T.children,x),h=h.child}return h;case 9:return T=h.type,E=h.pendingProps.children,lc(h,x),T=mr(T),E=E(T),h.flags|=1,bi(d,h,E,x),h.child;case 14:return E=h.type,T=Br(E,h.pendingProps),T=Br(E.type,T),sT(d,h,E,T,x);case 15:return oT(d,h,h.type,h.pendingProps,x);case 17:return E=h.type,T=h.pendingProps,T=h.elementType===E?T:Br(E,T),d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,ei(E)?(d=!0,_p(h)):d=!1,lc(h,x),SM(h,E,T),Sy(h,E,T,x),Vy(null,h,E,!0,d,x);case 19:return gT(d,h,x);case 22:return aT(d,h,x)}throw Error(o(156,h.tag))};function zT(d,h){return fy(d,h)}function mF(d,h,x,E){this.tag=d,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(d,h,x,E){return new mF(d,h,x,E)}function ux(d){return d=d.prototype,!(!d||!d.isReactComponent)}function gF(d){if(typeof d=="function")return ux(d)?1:0;if(d!=null){if(d=d.$$typeof,d===_)return 11;if(d===b)return 14}return 2}function Do(d,h){var x=d.alternate;return x===null?(x=wr(d.tag,h,d.key,d.mode),x.elementType=d.elementType,x.type=d.type,x.stateNode=d.stateNode,x.alternate=d,d.alternate=x):(x.pendingProps=h,x.type=d.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=d.flags&14680064,x.childLanes=d.childLanes,x.lanes=d.lanes,x.child=d.child,x.memoizedProps=d.memoizedProps,x.memoizedState=d.memoizedState,x.updateQueue=d.updateQueue,h=d.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=d.sibling,x.index=d.index,x.ref=d.ref,x}function dm(d,h,x,E,T,R){var G=2;if(E=d,typeof d=="function")ux(d)&&(G=1);else if(typeof d=="string")G=5;else e:switch(d){case u:return Qa(x.children,T,R,h);case p:G=8,T|=8;break;case m:return d=wr(12,x,h,T|2),d.elementType=m,d.lanes=R,d;case S:return d=wr(13,x,h,T),d.elementType=S,d.lanes=R,d;case v:return d=wr(19,x,h,T),d.elementType=v,d.lanes=R,d;case M:return hm(x,T,R,h);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case g:G=10;break e;case y:G=9;break e;case _:G=11;break e;case b:G=14;break e;case w:G=16,E=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return h=wr(G,x,h,T),h.elementType=d,h.type=E,h.lanes=R,h}function Qa(d,h,x,E){return d=wr(7,d,E,h),d.lanes=x,d}function hm(d,h,x,E){return d=wr(22,d,E,h),d.elementType=M,d.lanes=x,d.stateNode={},d}function dx(d,h,x){return d=wr(6,d,null,h),d.lanes=x,d}function hx(d,h,x){return h=wr(4,d.children!==null?d.children:[],d.key,h),h.lanes=x,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function vF(d,h,x,E,T){this.tag=h,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dy(0),this.expirationTimes=dy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dy(0),this.identifierPrefix=E,this.onRecoverableError=T,de&&(this.mutableSourceEagerHydrationData=null)}function BT(d,h,x,E,T,R,G,ne,fe){return d=new vF(d,h,x,ne,fe),h===1?(h=1,R===!0&&(h|=8)):h=0,R=wr(3,null,null,h),d.current=R,R.stateNode=d,R.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null},wy(R),d}function VT(d){if(!d)return li;d=d._reactInternals;e:{if(C(d)!==d||d.tag!==1)throw Error(o(170));var h=d;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(ei(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(d.tag===1){var x=d.type;if(ei(x))return hM(d,x,h)}return h}function HT(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=q(h),d===null?null:d.stateNode}function GT(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var x=d.retryLane;d.retryLane=x!==0&&x<h?x:h}}function fx(d,h){GT(d,h),(d=d.alternate)&&GT(d,h)}function yF(d){return d=q(d),d===null?null:d.stateNode}function xF(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var h=Si();_r(d,134217728,h),fx(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var h=Si(),x=Io(d);_r(d,x,h),fx(d,x)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var h=d.stateNode;if(h.current.memoizedState.isDehydrated){var x=vd(h.pendingLanes);x!==0&&(hy(h,x|1),ji(h,Bn()),!(Mt&6)&&(yc(),ms()))}break;case 13:var E=Si();LT(function(){return _r(d,1,E)}),fx(d,1)}},t.batchedUpdates=function(d,h){var x=Mt;Mt|=1;try{return d(h)}finally{Mt=x,Mt===0&&(yc(),Mp&&ms())}},t.createComponentSelector=function(d){return{$$typeof:Zp,value:d}},t.createContainer=function(d,h,x,E,T,R,G){return BT(d,h,!1,null,x,E,T,R,G)},t.createHasPseudoClassSelector=function(d){return{$$typeof:Jp,value:d}},t.createHydrationContainer=function(d,h,x,E,T,R,G,ne,fe){return d=BT(x,E,!0,d,T,R,G,ne,fe),d.context=VT(null),x=d.current,E=Si(),T=Io(x),R=Vs(E,T),R.callback=h??null,No(x,R),d.current.lanes=T,yd(d,T,E),ji(d,E),d},t.createPortal=function(d,h,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:d,containerInfo:h,implementation:x}},t.createRoleSelector=function(d){return{$$typeof:Qp,value:d}},t.createTestNameSelector=function(d){return{$$typeof:em,value:d}},t.createTextSelector=function(d){return{$$typeof:tm,value:d}},t.deferredUpdates=function(d){var h=Ot,x=bn.transition;try{return bn.transition=null,Ot=16,d()}finally{Ot=h,bn.transition=x}},t.discreteUpdates=function(d,h,x,E,T){var R=Ot,G=bn.transition;try{return bn.transition=null,Ot=1,d(h,x,E,T)}finally{Ot=R,bn.transition=G,Mt===0&&yc()}},t.findAllNodes=Qy,t.findBoundingRects=function(d,h){if(!ct)throw Error(o(363));h=Qy(d,h),d=[];for(var x=0;x<h.length;x++)d.push(W(h[x]));for(h=d.length-1;0<h;h--){x=d[h];for(var E=x.x,T=E+x.width,R=x.y,G=R+x.height,ne=h-1;0<=ne;ne--)if(h!==ne){var fe=d[ne],Ce=fe.x,He=Ce+fe.width,dt=fe.y,rt=dt+fe.height;if(E>=Ce&&R>=dt&&T<=He&&G<=rt){d.splice(h,1);break}else if(E!==Ce||x.width!==fe.width||rt<R||dt>G){if(!(R!==dt||x.height!==fe.height||He<E||Ce>T)){Ce>E&&(fe.width+=Ce-E,fe.x=E),He<T&&(fe.width=T-Ce),d.splice(h,1);break}}else{dt>R&&(fe.height+=dt-R,fe.y=R),rt<G&&(fe.height=G-dt),d.splice(h,1);break}}}return d},t.findHostInstance=HT,t.findHostInstanceWithNoPortals=function(d){return d=V(d),d=d!==null?U(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return HT(d)},t.flushControlled=function(d){var h=Mt;Mt|=1;var x=bn.transition,E=Ot;try{bn.transition=null,Ot=1,d()}finally{Ot=E,bn.transition=x,Mt=h,Mt===0&&(yc(),ms())}},t.flushPassiveEffects=Ja,t.flushSync=LT,t.focusWithin=function(d,h){if(!ct)throw Error(o(363));for(d=Ky(d),h=PT(d,h),h=Array.from(h),d=0;d<h.length;){var x=h[d++];if(!ce(x)){if(x.tag===5&&Te(x.stateNode))return!0;for(x=x.child;x!==null;)h.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ot},t.getFindAllNodesFailureDescription=function(d,h){if(!ct)throw Error(o(363));var x=0,E=[];d=[Ky(d),0];for(var T=0;T<d.length;){var R=d[T++],G=d[T++],ne=h[G];if((R.tag!==5||!ce(R))&&(Zy(R,ne)&&(E.push(Jy(ne)),G++,G>x&&(x=G)),G<h.length))for(R=R.child;R!==null;)d.push(R,G),R=R.sibling}if(x<h.length){for(d=[];x<h.length;x++)d.push(Jy(h[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return X(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:yF,findFiberByHostInstance:d.findFiberByHostInstance||xF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)d=!0;else{try{Ep=h.inject(d),fs=h}catch{}d=!!h.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,h,x,E){if(!ct)throw Error(o(363));d=Qy(d,h);var T=Re(d,x,E).disconnect;return{disconnect:function(){T()}}},t.registerMutableSourceForHydration=function(d,h){var x=h._getVersion;x=x(h._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[h,x]:d.mutableSourceEagerHydrationData.push(h,x)},t.runWithPriority=function(d,h){var x=Ot;try{return Ot=d,h()}finally{Ot=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,h,x,E){var T=h.current,R=Si(),G=Io(T);return x=VT(x),h.context===null?h.context=x:h.pendingContext=x,h=Vs(R,G),h.payload={element:d},E=E===void 0?null:E,E!==null&&(h.callback=E),No(T,h),d=_r(T,G,R),d!==null&&Pp(d,T,G),G},t};dO.exports=Rie;var Lie=dO.exports;const Iie=Ju(Lie);var hO={exports:{}},fO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,O){var H=D.length;D.push(O);e:for(;0<H;){var Z=H-1>>>1,te=D[Z];if(0<r(te,O))D[Z]=O,D[H]=te,H=Z;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var O=D[0],H=D.pop();if(H!==O){D[0]=H;e:for(var Z=0,te=D.length,Q=te>>>1;Z<Q;){var se=2*(Z+1)-1,ve=D[se],ge=se+1,K=D[ge];if(0>r(ve,H))ge<te&&0>r(K,ve)?(D[Z]=K,D[ge]=H,Z=ge):(D[Z]=ve,D[se]=H,Z=se);else if(ge<te&&0>r(K,H))D[Z]=K,D[ge]=H,Z=ge;else break e}}return O}function r(D,O){var H=D.sortIndex-O.sortIndex;return H!==0?H:D.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,p=null,m=3,g=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var O=t(c);O!==null;){if(O.callback===null)i(c);else if(O.startTime<=D)i(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(c)}}function M(D){if(_=!1,w(D),!y)if(t(l)!==null)y=!0,X(A);else{var O=t(c);O!==null&&ee(M,O.startTime-D)}}function A(D,O){y=!1,_&&(_=!1,v(I),I=-1),g=!0;var H=m;try{for(w(O),p=t(l);p!==null&&(!(p.expirationTime>O)||D&&!V());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,m=p.priorityLevel;var te=Z(p.expirationTime<=O);O=n.unstable_now(),typeof te=="function"?p.callback=te:p===t(l)&&i(l),w(O)}else i(l);p=t(l)}if(p!==null)var Q=!0;else{var se=t(c);se!==null&&ee(M,se.startTime-O),Q=!1}return Q}finally{p=null,m=H,g=!1}}var P=!1,L=null,I=-1,C=5,k=-1;function V(){return!(n.unstable_now()-k<C)}function q(){if(L!==null){var D=n.unstable_now();k=D;var O=!0;try{O=L(!0,D)}finally{O?B():(P=!1,L=null)}}else P=!1}var B;if(typeof b=="function")B=function(){b(q)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,$=U.port2;U.port1.onmessage=q,B=function(){$.postMessage(null)}}else B=function(){S(q,0)};function X(D){L=D,P||(P=!0,B())}function ee(D,O){I=S(function(){D(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,X(A))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(m){case 1:case 2:case 3:var O=3;break;default:O=m}var H=m;m=O;try{return D()}finally{m=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var H=m;m=D;try{return O()}finally{m=H}},n.unstable_scheduleCallback=function(D,O,H){var Z=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,D){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=H+te,D={id:u++,callback:O,priorityLevel:D,startTime:H,expirationTime:te,sortIndex:-1},H>Z?(D.sortIndex=H,e(c,D),t(l)===null&&D===t(c)&&(_?(v(I),I=-1):_=!0,ee(M,H-Z))):(D.sortIndex=te,e(l,D),y||g||(y=!0,X(A))),D},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(D){var O=m;return function(){var H=m;m=O;try{return D.apply(this,arguments)}finally{m=H}}}})(fO);hO.exports=fO;var G3=hO.exports;const cM={},kie=n=>void Object.assign(cM,n);function Die(n,e){function t(u,{args:p=[],attach:m,...g},y){let _=`${u[0].toUpperCase()}${u.slice(1)}`,S;if(u==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=g.object;S=Qc(v,{type:u,root:y,attach:m,primitive:!0})}else{const v=cM[_];if(!v)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");S=Qc(new v(...p),{type:u,root:y,attach:m,memoizedProps:{args:p}})}return S.__r3f.attach===void 0&&(S instanceof yt?S.__r3f.attach="geometry":S instanceof ai&&(S.__r3f.attach="material")),_!=="inject"&&s_(S,g),S}function i(u,p){let m=!1;if(p){var g,y;(g=p.__r3f)!=null&&g.attach?r_(u,p,p.__r3f.attach):p.isObject3D&&u.isObject3D&&(u.add(p),m=!0),m||(y=u.__r3f)==null||y.objects.push(p),p.__r3f||Qc(p,{}),p.__r3f.parent=u,Nb(p),eu(p)}}function r(u,p,m){let g=!1;if(p){var y,_;if((y=p.__r3f)!=null&&y.attach)r_(u,p,p.__r3f.attach);else if(p.isObject3D&&u.isObject3D){p.parent=u,p.dispatchEvent({type:"added"});const S=u.children.filter(b=>b!==p),v=S.indexOf(m);u.children=[...S.slice(0,v),p,...S.slice(v)],g=!0}g||(_=u.__r3f)==null||_.objects.push(p),p.__r3f||Qc(p,{}),p.__r3f.parent=u,Nb(p),eu(p)}}function s(u,p,m=!1){u&&[...u].forEach(g=>o(p,g,m))}function o(u,p,m){if(p){var g,y,_;if(p.__r3f&&(p.__r3f.parent=null),(g=u.__r3f)!=null&&g.objects&&(u.__r3f.objects=u.__r3f.objects.filter(M=>M!==p)),(y=p.__r3f)!=null&&y.attach)Y3(u,p,p.__r3f.attach);else if(p.isObject3D&&u.isObject3D){var S;u.remove(p),(S=p.__r3f)!=null&&S.root&&Vie(p.__r3f.root,p)}const b=(_=p.__r3f)==null?void 0:_.primitive,w=m===void 0?p.dispose!==null&&!b:m;if(!b){var v;s((v=p.__r3f)==null?void 0:v.objects,p,w),s(p.children,p,w)}delete p.__r3f,w&&p.dispose&&p.type!=="Scene"&&G3.unstable_scheduleCallback(G3.unstable_IdlePriority,()=>{try{p.dispose()}catch{}}),eu(u)}}function a(u,p,m,g){var y;const _=(y=u.__r3f)==null?void 0:y.parent;if(!_)return;const S=t(p,m,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&i(S,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>i(S,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(_,u),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),i(_,S),S.raycast&&S.__r3f.eventCount&&S.__r3f.root.getState().internal.interaction.push(S),[g,g.alternate].forEach(v=>{v!==null&&(v.stateNode=S,v.ref&&(typeof v.ref=="function"?v.ref(S):v.ref.current=S))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Iie({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,p)=>{if(!p)return;const m=u.getState().scene;m.__r3f&&(m.__r3f.root=u,i(m,p))},removeChildFromContainer:(u,p)=>{p&&o(u.getState().scene,p)},insertInContainerBefore:(u,p,m)=>{if(!p||!m)return;const g=u.getState().scene;g.__r3f&&r(g,p,m)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var p;return!!((p=u==null?void 0:u.__r3f)!=null?p:{}).handlers},prepareUpdate(u,p,m,g){var y;if(((y=u==null?void 0:u.__r3f)!=null?y:{}).primitive&&g.object&&g.object!==u)return[!0];{const{args:S=[],children:v,...b}=g,{args:w=[],children:M,...A}=m;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((L,I)=>L!==w[I]))return[!0];const P=_O(u,b,A,!0);return P.changes.length?[!1,P]:null}},commitUpdate(u,[p,m],g,y,_,S){p?a(u,g,_,S):s_(u,m)},commitMount(u,p,m,g){var y;const _=(y=u.__r3f)!=null?y:{};u.raycast&&_.handlers&&_.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Qc(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var p;const{attach:m,parent:g}=(p=u.__r3f)!=null?p:{};m&&g&&Y3(g,u,m),u.isObject3D&&(u.visible=!1),eu(u)},unhideInstance(u,p){var m;const{attach:g,parent:y}=(m=u.__r3f)!=null?m:{};g&&y&&r_(y,u,g),(u.isObject3D&&p.visible==null||p.visible)&&(u.visible=!0),eu(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():bu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&on.fun(performance.now)?performance.now:on.fun(Date.now)?Date.now:()=>0,scheduleTimeout:on.fun(setTimeout)?setTimeout:void 0,cancelTimeout:on.fun(clearTimeout)?clearTimeout:void 0}),applyProps:s_}}var W3,$3;const i_=n=>"colorSpace"in n||"outputColorSpace"in n,pO=()=>{var n;return(n=cM.ColorManagement)!=null?n:null},mO=n=>n&&n.isOrthographicCamera,jie=n=>n&&n.hasOwnProperty("current"),gp=typeof window<"u"&&((W3=window.document)!=null&&W3.createElement||(($3=window.navigator)==null?void 0:$3.product)==="ReactNative")?N.useLayoutEffect:N.useEffect;function gO(n){const e=N.useRef(n);return gp(()=>void(e.current=n),[n]),e}function Oie({set:n}){return gp(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class vO extends N.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}vO.getDerivedStateFromError=()=>({error:!0});const yO="__default",X3=new Map,Fie=n=>n&&!!n.memoized&&!!n.changes;function xO(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const dh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},on={obj:n=>n===Object(n)&&!on.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(on.str(n)||on.num(n))return n===e;const s=on.obj(n);if(s&&i==="reference")return n===e;const o=on.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!on.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(on.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Uie(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Qc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function Pb(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const q3=/-\d+$/;function r_(n,e,t){if(on.str(t)){if(q3.test(t)){const s=t.replace(q3,""),{target:o,key:a}=Pb(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=Pb(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function Y3(n,e,t){var i,r;if(on.str(t)){const{target:s,key:o}=Pb(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function _O(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var u;const p=(u=n==null?void 0:n.__r3f)!=null?u:{},m=Object.entries(r),g=[];if(c){const _=Object.keys(l);for(let S=0;S<_.length;S++)r.hasOwnProperty(_[S])||m.unshift([_[S],yO+"remove"])}m.forEach(([_,S])=>{var v;if((v=n.__r3f)!=null&&v.primitive&&_==="object"||on.equ(S,l[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return g.push([_,S,!0,[]]);let b=[];_.includes("-")&&(b=_.split("-")),g.push([_,S,!1,b]);for(const w in r){const M=r[w];w.startsWith(`${_}-`)&&g.push([w,M,!1,w.split("-")])}});const y={...r};return p.memoizedProps&&p.memoizedProps.args&&(y.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(y.attach=p.memoizedProps.attach),{memoized:y,changes:g}}function s_(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=Fie(e)?e:_O(n,e),u=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let m=0;m<c.length;m++){let[g,y,_,S]=c[m];if(i_(n)){const M="srgb",A="srgb-linear";g==="encoding"?(g="colorSpace",y=y===3001?M:A):g==="outputEncoding"&&(g="outputColorSpace",y=y===3001?M:A)}let v=n,b=v[g];if(S.length&&(b=S.reduce((w,M)=>w[M],n),!(b&&b.set))){const[w,...M]=S.reverse();v=M.reverse().reduce((A,P)=>A[P],n),g=w}if(y===yO+"remove")if(v.constructor){let w=X3.get(v.constructor);w||(w=new v.constructor,X3.set(v.constructor,w)),y=w[g]}else y=0;if(_)y?s.handlers[g]=y:delete s.handlers[g],s.eventCount=Object.keys(s.handlers).length;else if(b&&b.set&&(b.copy||b instanceof kl)){if(Array.isArray(y))b.fromArray?b.fromArray(y):b.set(...y);else if(b.copy&&y&&y.constructor&&b.constructor===y.constructor)b.copy(y);else if(y!==void 0){const w=b instanceof ze;!w&&b.setScalar?b.setScalar(y):b instanceof kl&&y instanceof kl?b.mask=y.mask:b.set(y),!pO()&&!a.linear&&w&&b.convertSRGBToLinear()}}else if(v[g]=y,v[g]instanceof _n&&v[g].format===Gi&&v[g].type===wo){const w=v[g];i_(w)&&i_(a.gl)?w.colorSpace=a.gl.outputColorSpace:w.encoding=a.gl.outputEncoding}eu(n)}if(s.parent&&a.internal&&n.raycast&&u!==s.eventCount){const m=a.internal.interaction.indexOf(n);m>-1&&a.internal.interaction.splice(m,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=n.__r3f)!=null&&r.parent&&Nb(n),n}function eu(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Nb(n){n.onUpdate==null||n.onUpdate(n)}function zie(n,e){n.manual||(mO(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Ig(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Bie(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return bu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return bu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return bu.ContinuousEventPriority;default:return bu.DefaultEventPriority}}function wO(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Vie(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{wO(t.capturedMap,e,i,r)})}function Hie(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],p=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+p*p))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var p;return(p=c.__r3f)==null?void 0:p.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),p=new Set,m=[],g=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<g.length;v++){const b=dh(g[v]);b&&(b.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function y(v){const b=dh(v);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var w;b.events.compute==null||b.events.compute(l,b,(w=b.previousRoot)==null?void 0:w.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(v,!0):[]}let _=g.flatMap(y).sort((v,b)=>{const w=dh(v.object),M=dh(b.object);return!w||!M?v.distance-b.distance:M.events.priority-w.events.priority||v.distance-b.distance}).filter(v=>{const b=Ig(v);return p.has(b)?!1:(p.add(b),!0)});u.events.filter&&(_=u.events.filter(_,u));for(const v of _){let b=v.object;for(;b;){var S;(S=b.__r3f)!=null&&S.eventCount&&m.push({...v,eventObject:b}),b=b.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())p.has(Ig(v.intersection))||m.push(v.intersection);return m}function r(l,c,u,p){const m=n.getState();if(l.length){const g={stopped:!1};for(const y of l){const _=dh(y.object)||m,{raycaster:S,pointer:v,camera:b,internal:w}=_,M=new F(v.x,v.y,0).unproject(b),A=k=>{var V,q;return(V=(q=w.capturedMap.get(k))==null?void 0:q.has(y.eventObject))!=null?V:!1},P=k=>{const V={intersection:y,target:c.target};w.capturedMap.has(k)?w.capturedMap.get(k).set(y.eventObject,V):w.capturedMap.set(k,new Map([[y.eventObject,V]])),c.target.setPointerCapture(k)},L=k=>{const V=w.capturedMap.get(k);V&&wO(w.capturedMap,y.eventObject,V,k)};let I={};for(let k in c){let V=c[k];typeof V!="function"&&(I[k]=V)}let C={...y,...I,pointer:v,intersections:l,stopped:g.stopped,delta:u,unprojectedPoint:M,ray:S.ray,camera:b,stopPropagation(){const k="pointerId"in c&&w.capturedMap.get(c.pointerId);if((!k||k.has(y.eventObject))&&(C.stopped=g.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(V=>V.eventObject===y.eventObject))){const V=l.slice(0,l.indexOf(y));s([...V,y])}},target:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:L},currentTarget:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:L},nativeEvent:c};if(p(C),g.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(p=>p.object===u.object&&p.index===u.index&&p.instanceId===u.instanceId)){const m=u.eventObject.__r3f,g=m==null?void 0:m.handlers;if(c.hovered.delete(Ig(u)),m!=null&&m.eventCount){const y={...u,intersections:l};g.onPointerOut==null||g.onPointerOut(y),g.onPointerLeave==null||g.onPointerLeave(y)}}}function o(l,c){for(let u=0;u<c.length;u++){const p=c[u].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:p,internal:m}=n.getState();m.lastEvent.current=u;const g=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",S=i(u,g?t:void 0),v=y?e(u):0;l==="onPointerDown"&&(m.initialClick=[u.offsetX,u.offsetY],m.initialHits=S.map(w=>w.eventObject)),y&&!S.length&&v<=2&&(o(u,m.interaction),p&&p(u)),g&&s(S);function b(w){const M=w.eventObject,A=M.__r3f,P=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(g){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const L=Ig(w),I=m.hovered.get(L);I?I.stopped&&w.stopPropagation():(m.hovered.set(L,w),P.onPointerOver==null||P.onPointerOver(w),P.onPointerEnter==null||P.onPointerEnter(w))}P.onPointerMove==null||P.onPointerMove(w)}else{const L=P[l];L?(!y||m.initialHits.includes(M))&&(o(u,m.interaction.filter(I=>!m.initialHits.includes(I))),L(w)):y&&m.initialHits.includes(M)&&o(u,m.interaction.filter(I=>!m.initialHits.includes(I)))}}r(S,u,v,b)}}return{handlePointer:a}}const bO=n=>!!(n!=null&&n.render),SO=N.createContext(null),Gie=(n,e)=>{const t=Cie((a,l)=>{const c=new F,u=new F,p=new F;function m(v=l().camera,b=u,w=l().size){const{width:M,height:A,top:P,left:L}=w,I=M/A;b instanceof F?p.copy(b):p.set(...b);const C=v.getWorldPosition(c).distanceTo(p);if(mO(v))return{width:M/v.zoom,height:A/v.zoom,top:P,left:L,factor:1,distance:C,aspect:I};{const k=v.fov*Math.PI/180,V=2*Math.tan(k/2)*C,q=V*(M/A);return{width:q,height:V,top:P,left:L,factor:M/q,distance:C,aspect:I}}}let g;const y=v=>a(b=>({performance:{...b.performance,current:v}})),_=new xe;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,b)=>e(v,b,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new KE,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();g&&clearTimeout(g),v.performance.current!==v.performance.min&&y(v.performance.min),g=setTimeout(()=>y(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:v=>a(b=>({...b,events:{...b.events,...v}})),setSize:(v,b,w,M,A)=>{const P=l().camera,L={width:v,height:b,top:M||0,left:A||0,updateStyle:w};a(I=>({size:L,viewport:{...I.viewport,...m(P,u,L)}}))},setDpr:v=>a(b=>{const w=xO(v);return{viewport:{...b.viewport,dpr:w,initialDpr:b.viewport.initialDpr||w}}}),setFrameloop:(v="always")=>{const b=l().clock;b.stop(),b.elapsedTime=0,v!=="never"&&(b.start(),b.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:N.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,b,w)=>{const M=l().internal;return M.priority=M.priority+(b>0?1:0),M.subscribers.push({ref:v,priority:b,store:w}),M.subscribers=M.subscribers.sort((A,P)=>A.priority-P.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(b>0?1:0),A.subscribers=A.subscribers.filter(P=>P.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:p}=t.getState();if(l!==r||c.dpr!==s){var m;r=l,s=c.dpr,zie(a,l),u.setPixelRatio(c.dpr);const g=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,g)}a!==o&&(o=a,p(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let kg,Wie=new Set,$ie=new Set,Xie=new Set;function o_(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function hh(n,e){switch(n){case"before":return o_(Wie,e);case"after":return o_($ie,e);case"tail":return o_(Xie,e)}}let a_,l_;function c_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),a_=e.internal.subscribers,kg=0;kg<a_.length;kg++)l_=a_[kg],l_.ref.current(l_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function qie(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,hh("before",l);for(const u of n.values()){var c;r=u.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(t+=c_(l,r))}if(hh("after",l),t===0)return hh("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var u;if(!l)return n.forEach(p=>o(p.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,p){if(c&&hh("before",l),u)c_(l,u,p);else for(const m of n.values())c_(l,m.store.getState());c&&hh("after",l)}return{loop:s,invalidate:o,advance:a}}function EO(){const n=N.useContext(SO);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Go(n=t=>t,e){return EO()(n,e)}function Yie(n,e=0){const t=EO(),i=t.getState().internal.subscribe,r=gO(n);return gp(()=>i(r,e,t),[e,i,t]),null}const Zu=new Map,{invalidate:K3,advance:Z3}=qie(Zu),{reconciler:Q0,applyProps:Yc}=Die(Zu,Bie),Kc={objects:"shallow",strict:!1},Kie=(n,e)=>{const t=typeof n=="function"?n(e):n;return bO(t)?t:new Gv({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Zie(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Jie(n){const e=Zu.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Gie(K3,Z3),o=t||Q0.createContainer(s,bu.ConcurrentRoot,null,!1,null,"",r,null);e||Zu.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:p,size:m,scene:g,events:y,onCreated:_,shadows:S=!1,linear:v=!1,flat:b=!1,legacy:w=!1,orthographic:M=!1,frameloop:A="always",dpr:P=[1,2],performance:L,raycaster:I,camera:C,onPointerMissed:k}=u,V=s.getState(),q=V.gl;V.gl||V.set({gl:q=Kie(p,n)});let B=V.raycaster;B||V.set({raycaster:B=new Mj});const{params:U,...$}=I||{};if(on.equ($,B,Kc)||Yc(B,{...$}),on.equ(U,B.params,Kc)||Yc(B,{params:{...B.params,...U}}),!V.camera||V.camera===c&&!on.equ(c,C,Kc)){c=C;const te=C instanceof tp,Q=te?C:M?new wa(0,0,0,0,.1,1e3):new yn(75,0,.1,1e3);te||(Q.position.z=5,C&&Yc(Q,C),!V.camera&&!(C!=null&&C.rotation)&&Q.lookAt(0,0,0)),V.set({camera:Q})}if(!V.scene){let te;g instanceof Tf?te=g:(te=new Tf,g&&Yc(te,g)),V.set({scene:Qc(te)})}if(!V.xr){var X;const te=(ve,ge)=>{const K=s.getState();K.frameloop!=="never"&&Z3(ve,!0,K,ge)},Q=()=>{const ve=s.getState();ve.gl.xr.enabled=ve.gl.xr.isPresenting,ve.gl.xr.setAnimationLoop(ve.gl.xr.isPresenting?te:null),ve.gl.xr.isPresenting||K3(ve)},se={connect(){const ve=s.getState().gl;ve.xr.addEventListener("sessionstart",Q),ve.xr.addEventListener("sessionend",Q)},disconnect(){const ve=s.getState().gl;ve.xr.removeEventListener("sessionstart",Q),ve.xr.removeEventListener("sessionend",Q)}};typeof((X=q.xr)==null?void 0:X.addEventListener)=="function"&&se.connect(),V.set({xr:se})}if(q.shadowMap){const te=q.shadowMap.enabled,Q=q.shadowMap.type;if(q.shadowMap.enabled=!!S,on.boo(S))q.shadowMap.type=Fh;else if(on.str(S)){var ee;const se={basic:Pk,percentage:Fv,soft:Fh,variance:Yr};q.shadowMap.type=(ee=se[S])!=null?ee:Fh}else on.obj(S)&&Object.assign(q.shadowMap,S);(te!==q.shadowMap.enabled||Q!==q.shadowMap.type)&&(q.shadowMap.needsUpdate=!0)}const D=pO();D&&("enabled"in D?D.enabled=!w:"legacyMode"in D&&(D.legacyMode=w)),Yc(q,{outputEncoding:v?3e3:3001,toneMapping:b?ss:mE}),V.legacy!==w&&V.set(()=>({legacy:w})),V.linear!==v&&V.set(()=>({linear:v})),V.flat!==b&&V.set(()=>({flat:b})),p&&!on.fun(p)&&!bO(p)&&!on.equ(p,q,Kc)&&Yc(q,p),y&&!V.events.handlers&&V.set({events:y(s)});const Z=Zie(n,m);return on.equ(Z,V.size,Kc)||V.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),P&&V.viewport.dpr!==xO(P)&&V.setDpr(P),V.frameloop!==A&&V.setFrameloop(A),V.onPointerMissed||V.set({onPointerMissed:k}),L&&!on.equ(L,V.performance,Kc)&&V.set(te=>({performance:{...te.performance,...L}})),a=_,l=!0,this},render(u){return l||this.configure(),Q0.updateContainer(N.createElement(Qie,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){MO(n)}}}function Qie({store:n,children:e,onCreated:t,rootElement:i}){return gp(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),N.createElement(SO.Provider,{value:n},e)}function MO(n,e){const t=Zu.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Q0.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),Uie(r),Zu.delete(n),e&&e(n)}catch{}},500)})}}Q0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:N.version});function jf(){return jf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},jf.apply(null,arguments)}function J3(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function ere({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=N.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=N.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=N.useRef(!1);N.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[p,m,g]=N.useMemo(()=>{const v=()=>{if(!a.current.element)return;const{left:b,top:w,width:M,height:A,bottom:P,right:L,x:I,y:C}=a.current.element.getBoundingClientRect(),k={left:b,top:w,width:M,height:A,bottom:P,right:L,x:I,y:C};a.current.element instanceof HTMLElement&&i&&(k.height=a.current.element.offsetHeight,k.width=a.current.element.offsetWidth),Object.freeze(k),u.current&&!rre(a.current.lastBounds,k)&&o(a.current.lastBounds=k)};return[v,c?J3(v,c):v,l?J3(v,l):v]},[o,i,l,c]);function y(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",g,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function _(){a.current.element&&(a.current.resizeObserver=new r(g),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(v=>v.addEventListener("scroll",g,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const S=v=>{!v||v===a.current.element||(y(),a.current.element=v,a.current.scrollContainers=TO(v),_())};return nre(g,!!e),tre(m),N.useEffect(()=>{y(),_()},[e,g,m]),N.useEffect(()=>y,[]),[S,s,p]}function tre(n){N.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function nre(n,e){N.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function TO(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...TO(n.parentElement)]}const ire=["x","y","top","bottom","left","right","width","height"],rre=(n,e)=>ire.every(t=>n[t]===e[t]);var sre=Object.defineProperty,ore=Object.defineProperties,are=Object.getOwnPropertyDescriptors,Q3=Object.getOwnPropertySymbols,lre=Object.prototype.hasOwnProperty,cre=Object.prototype.propertyIsEnumerable,eN=(n,e,t)=>e in n?sre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tN=(n,e)=>{for(var t in e||(e={}))lre.call(e,t)&&eN(n,t,e[t]);if(Q3)for(var t of Q3(e))cre.call(e,t)&&eN(n,t,e[t]);return n},ure=(n,e)=>ore(n,are(e)),nN,iN;typeof window<"u"&&((nN=window.document)!=null&&nN.createElement||((iN=window.navigator)==null?void 0:iN.product)==="ReactNative")?N.useLayoutEffect:N.useEffect;function AO(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=AO(i,e,t);if(r)return r;i=e?null:i.sibling}}function CO(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const rN=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=rN;return}return rN.apply(this,arguments)};const uM=CO(N.createContext(null));class PO extends N.Component{render(){return N.createElement(uM.Provider,{value:this._reactInternals},this.props.children)}}function dre(){const n=N.useContext(uM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=AO(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function hre(){const n=dre(),[e]=N.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==uM&&!e.has(r)&&e.set(r,N.useContext(CO(r)))}t=t.return}return e}function fre(){const n=hre();return N.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>N.createElement(e,null,N.createElement(t.Provider,ure(tN({},i),{value:n.get(t)}))),e=>N.createElement(PO,tN({},e))),[n])}const u_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pre(n){const{handlePointer:e}=Hie(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(u_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=u_[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=u_[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const mre=N.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=pre,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:p,legacy:m,orthographic:g,frameloop:y,dpr:_,performance:S,raycaster:v,camera:b,scene:w,onPointerMissed:M,onCreated:A,...P},L){N.useMemo(()=>kie(VQ),[]);const I=fre(),[C,k]=ere({scroll:!0,debounce:{scroll:50,resize:0},...i}),V=N.useRef(null),q=N.useRef(null);N.useImperativeHandle(L,()=>V.current);const B=gO(M),[U,$]=N.useState(!1),[X,ee]=N.useState(!1);if(U)throw U;if(X)throw X;const D=N.useRef(null);gp(()=>{const H=V.current;k.width>0&&k.height>0&&H&&(D.current||(D.current=Jie(H)),D.current.configure({gl:s,events:o,shadows:c,linear:u,flat:p,legacy:m,orthographic:g,frameloop:y,dpr:_,performance:S,raycaster:v,camera:b,scene:w,size:k,onPointerMissed:(...Z)=>B.current==null?void 0:B.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(a?jie(a)?a.current:a:q.current),l&&Z.setEvents({compute:(te,Q)=>{const se=te[l+"X"],ve=te[l+"Y"];Q.pointer.set(se/Q.size.width*2-1,-(ve/Q.size.height)*2+1),Q.raycaster.setFromCamera(Q.pointer,Q.camera)}}),A==null||A(Z)}}),D.current.render(N.createElement(I,null,N.createElement(vO,{set:ee},N.createElement(N.Suspense,{fallback:N.createElement(Oie,{set:$})},e)))))}),N.useEffect(()=>{const H=V.current;if(H)return()=>MO(H)},[]);const O=a?"none":"auto";return N.createElement("div",jf({ref:q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:O,...r}},P),N.createElement("div",{ref:C,style:{width:"100%",height:"100%"}},N.createElement("canvas",{ref:V,style:{display:"block"}},t)))}),gre=N.forwardRef(function(e,t){return N.createElement(PO,null,N.createElement(mre,jf({},e,{ref:t})))});var vre=Object.defineProperty,yre=(n,e,t)=>e in n?vre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xre=(n,e,t)=>(yre(n,typeof e!="symbol"?e+"":e,t),t);class _re{constructor(){xre(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var wre=Object.defineProperty,bre=(n,e,t)=>e in n?wre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,st=(n,e,t)=>(bre(n,typeof e!="symbol"?e+"":e,t),t);const Dg=new od,sN=new ro,Sre=Math.cos(70*(Math.PI/180)),oN=(n,e)=>(n%e+e)%e;let Ere=class extends _re{constructor(e,t){super(),st(this,"object"),st(this,"domElement"),st(this,"enabled",!0),st(this,"target",new F),st(this,"minDistance",0),st(this,"maxDistance",1/0),st(this,"minZoom",0),st(this,"maxZoom",1/0),st(this,"minPolarAngle",0),st(this,"maxPolarAngle",Math.PI),st(this,"minAzimuthAngle",-1/0),st(this,"maxAzimuthAngle",1/0),st(this,"enableDamping",!1),st(this,"dampingFactor",.05),st(this,"enableZoom",!0),st(this,"zoomSpeed",1),st(this,"enableRotate",!0),st(this,"rotateSpeed",1),st(this,"enablePan",!0),st(this,"panSpeed",1),st(this,"screenSpacePanning",!0),st(this,"keyPanSpeed",7),st(this,"zoomToCursor",!1),st(this,"autoRotate",!1),st(this,"autoRotateSpeed",2),st(this,"reverseOrbit",!1),st(this,"reverseHorizontalOrbit",!1),st(this,"reverseVerticalOrbit",!1),st(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),st(this,"mouseButtons",{LEFT:Ms.ROTATE,MIDDLE:Ms.DOLLY,RIGHT:Ms.PAN}),st(this,"touches",{ONE:pl.ROTATE,TWO:pl.DOLLY_PAN}),st(this,"target0"),st(this,"position0"),st(this,"zoom0"),st(this,"_domElementKeyEvents",null),st(this,"getPolarAngle"),st(this,"getAzimuthalAngle"),st(this,"setPolarAngle"),st(this,"setAzimuthalAngle"),st(this,"getDistance"),st(this,"getZoomScale"),st(this,"listenToKeyEvents"),st(this,"stopListenToKeyEvents"),st(this,"saveState"),st(this,"reset"),st(this,"update"),st(this,"connect"),st(this,"dispose"),st(this,"dollyIn"),st(this,"dollyOut"),st(this,"getScale"),st(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=J=>{let we=oN(J,2*Math.PI),Oe=u.phi;Oe<0&&(Oe+=2*Math.PI),we<0&&(we+=2*Math.PI);let Y=Math.abs(we-Oe);2*Math.PI-Y<Y&&(we<Oe?we+=2*Math.PI:Oe+=2*Math.PI),p.phi=we-Oe,i.update()},this.setAzimuthalAngle=J=>{let we=oN(J,2*Math.PI),Oe=u.theta;Oe<0&&(Oe+=2*Math.PI),we<0&&(we+=2*Math.PI);let Y=Math.abs(we-Oe);2*Math.PI-Y<Y&&(we<Oe?we+=2*Math.PI:Oe+=2*Math.PI),p.theta=we-Oe,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=J=>{J.addEventListener("keydown",tt),this._domElementKeyEvents=J},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",tt),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const J=new F,we=new F(0,1,0),Oe=new _i().setFromUnitVectors(e.up,we),Y=Oe.clone().invert(),ue=new F,be=new _i,Le=2*Math.PI;return function(){const It=i.object.position;Oe.setFromUnitVectors(e.up,we),Y.copy(Oe).invert(),J.copy(It).sub(i.target),J.applyQuaternion(Oe),u.setFromVector3(J),i.autoRotate&&l===a.NONE&&U(q()),i.enableDamping?(u.theta+=p.theta*i.dampingFactor,u.phi+=p.phi*i.dampingFactor):(u.theta+=p.theta,u.phi+=p.phi);let xt=i.minAzimuthAngle,Xt=i.maxAzimuthAngle;isFinite(xt)&&isFinite(Xt)&&(xt<-Math.PI?xt+=Le:xt>Math.PI&&(xt-=Le),Xt<-Math.PI?Xt+=Le:Xt>Math.PI&&(Xt-=Le),xt<=Xt?u.theta=Math.max(xt,Math.min(Xt,u.theta)):u.theta=u.theta>(xt+Xt)/2?Math.max(xt,u.theta):Math.min(Xt,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(g,i.dampingFactor):i.target.add(g),i.zoomToCursor&&C||i.object.isOrthographicCamera?u.radius=Q(u.radius):u.radius=Q(u.radius*m),J.setFromSpherical(u),J.applyQuaternion(Y),It.copy(i.target).add(J),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(p.theta*=1-i.dampingFactor,p.phi*=1-i.dampingFactor,g.multiplyScalar(1-i.dampingFactor)):(p.set(0,0,0),g.set(0,0,0));let Zn=!1;if(i.zoomToCursor&&C){let Bt=null;if(i.object instanceof yn&&i.object.isPerspectiveCamera){const wn=J.length();Bt=Q(wn*m);const Jn=wn-Bt;i.object.position.addScaledVector(L,Jn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const wn=new F(I.x,I.y,0);wn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/m)),i.object.updateProjectionMatrix(),Zn=!0;const Jn=new F(I.x,I.y,0);Jn.unproject(i.object),i.object.position.sub(Jn).add(wn),i.object.updateMatrixWorld(),Bt=J.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Bt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Bt).add(i.object.position):(Dg.origin.copy(i.object.position),Dg.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Dg.direction))<Sre?e.lookAt(i.target):(sN.setFromNormalAndCoplanarPoint(i.object.up,i.target),Dg.intersectPlane(sN,i.target))))}else i.object instanceof wa&&i.object.isOrthographicCamera&&(Zn=m!==1,Zn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/m)),i.object.updateProjectionMatrix()));return m=1,C=!1,Zn||ue.distanceToSquared(i.object.position)>c||8*(1-be.dot(i.object.quaternion))>c?(i.dispatchEvent(r),ue.copy(i.object.position),be.copy(i.object.quaternion),Zn=!1,!0):!1}})(),this.connect=J=>{i.domElement=J,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ge),i.domElement.addEventListener("pointerdown",W),i.domElement.addEventListener("pointercancel",ce),i.domElement.addEventListener("wheel",Re)},this.dispose=()=>{var J,we,Oe,Y,ue,be;i.domElement&&(i.domElement.style.touchAction="auto"),(J=i.domElement)==null||J.removeEventListener("contextmenu",Ge),(we=i.domElement)==null||we.removeEventListener("pointerdown",W),(Oe=i.domElement)==null||Oe.removeEventListener("pointercancel",ce),(Y=i.domElement)==null||Y.removeEventListener("wheel",Re),(ue=i.domElement)==null||ue.ownerDocument.removeEventListener("pointermove",j),(be=i.domElement)==null||be.ownerDocument.removeEventListener("pointerup",ce),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",tt)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new yb,p=new yb;let m=1;const g=new F,y=new xe,_=new xe,S=new xe,v=new xe,b=new xe,w=new xe,M=new xe,A=new xe,P=new xe,L=new F,I=new xe;let C=!1;const k=[],V={};function q(){return 2*Math.PI/60/60*i.autoRotateSpeed}function B(){return Math.pow(.95,i.zoomSpeed)}function U(J){i.reverseOrbit||i.reverseHorizontalOrbit?p.theta+=J:p.theta-=J}function $(J){i.reverseOrbit||i.reverseVerticalOrbit?p.phi+=J:p.phi-=J}const X=(()=>{const J=new F;return function(Oe,Y){J.setFromMatrixColumn(Y,0),J.multiplyScalar(-Oe),g.add(J)}})(),ee=(()=>{const J=new F;return function(Oe,Y){i.screenSpacePanning===!0?J.setFromMatrixColumn(Y,1):(J.setFromMatrixColumn(Y,0),J.crossVectors(i.object.up,J)),J.multiplyScalar(Oe),g.add(J)}})(),D=(()=>{const J=new F;return function(Oe,Y){const ue=i.domElement;if(ue&&i.object instanceof yn&&i.object.isPerspectiveCamera){const be=i.object.position;J.copy(be).sub(i.target);let Le=J.length();Le*=Math.tan(i.object.fov/2*Math.PI/180),X(2*Oe*Le/ue.clientHeight,i.object.matrix),ee(2*Y*Le/ue.clientHeight,i.object.matrix)}else ue&&i.object instanceof wa&&i.object.isOrthographicCamera?(X(Oe*(i.object.right-i.object.left)/i.object.zoom/ue.clientWidth,i.object.matrix),ee(Y*(i.object.top-i.object.bottom)/i.object.zoom/ue.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function O(J){i.object instanceof yn&&i.object.isPerspectiveCamera||i.object instanceof wa&&i.object.isOrthographicCamera?m=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H(J){O(m/J)}function Z(J){O(m*J)}function te(J){if(!i.zoomToCursor||!i.domElement)return;C=!0;const we=i.domElement.getBoundingClientRect(),Oe=J.clientX-we.left,Y=J.clientY-we.top,ue=we.width,be=we.height;I.x=Oe/ue*2-1,I.y=-(Y/be)*2+1,L.set(I.x,I.y,1).unproject(i.object).sub(i.object.position).normalize()}function Q(J){return Math.max(i.minDistance,Math.min(i.maxDistance,J))}function se(J){y.set(J.clientX,J.clientY)}function ve(J){te(J),M.set(J.clientX,J.clientY)}function ge(J){v.set(J.clientX,J.clientY)}function K(J){_.set(J.clientX,J.clientY),S.subVectors(_,y).multiplyScalar(i.rotateSpeed);const we=i.domElement;we&&(U(2*Math.PI*S.x/we.clientHeight),$(2*Math.PI*S.y/we.clientHeight)),y.copy(_),i.update()}function je(J){A.set(J.clientX,J.clientY),P.subVectors(A,M),P.y>0?H(B()):P.y<0&&Z(B()),M.copy(A),i.update()}function Xe(J){b.set(J.clientX,J.clientY),w.subVectors(b,v).multiplyScalar(i.panSpeed),D(w.x,w.y),v.copy(b),i.update()}function Ee(J){te(J),J.deltaY<0?Z(B()):J.deltaY>0&&H(B()),i.update()}function Pe(J){let we=!1;switch(J.code){case i.keys.UP:D(0,i.keyPanSpeed),we=!0;break;case i.keys.BOTTOM:D(0,-i.keyPanSpeed),we=!0;break;case i.keys.LEFT:D(i.keyPanSpeed,0),we=!0;break;case i.keys.RIGHT:D(-i.keyPanSpeed,0),we=!0;break}we&&(J.preventDefault(),i.update())}function _e(){if(k.length==1)y.set(k[0].pageX,k[0].pageY);else{const J=.5*(k[0].pageX+k[1].pageX),we=.5*(k[0].pageY+k[1].pageY);y.set(J,we)}}function de(){if(k.length==1)v.set(k[0].pageX,k[0].pageY);else{const J=.5*(k[0].pageX+k[1].pageX),we=.5*(k[0].pageY+k[1].pageY);v.set(J,we)}}function Se(){const J=k[0].pageX-k[1].pageX,we=k[0].pageY-k[1].pageY,Oe=Math.sqrt(J*J+we*we);M.set(0,Oe)}function Be(){i.enableZoom&&Se(),i.enablePan&&de()}function Ne(){i.enableZoom&&Se(),i.enableRotate&&_e()}function Qe(J){if(k.length==1)_.set(J.pageX,J.pageY);else{const Oe=We(J),Y=.5*(J.pageX+Oe.x),ue=.5*(J.pageY+Oe.y);_.set(Y,ue)}S.subVectors(_,y).multiplyScalar(i.rotateSpeed);const we=i.domElement;we&&(U(2*Math.PI*S.x/we.clientHeight),$(2*Math.PI*S.y/we.clientHeight)),y.copy(_)}function et(J){if(k.length==1)b.set(J.pageX,J.pageY);else{const we=We(J),Oe=.5*(J.pageX+we.x),Y=.5*(J.pageY+we.y);b.set(Oe,Y)}w.subVectors(b,v).multiplyScalar(i.panSpeed),D(w.x,w.y),v.copy(b)}function Ke(J){const we=We(J),Oe=J.pageX-we.x,Y=J.pageY-we.y,ue=Math.sqrt(Oe*Oe+Y*Y);A.set(0,ue),P.set(0,Math.pow(A.y/M.y,i.zoomSpeed)),H(P.y),M.copy(A)}function ct(J){i.enableZoom&&Ke(J),i.enablePan&&et(J)}function Nt(J){i.enableZoom&&Ke(J),i.enableRotate&&Qe(J)}function W(J){var we,Oe;i.enabled!==!1&&(k.length===0&&((we=i.domElement)==null||we.ownerDocument.addEventListener("pointermove",j),(Oe=i.domElement)==null||Oe.ownerDocument.addEventListener("pointerup",ce)),Je(J),J.pointerType==="touch"?Fe(J):Me(J))}function j(J){i.enabled!==!1&&(J.pointerType==="touch"?me(J):Te(J))}function ce(J){var we,Oe,Y;it(J),k.length===0&&((we=i.domElement)==null||we.releasePointerCapture(J.pointerId),(Oe=i.domElement)==null||Oe.ownerDocument.removeEventListener("pointermove",j),(Y=i.domElement)==null||Y.ownerDocument.removeEventListener("pointerup",ce)),i.dispatchEvent(o),l=a.NONE}function Me(J){let we;switch(J.button){case 0:we=i.mouseButtons.LEFT;break;case 1:we=i.mouseButtons.MIDDLE;break;case 2:we=i.mouseButtons.RIGHT;break;default:we=-1}switch(we){case Ms.DOLLY:if(i.enableZoom===!1)return;ve(J),l=a.DOLLY;break;case Ms.ROTATE:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enablePan===!1)return;ge(J),l=a.PAN}else{if(i.enableRotate===!1)return;se(J),l=a.ROTATE}break;case Ms.PAN:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enableRotate===!1)return;se(J),l=a.ROTATE}else{if(i.enablePan===!1)return;ge(J),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Te(J){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;K(J);break;case a.DOLLY:if(i.enableZoom===!1)return;je(J);break;case a.PAN:if(i.enablePan===!1)return;Xe(J);break}}function Re(J){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(J.preventDefault(),i.dispatchEvent(s),Ee(J),i.dispatchEvent(o))}function tt(J){i.enabled===!1||i.enablePan===!1||Pe(J)}function Fe(J){switch(Ue(J),k.length){case 1:switch(i.touches.ONE){case pl.ROTATE:if(i.enableRotate===!1)return;_e(),l=a.TOUCH_ROTATE;break;case pl.PAN:if(i.enablePan===!1)return;de(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case pl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Be(),l=a.TOUCH_DOLLY_PAN;break;case pl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ne(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function me(J){switch(Ue(J),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Qe(J),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;et(J),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ct(J),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Nt(J),i.update();break;default:l=a.NONE}}function Ge(J){i.enabled!==!1&&J.preventDefault()}function Je(J){k.push(J)}function it(J){delete V[J.pointerId];for(let we=0;we<k.length;we++)if(k[we].pointerId==J.pointerId){k.splice(we,1);return}}function Ue(J){let we=V[J.pointerId];we===void 0&&(we=new xe,V[J.pointerId]=we),we.set(J.pageX,J.pageY)}function We(J){const we=J.pointerId===k[0].pointerId?k[1]:k[0];return V[we.pointerId]}this.dollyIn=(J=B())=>{Z(J),i.update()},this.dollyOut=(J=B())=>{H(J),i.update()},this.getScale=()=>m,this.setScale=J=>{O(J),i.update()},this.getZoomScale=()=>B(),t!==void 0&&this.connect(t),this.update()}};const Mre=N.forwardRef(({makeDefault:n,events:e,camera:t,regress:i,domElement:r,enableDamping:s=!0,onChange:o,onStart:a,onEnd:l,...c},u)=>{const p=Go(P=>P.invalidate),m=Go(P=>P.camera),g=Go(P=>P.gl),y=Go(P=>P.events),_=Go(P=>P.setEvents),S=Go(P=>P.set),v=Go(P=>P.get),b=Go(P=>P.performance),w=t||m,M=r||y.connected||g.domElement,A=N.useMemo(()=>new Ere(w),[w]);return Yie(()=>{A.enabled&&A.update()},-1),N.useEffect(()=>(A.connect(M),()=>void A.dispose()),[M,i,A,p]),N.useEffect(()=>{e&&_({enabled:!0});const P=C=>{p(),i&&b.regress(),o&&o(C)},L=C=>{a&&a(C),e||_({enabled:!1})},I=C=>{l&&l(C),e||_({enabled:!0})};return A.addEventListener("change",P),A.addEventListener("start",L),A.addEventListener("end",I),()=>{A.removeEventListener("start",L),A.removeEventListener("end",I),A.removeEventListener("change",P)}},[o,a,l,A,p,e,_]),N.useEffect(()=>{if(n){const P=v().controls;return S({controls:A}),()=>S({controls:P})}},[n,A]),N.createElement("primitive",jf({ref:u,object:A,enableDamping:s},c))}),fh=[{slug:"madrid",id:79,name:"Madrid",coords:[-3.7038,40.4168],units:22},{slug:"alcala-de-henares",id:5,name:"Alcalá de Henares",coords:[-3.363,40.4814],units:15},{slug:"mostoles",id:91,name:"Móstoles",coords:[-3.8648,40.3223],units:5},{slug:"fuenlabrada",id:0,name:"Fuenlabrada",coords:[-3.7969,40.2853],units:0},{slug:"leganes",id:58,name:"Leganés",coords:[-3.7638,40.3273],units:2},{slug:"getafe",id:65,name:"Getafe",coords:[-3.7329,40.3081],units:6},{slug:"alcorcon",id:7,name:"Alcorcón",coords:[-3.829,40.345],units:0},{slug:"collado-villalba",id:45,name:"Collado Villalba",coords:[-3.992,40.6569],units:18},{slug:"el-escorial",id:54,name:"El Escorial",coords:[-4.14,40.593],units:0}],Tre="FeatureCollection",Are=[{type:"Feature",geometry:{type:"MultiPolygon",coordinates:[[[[-3.539722192,41.165041089064985],[-3.613701828,41.149052740065066],[-3.633989025,41.13488480006513],[-3.65105816,41.10776254006524],[-3.679537395,41.08423042106535],[-3.713989215,41.0732080360654],[-3.739000949,41.04971399806551],[-3.78136611,41.00031184706573],[-3.809441985,40.98780958806578],[-3.879039474,40.975201656065835],[-3.917182459,40.943005385065995],[-3.921760715,40.92992859606605],[-3.952276176,40.893631931066224],[-3.942511359,40.88302378106626],[-3.947105212,40.86297438506636],[-3.965735726,40.8349575300665],[-3.962121572,40.823447184066545],[-3.979958791,40.79938645306666],[-4.021317094,40.781191603066745],[-4.070091548,40.79391539806669],[-4.110443546,40.74398207906693],[-4.136059851,40.717746343067056],[-4.145673463,40.694651043067175],[-4.171566939,40.68062631206724],[-4.167922455,40.64376089906741],[-4.17675104,40.61615543906754],[-4.213624967,40.605679113067595],[-4.262140773,40.605179982067604],[-4.271101687,40.629022739067494],[-4.28917943,40.62724322206749],[-4.278864226,40.60415647606761],[-4.289261821,40.564194252067814],[-4.323703856,40.54958224406788],[-4.321115198,40.51802504406805],[-4.327346409,40.5071154000681],[-4.319663028,40.45209346406838],[-4.338479374,40.439587410068455],[-4.324002927,40.41830229906856],[-4.365344373,40.406918240068606],[-4.415537259,40.409602085068606],[-4.441657181,40.388873651068714],[-4.439432555,40.350762571068906],[-4.459628807,40.34292947106894],[-4.456213962,40.32072152806907],[-4.504896111,40.31543811106909],[-4.526787497,40.344873412068935],[-4.547654394,40.34037625506897],[-4.529379145,40.29312483806921],[-4.554152571,40.27636308906931],[-4.568788455,40.2587121520694],[-4.560906994,40.2227939130696],[-4.575049791,40.20672679606968],[-4.535364339,40.19934286306973],[-4.51693006,40.21472096806964],[-4.472395217,40.231434631069554],[-4.447510111,40.23364754406954],[-4.436356596,40.255105276069415],[-4.384513615,40.28827114706923],[-4.381335659,40.31248658206911],[-4.356386295,40.308621365069136],[-4.35692551,40.27034046906934],[-4.333345727,40.23822489706952],[-4.295189037,40.21888120006962],[-4.269650181,40.236023878069524],[-4.246164554,40.27421291806932],[-4.204688348,40.26902677106934],[-4.203808948,40.287300934069236],[-4.190870508,40.297354664069196],[-4.175201879,40.28899585106923],[-4.167009986,40.27274570106931],[-4.143991483,40.26462091406936],[-4.150725412,40.24923261006945],[-4.104271629,40.24183352706949],[-4.072894226,40.265451430069355],[-4.052084979,40.25152895306944],[-4.02596099,40.249582846069444],[-4.026158711,40.235611332069524],[-3.991001405,40.20947867106966],[-3.956184733,40.211465278069646],[-3.931287514,40.203967279069694],[-3.916178715,40.19159802406977],[-3.866634344,40.188077718069785],[-3.852796424,40.16924079106988],[-3.834186355,40.16135246306994],[-3.800037763,40.17539978906986],[-3.779104683,40.15625044906995],[-3.771433096,40.13977862107005],[-3.746259137,40.132163537070085],[-3.719808919,40.14711534807001],[-3.683723098,40.13226962907009],[-3.607628161,40.10896678507023],[-3.603732251,40.0936673260703],[-3.623094028,40.05411089807052],[-3.67679959,40.020914346070704],[-3.699891293,40.01954280007072],[-3.721745225,40.00110638607083],[-3.725340915,39.988408154070896],[-3.80122468,39.94730709407113],[-3.810329729,39.953764230071094],[-3.875477234,39.926904244071245],[-3.859794656,39.90254649507139],[-3.834548333,39.8999341240714],[-3.806421181,39.88738894907148],[-3.778797468,39.910853617071346],[-3.759367595,39.91907265807128],[-3.743869878,39.940802359071164],[-3.711105783,39.95470862107109],[-3.697588563,39.94671827207113],[-3.677643415,39.96077001707105],[-3.634498904,39.96589176307103],[-3.637991655,39.98837587107091],[-3.594580697,40.00170096707081],[-3.590014713,40.013220526070754],[-3.530605384,40.01811811507072],[-3.51530506,40.04332907507058],[-3.490324157,40.04737114507057],[-3.470067733,40.040702391070596],[-3.429334215,40.03888196207061],[-3.39424183,40.04538837507057],[-3.374733514,40.059615135070494],[-3.377707211,40.07476789107041],[-3.327746926,40.07913519407038],[-3.302494222,40.05331364607053],[-3.25729655,40.05069474607054],[-3.210479248,40.06166195607048],[-3.180641022,40.09009076907032],[-3.163166492,40.08370874207034],[-3.161577741,40.06492870307046],[-3.118189174,40.06142888407048],[-3.088802251,40.07059375707043],[-3.052983314,40.099387878070274],[-3.072687124,40.129892609070104],[-3.096755364,40.142388685070046],[-3.09662113,40.155745342069956],[-3.077126867,40.17251098106987],[-3.086698648,40.19235218506976],[-3.079456385,40.20838234706967],[-3.086620025,40.245281528069484],[-3.096023797,40.26908587706935],[-3.112674184,40.28547789506925],[-3.153717726,40.26371350106937],[-3.173225944,40.23675119606952],[-3.194449,40.24803707906946],[-3.184209847,40.26970751406934],[-3.180642541,40.3133197080691],[-3.151397892,40.33524731006899],[-3.143823847,40.3529023850689],[-3.151947343,40.36845829206881],[-3.140745002,40.37777969506877],[-3.130557952,40.40518499206863],[-3.142072998,40.412457397068586],[-3.155514501,40.43942475606845],[-3.198596658,40.44225227106843],[-3.195327965,40.478593768068244],[-3.199954903,40.51444843606806],[-3.246851596,40.54202249006793],[-3.284348178,40.53515827606795],[-3.283132064,40.563619164067816],[-3.330334864,40.59736907806764],[-3.321601644,40.61172473906757],[-3.335770303,40.624661165067515],[-3.323655852,40.63838083606744],[-3.362320449,40.653738258067364],[-3.374650631,40.680112616067234],[-3.399916285,40.69144442606718],[-3.404734459,40.66963806506729],[-3.447788154,40.677473712067254],[-3.460066385,40.70348727806712],[-3.437191256,40.72288962006702],[-3.446967416,40.74135685306693],[-3.44434315,40.76157956206685],[-3.467760753,40.78430948806674],[-3.502744203,40.7909650260667],[-3.476755959,40.82541280706654],[-3.472423434,40.86434349006635],[-3.446133825,40.87670386806629],[-3.439552791,40.89107043206623],[-3.456218314,40.89920532806619],[-3.44885461,40.92252707006609],[-3.416233442,40.97581157206585],[-3.418296049,40.98756352106577],[-3.397280547,41.006290854065696],[-3.438934782,41.04266971506554],[-3.425143455,41.0732434050654],[-3.469915786,41.09224447606532],[-3.488214653,41.0940340870653],[-3.495297213,41.11583593006521],[-3.510603135,41.137290317065116],[-3.541098185,41.14966690006507],[-3.539722192,41.165041089064985]]],[[[-4.315750115,40.64819960006739],[-4.287835068,40.65291430706736],[-4.256038872,40.65146068306737],[-4.253876395,40.66189100706733],[-4.284816538,40.68122104406722],[-4.316193914,40.666749128067295],[-4.315750115,40.64819960006739]]]]},properties:{geo_point_2d:{lon:-3.7170278269539754,lat:40.495064948835065},year:"2022",acom_code:"13",acom_name:"Comunidad de Madrid",acom_area_code:"ESP",acom_type:"autonomous communities",acom_name_local:null,acom_iso3166_code:"MD"}}],Cre={type:Tre,features:Are},Pre=N.lazy(()=>La(()=>import("./GeoJSONMap-ba067692.js"),[])),Nre=[{id:"intro",title:"Descubre Madrid: Tu Próxima Inversión Inmobiliaria",text:"Visualiza el potencial de cada distrito. Analizamos miles de datos para ofrecerte una perspectiva única del mercado inmobiliario madrileño.",bg:"bg-gradient-to-b from-black via-gray-900 to-blue-900",textColor:"text-gray-200"},{id:"tech",title:"Inteligencia Artificial a tu Servicio",text:`Nuestra plataforma utiliza algoritmos avanzados para identificar oportunidades de inversión y predecir tendencias del mercado.
Encuentra propiedades que se alinean perfectamente con tus objetivos financieros.`,bg:"bg-gradient-to-b from-blue-900 to-indigo-900",textColor:"text-gray-200"},{id:"map",title:"Exploración Geoespacial 3D",text:`Navega por la Comunidad de Madrid en una interfaz tridimensional interactiva.
Observa la distribución de viviendas disponibles y accede a datos clave al instante.`,bg:"bg-gradient-to-b from-indigo-900 to-purple-900",textColor:"text-gray-200",hasMap:!0},{id:"data",title:"Decisiones Basadas en Datos Precisos",text:`Accede a análisis detallados: precios históricos, demanda actual, rentabilidad proyectada y más.
Invierte con la confianza que solo los datos pueden ofrecer.`,bg:"bg-gradient-to-b from-purple-900 to-gray-900",textColor:"text-gray-200"},{id:"contact",title:"Inicia tu Viaje hacia el Éxito Inmobiliario",text:`Contacta con nuestros asesores expertos para una consulta personalizada.
Transformamos la complejidad del mercado en tu próxima gran oportunidad.`,bg:"bg-gradient-to-b from-gray-900 to-black",textColor:"text-gray-200"}],Rre=()=>f.jsxs("div",{className:"absolute inset-0 flex justify-center items-center bg-black/50",children:[f.jsxs("svg",{className:"animate-spin h-8 w-8 text-[#FFD700] mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f.jsx("p",{className:"text-lg font-semibold text-gray-300",children:"Cargando Mapa Interactivo."})]});function Lre({section:n}){const[e,t]=N.useState(null),[i,r]=N.useState(!1),[s,o]=N.useState(!1),a=js();N.useEffect(()=>{const p=window.matchMedia("(min-width: 1024px)"),m=g=>o(g.matches);return m(p),p.addEventListener("change",m),()=>p.removeEventListener("change",m)},[]);const l=p=>{const m=new URLSearchParams({zonaId:p.id.toString(),zonaNombre:p.name,zonaTipo:"municipio"});a(`/propiedades?${m.toString()}`)},c=i?fh:s?fh.slice(0,21):fh.slice(0,5),u=n.hasMap;return f.jsx("section",{id:`section-${n.id}`,className:`relative z-10 min-h-screen w-full flex flex-col items-center px-6 md:px-10 py-16 overflow-hidden ${n.bg} ${n.textColor} text-center`,children:f.jsxs("div",{className:"w-full max-w-7xl mx-auto flex flex-col items-center",children:[f.jsx(le.h2,{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6 drop-shadow-lg",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.3},variants:{hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},children:n.title}),f.jsx(le.p,{className:`max-w-3xl mx-auto whitespace-pre-line text-lg md:text-xl leading-relaxed ${u?"mb-12":""}`,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.3},variants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.8,delay:.2,ease:"easeOut"}}},children:n.text}),u&&f.jsxs(le.div,{className:"w-full flex flex-col gap-8",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},variants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{duration:1,delay:.4,ease:"easeOut"}}},children:[f.jsxs("div",{className:"relative w-screen -mx-6 md:w-full md:mx-0 h-[60vh] md:h-[70vh] lg:h-[520px] bg-black/30 rounded-2xl overflow-hidden shadow-2xl border border-white/10",children:[f.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-20 pointer-events-none",children:f.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white drop-shadow-lg",children:"Comunidad de Madrid"})}),f.jsx(N.Suspense,{fallback:f.jsx(Rre,{}),children:f.jsxs(gre,{camera:{position:[0,70,120],fov:35},shadows:!0,children:[f.jsx("ambientLight",{intensity:.4,color:"#ffffff"}),f.jsx("directionalLight",{position:[30,50,30],intensity:1.5,castShadow:!0}),f.jsx("pointLight",{position:[-30,40,-30],intensity:.8,color:"#FFD700",distance:300}),f.jsx(Pre,{geoJsonData:Cre,pinsData:fh,activePinName:e,onPinHover:t}),f.jsx(Mre,{enablePan:!0,enableRotate:!0,mouseButtons:{RIGHT:Ms.PAN,LEFT:Ms.ROTATE,MIDDLE:Ms.DOLLY},minDistance:1,maxDistance:150,minPolarAngle:Math.PI/5.5,maxPolarAngle:Math.PI/3,minAzimuthAngle:-Math.PI/10,maxAzimuthAngle:Math.PI/10,zoomSpeed:.7,rotateSpeed:.5,enableDamping:!0,dampingFactor:.05})]})}),f.jsxs("div",{className:"hidden md:flex absolute top-4 right-4 bg-black/60 text-white p-2 rounded-md flex flex-col space-y-1 text-xs z-30",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(UB,{size:14}),f.jsx("span",{className:"ml-1",children:"Rotate"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx(zB,{size:14}),f.jsx("span",{className:"ml-1",children:"Pan"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx(PB,{size:14}),f.jsx("span",{className:"ml-1",children:"Zoom"})]})]})]}),f.jsxs("aside",{className:"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4",children:[c.map((p,m)=>f.jsxs(le.div,{onMouseEnter:()=>t(p.name),onMouseLeave:()=>t(null),onClick:()=>l(p),initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.4,delay:m*.05},viewport:{once:!0},className:"p-4 bg-gradient-to-br from-gray-900/80 via-black/60 to-gray-900/80 border border-[#FFD700]/60 rounded-xl shadow-lg hover:shadow-xl hover:border-[#FFD700]/90 transition-all duration-300 cursor-pointer flex flex-col justify-between",children:[f.jsx("h4",{className:"text-base font-semibold text-white mb-1",children:p.name}),f.jsxs("p",{className:"text-xs text-gray-300",children:[p.units," viviendas disponibles"]})]},p.slug)),!i&&s&&fh.length>21&&f.jsx("div",{onClick:()=>r(!0),className:"p-4 bg-white border border-gray-200 rounded-xl shadow hover:shadow-md cursor-pointer flex items-center justify-center",children:f.jsx("span",{className:"text-lg font-medium text-gray-700",children:"Mostrar más"})})]}),f.jsx("div",{className:"flex justify-center mt-4 md:hidden",children:f.jsx("button",{onClick:()=>r(!i),className:"px-4 py-2 bg-[#FFD700] text-black rounded-lg",children:i?"Mostrar menos":"Mostrar más"})})]})]})})}function Ire(){return f.jsx("main",{className:"w-full bg-black pt-16",children:Nre.map(n=>f.jsx(Lre,{section:n},n.id))})}function kre(){return f.jsx(Ire,{})}function Dre(){return f.jsx("main",{className:"min-h-screen bg-gray-50 py-20",children:f.jsxs("div",{className:"container mx-auto px-4 space-y-8",children:[f.jsx("h1",{className:"text-4xl font-serif font-bold text-center",children:"Aviso Legal"}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Titular"}),f.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Nombre de la empresa:"})," Casaia S.L"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"CIF:"})," B-88270475"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Correo electrónico:"})," ",f.jsx("a",{href:"mailto:info@casaiamadrid.com",className:"text-primary hover:underline",children:"info@casaiamadrid.com"})]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Teléfono:"})," ",f.jsx("a",{href:"tel:+34919932451",className:"text-primary hover:underline",children:"+34 919 932 451"})]})]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Registro Mercantil"}),f.jsx("p",{children:"Inscrita en el Registro Mercantil de Madrid, Tomo 38487 Folio 171, Hoja M-684521, inscripción primera."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"1. Objeto y ámbito de aplicación"}),f.jsxs("p",{children:["El presente Aviso Legal regula el uso del sitio web"," ",f.jsx("a",{href:"https://www.casaiamadrid.com",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"https://www.casaiamadrid.com"})," ","(en adelante, “el Sitio Web”), propiedad de Casaia S.L, así como las responsabilidades derivadas de la correcta utilización de sus contenidos y servicios."]}),f.jsx("p",{children:"Al acceder, navegar o utilizar el Sitio Web, el usuario acepta las condiciones establecidas en este Aviso Legal y nuestra Política de Privacidad y Cookies. Si no está de acuerdo con ellas, deberá abstenerse de utilizar el Sitio Web."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"2. Condiciones de uso"}),f.jsx("p",{children:"El usuario se compromete a utilizar el Sitio Web de conformidad con la ley, la moral, el orden público y este Aviso Legal, así como a no emplearlo para fines ilícitos o contrarios a la buena fe."}),f.jsx("p",{children:"Queda prohibido el uso de cualquier dispositivo, software o medio que interfiera o pueda dañar el Sitio Web o sus servicios, la red en la que está conectado, o que infrinja los derechos de terceros."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"3. Propiedad intelectual e industrial"}),f.jsx("p",{children:"Todos los contenidos (textos, imágenes, logotipos, marcas, diseño, código fuente, etc.) del Sitio Web son titularidad de Casaia S.L o de terceros que han autorizado su uso."}),f.jsx("p",{children:"Queda prohibida la reproducción, distribución, comunicación pública o transformación de dichos contenidos sin contar con la autorización expresa de sus titulares."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"4. Responsabilidad"}),f.jsx("p",{children:"Casaia S.L no garantiza la ausencia de errores en el acceso o en el contenido del Sitio Web ni la disponibilidad continua del servicio."}),f.jsx("p",{children:"No se responsabiliza de los daños o perjuicios que pudieran derivarse del uso indebido de la información contenida o de la falta de veracidad, exactitud o actualización de la misma."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"5. Protección de datos personales"}),f.jsx("p",{children:"Para conocer cómo tratamos tus datos personales, consulta nuestra Política de Privacidad. Brevemente:"}),f.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Responsable del tratamiento:"})," Casaia S.L."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Finalidad:"})," gestión de consultas, envío de información comercial y mejora de servicios."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Derechos:"})," acceso, rectificación, supresión, oposición, limitación o portabilidad."]})]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"6. Enlaces a terceros"}),f.jsx("p",{children:"El Sitio Web puede contener enlaces a páginas de terceros. Casaia S.L no asume responsabilidad alguna por los contenidos, prácticas de privacidad o servicios ofrecidos en dichas páginas."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"7. Ley aplicable y jurisdicción"}),f.jsx("p",{children:"Las presentes condiciones se regirán por la legislación española. Para la resolución de cualquier controversia que pudiera derivarse del acceso o uso del Sitio Web, ambas partes se someten expresamente a los Juzgados y Tribunales de Madrid, renunciando a cualquier fuero que pudiera corresponderles."})]})]})})}function jre(){return f.jsx("main",{className:"min-h-screen bg-gray-50 py-20",children:f.jsxs("div",{className:"container mx-auto px-4 space-y-8",children:[f.jsx("h1",{className:"text-4xl font-serif font-bold text-center",children:"Política de Privacidad"}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"1. Responsable del Tratamiento"}),f.jsxs("p",{children:[f.jsx("strong",{children:"Nombre de la empresa:"})," Casaia S.L",f.jsx("br",{}),f.jsx("strong",{children:"CIF:"})," B-88270475",f.jsx("br",{}),f.jsx("strong",{children:"Dirección:"})," C/ Ejemplo, 123, 28001 Madrid",f.jsx("br",{}),f.jsx("strong",{children:"Correo electrónico:"})," ",f.jsx("a",{href:"mailto:info@casaiamadrid.com",className:"text-primary hover:underline",children:"info@casaiamadrid.com"})]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"2. Finalidad del Tratamiento"}),f.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[f.jsx("li",{children:"Gestión de solicitudes de información y consultas recibidas a través del formulario de contacto."}),f.jsx("li",{children:"Envío de boletines, ofertas y comunicaciones comerciales relacionadas con nuestros servicios."}),f.jsx("li",{children:"Mejora de la experiencia de usuario y analítica web."})]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"3. Legitimación"}),f.jsx("p",{children:"El tratamiento de sus datos se basa en el consentimiento que nos otorga al marcar la casilla de aceptación y enviar el formulario de contacto, así como en el interés legítimo de prestar nuestros servicios y mantener la relación comercial."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"4. Datos que Recogemos"}),f.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Datos identificativos:"})," nombre, apellidos."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Contacto:"})," email, teléfono."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Información adicional:"})," datos de la propiedad o consulta."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Datos de navegación:"})," cookies y tecnologías similares."]})]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"5. Plazo de Conservación"}),f.jsx("p",{children:"Conservaremos sus datos mientras se mantenga la finalidad para la que fueron recabados y durante los plazos legalmente exigidos. Tras ello, se suprimirán o se seudonimizarán de forma segura."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"6. Derechos"}),f.jsxs("p",{children:["Puede ejercer los derechos de acceso, rectificación, supresión, oposición, limitación y portabilidad enviando una solicitud a ",f.jsx("a",{href:"mailto:info@casaiamadrid.com",className:"text-primary hover:underline",children:"info@casaiamadrid.com"}),". Si considera que no se han atendido sus derechos, puede presentar una reclamación ante la Agencia Española de Protección de Datos."]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"7. Destinatarios"}),f.jsx("p",{children:"No se cederán datos a terceros salvo obligación legal o proveedores de confianza que nos prestan servicios (hosting, emailing, analítica), debidamente contractualmente sujetos a confidencialidad."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"8. Seguridad"}),f.jsx("p",{children:"Implantamos las medidas técnicas y organizativas necesarias para garantizar la confidencialidad, integridad y disponibilidad de sus datos, acorde a la normativa vigente."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"9. Cookies"}),f.jsxs("p",{children:["Para información sobre el uso de cookies, consulte nuestra ",f.jsx("a",{href:"/cookies",className:"text-primary hover:underline",children:"Política de Cookies"}),"."]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"10. Cambios en la Política"}),f.jsx("p",{children:"Casaia S.L se reserva el derecho de actualizar esta Política de Privacidad que estará disponible siempre en esta misma dirección."})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Contacto"}),f.jsxs("p",{children:["Para cualquier duda o consulta relacionada con la protección de datos, puede contactarnos en ",f.jsx("a",{href:"mailto:info@casaiamadrid.com",className:"text-primary hover:underline",children:"info@casaiamadrid.com"})," o en el teléfono ",f.jsx("a",{href:"tel:+34919932451",className:"text-primary hover:underline",children:"+34 919 932 451"}),"."]})]})]})})}function Ore(){return N.useEffect(()=>{cW()},[]),f.jsxs(qz,{children:[f.jsx(n8,{}),f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx(rW,{}),f.jsx("main",{children:f.jsxs(zz,{children:[f.jsx(Ui,{path:"/",element:f.jsx(zne,{})}),f.jsx(Ui,{path:"/propiedades",element:f.jsx(Hne,{})}),f.jsx(Ui,{path:"/propiedad/:id",element:f.jsx($ne,{})}),f.jsx(Ui,{path:"/contacto",element:f.jsx(Yne,{})}),f.jsx(Ui,{path:"/vender",element:f.jsx(Mie,{})}),f.jsx(Ui,{path:"/comprar-casa-madrid",element:f.jsx(mie,{})}),f.jsx(Ui,{path:"/alquiler-casa-madrid",element:f.jsx(vie,{})}),f.jsx(Ui,{path:"/blog",element:f.jsx(eie,{})}),f.jsx(Ui,{path:"/blog/:id",element:f.jsx(rie,{})}),f.jsx(Ui,{path:"/nosotros",element:f.jsx(oie,{})}),f.jsx(Ui,{path:"/story-demo",element:f.jsx(kre,{})}),f.jsx(Ui,{path:"/aviso-legal",element:f.jsx(Dre,{})}),f.jsx(Ui,{path:"/politica-privacidad",element:f.jsx(jre,{})})]})}),f.jsx(sW,{}),f.jsx(t8,{}),f.jsx(lW,{})," "]})]})}h_.createRoot(document.getElementById("root")).render(f.jsx(Dt.StrictMode,{children:f.jsx(Tk,{children:f.jsx(Ore,{})})}));export{G0 as A,AB as B,$f as C,Bl as H,bv as L,h4 as M,Mre as O,Dt as R,Ea as S,gv as a,at as b,cr as c,gre as d,Ju as g,f as j,le as m,N as r};
